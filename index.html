<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>UUinsone slide controls for MacOS</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <article class="contents">
        <h1>UUinsome </h1>
        <h4>An interface to connect OBS to PowerPoint and Keynote via macOS Shortcuts</h4>
        <a id="clickTest">show alert</a>
        <section>
            <div id="srvr">
                <div id="srvr-obs-ws">
                    <h3>Connect to the OBS WebSocket Server</h3>
                    <form class="form-grid">
                            <label for="IP">Enter IP address or "localhost":</label>
                            <input type="text" id="IP" name="IP" value="localhost" />
                            <label for="Port">Enter Port Number:</label>
                            <input type="text" id="Port" name="Port" value="4455" />
                            <label for="PW">Enter Password:</label>
                            <input type="password" id="PW" name="PW" value="EfTC8xml3070cx3A" />
                            <p></p><input class="form-button" type="button" id="WSconnectButton" value="Connect to OBS" />
                        </form>
                        <p id="WorkingDirectory" hidden></p>
                    </div>
                </div>
            </section>
            
            <section>
                <div id="navigation">
                    <div id="slide-navigation">
                        <h3>Slide Show Navigation</h3>
                        <form class="nav-grid">
                            <input class="form-button" type="button" id="previousSlideButton" value="⬅️ Previous Slide" />
                            <input class="form-button" type="button" id="CurrentSlideButton" value="Current slide 🔃" />
                            <input class="form-button" type="button" id="nextSlideButton" value="Next Slide ➡️" />
                        </form>           
                    </div>
                </div>
            </section>
            
            <section>
                <div id="teleprompter">
                    <div id="text-teleprompter">
                        <h3>Teleprompter Settings</h3>
                        <form class="nav-grid">
                            <input class="form-button" type="button" id="playPauseButton" value="Play" />
                        </form>           
                        <form class="tele-grid">
                        <p>Text Size</p>
                            <input class="form-button" type="button" id="DecreaseSizeButton" value="decrease -" />
                            <input type="text" id="sizeValue" name="sizeValue" value="1" />
                            <input class="form-button" type="button" id="IncreaseSizeButton" value="increase +" />  
                        </form>           
                        <form class="tele-grid">
                        <p>Scroll speed</p>
                            <input class="form-button" type="button" id="DecreaseSpeedButton" value="decrease -" />
                            <input type="text" id="speedValue" name="speedValue" value="1" />
                            <input class="form-button" type="button" id="IncreaseSpeedButton" value="increase +" />
                        </form>           
                    </div>
                </div>
            </section>
            
            <section>
                <div id="tags">
                    <div id="slide-tags">
                        <h3>Slide Tags</h3>
                        
                        <p>Scene</p>
                        <ul id=sceneList>
                        </ul>
                        <p>Camera</p>
                        <ul id=cameraList>
                        </ul>
                        <p>Zoom</p>
                    </div>
                </div>
        </section>
		
   <section>
        <div>
        <h1>Apple Shortcuts Input</h1>
        <div id="mouse-shortcuts" hidden>
            <p>Mouse coordinates</p>
            <textarea id="mouseCoordinates" style="height: 100px; width: 600px"></textarea>
        </div>
        <div id="ptz-shortcuts">
            <p>PTZ coordinates</p><p id="loopStatus"></p>
            <textarea id="ptzValues" style="height: 100px; width: 600px"></textarea>
        </div>
        <div id="keynote-shortcuts">
            <p>Keynote Notes</p>
            <textarea id="keynoteNotes" style="height: 100px; width: 600px"></textarea>
        </div>
        <div id="powerPoint-shortcuts">
            <p>PowerPoint Notes</p>
            <textarea id="powerPointNotes" style="height: 100px; width: 600px"></textarea>
        </div>
    </section>
    
    <section>
        <div>
        <h1>OBS Scenes and Sources</h1>
        <div id="obs-scenes">
            <p>OBS Scenes and Sources</p>
            <pre><code class="language-json" id="scenesList">.some-box {
                width: 20px;
                height: 20px;
                background: black;
                margin-bottom: 1.5rem;
            }
            </code></pre>
    </section>

    </article>

    <script>
        var teleprompterSize,
            teleprompterSpeed,
            teleprompterIsPlaying = false,
            controlSources = new Object();

        window.addEventListener("load", (event) => {
            console.log("page is fully loaded");
            //getData();
            //document.getElementById("clickTest").click()
            const params = new URLSearchParams(window.location.search); //parse params
            const pw = params.get("pw"); //get password param
            const wd = params.get("wd"); //get working directory param
            //assign pw value to input when loading
            if(pw){
                document.getElementById("PW").value = pw; 
                document.getElementById("WSconnectButton").click(); 

            }
            if(wd){
                document.getElementById("WorkingDirectory").innerHTML = wd; 
            }
        });
        //document.getElementById("clickTest").addEventListener('click', )

            async function getData() {
                let url = "shortcuts://run-shortcut?name=Show Alert";
                url = encodeURI(url)
                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Response status: ${response.status}`);
                    }

                    const json = await response.json();
                    console.log(json);
                } catch (error) {
                    console.error(error.message);
                }
            }

    </script>

    <script src='lib/obs-ws.js'></script>
    <script src='lib/obsConnect.js'></script>
    
    <script src="lib/shortcutsResults.js"></script>
    <script src="lib/shortcutsTrigger.js"></script>
    <script src="lib/obsScenes.js"></script>

</body>
</html>

