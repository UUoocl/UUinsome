/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var m8=Object.create;var uh=Object.defineProperty;var g8=Object.getOwnPropertyDescriptor;var y8=Object.getOwnPropertyNames;var _8=Object.getPrototypeOf,v8=Object.prototype.hasOwnProperty;var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),w8=(t,e)=>{for(var r in e)uh(t,r,{get:e[r],enumerable:!0})},SP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of y8(e))!v8.call(t,s)&&s!==r&&uh(t,s,{get:()=>e[s],enumerable:!(n=g8(e,s))||n.enumerable});return t};var Or=(t,e,r)=>(r=t!=null?m8(_8(t)):{},SP(e||!t||!t.__esModule?uh(r,"default",{value:t,enumerable:!0}):r,t)),b8=t=>SP(uh({},"__esModule",{value:!0}),t);var TP=E((Zxe,RP)=>{"use strict";function E8(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}RP.exports=E8});var Z0=E((eCe,Q0)=>{"use strict";var S8=TP();function $P(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=S8(R8),s=null,i=null,o=0,a=null,c={push:m,drain:Xr,saturated:Xr,pause:u,paused:!1,get concurrency(){return r},set concurrency(S){if(!(S>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=S,!c.paused)for(;s&&o<r;)o++,g()},running:l,resume:f,idle:h,length:d,getQueue:p,unshift:y,empty:Xr,kill:w,killAndDrain:_,error:v};return c;function l(){return o}function u(){c.paused=!0}function d(){for(var S=s,$=0;S;)S=S.next,$++;return $}function p(){for(var S=s,$=[];S;)$.push(S.value),S=S.next;return $}function f(){if(c.paused){if(c.paused=!1,s===null){o++,g();return}for(;s&&o<r;)o++,g()}}function h(){return o===0&&c.length()===0}function m(S,$){var R=n.get();R.context=t,R.release=g,R.value=S,R.callback=$||Xr,R.errorHandler=a,o>=r||c.paused?i?(i.next=R,i=R):(s=R,i=R,c.saturated()):(o++,e.call(t,R.value,R.worked))}function y(S,$){var R=n.get();R.context=t,R.release=g,R.value=S,R.callback=$||Xr,R.errorHandler=a,o>=r||c.paused?s?(R.next=s,s=R):(s=R,i=R,c.saturated()):(o++,e.call(t,R.value,R.worked))}function g(S){S&&n.release(S);var $=s;$&&o<=r?c.paused?o--:(i===s&&(i=null),s=$.next,$.next=null,e.call(t,$.value,$.worked),i===null&&c.empty()):--o===0&&c.drain()}function w(){s=null,i=null,c.drain=Xr}function _(){s=null,i=null,c.drain(),c.drain=Xr}function v(S){a=S}}function Xr(){}function R8(){this.value=null,this.callback=Xr,this.next=null,this.release=Xr,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,o=t.value;t.value=null,t.callback=Xr,t.errorHandler&&i(r,o),s.call(t.context,r,n),t.release(t)}}function T8(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(u,d){e.call(this,u).then(function(p){d(null,p)},d)}var s=$P(t,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=c,s.drained=l,s;function a(u){var d=new Promise(function(p,f){i(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(Xr),d}function c(u){var d=new Promise(function(p,f){o(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(Xr),d}function l(){var u=new Promise(function(d){process.nextTick(function(){if(s.idle())d();else{var p=s.drain;s.drain=function(){typeof p=="function"&&p(),d(),s.drain=p}}})});return u}}Q0.exports=$P;Q0.exports.promise=T8});var e_=E((tCe,Nl)=>{"use strict";var{format:$8}=require("node:util");function O8(){return`${this.name} [${this.code}]: ${this.message}`}var fh=Symbol.for("fastify-error-generic");function Ma(t,e,r=500,n=Error,s=Ma.captureStackTrace){let i=t===fh;if(i&&(t="FST_ERR"),!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);let o=Symbol.for(`fastify-error ${t}`);function a(...c){if(!new.target)return new a(...c);this.code=t,this.name="FastifyError",this.statusCode=r;let l=c.length-1;l!==-1&&c[l]&&typeof c[l]=="object"&&"cause"in c[l]&&(this.cause=c.pop().cause),this.message=$8(e,...c),Error.stackTraceLimit&&s&&Error.captureStackTrace(this,a)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0},[fh]:{value:!0,enumerable:!1,writable:!1,configurable:!1},[o]:{value:!0,enumerable:!1,writable:!1,configurable:!1}}),i?Object.defineProperty(a,Symbol.hasInstance,{value(c){return c&&c[fh]},configurable:!1,writable:!1,enumerable:!1}):Object.defineProperty(a,Symbol.hasInstance,{value(c){return c&&c[o]},configurable:!1,writable:!1,enumerable:!1}),a.prototype[Symbol.toStringTag]="Error",a.prototype.toString=O8,a}Ma.captureStackTrace=!0;var P8=Ma(fh,"Fastify Error",500,Error);Nl.exports=Ma;Nl.exports.FastifyError=P8;Nl.exports.default=Ma;Nl.exports.createError=Ma});var dh=E((rCe,OP)=>{"use strict";var{createError:hi}=e_();OP.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:hi("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:hi("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:hi("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:hi("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:hi("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:hi("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:hi("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:hi("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var ja=E((nCe,PP)=>{"use strict";var x8=Symbol("avvio.Boot"),C8=Symbol("isOnCloseHandler"),N8=Symbol("avvio.ThenifyDoNotWrap"),I8=Symbol("avvio.TimeTree.untrackNode"),A8=Symbol("avvio.TimeTree.trackNode"),k8=Symbol("avvio.TimeTree.getParent"),D8=Symbol("avvio.TimeTree.getNode"),M8=Symbol("avvio.TimeTree.addNode"),j8=Symbol.for("plugin-meta");PP.exports={kAvvio:x8,kIsOnCloseHandler:C8,kThenifyDoNotWrap:N8,kUntrackNode:I8,kTrackNode:A8,kGetParent:k8,kGetNode:D8,kAddNode:M8,kPluginMeta:j8}});var DP=E((sCe,kP)=>{"use strict";var{kUntrackNode:xP,kTrackNode:t_,kGetParent:CP,kGetNode:NP,kAddNode:IP}=ja(),r_=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[t_](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[xP](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[CP](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[NP](e){return this.tableId.get(e)}[IP](e,r,n){let s=this[CP](e);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[t_](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return s.nodes.push(a),this[t_](a),o}start(e,r,n=Date.now()){return this[IP](e,r,n)}stop(e,r=Date.now()){let n=this[NP](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[xP](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return AP(this.toJSON())}};function AP(t,e=""){let r=e,n=t.nodes.length,s=n-1;r+=`${t.label} ${t.diff} ms
`;for(let i=0;i<n;++i){let o=t.nodes[i],a=e+(i===s?"  ":"\u2502 ");r+=e,r+=i===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=AP(o,a).slice(e.length+2)}return r}kP.exports={TimeTree:r_}});var hh=E((iCe,MP)=>{"use strict";var{debuglog:q8}=require("node:util"),L8=q8("avvio");MP.exports={debug:L8}});var qP=E((oCe,jP)=>{"use strict";function F8(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}jP.exports={createPromise:F8}});var FP=E((aCe,LP)=>{"use strict";var{kPluginMeta:n_}=ja();function U8(t,e){return t[n_]&&t[n_].name?t[n_].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}LP.exports={getPluginName:U8}});var ph=E((cCe,UP)=>{"use strict";function B8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}UP.exports={isPromiseLike:B8}});var VP=E((lCe,BP)=>{"use strict";var{EventEmitter:V8}=require("node:events"),{inherits:z8}=require("node:util"),{debug:Dt}=hh(),{createPromise:H8}=qP(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:G8}=dh(),{getPluginName:W8}=FP(),{isPromiseLike:K8}=ph();function qa(t,e,r,n,s){this.queue=t,this.func=e,this.options=r,this.isAfter=n,this.timeout=s,this.started=!1,this.name=W8(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}z8(qa,V8);qa.prototype.exec=function(t,e){Dt("exec",this.name),this.server=t;let r=this.func,n=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let i=null,o=c=>{if(s){Dt("loading complete",n);return}this._error=c,Dt(c?"exec errored":"exec completed",n),s=!0,i&&clearTimeout(i),e(c)};this.timeout>0&&(Dt("setting up timeout",n,this.timeout),i=setTimeout(function(){Dt("timed out",n),i=null;let c=new G8(n);c.fn=r,o(c)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);K8(a)?(Dt("exec: resolving promise",n),a.then(()=>process.nextTick(o),c=>process.nextTick(o,c))):r.length<3&&o()};qa.prototype.loadedSoFar=function(){if(Dt("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),this._promise&&(r?(Dt("rejecting promise",this.name,r),this._promise.reject(r)):(Dt("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(n,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=H8(),e=this._promise.promise,this.server?t():this.on("start",t)),e};qa.prototype.enqueue=function(t,e){Dt("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};qa.prototype.finish=function(t,e){Dt("finish",this.name,t);let r=()=>{this.loaded||(Dt("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(Dt("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{Dt("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else Dt("delayed",this.name),this.queue.drain=()=>{Dt("drain",this.name),this.queue.drain=J8,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function J8(){}BP.exports={Plugin:qa}});var HP=E((uCe,zP)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:s_}=dh();function Y8(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new s_("array"):t===null?new s_("null"):new s_(typeof t)}zP.exports={validatePlugin:Y8}});var WP=E((fCe,GP)=>{"use strict";function X8(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}GP.exports={isBundledOrTypescriptPlugin:X8}});var YP=E((dCe,JP)=>{"use strict";var{debug:KP}=hh(),{kThenifyDoNotWrap:i_}=ja();function Q8(){if(this.booted){KP("thenify returning undefined because we are already booted");return}if(this[i_]){this[i_]=!1;return}return KP("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[i_]=!0,t(this._server)),e)}JP.exports={thenify:Q8}});var QP=E((hCe,XP)=>{"use strict";var{isPromiseLike:Z8}=ph(),{kAvvio:e9}=ja();function t9(t,e,r){let n=t.apply(t,e);Z8(n)&&!n[e9]?n.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}XP.exports={executeWithThenable:t9}});var ax=E((pCe,ox)=>{"use strict";var mh=Z0(),r9=require("node:events").EventEmitter,n9=require("node:util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Il,AVV_ERR_CALLBACK_NOT_FN:La,AVV_ERR_ROOT_PLG_BOOTED:s9,AVV_ERR_READY_TIMEOUT:i9,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:o9}=dh(),{kAvvio:tx,kIsOnCloseHandler:rx}=ja(),{TimeTree:a9}=DP(),{Plugin:nx}=VP(),{debug:Fa}=hh(),{validatePlugin:c9}=HP(),{isBundledOrTypescriptPlugin:l9}=WP(),{isPromiseLike:u9}=ph(),{thenify:sx}=YP(),{executeWithThenable:ZP}=QP();function Et(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new Et(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new a9,this._readyQ=mh(this,ix,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=ex},this._closeQ=mh(this,d9,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=ex},this._doStart=null;let n=this;this._root=new nx(mh(this,this._loadPluginNextTick,1),function(i,o,a){n._doStart=a,o.autostart&&n.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{Fa("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){s=s||this._error||i}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}n9(Et,r9);Et.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Et.prototype.override=function(t,e,r){return t};Et.prototype[tx]=!0;Et.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};Et.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(Et.prototype,"then",{get:sx});Et.prototype._addPlugin=function(t,e,r){if(l9(t)&&(t=t.default),c9(t),e=e||{},this.booted)throw new s9;let n=this._current[0],s=this._opts.timeout;if(!n.loaded&&n.timeout>0){let o=Date.now()-n.startTime;s=n.timeout-(o+3)}let i=new nx(mh(this,this._loadPluginNextTick,1),t,e,r,s);if(this._trackPluginLoading(i),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,o=>{o&&(this._error=o)}),i};Et.prototype._expose=function(){let e=this,r=e._server,{use:n="use",after:s="after",ready:i="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new Il(n,"use");if(r[n]=function(c,l){return e.use(c,l),this},r[s])throw new Il(s,"after");if(r[s]=function(c){return typeof c!="function"?e._loadRegistered():(e.after(o_(c,this)),this)},r[i])throw new Il(i,"ready");if(r[i]=function(c){if(c&&typeof c!="function")throw new La(i,typeof c);return e.ready(c?o_(c,this):void 0)},r[o])throw new Il(o,"onClose");if(r[o]=function(c){if(typeof c!="function")throw new La(o,typeof c);return e.onClose(h9(c,this)),this},r[a])throw new Il(a,"close");if(r[a]=function(c){if(c&&typeof c!="function")throw new La(a,typeof c);return c?(e.close(o_(c,this)),this):e.close()},r.then)throw new o9("then");Object.defineProperty(r,"then",{get:sx.bind(e)}),r[tx]=!0};Et.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,s){ix.call(this,t,s)}return this};Et.prototype.onClose=function(t){if(typeof t!="function")throw new La("onClose",typeof t);return t[rx]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};Et.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new La("close",typeof t)}else e=new Promise(function(r,n){t=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};Et.prototype.ready=function(t){if(t){if(typeof t!="function")throw new La("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):e(n),process.nextTick(a)}})};Et.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,n,s)=>{let i=this.pluginTree.start(e||null,n,s);t.once("loaded",(o,a,c)=>{this.pluginTree.stop(i,c)})})};Et.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};Et.prototype.toJSON=function(){return this.pluginTree.toJSON()};Et.prototype._loadPlugin=function(t,e){let r=this;if(u9(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let n=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){Fa("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(i);return}let s=n&&n.server||r._server;if(!t.isAfter)try{s=r.override(s,t.func,t.options)}catch(o){return Fa("override errored",t.name),i(o)}t.exec(s,i);function i(o){t.finish(o,a=>{r._current.shift(),e(a)})}};Et.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function ex(){}function ix(t,e){let r=this._server,n=this._error;if(this._error=null,t.length===0)this._error=n,ZP(t,[],e);else if(t.length===1)ZP(t,[n],e);else if(this._opts.timeout===0){let s=i=>{this._error=i,e(this._error)};t.length===2?t(n,s):t(n,r,s)}else f9.call(this,t,n,r,e)}function f9(t,e,r,n){let s=t.unwrappedName??t.name;Fa("setting up ready timeout",s,this._opts.timeout);let i=setTimeout(()=>{Fa("timed out",s),i=null;let a=new i9(s);a.fn=t,this._error=a,n(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function d9(t,e){let r=this._server,n=t[rx];if(t.length===0||t.length===1){let s;n?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(Fa("resolving close/onClose promise"),s.then(()=>process.nextTick(e),i=>process.nextTick(e,i))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function h9(t,e){return r.bind(e);function r(n,s){let i;t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(i=t(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function o_(t,e){let r=n.bind(e);return r.unwrappedName=t.name,r;function n(s,i){let o;t?t.length===0?(o=t(),o&&o.then?o.then(function(){process.nextTick(i,s)},i):process.nextTick(i,s)):t.length===1?(o=t(s),o&&o.then?o.then(function(){process.nextTick(i)},i):process.nextTick(i)):t.length===2?t(s,i):t(s,this,i):process.nextTick(i)}}ox.exports=Et});var Tt=E((mCe,cx)=>{"use strict";var p9={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kHttp2ServerSessions:Symbol("fastify.http2ServerSessions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kErrorHandlerAlreadySet:Symbol("fastify.errorHandlerAlreadySet"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};cx.exports=p9});var ux=E((gCe,gh)=>{"use strict";var{format:a_}=require("node:util");function m9(t){return lx({...t,name:"DeprecationWarning"})}function lx({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,c){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code))}};n&&(s={[t]:function(o,a,c){i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,c){let l;return o&&a&&c?l=a_(r,o,a,c):o&&a?l=a_(r,o,a):o?l=a_(r,o):l=r,l},i}var c_={createWarning:lx,createDeprecation:m9};gh.exports=c_;gh.exports.default=c_;gh.exports.processWarning=c_});var Ua=E((yCe,fx)=>{"use strict";var{createWarning:Al}=ux(),g9=Al({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),y9=Al({name:"FastifyWarning",code:"FSTWRN003",message:"The %s mixes async and callback styles that may lead to unhandled rejections. Please use only one of them.",unlimited:!0}),_9=Al({name:"FastifyWarning",code:"FSTWRN004",message:"It seems that you are overriding an errorHandler in the same scope, which can lead to subtle bugs.",unlimited:!0}),v9=Al({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0}),w9=Al({name:"FastifyWarning",code:"FSTDEP022",message:'The router options for %s property access is deprecated. Please use "options.routerOptions" instead for accessing router options. The router options will be removed in `fastify@6`.',unlimited:!0});fx.exports={FSTWRN001:g9,FSTWRN003:y9,FSTWRN004:_9,FSTSEC001:v9,FSTDEP022:w9}});var Mt=E((_Ce,yh)=>{"use strict";var L=e_(),yo={FST_ERR_NOT_FOUND:L("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:L("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:L("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:L("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:L("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:L("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:L("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:L("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:L("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:L("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_ERROR_HANDLER_ALREADY_SET:L("FST_ERR_ERROR_HANDLER_ALREADY_SET","Error Handler already set in this scope. Set 'allowErrorHandlerOverride: true' to allow overriding.",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:L("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:L("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:L("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:L("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:L("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:L("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:L("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:L("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:L("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INVALID_JSON_BODY:L("FST_ERR_CTP_INVALID_JSON_BODY","Body is not valid JSON but content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:L("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:L("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:L("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:L("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:L("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:L("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_DEC_UNDECLARED:L("FST_ERR_DEC_UNDECLARED","No decorator '%s' has been declared on %s."),FST_ERR_HOOK_INVALID_TYPE:L("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:L("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:L("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:L("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:L("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:L("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:L("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:L("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:L("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:L("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:L("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:L("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:L("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:L("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:L("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:L("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:L("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:L("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:L("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:L("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:L("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:L("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:L("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:L("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:L("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:L("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:L("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:L("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:L("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:L("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:L("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:L("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_INIT_OPTS_INVALID:L("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:L("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:L("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:L("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:L("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:L("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:L("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:L("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:L("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:L("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:L("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:L("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:L("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:L("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:L("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:L("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:L("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:L("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:L("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:L("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:L("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:L("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:L("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:L("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:L("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:L("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function b9(t,e){return e.cause=t,e}yh.exports=yo;yh.exports.appendStackTrace=b9;yh.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:yo.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:yo.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:yo.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:yo.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:yo.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:yo.FST_ERR_PLUGIN_TIMEOUT}});var pi=E((vCe,wx)=>{"use strict";var E9=["onRoute","onRegister","onReady","onListen","preClose","onClose"],mx=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],S9=mx.concat(E9),{FST_ERR_HOOK_INVALID_TYPE:R9,FST_ERR_HOOK_INVALID_HANDLER:T9,FST_ERR_SEND_UNDEFINED_ERR:_h,FST_ERR_HOOK_TIMEOUT:$9,FST_ERR_HOOK_NOT_SUPPORTED:O9,AVVIO_ERRORS_MAP:dx,appendStackTrace:hx}=Mt(),{kChildren:kl,kHooks:gx,kRequestPayloadStream:px}=Tt();function Dl(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}Dl.prototype=Object.create(null);Dl.prototype.validate=function(t,e){if(typeof t!="string")throw new R9;if(Array.isArray(this[t])===!1)throw new O9(t);if(typeof e!="function")throw new T9(t,Object.prototype.toString.call(e))};Dl.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function P9(t){let e=new Dl;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function yx(t,e,r,n){let s=r[gx][t],i=0,o=0;c();function a(u){let d=s[i-1]?.name,p=d?` "${d}"`:"";if(u){u.code==="AVV_ERR_READY_TIMEOUT"?u=hx(u,new $9(t,p)):u=dx[u.code]!=null?hx(u,new dx[u.code](u.message)):u,n(u);return}n()}function c(u){if(u){a(u);return}if(i===s.length&&o===r[kl].length){i===0&&o===0?a():e(function(p,f){a(p),f(p)});return}if(i===s.length&&o<r[kl].length){let d=r[kl][o++];yx(t,e,d,c);return}e(l(s[i++],r)),c()}function l(u,d){return function(p,f){if(p){f(p);return}if(u.length===1){try{u.call(d,f)}catch(h){f(h)}return}try{let h=u.call(d);if(h&&typeof h.then=="function"){h.then(f,f);return}}catch(h){p=h}f(p)}}}function _x(t){let e=t[gx].onListen,r=e.length,n=0,s=0;i();function i(a){if(a&&t.log.error(a),n===r){for(;s<t[kl].length;){let c=t[kl][s++];_x(c)}return}o(e[n++],t,i)}async function o(a,c,l){if(a.length===1){try{a.call(c,l)}catch(u){l(u)}return}try{let u=a.call(c);if(u&&typeof u.then=="function"){u.then(l,l);return}l()}catch(u){l(u)}}}function Ba(t){return function(r,n,s,i){let o=0;function a(u){if(u||o===r.length){i(u,n,s);return}let d;try{d=t(r[o++],n,s,a)}catch(p){i(p,n,s);return}d&&typeof d.then=="function"&&d.then(c,l)}function c(){a()}function l(u){u||(u=new _h),i(u,n,s)}a()}}function x9(t,e,r,n){return t(e,r,n)}var C9=Ba(x9),N9=Ba(Ml),I9=Ba(Ml),A9=Ba(Ml),k9=Ba(Ml);function vx(t,e,r,n,s){let i=0;function o(l,u){if(l){s(l,e,r,n);return}if(u!==void 0&&(n=u),i===t.length){s(null,e,r,n);return}let d;try{d=t[i++](e,r,n,o)}catch(p){s(p,e,r);return}d&&typeof d.then=="function"&&d.then(a,c)}function a(l){o(null,l)}function c(l){l||(l=new _h),s(l,e,r,n)}o()}var D9=vx;function M9(t,e,r,n){let s=0;function i(c,l){if(r.sent)return;if(l!==void 0&&(e[px]=l),c||s===t.length){n(c,e,r);return}let u;try{u=t[s++](e,r,e[px],i)}catch(d){n(d,e,r);return}u&&typeof u.then=="function"&&u.then(o,a)}function o(c){i(null,c)}function a(c){c||(c=new _h),n(c,e,r)}i()}function j9(t,e,r){let n=0;function s(a){if(a||n===t.length){r(a,e);return}let c;try{c=t[n++](e,s)}catch(l){r(l,e);return}c&&typeof c.then=="function"&&c.then(i,o)}function i(){s()}function o(a){a||(a=new _h),r(a,e)}s()}function Ml(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}wx.exports={Hooks:Dl,buildHooks:P9,hookRunnerGenerator:Ba,preParsingHookRunner:M9,onResponseHookRunner:C9,onSendHookRunner:vx,preSerializationHookRunner:D9,onRequestAbortHookRunner:j9,hookIterator:Ml,hookRunnerApplication:yx,onListenHookRunner:_x,preHandlerHookRunner:I9,preValidationHookRunner:N9,onRequestHookRunner:k9,onTimeoutHookRunner:A9,lifecycleHooks:mx,supportedHooks:S9}});var Ex=E((wCe,bx)=>{"use strict";bx.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var l_=E((bCe,Rx)=>{"use strict";var{kTestInternals:q9}=Tt();function Sx(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}Rx.exports={withResolvers:typeof Promise.withResolvers=="function"?Promise.withResolvers.bind(Promise):Sx,[q9]:{withResolvers:Sx}}});var Dx=E((ECe,kx)=>{"use strict";var L9=require("node:http"),F9=require("node:https"),Tx=require("node:http2"),U9=require("node:dns"),B9=require("node:os"),{kState:mt,kOptions:V9,kServerBindings:z9,kHttp2ServerSessions:_o}=Tt(),{FSTWRN003:H9}=Ua(),{onListenHookRunner:vh}=pi(),{FST_ERR_REOPENED_CLOSE_SERVER:Ox,FST_ERR_REOPENED_SERVER:Px,FST_ERR_LISTEN_OPTIONS_INVALID:G9,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:W9}=Mt(),K9=Ex(),xx=l_();kx.exports.createServer=J9;function Cx(t){return`Server listening at ${t}`}function J9(t,e){let r=Ix(t,e);function n(l={port:0,host:"localhost"},u=void 0){if(typeof u=="function"&&(u.constructor.name==="AsyncFunction"&&H9("listen method"),l.cb=u),l.signal){if(typeof l.signal.on!="function"&&typeof l.signal.addEventListener!="function")throw new G9("Invalid options.signal");if(this[mt].aborted=l.signal.aborted,this[mt].aborted)return this.close();{let p=()=>{this[mt].aborted=!0,this.close()};l.signal.addEventListener("abort",p,{once:!0})}}let d;if(l.path==null?d=l.host??"localhost":d=l.host,(!Object.hasOwn(l,"host")||l.host==null)&&(l.host=d),d==="localhost"?l.cb=(p,f)=>{if(p){u(p,f);return}$x.call(this,r,e,t,l,()=>{this[mt].listening=!0,u(null,f),vh(this)})}:l.cb=(p,f)=>{if(p){u(p,f);return}this[mt].listening=!0,u(null,f),vh(this)},u===void 0)return Y9.call(this,r,l).then(f=>{let{promise:h,resolve:m}=xx.withResolvers();return d==="localhost"?$x.call(this,r,e,t,l,()=>{this[mt].listening=!0,m(f),vh(this)}):(m(f),vh(this)),h});this.ready(Nx.call(this,r,l))}let s=typeof r.closeAllConnections=="function",i=typeof r.closeIdleConnections=="function",o=typeof r.closeHttp2Sessions=="function",a=t.forceCloseConnections;if(a==="idle"&&!i)throw new W9;typeof a!="boolean"&&(a=i?"idle":!1);let c=!s&&a===!0?new Set:K9();return{server:r,listen:n,forceCloseConnections:a,serverHasCloseAllConnections:s,serverHasCloseHttp2Sessions:o,keepAliveConnections:c}}function $x(t,e,r,n,s){this[mt].listening=!1,U9.lookup(n.host,{all:!0},(i,o)=>{if(i||this[mt].aborted){s();return}let a=t.listening&&r.serverFactory,c=0,l=0;if(!a){let d=t.address();for(let p of o)if(p.address!==d.address){c++;let f=Object.assign({},n,{host:p.address,port:d.port,cb:y=>{l++,y||this[z9].push(h),l===c&&s()}}),h=Ix(r,e),m=()=>{h.close(()=>{}),typeof h.closeAllConnections=="function"&&r.forceCloseConnections===!0&&h.closeAllConnections(),typeof h.closeHttp2Sessions=="function"&&h.closeHttp2Sessions()};h.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[mt].listening=!1,Nx.call(this,h,f)()}}if(c===0){s();return}let u=t.unref;t.unref=function(){u.call(t),t.emit("unref")}})}function Nx(t,e){let r=n=>{if(t.removeListener("error",r),t.removeListener("listening",r),n)this[mt].listening=!1,e.cb(n,null);else{let s=Ax.call(this,t,e.listenTextResolver||Cx);e.cb(null,s)}};return n=>{if(n!=null)return e.cb(n);if(this[mt].listening&&this[mt].closing)return e.cb(new Ox,null);if(this[mt].listening)return e.cb(new Px,null);t.once("error",r),this[mt].closing||(t.once("listening",r),t.listen(e),this[mt].listening=!0)}}function Y9(t,e){return this[mt].listening&&this[mt].closing?Promise.reject(new Ox):this[mt].listening?Promise.reject(new Px):this.ready().then(()=>{if(this[mt].aborted)return;let{promise:r,resolve:n,reject:s}=xx.withResolvers(),i=c=>{a(),this[mt].listening=!1,s(c)},o=()=>{a(),this[mt].listening=!0,n(Ax.call(this,t,e.listenTextResolver||Cx))};function a(){t.removeListener("error",i),t.removeListener("listening",o)}return t.once("error",i),t.once("listening",o),t.listen(e),r})}function Ix(t,e){if(t.serverFactory)return t.serverFactory(e,t);let r=t.https===!0?{}:t.https;if(t.http2){let s=typeof r=="object"?Tx.createSecureServer(r,e):Tx.createServer(t.http,e);return s.on("session",i=>i.setTimeout(t.http2SessionTimeout,()=>{i.close()})),t.forceCloseConnections===!0&&(s.closeHttp2Sessions=Q9(s)),s.setTimeout(t.connectionTimeout),s}let n=r?F9.createServer(r,e):L9.createServer(t.http,e);return n.keepAliveTimeout=t.keepAliveTimeout,n.requestTimeout=t.requestTimeout,n.setTimeout(t.connectionTimeout),t.maxRequestsPerSocket>0&&(n.maxRequestsPerSocket=t.maxRequestsPerSocket),n}function X9(t){return t.address==="0.0.0.0"?Object.values(B9.networkInterfaces()).flatMap(e=>e.filter(r=>r.family==="IPv4")).sort(e=>e.internal?-1:1).map(e=>e.address):[t.address]}function Ax(t,e){let r;typeof t.address()=="string"?r=[t.address()]:(t.address().address.indexOf(":")===-1?r=X9(t.address()).map(s=>s+":"+t.address().port):r=["["+t.address().address+"]:"+t.address().port],r=r.map(s=>"http"+(this[V9].https?"s":"")+"://"+s));for(let s of r)this.log.info(e(s));return r[0]}function Q9(t){return t[_o]=new Set,t.on("session",function(e){e.once("connect",function(){t[_o].add(e)}),e.once("close",function(){t[_o].delete(e)}),e.once("frameError",function(r,n,s){s===0&&t[_o].delete(e)}),e.once("goaway",function(){t[_o].delete(e)})}),function(){if(t[_o].size!==0)for(let r of t[_o])r.close()}}});var d_=E((SCe,jx)=>{"use strict";var{kSchemaHeaders:Eh,kSchemaParams:u_,kSchemaQuerystring:f_,kSchemaBody:vo,kSchemaResponse:Mx}=Tt(),Z9=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:eW}=Mt(),{FSTWRN001:wh}=Ua();function tW(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[Mx]=Object.keys(t.schema.response).reduce(function(s,i){let o=t.schema.response[i];if(i=i.toLowerCase(),!Z9.test(i))throw new eW;if(o.content){let a={};for(let c of Object.keys(o.content)){let l=o.content[c].schema;a[c]=e({schema:l,url:n,method:r,httpStatus:i,contentType:c})}s[i]=a}else s[i]=e({schema:o,url:n,method:r,httpStatus:i});return s},{})}function rW(t,e,r){let{schema:n}=t;if(!n)return;let{method:s,url:i}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[Eh]=e({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(c=>{a[c]=o[c]}),a.required instanceof Array&&(a.required=a.required.map(c=>c.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(c=>{a.properties[c.toLowerCase()]=o.properties[c]})),t[Eh]=e({schema:a,method:s,url:i,httpPart:"headers"})}else Object.hasOwn(n,"headers")&&wh("headers",s,i);if(n.body){let a=n.body.content;if(a){let c={};for(let l of Object.keys(a)){let u=a[l].schema;c[l]=e({schema:u,method:s,url:i,httpPart:"body",contentType:l})}t[vo]=c}else t[vo]=e({schema:n.body,method:s,url:i,httpPart:"body"})}else Object.hasOwn(n,"body")&&wh("body",s,i);n.querystring?t[f_]=e({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.hasOwn(n,"querystring")&&wh("querystring",s,i),n.params?t[u_]=e({schema:n.params,method:s,url:i,httpPart:"params"}):Object.hasOwn(n,"params")&&wh("params",s,i)}function bh(t,e,r){let n=e[r]===void 0,s;try{s=t?.(n?null:e[r])}catch(o){return o.statusCode=500,o}if(s&&typeof s.then=="function")return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function Sh(t,e,r){let n=r===void 0;if(n||!r.skipParams){let i=bh(t[u_],e,"params");if(i)return typeof i.then!="function"?mi(i,"params",t.schemaErrorFormatter):nW(i,t,e)}if(n||!r.skipBody){let i=null;if(typeof t[vo]=="function")i=t[vo];else if(t[vo]){let a=aW(e.headers["content-type"]),c=t[vo][a];c&&(i=c)}let o=bh(i,e,"body");if(o)return typeof o.then!="function"?mi(o,"body",t.schemaErrorFormatter):sW(o,t,e)}if(n||!r.skipQuery){let i=bh(t[f_],e,"query");if(i)return typeof i.then!="function"?mi(i,"querystring",t.schemaErrorFormatter):iW(i,t,e)}let s=bh(t[Eh],e,"headers");return s?typeof s.then!="function"?mi(s,"headers",t.schemaErrorFormatter):oW(s,t,e):!1}function nW(t,e,r){return t.then(n=>n?mi(n,"params",e.schemaErrorFormatter):Sh(e,r,{skipParams:!0}))}function sW(t,e,r){return t.then(n=>n?mi(n,"body",e.schemaErrorFormatter):Sh(e,r,{skipParams:!0,skipBody:!0}))}function iW(t,e,r){return t.then(n=>n?mi(n,"querystring",e.schemaErrorFormatter):Sh(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function oW(t,e,r){return t.then(n=>n?mi(n,"headers",e.schemaErrorFormatter):!1)}function mi(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=t,n.validationContext=e,n}function aW(t){return t?t.split(/[ ;]/,1)[0].trim().toLowerCase():""}jx.exports={symbols:{bodySchema:vo,querystringSchema:f_,responseSchema:Mx,paramsSchema:u_,headersSchema:Eh},compileSchemasForValidation:rW,compileSchemasForSerialization:tW,validate:Sh}});var h_=E((RCe,Lx)=>{"use strict";var{kReplyIsError:qx,kReplyHijacked:cW}=Tt(),lW=require("node:diagnostics_channel"),jl=lW.tracingChannel("fastify.request.handler");function uW(t,e,r){r&&(r.async=!0),t.then(function(n){if(e[cW]!==!0){r&&jl.asyncStart.publish(r);try{if(n!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1&&e.request.socket&&!e.request.socket.destroyed)try{e.send(n)}catch(s){e[qx]=!0,e.send(s)}}finally{r&&jl.asyncEnd.publish(r)}}},function(n){r&&(r.error=n,jl.error.publish(r),jl.asyncStart.publish(r));try{if(e.sent===!0){e.log.error({err:n},"Promise errored, but reply.sent = true was set");return}e[qx]=!0,e.send(n)}catch(s){e.send(s)}finally{r&&jl.asyncEnd.publish(r)}})}Lx.exports=uW});var y_=E((TCe,g_)=>{"use strict";var fW=require("node:diagnostics_channel"),{validate:dW}=d_(),{preValidationHookRunner:hW,preHandlerHookRunner:pW}=pi(),mW=h_(),{kReplyIsError:Rh,kRouteContext:es,kFourOhFourContext:gW,kSupportedHTTPMethods:Fx}=Tt(),ql=fW.tracingChannel("fastify.request.handler");function yW(t,e,r){if(r.sent===!0)return;if(t!=null){r[Rh]=!0,r.send(t);return}let n=e.method;if(this[Fx].bodyless.has(n)){Va(e,r);return}if(this[Fx].bodywith.has(n)){let s=e.headers,i=s["content-type"];if(i===void 0){let o=s["content-length"];if(s["transfer-encoding"]===void 0&&(o===void 0||o==="0")){Va(e,r);return}e[es].contentTypeParser.run("",Va,e,r);return}e[es].contentTypeParser.run(i,Va,e,r);return}Va(e,r)}function Va(t,e){try{t[es].preValidation!==null?hW(t[es].preValidation,t,e,p_):p_(null,t,e)}catch(r){p_(r,t,e)}}function p_(t,e,r){if(r.sent===!0)return;if(t!=null){r[Rh]=!0,r.send(t);return}let n=dW(r[es],e);if(n&&typeof n.then=="function"||!1){let i=Ux.bind(null,e,r);n.then(i,i)}else Ux(e,r,n)}function Ux(t,e,r){if(r){if(e[es].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[es].preHandler!==null?pW(t[es].preHandler,t,e,m_):m_(null,t,e)}function m_(t,e,r){if(r.sent)return;let n=e[es];if(!ql.hasSubscribers||n[gW]===null)Bx(t,e,r);else{let s={request:e,reply:r,async:!1,route:{url:n.config.url,method:n.config.method}};ql.start.runStores(s,Bx,void 0,t,e,r,s)}}function Bx(t,e,r,n){let s=e[es];try{if(t!=null){r[Rh]=!0,r.send(t),n&&(n.error=t,ql.error.publish(n));return}let i;try{i=s.handler(e,r)}catch(o){n&&(n.error=o,ql.error.publish(n)),r[Rh]=!0,r.send(o);return}i!==void 0&&(i!==null&&typeof i.then=="function"?mW(i,r,n):r.send(i))}finally{n&&ql.end.publish(n)}}g_.exports=yW;g_.exports[Symbol.for("internals")]={handler:Va,preHandlerCallback:m_}});var zx=E(($Ce,Vx)=>{"use strict";function za(){}var _W={fatal:za,error:za,warn:za,info:za,debug:za,trace:za};Object.defineProperty(Vx,"exports",{get(){return Object.create(_W)}})});var v_=E((OCe,Wx)=>{"use strict";var Ll=t=>t&&typeof t.message=="string",__=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return Ll(r)?r:void 0}else return Ll(e)?e:void 0},Hx=(t,e)=>{if(!Ll(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=__(t);return n?(e.add(t),r+`
caused by: `+Hx(n,e)):r},vW=t=>Hx(t,new Set),Gx=(t,e,r)=>{if(!Ll(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let s=__(t);if(s){e.add(t);let i=typeof t.cause=="function";return n+(i?"":": ")+Gx(s,e,i)}else return n},wW=t=>Gx(t,new Set);Wx.exports={isErrorLike:Ll,getErrorCause:__,stackWithCauses:vW,messageWithCauses:wW}});var w_=E((PCe,Jx)=>{"use strict";var bW=Symbol("circular-ref-tag"),Th=Symbol("pino-raw-err-ref"),Kx=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Th]},set:function(t){this[Th]=t}}});Object.defineProperty(Kx,Th,{writable:!0,value:{}});Jx.exports={pinoErrProto:Kx,pinoErrorSymbols:{seen:bW,rawSymbol:Th}}});var Qx=E((xCe,Xx)=>{"use strict";Xx.exports=E_;var{messageWithCauses:EW,stackWithCauses:SW,isErrorLike:Yx}=v_(),{pinoErrProto:RW,pinoErrorSymbols:TW}=w_(),{seen:b_}=TW,{toString:$W}=Object.prototype;function E_(t){if(!Yx(t))return t;t[b_]=void 0;let e=Object.create(RW);e.type=$W.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=EW(t),e.stack=SW(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>E_(r)));for(let r in t)if(e[r]===void 0){let n=t[r];Yx(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,b_)&&(e[r]=E_(n)):e[r]=n}return delete t[b_],e.raw=t,e}});var eC=E((CCe,Zx)=>{"use strict";Zx.exports=Oh;var{isErrorLike:S_}=v_(),{pinoErrProto:OW,pinoErrorSymbols:PW}=w_(),{seen:$h}=PW,{toString:xW}=Object.prototype;function Oh(t){if(!S_(t))return t;t[$h]=void 0;let e=Object.create(OW);e.type=xW.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>Oh(r))),S_(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,$h)&&(e.cause=Oh(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];S_(n)?Object.prototype.hasOwnProperty.call(n,$h)||(e[r]=Oh(n)):e[r]=n}return delete t[$h],e.raw=t,e}});var sC=E((NCe,nC)=>{"use strict";nC.exports={mapHttpRequest:CW,reqSerializer:rC};var R_=Symbol("pino-raw-req-ref"),tC=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[R_]},set:function(t){this[R_]=t}}});Object.defineProperty(tC,R_,{writable:!0,value:{}});function rC(t){let e=t.info||t.socket,r=Object.create(tC);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function CW(t){return{req:rC(t)}}});var cC=E((ICe,aC)=>{"use strict";aC.exports={mapHttpResponse:NW,resSerializer:oC};var T_=Symbol("pino-raw-res-ref"),iC=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[T_]},set:function(t){this[T_]=t}}});Object.defineProperty(iC,T_,{writable:!0,value:{}});function oC(t){let e=Object.create(iC);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function NW(t){return{res:oC(t)}}});var O_=E((ACe,lC)=>{"use strict";var $_=Qx(),IW=eC(),Ph=sC(),xh=cC();lC.exports={err:$_,errWithCause:IW,mapHttpRequest:Ph.mapHttpRequest,mapHttpResponse:xh.mapHttpResponse,req:Ph.reqSerializer,res:xh.resSerializer,wrapErrorSerializer:function(e){return e===$_?e:function(n){return e($_(n))}},wrapRequestSerializer:function(e){return e===Ph.reqSerializer?e:function(n){return e(Ph.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===xh.resSerializer?e:function(n){return e(xh.resSerializer(n))}}}});var P_=E((kCe,uC)=>{"use strict";function AW(t,e){return e}uC.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=AW;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var gC=E((DCe,mC)=>{"use strict";function x_(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){let e=[];for(let r=0;r<t.length;r++)e[r]=x_(t[r]);return e}if(typeof t=="object"){let e=Object.create(Object.getPrototypeOf(t));for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=x_(t[r]));return e}return t}function fC(t){let e=[],r="",n=!1,s=!1,i="";for(let o=0;o<t.length;o++){let a=t[o];!n&&a==="."?r&&(e.push(r),r=""):a==="["?(r&&(e.push(r),r=""),n=!0):a==="]"&&n?(e.push(r),r="",n=!1,s=!1):(a==='"'||a==="'")&&n?s?a===i?(s=!1,i=""):r+=a:(s=!0,i=a):r+=a}return r&&e.push(r),e}function dC(t,e,r){let n=t;for(let i=0;i<e.length-1;i++){let o=e[i];if(typeof n!="object"||n===null||!(o in n)||typeof n[o]!="object"||n[o]===null)return!1;n=n[o]}let s=e[e.length-1];if(s==="*"){if(Array.isArray(n))for(let i=0;i<n.length;i++)n[i]=r;else if(typeof n=="object"&&n!==null)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=r)}else typeof n=="object"&&n!==null&&s in n&&Object.prototype.hasOwnProperty.call(n,s)&&(n[s]=r);return!0}function hC(t,e){let r=t;for(let s=0;s<e.length-1;s++){let i=e[s];if(typeof r!="object"||r===null||!(i in r)||typeof r[i]!="object"||r[i]===null)return!1;r=r[i]}let n=e[e.length-1];if(n==="*"){if(Array.isArray(r))for(let s=0;s<r.length;s++)r[s]=void 0;else if(typeof r=="object"&&r!==null)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&delete r[s]}else typeof r=="object"&&r!==null&&n in r&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return!0}var Ch=Symbol("PATH_NOT_FOUND");function kW(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null||!(n in r))return Ch;r=r[n]}return r}function DW(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null)return;r=r[n]}return r}function MW(t,e,r,n=!1){for(let s of e){let i=fC(s);if(i.includes("*"))pC(t,i,r,s,n);else if(n)hC(t,i);else{let o=kW(t,i);if(o===Ch)continue;let a=typeof r=="function"?r(o,i):r;dC(t,i,a)}}}function pC(t,e,r,n,s=!1){let i=e.indexOf("*");if(i===e.length-1){let o=e.slice(0,-1),a=t;for(let c of o){if(a==null||typeof a!="object"||a===null)return;a=a[c]}if(Array.isArray(a))if(s)for(let c=0;c<a.length;c++)a[c]=void 0;else for(let c=0;c<a.length;c++){let l=[...o,c.toString()],u=typeof r=="function"?r(a[c],l):r;a[c]=u}else if(typeof a=="object"&&a!==null)if(s){let c=[];for(let l in a)Object.prototype.hasOwnProperty.call(a,l)&&c.push(l);for(let l of c)delete a[l]}else for(let c in a){let l=[...o,c],u=typeof r=="function"?r(a[c],l):r;a[c]=u}}else jW(t,e,r,i,n,s)}function jW(t,e,r,n,s,i=!1){let o=e.slice(0,n),a=e.slice(n+1),c=[];function l(u,d){if(d===o.length){if(Array.isArray(u))for(let p=0;p<u.length;p++)c[d]=p.toString(),l(u[p],d+1);else if(typeof u=="object"&&u!==null)for(let p in u)c[d]=p,l(u[p],d+1)}else if(d<o.length){let p=o[d];u&&typeof u=="object"&&u!==null&&p in u&&(c[d]=p,l(u[p],d+1))}else if(a.includes("*"))pC(u,a,typeof r=="function"?(f,h)=>{let m=[...c.slice(0,d),...h];return r(f,m)}:r,s,i);else if(i)hC(u,a);else{let p=typeof r=="function"?r(DW(u,a),[...c.slice(0,d),...a]):r;dC(u,a,p)}}if(o.length===0)l(t,0);else{let u=t;for(let d=0;d<o.length;d++){let p=o[d];if(u==null||typeof u!="object"||u===null)return;u=u[p],c[d]=p}u!=null&&l(u,o.length)}}function qW(t){if(t.length===0)return null;let e=new Map;for(let r of t){let n=fC(r),s=e;for(let i=0;i<n.length;i++){let o=n[i];s.has(o)||s.set(o,new Map),s=s.get(o)}}return e}function LW(t,e){if(!e)return t;function r(n,s,i=0){if(!s||s.size===0||n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n)){let a=[];for(let c=0;c<n.length;c++){let l=c.toString();s.has(l)||s.has("*")?a[c]=r(n[c],s.get(l)||s.get("*")):a[c]=n[c]}return a}let o=Object.create(Object.getPrototypeOf(n));for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s.has(a)||s.has("*")?o[a]=r(n[a],s.get(a)||s.get("*")):o[a]=n[a]);return o}return r(t,e)}function FW(t){if(typeof t!="string")throw new Error("Paths must be (non-empty) strings");if(t==="")throw new Error("Invalid redaction path ()");if(t.includes(".."))throw new Error(`Invalid redaction path (${t})`);if(t.includes(","))throw new Error(`Invalid redaction path (${t})`);let e=0,r=!1,n="";for(let s=0;s<t.length;s++){let i=t[s];if((i==='"'||i==="'")&&e>0)r?i===n&&(r=!1,n=""):(r=!0,n=i);else if(i==="["&&!r)e++;else if(i==="]"&&!r&&(e--,e<0))throw new Error(`Invalid redaction path (${t})`)}if(e!==0)throw new Error(`Invalid redaction path (${t})`)}function UW(t){if(!Array.isArray(t))throw new TypeError("paths must be an array");for(let e of t)FW(e)}function BW(t={}){let{paths:e=[],censor:r="[REDACTED]",serialize:n=JSON.stringify,strict:s=!0,remove:i=!1}=t;UW(e);let o=qW(e);return function(c){if(s&&(c===null||typeof c!="object")&&(c==null||typeof c!="object"))return n?n(c):c;let l=LW(c,o),u=c,d=r;return typeof r=="function"&&(d=r),MW(l,e,d,i),n===!1?(l.restore=function(){return x_(u)},l):typeof n=="function"?n(l):JSON.stringify(l)}}mC.exports=BW});var Ha=E((MCe,yC)=>{"use strict";var VW=Symbol("pino.setLevel"),zW=Symbol("pino.getLevel"),HW=Symbol("pino.levelVal"),GW=Symbol("pino.levelComp"),WW=Symbol("pino.useLevelLabels"),KW=Symbol("pino.useOnlyCustomLevels"),JW=Symbol("pino.mixin"),YW=Symbol("pino.lsCache"),XW=Symbol("pino.chindings"),QW=Symbol("pino.asJson"),ZW=Symbol("pino.write"),e7=Symbol("pino.redactFmt"),t7=Symbol("pino.time"),r7=Symbol("pino.timeSliceIndex"),n7=Symbol("pino.stream"),s7=Symbol("pino.stringify"),i7=Symbol("pino.stringifySafe"),o7=Symbol("pino.stringifiers"),a7=Symbol("pino.end"),c7=Symbol("pino.formatOpts"),l7=Symbol("pino.messageKey"),u7=Symbol("pino.errorKey"),f7=Symbol("pino.nestedKey"),d7=Symbol("pino.nestedKeyStr"),h7=Symbol("pino.mixinMergeStrategy"),p7=Symbol("pino.msgPrefix"),m7=Symbol("pino.wildcardFirst"),g7=Symbol.for("pino.serializers"),y7=Symbol.for("pino.formatters"),_7=Symbol.for("pino.hooks"),v7=Symbol.for("pino.metadata");yC.exports={setLevelSym:VW,getLevelSym:zW,levelValSym:HW,levelCompSym:GW,useLevelLabelsSym:WW,mixinSym:JW,lsCacheSym:YW,chindingsSym:XW,asJsonSym:QW,writeSym:ZW,serializersSym:g7,redactFmtSym:e7,timeSym:t7,timeSliceIndexSym:r7,streamSym:n7,stringifySym:s7,stringifySafeSym:i7,stringifiersSym:o7,endSym:a7,formatOptsSym:c7,messageKeySym:l7,errorKeySym:u7,nestedKeySym:f7,wildcardFirstSym:m7,needsMetadataGsym:v7,useOnlyCustomLevelsSym:KW,formattersSym:y7,hooksSym:_7,nestedKeyStrSym:d7,mixinMergeStrategySym:h7,msgPrefixSym:p7}});var N_=E((jCe,bC)=>{"use strict";var _C=gC(),{redactFmtSym:w7,wildcardFirstSym:Nh}=Ha(),C_=/[^.[\]]+|\[([^[\]]*?)\]/g,vC="[Redacted]",wC=!1;function b7(t,e){let{paths:r,censor:n,remove:s}=E7(t),i=r.reduce((c,l)=>{C_.lastIndex=0;let u=C_.exec(l),d=C_.exec(l),p=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(p==="*"&&(p=Nh),d===null)return c[p]=null,c;if(c[p]===null)return c;let{index:f}=d,h=`${l.substr(f,l.length-1)}`;return c[p]=c[p]||[],p!==Nh&&c[p].length===0&&c[p].push(...c[Nh]||[]),p===Nh&&Object.keys(c).forEach(function(m){c[m]&&c[m].push(h)}),c[p].push(h),c},{}),o={[w7]:_C({paths:r,censor:n,serialize:e,strict:wC,remove:s})},a=(...c)=>e(typeof n=="function"?n(...c):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((c,l)=>{if(i[l]===null)c[l]=u=>a(u,[l]);else{let u=typeof n=="function"?(d,p)=>n(d,[l,...p]):n;c[l]=_C({paths:i[l],censor:u,serialize:e,strict:wC,remove:s})}return c},o)}function E7(t){if(Array.isArray(t))return t={paths:t,censor:vC},t;let{paths:e,censor:r=vC,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),{paths:e,censor:r,remove:n}}bC.exports=b7});var RC=E((qCe,SC)=>{"use strict";var S7=()=>"",R7=()=>`,"time":${Date.now()}`,T7=()=>`,"time":${Math.round(Date.now()/1e3)}`,$7=()=>`,"time":"${new Date(Date.now()).toISOString()}"`,O7=1000000n,EC=1000000000n,P7=BigInt(Date.now())*O7,x7=process.hrtime.bigint(),C7=()=>{let t=process.hrtime.bigint()-x7,e=P7+t,r=e/EC,n=e%EC,s=Number(r*1000n+n/1000000n),i=new Date(s),o=i.getUTCFullYear(),a=(i.getUTCMonth()+1).toString().padStart(2,"0"),c=i.getUTCDate().toString().padStart(2,"0"),l=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),d=i.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${o}-${a}-${c}T${l}:${u}:${d}.${n.toString().padStart(9,"0")}Z"`};SC.exports={nullTime:S7,epochTime:R7,unixTime:T7,isoTime:$7,isoTimeNano:C7}});var $C=E((LCe,TC)=>{"use strict";function N7(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}TC.exports=I7;function I7(t,e,r){var n=r&&r.stringify||N7,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var a=1;a<i;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,p=t&&t.length||0,f=0;f<p;){if(t.charCodeAt(f)===37&&f+1<p){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var h=typeof e[u];if(h==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(h==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=n(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<p&&(l+=t.slice(d)),l)}});var A_=E((FCe,I_)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));I_.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};I_.exports=t}});var kC=E((UCe,AC)=>{"use strict";var gt=require("fs"),A7=require("events"),k7=require("util").inherits,OC=require("path"),D_=A_(),D7=require("assert"),Ih=100,Ah=Buffer.allocUnsafe(0),M7=16*1024,PC="buffer",xC="utf8",[j7,q7]=(process.versions.node||"0.0").split(".").map(Number),L7=j7>=22&&q7>=7;function CC(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(i,o){if(i){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",i)}):e.emit("error",i);return}let a=e._reopening;e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e.destroyed&&(!e._writing&&e._len>e.minLength||e._flushPending?e._actualWrite():a&&process.nextTick(()=>e.emit("drain")))}let n=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&gt.mkdirSync(OC.dirname(t),{recursive:!0});let i=gt.openSync(t,n,s);r(null,i)}catch(i){throw r(i),i}else e.mkdir?gt.mkdir(OC.dirname(t),{recursive:!0},i=>{if(i)return r(i);gt.open(t,n,s,r)}):gt.open(t,n,s,r)}function Pn(t){if(!(this instanceof Pn))return new Pn(t);let{fd:e,dest:r,minLength:n,maxLength:s,maxWrite:i,periodicFlush:o,sync:a,append:c=!0,mkdir:l,retryEAGAIN:u,fsync:d,contentMode:p,mode:f}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||M7,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=d||!1,this.append=c||!1,this.mode=f,this.retryEAGAIN=u||(()=>!0),this.mkdir=l||!1;let h,m;if(p===PC)this._writingBuf=Ah,this.write=B7,this.flush=z7,this.flushSync=G7,this._actualWrite=K7,h=()=>gt.writeSync(this.fd,this._writingBuf),m=()=>gt.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===xC)this._writingBuf="",this.write=U7,this.flush=V7,this.flushSync=H7,this._actualWrite=W7,h=()=>gt.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>gt.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${xC}" and "${PC}", but passed ${p}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")CC(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,g)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{D_(Ih),this.release(void 0,0)}catch(v){this.release(v)}else setTimeout(m,Ih);else this._writing=!1,this.emit("error",y);return}this.emit("write",g);let w=k_(this._writingBuf,this._len,g);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let v=h(),S=k_(this._writingBuf,this._len,v);this._len=S.len,this._writingBuf=S.writingBuf}while(this._writingBuf.length)}catch(v){this.release(v);return}}this._fsync&&gt.fsyncSync(this.fd);let _=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):_>this.minLength?this._actualWrite():this._ending?_>0?this._actualWrite():(this._writing=!1,kh(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(F7,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function k_(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function F7(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}k7(Pn,A7);function NC(t,e){return t.length===0?Ah:t.length===1?t[0]:Buffer.concat(t,e)}function U7(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function B7(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,n=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||n[n.length-1]+t.length>this.maxWrite?(r.push([t]),n.push(t.length)):(r[r.length-1].push(t),n[n.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function IC(t){this._flushPending=!0;let e=()=>{if(this._fsync)this._flushPending=!1,t();else try{gt.fsync(this.fd,n=>{this._flushPending=!1,t(n)})}catch(n){t(n)}this.off("error",r)},r=n=>{this._flushPending=!1,t(n),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function V7(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&IC.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function z7(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&IC.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Pn.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(t&&(this.file=t),this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&gt.close(e,r=>{if(r)return this.emit("error",r)})}),CC(this.file,this)};Pn.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():kh(this)))};function H7(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=gt.writeSync(this.fd,t,"utf8"),r=k_(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;D_(Ih)}}try{gt.fsyncSync(this.fd)}catch{}}function G7(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=Ah);let t=Ah;for(;this._bufs.length||t.length;){t.length<=0&&(t=NC(this._bufs[0],this._lens[0]));try{let e=gt.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;D_(Ih)}}}Pn.prototype.destroy=function(){this.destroyed||kh(this)};function W7(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=gt.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else gt.write(this.fd,this._writingBuf,"utf8",t)}function K7(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:NC(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=gt.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else L7&&(this._writingBuf=Buffer.from(this._writingBuf)),gt.write(this.fd,this._writingBuf,t)}function kh(t){if(t.fd===-1){t.once("ready",kh.bind(null,t));return}t._periodicFlushTimer!==void 0&&clearInterval(t._periodicFlushTimer),t.destroyed=!0,t._bufs=[],t._lens=[],D7(typeof t.fd=="number",`sonic.fd must be a number, got ${typeof t.fd}`);try{gt.fsync(t.fd,e)}catch{}function e(){t.fd!==1&&t.fd!==2?gt.close(t.fd,r):r()}function r(n){if(n){t.emit("error",n);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}Pn.SonicBoom=Pn;Pn.default=Pn;AC.exports=Pn});var M_=E((BCe,LC)=>{"use strict";var xn={exit:[],beforeExit:[]},DC={exit:X7,beforeExit:Q7},Ga;function J7(){Ga===void 0&&(Ga=new FinalizationRegistry(Z7))}function Y7(t){xn[t].length>0||process.on(t,DC[t])}function MC(t){xn[t].length>0||(process.removeListener(t,DC[t]),xn.exit.length===0&&xn.beforeExit.length===0&&(Ga=void 0))}function X7(){jC("exit")}function Q7(){jC("beforeExit")}function jC(t){for(let e of xn[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}xn[t]=[]}function Z7(t){for(let e of["exit","beforeExit"]){let r=xn[e].indexOf(t);xn[e].splice(r,r+1),MC(e)}}function qC(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");Y7(t);let n=new WeakRef(e);n.fn=r,J7(),Ga.register(e,n),xn[t].push(n)}function eK(t,e){qC("exit",t,e)}function tK(t,e){qC("beforeExit",t,e)}function rK(t){if(Ga!==void 0){Ga.unregister(t);for(let e of["exit","beforeExit"])xn[e]=xn[e].filter(r=>{let n=r.deref();return n&&n!==t}),MC(e)}}LC.exports={register:eK,registerBeforeExit:tK,unregister:rK}});var FC=E((VCe,nK)=>{nK.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var BC=E((zCe,UC)=>{"use strict";function sK(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,c=l=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?c(l>=1e3?1e3:l*2):o===r?s(null,"ok"):s(null,"not-equal")},l)};c(1)}function iK(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(c>=1e3?1e3:c*2)},c)};a(1)}UC.exports={wait:sK,waitDiff:iK}});var zC=E((HCe,VC)=>{"use strict";VC.exports={WRITE_INDEX:4,READ_INDEX:8}});var JC=E((GCe,KC)=>{"use strict";var{version:oK}=FC(),{EventEmitter:aK}=require("events"),{Worker:cK}=require("worker_threads"),{join:lK}=require("path"),{pathToFileURL:uK}=require("url"),{wait:fK}=BC(),{WRITE_INDEX:Pr,READ_INDEX:ts}=zC(),dK=require("buffer"),hK=require("assert"),k=Symbol("kImpl"),pK=dK.constants.MAX_STRING_LENGTH,Fl=class{constructor(e){this._value=e}deref(){return this._value}},Mh=class{register(){}unregister(){}},mK=process.env.NODE_V8_COVERAGE?Mh:global.FinalizationRegistry||Mh,gK=process.env.NODE_V8_COVERAGE?Fl:global.WeakRef||Fl,HC=new mK(t=>{t.exited||t.terminate()});function yK(t,e){let{filename:r,workerData:n}=e,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||lK(__dirname,"lib","worker.js"),o=new cK(i,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:uK(r).href,dataBuf:t[k].dataBuf,stateBuf:t[k].stateBuf,workerData:{$context:{threadStreamVersion:oK},...n}}});return o.stream=new Fl(t),o.on("message",_K),o.on("exit",WC),HC.register(t,o),o}function GC(t){hK(!t[k].sync),t[k].needDrain&&(t[k].needDrain=!1,t.emit("drain"))}function Dh(t){let e=Atomics.load(t[k].state,Pr),r=t[k].data.length-e;if(r>0){if(t[k].buf.length===0){t[k].flushing=!1,t[k].ending?U_(t):t[k].needDrain&&process.nextTick(GC,t);return}let n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(t[k].buf=t[k].buf.slice(r),jh(t,n,Dh.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[k].state,ts,0),Atomics.store(t[k].state,Pr,0);s>t[k].data.length;)r=r/2,n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);t[k].buf=t[k].buf.slice(r),jh(t,n,Dh.bind(null,t))}})}else if(r===0){if(e===0&&t[k].buf.length===0)return;t.flush(()=>{Atomics.store(t[k].state,ts,0),Atomics.store(t[k].state,Pr,0),Dh(t)})}else rs(t,new Error("overwritten"))}function _K(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new gK(e),e.flush(()=>{e[k].ready=!0,e.emit("ready")});break;case"ERROR":rs(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:rs(e,new Error("this should not happen: "+t.code))}}function WC(t){let e=this.stream.deref();e!==void 0&&(HC.unregister(e),e.worker.exited=!0,e.worker.off("exit",WC),rs(e,t!==0?new Error("the worker thread exited"):null))}var q_=class extends aK{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[k]={},this[k].stateBuf=new SharedArrayBuffer(128),this[k].state=new Int32Array(this[k].stateBuf),this[k].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[k].data=Buffer.from(this[k].dataBuf),this[k].sync=e.sync||!1,this[k].ending=!1,this[k].ended=!1,this[k].needDrain=!1,this[k].destroyed=!1,this[k].flushing=!1,this[k].ready=!1,this[k].finished=!1,this[k].errored=null,this[k].closed=!1,this[k].buf="",this.worker=yK(this,e),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(e){if(this[k].destroyed)return L_(this,new Error("the worker has exited")),!1;if(this[k].ending)return L_(this,new Error("the worker is ending")),!1;if(this[k].flushing&&this[k].buf.length+e.length>=pK)try{j_(this),this[k].flushing=!0}catch(r){return rs(this,r),!1}if(this[k].buf+=e,this[k].sync)try{return j_(this),!0}catch(r){return rs(this,r),!1}return this[k].flushing||(this[k].flushing=!0,setImmediate(Dh,this)),this[k].needDrain=this[k].data.length-this[k].buf.length-Atomics.load(this[k].state,Pr)<=0,!this[k].needDrain}end(){this[k].destroyed||(this[k].ending=!0,U_(this))}flush(e){if(this[k].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[k].state,Pr);fK(this[k].state,ts,r,1/0,(n,s)=>{if(n){rs(this,n),process.nextTick(e,n);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[k].destroyed||(j_(this),F_(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[k].ready}get destroyed(){return this[k].destroyed}get closed(){return this[k].closed}get writable(){return!this[k].destroyed&&!this[k].ending}get writableEnded(){return this[k].ending}get writableFinished(){return this[k].finished}get writableNeedDrain(){return this[k].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[k].errored}};function L_(t,e){setImmediate(()=>{t.emit("error",e)})}function rs(t,e){t[k].destroyed||(t[k].destroyed=!0,e&&(t[k].errored=e,L_(t,e)),t.worker.exited?setImmediate(()=>{t[k].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[k].closed=!0,t.emit("close")}))}function jh(t,e,r){let n=Atomics.load(t[k].state,Pr),s=Buffer.byteLength(e);return t[k].data.write(e,n),Atomics.store(t[k].state,Pr,n+s),Atomics.notify(t[k].state,Pr),r(),!0}function U_(t){if(!(t[k].ended||!t[k].ending||t[k].flushing)){t[k].ended=!0;try{t.flushSync();let e=Atomics.load(t[k].state,ts);Atomics.store(t[k].state,Pr,-1),Atomics.notify(t[k].state,Pr);let r=0;for(;e!==-1;){if(Atomics.wait(t[k].state,ts,e,1e3),e=Atomics.load(t[k].state,ts),e===-2){rs(t,new Error("end() failed"));return}if(++r===10){rs(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[k].finished=!0,t.emit("finish")})}catch(e){rs(t,e)}}}function j_(t){let e=()=>{t[k].ending?U_(t):t[k].needDrain&&process.nextTick(GC,t)};for(t[k].flushing=!1;t[k].buf.length!==0;){let r=Atomics.load(t[k].state,Pr),n=t[k].data.length-r;if(n===0){F_(t),Atomics.store(t[k].state,ts,0),Atomics.store(t[k].state,Pr,0);continue}else if(n<0)throw new Error("overwritten");let s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)t[k].buf=t[k].buf.slice(n),jh(t,s,e);else{for(F_(t),Atomics.store(t[k].state,ts,0),Atomics.store(t[k].state,Pr,0);i>t[k].buf.length;)n=n/2,s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);t[k].buf=t[k].buf.slice(n),jh(t,s,e)}}}function F_(t){if(t[k].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[k].state,Pr),r=0;for(;;){let n=Atomics.load(t[k].state,ts);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[k].state,ts,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}KC.exports=q_});var z_=E((WCe,YC)=>{"use strict";var{createRequire:vK}=require("module"),wK=P_(),{join:B_,isAbsolute:bK,sep:EK}=require("node:path"),SK=A_(),V_=M_(),RK=JC();function TK(t){V_.register(t,OK),V_.registerBeforeExit(t,PK),t.on("close",function(){V_.unregister(t)})}function $K(t,e,r,n){let s=new RK({filename:t,workerData:e,workerOpts:r,sync:n});s.on("ready",i),s.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function i(){process.removeListener("exit",o),s.unref(),r.autoEnd!==!1&&TK(s)}function o(){s.closed||(s.flushSync(),SK(100),s.end())}return s}function OK(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function PK(t){t.flushSync()}function xK(t){let{pipeline:e,targets:r,levels:n,dedupe:s,worker:i={},caller:o=wK(),sync:a=!1}=t,c={...t.options},l=typeof o=="string"?[o]:o,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},d=t.target;if(d&&r)throw new Error("only one of target or targets can be specified");return r?(d=u["pino-worker"]||B_(__dirname,"worker.js"),c.targets=r.filter(f=>f.target).map(f=>({...f,target:p(f.target)})),c.pipelines=r.filter(f=>f.pipeline).map(f=>f.pipeline.map(h=>({...h,level:f.level,target:p(h.target)})))):e&&(d=u["pino-worker"]||B_(__dirname,"worker.js"),c.pipelines=[e.map(f=>({...f,target:p(f.target)}))]),n&&(c.levels=n),s&&(c.dedupe=s),c.pinoWillSendConfig=!0,$K(p(d),c,i,a);function p(f){if(f=u[f]||f,bK(f)||f.indexOf("file://")===0)return f;if(f==="pino/file")return B_(__dirname,"..","file.js");let h;for(let m of l)try{let y=m==="node:repl"?process.cwd()+EK:m;h=vK(y).resolve(f);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${f}"`);return h}}YC.exports=xK});var Fh=E((KCe,lN)=>{"use strict";var CK=require("node:diagnostics_channel"),XC=$C(),{mapHttpRequest:NK,mapHttpResponse:IK}=O_(),G_=kC(),QC=M_(),{lsCacheSym:AK,chindingsSym:nN,writeSym:ZC,serializersSym:sN,formatOptsSym:eN,endSym:kK,stringifiersSym:iN,stringifySym:oN,stringifySafeSym:W_,wildcardFirstSym:aN,nestedKeySym:DK,formattersSym:cN,messageKeySym:MK,errorKeySym:jK,nestedKeyStrSym:qK,msgPrefixSym:qh}=Ha(),{isMainThread:LK}=require("worker_threads"),FK=z_(),tN=CK.tracingChannel("pino_asJson");function Wa(){}function UK(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=NK(n):typeof n.setHeader=="function"&&(n=IK(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[qh]=="string"&&i!==void 0&&i!==null&&(i=this[qh]+i),this[ZC](n,XC(i,o,this[eN]),t)}else{let i=n===void 0?s.shift():n;typeof this[qh]=="string"&&i!==void 0&&i!==null&&(i=this[qh]+i),this[ZC](null,XC(i,s,this[eN]),t)}}}function H_(t){let e="",r=0,n=!1,s=255,i=t.length;if(i>100)return JSON.stringify(t);for(var o=0;o<i&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function BK(t,e,r,n){if(tN.hasSubscribers===!1)return rN.call(this,t,e,r,n);let s={instance:this,arguments};return tN.traceSync(rN,s,this,t,e,r,n)}function rN(t,e,r,n){let s=this[oN],i=this[W_],o=this[iN],a=this[kK],c=this[nN],l=this[sN],u=this[cN],d=this[MK],p=this[jK],f=this[AK][r]+n;f=f+c;let h;u.log&&(t=u.log(t));let m=o[aN],y="";for(let w in t)if(h=t[w],Object.prototype.hasOwnProperty.call(t,w)&&h!==void 0){l[w]?h=l[w](h):w===p&&l.err&&(h=l.err(h));let _=o[w]||m;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":_&&(h=_(h));break;case"string":h=(_||H_)(h);break;default:h=(_||s)(h,i)}if(h===void 0)continue;let v=H_(w);y+=","+v+":"+h}let g="";if(e!==void 0){h=l[d]?l[d](e):e;let w=o[d]||m;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h)),g=',"'+d+'":'+h;break;case"string":h=(w||H_)(h),g=',"'+d+'":'+h;break;default:h=(w||s)(h,i),g=',"'+d+'":'+h}}return this[DK]&&y?f+this[qK]+y.slice(1)+"}"+g+a:f+y+g+a}function VK(t,e){let r,n=t[nN],s=t[oN],i=t[W_],o=t[iN],a=o[aN],c=t[sN],l=t[cN].bindings;e=l(e);for(let u in e)if(r=e[u],((u.length<5||u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels")&&e.hasOwnProperty(u)&&r!==void 0)===!0){if(r=c[u]?c[u](r):r,r=(o[u]||a||s)(r,i),r===void 0)continue;n+=',"'+u+'":'+r}return n}function zK(t){return t.write!==t.constructor.prototype.write}function Lh(t){let e=new G_(t);return e.on("error",r),!t.sync&&LK&&(QC.register(e,HK),e.on("close",function(){QC.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=Wa,e.end=Wa,e.flushSync=Wa,e.destroy=Wa;return}e.removeListener("error",r),e.emit("error",n)}}function HK(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function GK(t){return function(r,n,s={},i){if(typeof s=="string")i=Lh({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=Lh({dest:i})}else if(s instanceof G_||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof G_||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let c;s.customLevels&&(c=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=FK({caller:n,...s.transport,levels:c})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=Wa),i||(zK(process.stdout)?i=process.stdout:i=Lh({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function WK(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[W_])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function KK(t,e,r){return{level:t,bindings:e,log:r}}function JK(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}lN.exports={noop:Wa,buildSafeSonicBoom:Lh,asChindings:VK,asJson:BK,genLog:UK,createArgsNormalizer:GK,stringify:WK,buildFormatters:KK,normalizeDestFileDescriptor:JK}});var Uh=E((JCe,uN)=>{var YK={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},XK={ASC:"ASC",DESC:"DESC"};uN.exports={DEFAULT_LEVELS:YK,SORTING_ORDER:XK}});var Y_=E((YCe,pN)=>{"use strict";var{lsCacheSym:QK,levelValSym:K_,useOnlyCustomLevelsSym:ZK,streamSym:eJ,formattersSym:tJ,hooksSym:rJ,levelCompSym:fN}=Ha(),{noop:nJ,genLog:wo}=Fh(),{DEFAULT_LEVELS:ns,SORTING_ORDER:dN}=Uh(),hN={fatal:t=>{let e=wo(ns.fatal,t);return function(...r){let n=this[eJ];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>wo(ns.error,t),warn:t=>wo(ns.warn,t),info:t=>wo(ns.info,t),debug:t=>wo(ns.debug,t),trace:t=>wo(ns.trace,t)},J_=Object.keys(ns).reduce((t,e)=>(t[ns[e]]=e,t),{}),sJ=Object.keys(J_).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function iJ(t){let e=t[tJ].level,{labels:r}=t.levels,n={};for(let s in r){let i=e(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return t[QK]=n,t}function oJ(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function aJ(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[K_],s=this[K_]=r[t],i=this[ZK],o=this[fN],a=this[rJ].logMethod;for(let c in r){if(o(r[c],s)===!1){this[c]=nJ;continue}this[c]=oJ(c,i)?hN[c](a):wo(r[c],a)}this.emit("level-change",t,s,e[n],n,this)}function cJ(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function lJ(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[fN](r,this[K_])}function uJ(t,e,r){return t===dN.DESC?e<=r:e>=r}function fJ(t){return typeof t=="string"?uJ.bind(null,t):t}function dJ(t=null,e=!1){let r=t?Object.keys(t).reduce((i,o)=>(i[t[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:J_,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:ns,t);return{labels:n,values:s}}function hJ(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(i=>e[i]),r?[]:Object.keys(J_).map(i=>+i),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ns,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function pJ(t,e){let{labels:r,values:n}=t;for(let s in e){if(s in n)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function mJ(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(dN).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}pN.exports={initialLsCache:sJ,genLsCache:iJ,levelMethods:hN,getLevel:cJ,setLevel:aJ,isLevelEnabled:lJ,mappings:dJ,assertNoLevelCollisions:pJ,assertDefaultLevelFound:hJ,genLevelComparison:fJ,assertLevelComparison:mJ}});var X_=E((XCe,mN)=>{"use strict";mN.exports={version:"10.1.0"}});var SN=E((ZCe,EN)=>{"use strict";var{EventEmitter:gJ}=require("node:events"),{lsCacheSym:yJ,levelValSym:_J,setLevelSym:Z_,getLevelSym:gN,chindingsSym:Vh,mixinSym:vJ,asJsonSym:_N,writeSym:wJ,mixinMergeStrategySym:bJ,timeSym:EJ,timeSliceIndexSym:SJ,streamSym:vN,serializersSym:bo,formattersSym:Ul,errorKeySym:RJ,messageKeySym:TJ,useOnlyCustomLevelsSym:$J,needsMetadataGsym:OJ,redactFmtSym:PJ,stringifySym:xJ,formatOptsSym:CJ,stringifiersSym:NJ,msgPrefixSym:ev,hooksSym:IJ}=Ha(),{getLevel:AJ,setLevel:kJ,isLevelEnabled:DJ,mappings:MJ,initialLsCache:jJ,genLsCache:qJ,assertNoLevelCollisions:LJ}=Y_(),{asChindings:tv,asJson:FJ,buildFormatters:Q_,stringify:yN,noop:wN}=Fh(),{version:UJ}=X_(),BJ=N_(),VJ=class{},bN={constructor:VJ,child:zJ,bindings:HJ,setBindings:GJ,flush:JJ,isLevelEnabled:DJ,version:UJ,get level(){return this[gN]()},set level(t){this[Z_](t)},get levelVal(){return this[_J]},set levelVal(t){throw Error("levelVal is read-only")},get msgPrefix(){return this[ev]},get[Symbol.toStringTag](){return"Pino"},[yJ]:jJ,[wJ]:KJ,[_N]:FJ,[gN]:AJ,[Z_]:kJ};Object.setPrototypeOf(bN,gJ.prototype);EN.exports=function(){return Object.create(bN)};var Bh=t=>t;function zJ(t,e){if(!t)throw Error("missing bindings for child Pino");let r=this[bo],n=this[Ul],s=Object.create(this);if(e==null)return s[Ul].bindings!==Bh&&(s[Ul]=Q_(n.level,Bh,n.log)),s[Vh]=tv(s,t),this.onChild!==wN&&this.onChild(s),s;if(e.hasOwnProperty("serializers")===!0){s[bo]=Object.create(null);for(let l in r)s[bo][l]=r[l];let a=Object.getOwnPropertySymbols(r);for(var i=0;i<a.length;i++){let l=a[i];s[bo][l]=r[l]}for(let l in e.serializers)s[bo][l]=e.serializers[l];let c=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<c.length;o++){let l=c[o];s[bo][l]=e.serializers[l]}}else s[bo]=r;if(e.hasOwnProperty("formatters")){let{level:a,bindings:c,log:l}=e.formatters;s[Ul]=Q_(a||n.level,c||Bh,l||n.log)}else s[Ul]=Q_(n.level,Bh,n.log);if(e.hasOwnProperty("customLevels")===!0&&(LJ(this.levels,e.customLevels),s.levels=MJ(e.customLevels,s[$J]),qJ(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let a=BJ(s.redact,yN),c={stringify:a[PJ]};s[xJ]=yN,s[NJ]=a,s[CJ]=c}if(typeof e.msgPrefix=="string"&&(s[ev]=(this[ev]||"")+e.msgPrefix),s[Vh]=tv(s,t),e.level!==void 0&&e.level!==this.level||e.hasOwnProperty("customLevels")){let a=e.level||this.level;s[Z_](a)}return this.onChild(s),s}function HJ(){let e=`{${this[Vh].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function GJ(t){let e=tv(this,t);this[Vh]=e}function WJ(t,e){return Object.assign(e,t)}function KJ(t,e,r){let n=this[EJ](),s=this[vJ],i=this[RJ],o=this[TJ],a=this[bJ]||WJ,c,l=this[IJ].streamWrite;t==null?c={}:t instanceof Error?(c={[i]:t},e===void 0&&(e=t.message)):(c=t,e===void 0&&t[o]===void 0&&t[i]&&(e=t[i].message)),s&&(c=a(c,s(c,r,this)));let u=this[_N](c,e,r,n),d=this[vN];d[OJ]===!0&&(d.lastLevel=r,d.lastObj=c,d.lastMsg=e,d.lastTime=n.slice(this[SJ]),d.lastLogger=this),d.write(l?l(u):u)}function JJ(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[vN];typeof e.flush=="function"?e.flush(t||wN):t&&t()}});var ON=E((iv,$N)=>{"use strict";var{hasOwnProperty:Bl}=Object.prototype,So=sv();So.configure=sv;So.stringify=So;So.default=So;iv.stringify=So;iv.configure=sv;$N.exports=So;var YJ=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function gi(t){return t.length<5e3&&!YJ.test(t)?`"${t}"`:JSON.stringify(t)}function rv(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],s=r;for(;s!==0&&t[s-1]>n;)t[s]=t[s-1],s--;t[s]=n}return t}var XJ=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function nv(t){return XJ.call(t)!==void 0&&t.length!==0}function RN(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",s=`"0":${n}${t[0]}`;for(let i=1;i<r;i++)s+=`${e}"${i}":${n}${t[i]}`;return s}function QJ(t){if(Bl.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function ZJ(t){let e;if(Bl.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function eY(t,e){let r;if(Bl.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function TN(t,e){let r;if(Bl.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Eo(t){return t===1?"1 item":`${t} items`}function tY(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function rY(t){if(Bl.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function sv(t){t={...t};let e=rY(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=QJ(t),n=eY(t,"bigint"),s=ZJ(t),i=typeof s=="function"?s:void 0,o=TN(t,"maximumDepth"),a=TN(t,"maximumBreadth");function c(f,h,m,y,g,w){let _=h[f];switch(typeof _=="object"&&_!==null&&typeof _.toJSON=="function"&&(_=_.toJSON(f)),_=y.call(h,f,_),typeof _){case"string":return gi(_);case"object":{if(_===null)return"null";if(m.indexOf(_)!==-1)return r;let v="",S=",",$=w;if(Array.isArray(_)){if(_.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(_),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let C=Math.min(_.length,a),N=0;for(;N<C-1;N++){let te=c(String(N),_,m,y,g,w);v+=te!==void 0?te:"null",v+=S}let B=c(String(N),_,m,y,g,w);if(v+=B!==void 0?B:"null",_.length-1>a){let te=_.length-a-1;v+=`${S}"... ${Eo(te)} not stringified"`}return g!==""&&(v+=`
${$}`),m.pop(),`[${v}]`}let R=Object.keys(_),O=R.length;if(O===0)return"{}";if(o<m.length+1)return'"[Object]"';let T="",P="";g!==""&&(w+=g,S=`,
${w}`,T=" ");let I=Math.min(O,a);s&&!nv(_)&&(R=rv(R,i)),m.push(_);for(let C=0;C<I;C++){let N=R[C],B=c(N,_,m,y,g,w);B!==void 0&&(v+=`${P}${gi(N)}:${T}${B}`,P=S)}if(O>a){let C=O-a;v+=`${P}"...":${T}"${Eo(C)} not stringified"`,P=S}return g!==""&&P.length>1&&(v=`
${w}${v}
${$}`),m.pop(),`{${v}}`}case"number":return isFinite(_)?String(_):e?e(_):"null";case"boolean":return _===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(_);default:return e?e(_):void 0}}function l(f,h,m,y,g,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return gi(h);case"object":{if(h===null)return"null";if(m.indexOf(h)!==-1)return r;let _=w,v="",S=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let O=Math.min(h.length,a),T=0;for(;T<O-1;T++){let I=l(String(T),h[T],m,y,g,w);v+=I!==void 0?I:"null",v+=S}let P=l(String(T),h[T],m,y,g,w);if(v+=P!==void 0?P:"null",h.length-1>a){let I=h.length-a-1;v+=`${S}"... ${Eo(I)} not stringified"`}return g!==""&&(v+=`
${_}`),m.pop(),`[${v}]`}m.push(h);let $="";g!==""&&(w+=g,S=`,
${w}`,$=" ");let R="";for(let O of y){let T=l(O,h[O],m,y,g,w);T!==void 0&&(v+=`${R}${gi(O)}:${$}${T}`,R=S)}return g!==""&&R.length>1&&(v=`
${w}${v}
${_}`),m.pop(),`{${v}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function u(f,h,m,y,g){switch(typeof h){case"string":return gi(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return u(f,h,m,y,g);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let w=g;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g+=y;let T=`
${g}`,P=`,
${g}`,I=Math.min(h.length,a),C=0;for(;C<I-1;C++){let B=u(String(C),h[C],m,y,g);T+=B!==void 0?B:"null",T+=P}let N=u(String(C),h[C],m,y,g);if(T+=N!==void 0?N:"null",h.length-1>a){let B=h.length-a-1;T+=`${P}"... ${Eo(B)} not stringified"`}return T+=`
${w}`,m.pop(),`[${T}]`}let _=Object.keys(h),v=_.length;if(v===0)return"{}";if(o<m.length+1)return'"[Object]"';g+=y;let S=`,
${g}`,$="",R="",O=Math.min(v,a);nv(h)&&($+=RN(h,S,a),_=_.slice(h.length),O-=h.length,R=S),s&&(_=rv(_,i)),m.push(h);for(let T=0;T<O;T++){let P=_[T],I=u(P,h[P],m,y,g);I!==void 0&&($+=`${R}${gi(P)}: ${I}`,R=S)}if(v>a){let T=v-a;$+=`${R}"...": "${Eo(T)} not stringified"`,R=S}return R!==""&&($=`
${g}${$}
${w}`),m.pop(),`{${$}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,m){switch(typeof h){case"string":return gi(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,m);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let y="",g=h.length!==void 0;if(g&&Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h);let $=Math.min(h.length,a),R=0;for(;R<$-1;R++){let T=d(String(R),h[R],m);y+=T!==void 0?T:"null",y+=","}let O=d(String(R),h[R],m);if(y+=O!==void 0?O:"null",h.length-1>a){let T=h.length-a-1;y+=`,"... ${Eo(T)} not stringified"`}return m.pop(),`[${y}]`}let w=Object.keys(h),_=w.length;if(_===0)return"{}";if(o<m.length+1)return'"[Object]"';let v="",S=Math.min(_,a);g&&nv(h)&&(y+=RN(h,",",a),w=w.slice(h.length),S-=h.length,v=","),s&&(w=rv(w,i)),m.push(h);for(let $=0;$<S;$++){let R=w[$],O=d(R,h[R],m);O!==void 0&&(y+=`${v}${gi(R)}:${O}`,v=",")}if(_>a){let $=_-a;y+=`${v}"...":"${Eo($)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),h!=null){if(typeof h=="function")return c("",{"":f},[],h,y,"");if(Array.isArray(h))return l("",f,[],tY(h),y,"")}if(y.length!==0)return u("",f,[],y,"")}return d("",f,[])}return p}});var NN=E((eNe,CN)=>{"use strict";var ov=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:xN}=Uh(),nY=xN.info;function sY(t,e){t=t||[],e=e||{dedupe:!1};let r=Object.create(xN);r.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(d=>{r[d]=e.levels[d]});let n={write:s,add:a,remove:c,emit:i,flushSync:o,end:l,minLevel:0,lastId:0,streams:[],clone:u,[ov]:!0,streamLevels:r};return Array.isArray(t)?t.forEach(a,n):a.call(n,t),t=null,n;function s(d){let p,f=this.lastLevel,{streams:h}=this,m=0,y;for(let g=iY(h.length,e.dedupe);aY(g,h.length,e.dedupe);g=oY(g,e.dedupe))if(p=h[g],p.level<=f){if(m!==0&&m!==p.level)break;if(y=p.stream,y[ov]){let{lastTime:w,lastMsg:_,lastObj:v,lastLogger:S}=this;y.lastLevel=f,y.lastTime=w,y.lastMsg=_,y.lastObj=v,y.lastLogger=S}y.write(d),e.dedupe&&(m=p.level)}else if(!e.dedupe)break}function i(...d){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...d)}function o(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function a(d){if(!d)return n;let p=typeof d.write=="function"||d.stream,f=d.write?d:d.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:m}=this,y;typeof d.levelVal=="number"?y=d.levelVal:typeof d.level=="string"?y=m[d.level]:typeof d.level=="number"?y=d.level:y=nY;let g={stream:f,level:y,levelVal:void 0,id:++n.lastId};return h.unshift(g),h.sort(PN),this.minLevel=h[0].level,n}function c(d){let{streams:p}=this,f=p.findIndex(h=>h.id===d);return f>=0&&(p.splice(f,1),p.sort(PN),this.minLevel=p.length>0?p[0].level:-1),n}function l(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function u(d){let p=new Array(this.streams.length);for(let f=0;f<p.length;f++)p[f]={level:d,stream:this.streams[f].stream};return{write:s,add:a,remove:c,minLevel:d,streams:p,clone:u,emit:i,flushSync:o,[ov]:!0}}}function PN(t,e){return t.level-e.level}function iY(t,e){return e?t-1:0}function oY(t,e){return e?t-1:t+1}function aY(t,e,r){return r?t>=0:t<e}CN.exports=sY});var HN=E((tNe,Qr)=>{"use strict";var cY=require("node:os"),LN=O_(),lY=P_(),uY=N_(),FN=RC(),fY=SN(),UN=Ha(),{configure:dY}=ON(),{assertDefaultLevelFound:hY,mappings:BN,genLsCache:pY,genLevelComparison:mY,assertLevelComparison:gY}=Y_(),{DEFAULT_LEVELS:VN,SORTING_ORDER:yY}=Uh(),{createArgsNormalizer:_Y,asChindings:vY,buildSafeSonicBoom:IN,buildFormatters:wY,stringify:av,normalizeDestFileDescriptor:AN,noop:bY}=Fh(),{version:EY}=X_(),{chindingsSym:kN,redactFmtSym:SY,serializersSym:DN,timeSym:RY,timeSliceIndexSym:TY,streamSym:$Y,stringifySym:MN,stringifySafeSym:cv,stringifiersSym:jN,setLevelSym:OY,endSym:PY,formatOptsSym:xY,messageKeySym:CY,errorKeySym:NY,nestedKeySym:IY,mixinSym:AY,levelCompSym:kY,useOnlyCustomLevelsSym:DY,formattersSym:qN,hooksSym:MY,nestedKeyStrSym:jY,mixinMergeStrategySym:qY,msgPrefixSym:LY}=UN,{epochTime:zN,nullTime:FY}=FN,{pid:UY}=process,BY=cY.hostname(),VY=LN.err,zY={level:"info",levelComparison:yY.ASC,levels:VN,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:UY,hostname:BY},serializers:Object.assign(Object.create(null),{err:VY}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:zN,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},HY=_Y(zY),GY=Object.assign(Object.create(null),LN);function lv(...t){let e={},{opts:r,stream:n}=HY(e,lY(),...t);r.level&&typeof r.level=="string"&&VN[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:c,errorKey:l,nestedKey:u,base:d,name:p,level:f,customLevels:h,levelComparison:m,mixin:y,mixinMergeStrategy:g,useOnlyCustomLevels:w,formatters:_,hooks:v,depthLimit:S,edgeLimit:$,onChild:R,msgPrefix:O}=r,T=dY({maximumDepth:S,maximumBreadth:$}),P=wY(_.level,_.bindings,_.log),I=av.bind({[cv]:T}),C=s?uY(s,I):{},N=s?{stringify:C[SY]}:{stringify:I},B="}"+(i?`\r
`:`
`),te=vY.bind(null,{[kN]:"",[DN]:o,[jN]:C,[MN]:av,[cv]:T,[qN]:P}),z="";d!==null&&(p===void 0?z=te(d):z=te(Object.assign({},d,{name:p})));let W=a instanceof Function?a:a?zN:FY,Rt=W().indexOf(":")+1;if(w&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(O&&typeof O!="string")throw Error(`Unknown msgPrefix type "${typeof O}" - expected "string"`);hY(f,h,w);let Rr=BN(h,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:Rr,messageKey:c,errorKey:l}}),gY(m);let Y=mY(m);return Object.assign(e,{levels:Rr,[kY]:Y,[DY]:w,[$Y]:n,[RY]:W,[TY]:Rt,[MN]:av,[cv]:T,[jN]:C,[PY]:B,[xY]:N,[CY]:c,[NY]:l,[IY]:u,[jY]:u?`,${JSON.stringify(u)}:{`:"",[DN]:o,[AY]:y,[qY]:g,[kN]:z,[qN]:P,[MY]:v,silent:bY,onChild:R,[LY]:O}),Object.setPrototypeOf(e,fY()),pY(e),e[OY](f),e}Qr.exports=lv;Qr.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=AN(t.dest||process.stdout.fd),IN(t)):IN({dest:AN(t),minLength:0});Qr.exports.transport=z_();Qr.exports.multistream=NN();Qr.exports.levels=BN();Qr.exports.stdSerializers=GY;Qr.exports.stdTimeFunctions=Object.assign({},FN);Qr.exports.symbols=UN;Qr.exports.version=EY;Qr.exports.default=lv;Qr.exports.pino=lv});var KN=E((rNe,WN)=>{"use strict";var zh=HN(),{serializersSym:GN}=zh.symbols,{FST_ERR_LOG_INVALID_DESTINATION:WY}=Mt();function KY(t){if(t.stream&&t.file)throw new WY;t.file&&(t.stream=zh.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[GN]&&(t.serializers=Object.assign({},t.serializers,e[GN])),n=e.child({},t),t.logger=e,t.genReqId=r):n=zh(t,t.stream),n}var JY={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],host:e.host,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:zh.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};WN.exports={serializers:JY,createPinoLogger:KY}});var Vl=E((nNe,YN)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:YY,FST_ERR_LOG_INVALID_LOGGER_CONFIG:XY,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:QY,FST_ERR_LOG_INVALID_LOGGER:ZY}=Mt();function eX(t,e,r,n,s){let i={[t.requestIdLogLabel]:n},o=t.childLoggerFactory.call(t.server,e,i,s||{},r);return t.childLoggerFactory!==JN&&Hh(o,!0),o}function JN(t,e,r){return t.child(e,r)}function Hh(t,e){let r=["info","error","debug","fatal","warn","trace","child"],n=t?r.filter(s=>!t[s]||typeof t[s]!="function"):r;if(n.length){if(n.length===r.length&&!e)return!1;throw ZY(n.join(","))}else return!0}function tX(t){if(t.logger&&t.loggerInstance)throw new YY;if(!t.loggerInstance&&!t.logger){let o=zx();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:e,serializers:r}=KN();if(Hh(t.loggerInstance))return{logger:e({logger:t.loggerInstance,serializers:Object.assign({},r,t.loggerInstance.serializers)}),hasLogger:!0};if(Hh(t.logger))throw XY();if(t.loggerInstance)throw QY();let n={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(i=>{Object.defineProperty(n,i,{value:t.logger[i],writable:!0,enumerable:!0,configurable:!0})}),n.level=n.level||"info",n.serializers=Object.assign({},r,n.serializers),t.logger=n,{logger:e(t.logger),hasLogger:!0}}function rX(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}YN.exports={createChildLogger:eX,defaultChildLoggerFactory:JN,createLogger:tX,validateLogger:Hh,now:rX}});var Gh=E((sNe,XN)=>{"use strict";XN.exports=nX;function Ka(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function nX(t){if(t=t||{},t.circles)return sX(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(n(Array.from(o),a))),e.set(Set,(o,a)=>new Set(n(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?i:s;function n(o,a){let c=Object.keys(o),l=new Array(c.length);for(let u=0;u<c.length;u++){let d=c[u],p=o[d];typeof p!="object"||p===null?l[d]=p:p.constructor!==Object&&(r=e.get(p.constructor))?l[d]=r(p,a):ArrayBuffer.isView(p)?l[d]=Ka(p):l[d]=a(p)}return l}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let c in o){if(Object.hasOwnProperty.call(o,c)===!1)continue;let l=o[c];typeof l!="object"||l===null?a[c]=l:l.constructor!==Object&&(r=e.get(l.constructor))?a[c]=r(l,s):ArrayBuffer.isView(l)?a[c]=Ka(l):a[c]=s(l)}return a}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,i);let a={};for(let c in o){let l=o[c];typeof l!="object"||l===null?a[c]=l:l.constructor!==Object&&(r=e.get(l.constructor))?a[c]=r(l,i):ArrayBuffer.isView(l)?a[c]=Ka(l):a[c]=i(l)}return a}}function sX(t){let e=[],r=[],n=new Map;if(n.set(Date,c=>new Date(c)),n.set(Map,(c,l)=>new Map(i(Array.from(c),l))),n.set(Set,(c,l)=>new Set(i(Array.from(c),l))),t.constructorHandlers)for(let c of t.constructorHandlers)n.set(c[0],c[1]);let s=null;return t.proto?a:o;function i(c,l){let u=Object.keys(c),d=new Array(u.length);for(let p=0;p<u.length;p++){let f=u[p],h=c[f];if(typeof h!="object"||h===null)d[f]=h;else if(h.constructor!==Object&&(s=n.get(h.constructor)))d[f]=s(h,l);else if(ArrayBuffer.isView(h))d[f]=Ka(h);else{let m=e.indexOf(h);m!==-1?d[f]=r[m]:d[f]=l(h)}}return d}function o(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return i(c,o);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,o);let l={};e.push(c),r.push(l);for(let u in c){if(Object.hasOwnProperty.call(c,u)===!1)continue;let d=c[u];if(typeof d!="object"||d===null)l[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))l[u]=s(d,o);else if(ArrayBuffer.isView(d))l[u]=Ka(d);else{let p=e.indexOf(d);p!==-1?l[u]=r[p]:l[u]=o(d)}}return e.pop(),r.pop(),l}function a(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return i(c,a);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,a);let l={};e.push(c),r.push(l);for(let u in c){let d=c[u];if(typeof d!="object"||d===null)l[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))l[u]=s(d,a);else if(ArrayBuffer.isView(d))l[u]=Ka(d);else{let p=e.indexOf(d);p!==-1?l[u]=r[p]:l[u]=a(d)}}return e.pop(),r.pop(),l}}});var zl=E((iNe,rI)=>{"use strict";var iX=Gh()({circles:!1,proto:!0}),{kSchemaVisited:QN,kSchemaResponse:oX}=Tt(),uv=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:aX,FST_ERR_SCH_ALREADY_PRESENT:cX,FST_ERR_SCH_DUPLICATE:lX,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:ZN}=Mt(),tI=["params","body","querystring","query","headers"];function Wh(t){this.store=t||{}}Wh.prototype.add=function(t){let e=iX(t.isFluentSchema||t.isFluentJSONSchema||t[uv]?t.valueOf():t),r=e.$id;if(!r)throw new aX;if(this.store[r])throw new cX(r);this.store[r]=e};Wh.prototype.getSchemas=function(){return Object.assign({},this.store)};Wh.prototype.getSchema=function(t){return this.store[t]};function eI(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function uX(t,e){if(t[QN])return t;if(t.query){if(t.querystring)throw new lX("querystring");t.querystring=t.query}fX(t);for(let r of tI){let n=t[r];if(n&&!eI(n)&&r==="body"&&n.content){let s=n.content,i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new ZN(a)}continue}}if(t.response){let r=Object.keys(t.response);for(let n of r){if(eI(t.response[n]))continue;let s=t.response[n].content;if(s){let i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new ZN(a)}}}}return t[QN]=!0,t}function fX(t){for(let e of tI)t[e]&&(t[e].isFluentSchema||t[e][uv])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][uv])&&(t.response[r]=t.response[r].valueOf())}}function dX(t,e,r){let n=t[oX];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let i=r.split(";",1)[0];return n[e][i]?n[e][i]:n[e]["*/*"]?n[e]["*/*"]:!1}return n[e]}let s=(e+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:n[s]["*/*"]?n[s]["*/*"]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:n.default["*/*"]?n.default["*/*"]:!1}return n.default}return!1}rI.exports={buildSchemas(t){return new Wh(t)},getSchemaSerializer:dX,normalizeSchema:uX}});var Kh=E((oNe,sI)=>{"use strict";var hX=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;sI.exports=class nI{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if(typeof e=="bigint")return e.toString();let r=this.parseInteger(e);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${e}" cannot be converted to an integer.`);return""+r}asNumber(e){let r=Number(e);if(r!==r)throw new Error(`The value "${e}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let r=e.length;if(r===0)return'""';if(r<42){let n="",s=-1,i=255;for(let o=0;o<r;o++)if(i=e.charCodeAt(o),i===34||i===92)s===-1&&(s=0),n+=e.slice(s,o)+"\\",s=o;else if(i<32||i>=55296&&i<=57343)return JSON.stringify(e);return s===-1&&'"'+e+'"'||'"'+n+e.slice(s)+'"'}else return r<5e3&&hX.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(e){return new nI(e)}}});var oI=E((aNe,iI)=>{"use strict";var pX=Kh(),mX={mode:"standalone"},gX=pX.restoreFromState(mX),yX=null;iI.exports=function(e,r){let n="{",s="}",i="[",o="]",a=",",c=":",l='"',u=n+s,d=i+o,p=l+l,f="null";function h(y){let g=y&&typeof y.toJSON=="function"?y.toJSON():y;if(g===null)return u;let w,_=n,v=!1;return w=g.statusCode,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"statusCode":',_+=r.asNumber(w)),w=g.code,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"code":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.error,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"error":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.message,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"message":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),_+s}return h}(yX,gX)});var Hl=E((cNe,uI)=>{"use strict";var aI=require("node:http").STATUS_CODES,_X=h_(),{kReplyHeaders:Ro,kReplyNextErrorHandler:Jh,kReplyIsRunningOnErrorHook:vX,kReplyHasStatusCode:wX,kRouteContext:lI,kDisableRequestLogging:Yh}=Tt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:bX,FST_ERR_FAILED_ERROR_SERIALIZATION:EX}=Mt(),{getSchemaSerializer:SX}=zl(),fv=oI(),RX={func:$X,toJSON(){return this.func.name.toString()+"()"}};function TX(t,e,r){t[vX]=!1;let n=t[lI];if(t[Jh]===!1){cI(e,t,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[Ro])}catch(c){o.log[Yh]||o.log.warn({req:o.request,res:o,err:c},c?.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let s=t[Jh]||n.errorHandler;t[Jh]=Object.getPrototypeOf(s),delete t[Ro]["content-type"],delete t[Ro]["content-length"];let i=s.func;if(!i){t[Jh]=!1,cI(e,t,r);return}try{let o=i(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?_X(o,t):t.send(o))}catch(o){t.send(o)}}function $X(t,e,r){if(PX(t,r),!r[wX]||r.statusCode===200){let n=t&&(t.statusCode||t.status);r.code(n>=400?n:500)}r.statusCode<500?r.log[Yh]||r.log.info({res:r,err:t},t?.message):r.log[Yh]||r.log.error({req:e,res:r,err:t},t?.message),r.send(t)}function cI(t,e,r){let n=e.raw,s=e.statusCode;e[Ro]["content-type"]=e[Ro]["content-type"]??"application/json; charset=utf-8";let i;try{let o=SX(e[lI],s,e[Ro]["content-type"]);o===!1?i=fv({error:aI[s+""],code:t.code,message:t.message,statusCode:s}):i=o(Object.create(t,{error:{value:aI[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log[Yh]||e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),i=fv(new EX(o.message,t.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=fv(new bX(typeof i))),e[Ro]["content-length"]=""+Buffer.byteLength(i),r(e,i)}function OX(t=RX,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function PX(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}uI.exports={buildErrorHandler:OX,handleError:TX}});var Kl=E((lNe,pI)=>{"use strict";var{kReply:dv,kRequest:hv,kState:xX,kHasBeenDecorated:CX}=Tt(),{FST_ERR_DEC_ALREADY_PRESENT:fI,FST_ERR_DEC_MISSING_DEPENDENCY:NX,FST_ERR_DEC_AFTER_START:IX,FST_ERR_DEC_REFERENCE_TYPE:AX,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:kX,FST_ERR_DEC_UNDECLARED:DX}=Mt();function MX(t,e,r,n){if(Object.hasOwn(t,e))throw new fI(e);pv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function jX(t){if(!Gl(this,t))throw new DX(t,"instance");return typeof this[t]=="function"?this[t].bind(this):this[t]}function dI(t,e,r,n){let s=t.prototype;if(Object.hasOwn(s,e)||Wl(t,e))throw new fI(e);t[CX]=!0,pv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function hI(t,e){if(typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function"))throw new AX(t,typeof e)}function qX(t,e,r){return mv(this,t),MX(this,t,e,r),this}function Gl(t,e){return e?e in t||t.prototype&&e in t.prototype||Wl(t,e):t in this}function Wl(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function LX(t){return t&&Wl(this[hv],t)?!0:Gl(this[hv].prototype,t)}function FX(t){return t&&Wl(this[dv],t)?!0:Gl(this[dv].prototype,t)}function pv(t,e,r){if(r!=null){if(!Array.isArray(r))throw new kX(e);for(let n=0;n!==r.length;++n)if(!Gl(t,r[n]))throw new NX(r[n])}}function UX(t,e,r){return mv(this,t),hI(t,e),dI(this[dv],t,e,r),this}function BX(t,e,r){return mv(this,t),hI(t,e),dI(this[hv],t,e,r),this}function mv(t,e){if(t[xX].started)throw new IX(e)}pI.exports={add:qX,exist:Gl,existRequest:LX,existReply:FX,dependencies:pv,decorateReply:UX,decorateRequest:BX,getInstanceDecorator:jX,hasKey:Wl}});var rp=E((uNe,tp)=>{"use strict";var vv=require("node:stream").finished,VX=require("node:stream").Readable,{kFourOhFourContext:mI,kReplyErrorHandlerCalled:SI,kReplyHijacked:bv,kReplyStartTime:Jl,kReplyEndTime:Ev,kReplySerializer:As,kReplySerializerDefault:Qh,kReplyIsError:Zh,kReplyHeaders:Ye,kReplyTrailers:Ot,kReplyHasStatusCode:Sv,kReplyIsRunningOnErrorHook:Rv,kReplyNextErrorHandler:zX,kDisableRequestLogging:RI,kSchemaResponse:ep,kReplyCacheSerializeFns:yi,kSchemaController:gv,kOptions:HX,kRouteContext:Se}=Tt(),{onSendHookRunner:TI,onResponseHookRunner:GX,preHandlerHookRunner:WX,preSerializationHookRunner:KX}=pi(),gI=y_()[Symbol.for("internals")],JX=Vl(),wv=JX.now,{handleError:yI}=Hl(),{getSchemaSerializer:YX}=zl(),yv={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:XX,FST_ERR_REP_RESPONSE_BODY_CONSUMED:QX,FST_ERR_REP_READABLE_STREAM_LOCKED:ZX,FST_ERR_REP_ALREADY_SENT:eQ,FST_ERR_SEND_INSIDE_ONERR:tQ,FST_ERR_BAD_STATUS_CODE:rQ,FST_ERR_BAD_TRAILER_NAME:nQ,FST_ERR_BAD_TRAILER_VALUE:sQ,FST_ERR_MISSING_SERIALIZATION_FN:iQ,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:oQ,FST_ERR_DEC_UNDECLARED:aQ}=Mt(),_I=Kl(),$I=Object.prototype.toString;function Ue(t,e,r){this.raw=t,this[As]=null,this[SI]=!1,this[Zh]=!1,this[Rv]=!1,this.request=e,this[Ye]={},this[Ot]=null,this[Sv]=!1,this[Jl]=void 0,this.log=r}Ue.props=[];Object.defineProperties(Ue.prototype,{[Se]:{get(){return this.request[Se]}},elapsedTime:{get(){return this[Jl]===void 0?0:(this[Ev]||wv())-this[Jl]}},server:{get(){return this.request[Se].server}},sent:{enumerable:!0,get(){return(this[bv]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},routeOptions:{get(){return this.request.routeOptions}}});Ue.prototype.writeEarlyHints=function(t,e){return this.raw.writeEarlyHints(t,e),this};Ue.prototype.hijack=function(){return this[bv]=!0,this};Ue.prototype.send=function(t){if(this[Rv])throw new tQ;if(this.sent===!0)return this.log.warn({err:new eQ(this.request.url,this.request.method)}),this;if(this[Zh]||t instanceof Error)return this[Zh]=!1,Yl(this,t,To),this;if(t===void 0)return To(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||$I.call(t)==="[object Response]")return To(this,t),this;if(t.buffer instanceof ArrayBuffer){r||(this[Ye]["content-type"]=yv.OCTET);let n=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return To(this,n),this}if(!r&&typeof t=="string")return this[Ye]["content-type"]=yv.PLAIN,To(this,t),this}if(this[As]!==null){if(typeof t!="string")return vI(this,t),this;t=this[As](t)}else if(!r||e.indexOf("json")!==-1){if(!r)this[Ye]["content-type"]=yv.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[Ye]["content-type"]=`${n} charset=utf-8`:this[Ye]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return vI(this,t),this}return To(this,t),this};Ue.prototype.getHeader=function(t){t=t.toLowerCase();let e=this[Ye][t];return e!==void 0?e:this.raw.getHeader(t)};Ue.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Ye]}};Ue.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[Ye][t]!==void 0||this.raw.hasHeader(t)};Ue.prototype.removeHeader=function(t){return delete this[Ye][t.toLowerCase()],this};Ue.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[Ye][t]&&t==="set-cookie"?(typeof this[Ye][t]=="string"&&(this[Ye][t]=[this[Ye][t]]),Array.isArray(e)?Array.prototype.push.apply(this[Ye][t],e):this[Ye][t].push(e)):this[Ye][t]=e,this};Ue.prototype.headers=function(t){let e=Object.keys(t);for(let r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var cQ=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);Ue.prototype.trailer=function(t,e){if(t=t.toLowerCase(),cQ.has(t))throw new nQ(t);if(typeof e!="function")throw new sQ(t,typeof e);return this[Ot]===null&&(this[Ot]={}),this[Ot][t]=e,this};Ue.prototype.hasTrailer=function(t){return this[Ot]?.[t.toLowerCase()]!==void 0};Ue.prototype.removeTrailer=function(t){return this[Ot]===null?this:(this[Ot][t.toLowerCase()]=void 0,this)};Ue.prototype.code=function(t){let e=+t;if(!(e>=100&&e<=599))throw new rQ(t||String(t));return this.raw.statusCode=e,this[Sv]=!0,this};Ue.prototype.status=Ue.prototype.code;Ue.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[Se][ep]?.[t]?.[e]:r=this[Se][ep]?.[t]:typeof t=="object"&&(r=this[Se][yi]?.get(t)),r};Ue.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[Se][yi]?.has(t))return this[Se][yi].get(t);let a=(this[Se].serializerCompiler||this.server[gv].serializerCompiler||this.server[gv].setupSerializer(this.server[HX])||this.server[gv].serializerCompiler)({schema:t,method:s,url:i,httpStatus:e,contentType:r});return this[Se][yi]==null&&(this[Se][yi]=new WeakMap),this[Se][yi].set(t,a),a};Ue.prototype.serializeInput=function(t,e,r,n){let s=r,i;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[Se][ep]?.[r]?.[n]:i=this[Se][ep]?.[r],i==null)throw n?new oQ(r,n):new iQ(r)}else this[Se][yi]?.has(e)?i=this[Se][yi].get(e):i=this.compileSerializationSchema(e,r,n);return i(t)};Ue.prototype.serialize=function(t){return this[As]!==null?this[As](t):this[Se]&&this[Se][Qh]?this[Se][Qh](t,this.raw.statusCode):xI(this[Se],t,this.raw.statusCode)};Ue.prototype.serializer=function(t){return this[As]=t,this};Ue.prototype.type=function(t){return this[Ye]["content-type"]=t,this};Ue.prototype.redirect=function(t,e){return e||(e=this[Sv]?this.raw.statusCode:302),this.header("location",t).code(e).send()};Ue.prototype.callNotFound=function(){return mQ(this),this};Ue.prototype.then=function(t,e){if(this.sent){t();return}vv(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};Ue.prototype.getDecorator=function(t){if(!_I.hasKey(this,t)&&!_I.exist(this,t))throw new aQ(t,"reply");let e=this[t];return typeof e=="function"?e.bind(this):e};function vI(t,e){t[Se].preSerialization!==null?KX(t[Se].preSerialization,t.request,t,e,wI):wI(null,void 0,t,e)}function wI(t,e,r,n){if(t!=null){Yl(r,t);return}try{r[As]!==null?n=r[As](n):r[Se]&&r[Se][Qh]?n=r[Se][Qh](n,r.raw.statusCode):n=xI(r[Se],n,r.raw.statusCode,r[Ye]["content-type"])}catch(s){lQ(s,r),Yl(r,s);return}To(r,n)}function lQ(t,e){t.serialization=e[Se].config}function To(t,e){t[Se].onSend!==null?TI(t[Se].onSend,t.request,t,e,uQ):OI(t,e)}function uQ(t,e,r,n){t!=null?Yl(r,t):OI(r,n)}function _v(t,e){let r=t.raw;try{r.writeHead(e,t[Ye])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),n}}function OI(t,e){let r=t.raw,n=t.request;if(t[Ot]!==null){let i=Object.keys(t[Ot]),o="";for(let a of i)typeof t[Ot][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if($I.call(e)==="[object Response]"){if(typeof e.status=="number"&&t.code(e.status),typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[i,o]of e.headers)t.header(i,o);if(e.body!==null&&e.bodyUsed)throw new QX;e=e.body}let s=r.statusCode;if(e==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&t[Ot]===null&&(t[Ye]["content-length"]="0"),_v(t,s),Xh(e,r,t);return}if(s>=100&&s<200||s===204){t.removeHeader("content-type"),t.removeHeader("content-length"),_v(t,s),Xh(void 0,r,t),typeof e.resume=="function"&&(e.on("error",CI),e.resume());return}if(typeof e.pipe=="function"){PI(e,r,t);return}if(typeof e.getReader=="function"){fQ(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new XX(typeof e);if(t[Ot]===null){let i=t[Ye]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(e))&&(t[Ye]["content-length"]=""+Buffer.byteLength(e))}_v(t,s),r.write(e),Xh(e,r,t)}function bI(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[RI]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function fQ(t,e,r){if(t.locked)throw new ZX;let n=VX.fromWeb(t);PI(n,e,r)}function PI(t,e,r){let n=!0,s=!1;if(dQ(t,e,r),vv(t,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,bI(r.log,i,r)),e.destroy()):Yl(r,i))}),vv(e,function(i){n&&(i!=null&&e.headersSent&&!s&&(s=!0,bI(r.log,i,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(CI):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[Ye])e.setHeader(i,r[Ye][i]);t.pipe(e)}function Xh(t,e,r){if(r[Ot]===null){e.end(null,null,null);return}let n=Object.keys(r[Ot]),s={},i=0,o=!0;function a(){i===0&&(e.addTrailers(s),e.end(null,null,null))}for(let c of n){let l=function(d,p){i++,d?r.log.debug(d):s[c]=p,process.nextTick(a)};if(typeof r[Ot][c]!="function")continue;o=!1,i--;let u=r[Ot][c](r,t,l);typeof u=="object"&&typeof u.then=="function"&&u.then(d=>l(null,d),l)}o&&e.end(null,null,null)}function dQ(t,e,r){r[Ot]!==null&&t.on("end",()=>Xh(null,e,r))}function Yl(t,e,r){t[Se].onError!==null&&!t[zX]?(t[Rv]=!0,TI(t[Se].onError,t.request,t,e,()=>yI(t,e,r))):yI(t,e,r)}function hQ(t){t[Jl]=wv();let e=r=>{t[Ev]=wv(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[Se];n&&n.onResponse!==null?GX(n.onResponse,t.request,t,EI):EI(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function EI(t,e,r){if(r.log[RI])return;let n=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function pQ(t){let e=t.props.slice();function r(n,s,i){this.raw=n,this[Zh]=!1,this[SI]=!1,this[bv]=!1,this[As]=null,this.request=s,this[Ye]={},this[Ot]=null,this[Jl]=void 0,this[Ev]=void 0,this.log=i;let o;for(let a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function mQ(t){if(t[Se][mI]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[Se]=t[Se][mI],t[Se].preHandler!==null?WX(t[Se].preHandler,t.request,t,gI.preHandlerCallback):gI.preHandlerCallback(null,t.request,t)}function xI(t,e,r,n){let s=YX(t,r,n);return s?s(e):JSON.stringify(e)}function CI(){}tp.exports=Ue;tp.exports.buildReply=pQ;tp.exports.setupResponseListeners=hQ});var NI=E((fNe,np)=>{"use strict";function Tv(t){if(!t)throw new TypeError("argument req is required");let e=t.headers["x-forwarded-for"],r=t.socket.remoteAddress;if(!e||typeof e!="string")return[r];if(e.indexOf(",")===-1){let n=e.trim();return n.length?[r,n]:[r]}else return gQ(e,r)}function gQ(t,e){let r=[e],n=t.length,s=n,i,o;for(o=n-1;o>=0;--o)i=t[o],i===" "?s===n&&(s=n=o):i===","?(s!==n&&r.push(t.slice(s,n)),s=n=o):s=o;return s!==n&&r.push(t.substring(s,n)),r}np.exports=Tv;np.exports.default=Tv;np.exports.forwarded=Tv});var AI=E((II,sp)=>{(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${i})?$`,"i")};function c(f,h){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let m=0,y=-1,g=(f.match(a.zoneIndex)||[])[0],w,_;for(g&&(g=g.substring(1),f=f.replace(/%.+$/,""));(y=f.indexOf(":",y+1))>=0;)m++;if(f.substr(0,2)==="::"&&m--,f.substr(-2,2)==="::"&&m--,m>h)return null;for(_=h-m,w=":";_--;)w+="0:";return f=f.replace("::",w),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),h=function(){let v=f.split(":"),S=[];for(let $=0;$<v.length;$++)S.push(parseInt(v[$],16));return S}(),{parts:h,zoneId:g}}function l(f,h,m,y){if(f.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let g=0,w;for(;y>0;){if(w=m-y,w<0&&(w=0),f[g]>>w!==h[g]>>w)return!1;y-=m,g+=1}return!0}function u(f){if(s.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function d(f,h){for(;f.length<h;)f=`0${f}`;return f}let p={};p.IPv4=function(){function f(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,y;for(m=0;m<h.length;m++)if(y=h[m],!(0<=y&&y<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,18,0,0]),15],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]],as112:[[new f([192,175,48,0]),24],[new f([192,31,196,0]),24]],amt:[[new f([192,52,193,0]),24]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,h.octets,8,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},g,w,_;for(g=3;g>=0;g-=1)if(w=this.octets[g],w in y){if(_=y[w],m&&_!==0)return null;_!==8&&(m=!0),h+=_}else return null;return 32-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),p.IPv4.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<4;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(f){return this.parser(f)!==null},p.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(f){try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(f){return!!(p.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.isValidCIDRFourPartDecimal=function(f){let h=f.match(/^(.+)\/(\d+)$/);return!p.IPv4.isValidCIDR(f)||!h?!1:p.IPv4.isValidFourPartDecimal(h[1])},p.IPv4.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<4;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(f){let h=this.parser(f);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(f){let h;if(h=f.match(/^(.+)\/(\d+)$/)){let m=parseInt(h[2]);if(m>=0&&m<=32){let y=[this.parse(h[1]),m];return Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(f){let h,m,y;if(h=f.match(r.fourOctet))return function(){let g=h.slice(1,6),w=[];for(let _=0;_<g.length;_++)m=g[_],w.push(u(m));return w}();if(h=f.match(r.longValue)){if(y=u(h[1]),y>4294967295||y<0)throw new Error("ipaddr: address outside defined range");return function(){let g=[],w;for(w=0;w<=24;w+=8)g.push(y>>w&255);return g}().reverse()}else return(h=f.match(r.twoOctet))?function(){let g=h.slice(1,4),w=[];if(y=u(g[1]),y>16777215||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(y>>16&255),w.push(y>>8&255),w.push(y&255),w}():(h=f.match(r.threeOctet))?function(){let g=h.slice(1,5),w=[];if(y=u(g[2]),y>65535||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(u(g[1])),w.push(y>>8&255),w.push(y&255),w}():null},p.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");let h=[0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<4&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.IPv6=function(){function f(h,m){let y,g;if(h.length===16)for(this.parts=[],y=0;y<=14;y+=2)this.parts.push(h[y]<<8|h[y+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(y=0;y<this.parts.length;y++)if(g=this.parts[y],!(0<=g&&g<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],discard:[new f([256,0,0,0,0,0,0,0]),64],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],benchmarking:[new f([8193,2,0,0,0,0,0,0]),48],amt:[new f([8193,3,0,0,0,0,0,0]),32],as112v6:[[new f([8193,4,274,0,0,0,0,0]),48],[new f([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new f([8193,16,0,0,0,0,0,0]),28],orchid2:[new f([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new f([8193,48,0,0,0,0,0,0]),28],reserved:[[new f([8193,0,0,0,0,0,0,0]),23],[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,h.parts,16,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},g,w;for(let _=7;_>=0;_-=1)if(g=this.parts[_],g in y){if(w=y[g],m&&w!==0)return null;w!==16&&(m=!0),h+=w}else return null;return 128-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let h,m=[],y=this.parts;for(let g=0;g<y.length;g++)h=y[g],m.push(h>>8),m.push(h&255);return m},f.prototype.toFixedLengthString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(d(this.parts[g].toString(16),4));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let h=this.parts.slice(-2),m=h[0],y=h[1];return new p.IPv4([m>>8,m&255,y>>8,y&255])},f.prototype.toNormalizedString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(this.parts[g].toString(16));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toRFC5952String=function(){let h=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),y=0,g=-1,w;for(;w=h.exec(m);)w[0].length>g&&(y=w.index,g=w[0].length);return g<0?m:`${m.substring(0,y)}::${m.substring(y+g)}`},f.prototype.toString=function(){return this.toRFC5952String()},f}(),p.IPv6.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<16;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(f){return this.parser(f)!==null},p.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{let h=this.parser(f);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<16;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch(_){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${_})`)}},p.IPv6.parse=function(f){let h=this.parser(f);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(f){let h,m,y;if((m=f.match(/^(.+)\/(\d+)$/))&&(h=parseInt(m[2]),h>=0&&h<=128))return y=[this.parse(m[1]),h],Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(f){let h,m,y,g,w,_;if(y=f.match(a.deprecatedTransitional))return this.parser(`::ffff:${y[1]}`);if(a.native.test(f))return c(f,8);if((y=f.match(a.transitional))&&(_=y[6]||"",h=y[1],y[1].endsWith("::")||(h=h.slice(0,-1)),h=c(h+_,6),h.parts)){for(w=[parseInt(y[2]),parseInt(y[3]),parseInt(y[4]),parseInt(y[5])],m=0;m<w.length;m++)if(g=w[m],!(0<=g&&g<=255))return null;return h.parts.push(w[0]<<8|w[1]),h.parts.push(w[2]<<8|w[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");let h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<16&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.fromByteArray=function(f){let h=f.length;if(h===4)return new p.IPv4(f);if(h===16)return new p.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(f){return p.IPv6.isValid(f)||p.IPv4.isValid(f)},p.isValidCIDR=function(f){return p.IPv6.isValidCIDR(f)||p.IPv4.isValidCIDR(f)},p.parse=function(f){if(p.IPv6.isValid(f))return p.IPv6.parse(f);if(p.IPv4.isValid(f))return p.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(f){try{return p.IPv6.parseCIDR(f)}catch{try{return p.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(f){let h=this.parse(f);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(f,h,m){let y,g,w,_;m==null&&(m="unicast");for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)){for(w=h[g],w[0]&&!(w[0]instanceof Array)&&(w=[w]),y=0;y<w.length;y++)if(_=w[y],f.kind()===_[0].kind()&&f.match.apply(f,_))return g}return m},typeof sp<"u"&&sp.exports?sp.exports=p:t.ipaddr=p})(II)});var qI=E((dNe,Ja)=>{"use strict";Ja.exports=$v;Ja.exports.default=$v;Ja.exports.proxyaddr=$v;Ja.exports.all=MI;Ja.exports.compile=jI;var yQ=NI(),DI=AI(),_Q=/^\d+$/u,ip=DI.isValid,op=DI.parse,kI={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function MI(t,e){let r=yQ(t);if(!e)return r;typeof e!="function"&&(e=jI(e));for(let n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function jI(t){if(!t)throw new TypeError("argument is required");let e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(let r=0;r<e.length;r++)t=e[r],Object.hasOwn(kI,t)&&(t=kI[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return wQ(vQ(e))}function vQ(t){let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=bQ(t[r]);return e}function wQ(t){let e=t.length;return e===0?SQ:e===1?TQ(t[0]):RQ(t)}function bQ(t){let e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!ip(r))throw new TypeError("invalid IP address: "+r);let n=op(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());let s=n.kind()==="ipv6"?128:32,i=e!==-1?t.substring(e+1,t.length):null;if(i===null?i=s:_Q.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&ip(i)?i=EQ(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+t);return[n,i]}function EQ(t){let e=op(t);return e.kind()==="ipv4"?e.prefixLengthFromSubnetMask():null}function $v(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");let r=MI(t,e);return r[r.length-1]}function SQ(){return!1}function RQ(t){return function(r){if(!ip(r))return!1;let n=op(r),s,i=n.kind();for(let o=0;o<t.length;o++){let a=t[o],c=a[0],l=c.kind(),u=a[1],d=n;if(i!==l){let p=l==="ipv4";if(p&&!n.isIPv4MappedAddress())continue;s||(s=p?n.toIPv4Address():n.toIPv4MappedAddress()),d=s}if(d.match(c,u))return!0}return!1}}function TQ(t){let e=t[0],r=e.kind(),n=r==="ipv4",s=t[1];return function(o){if(!ip(o))return!1;let a=op(o);if(a.kind()!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var cp=E((hNe,Cv)=>{"use strict";var ap=qI(),{kHasBeenDecorated:$Q,kSchemaBody:OQ,kSchemaHeaders:PQ,kSchemaParams:xQ,kSchemaQuerystring:LI,kSchemaController:Ov,kOptions:CQ,kRequestCacheValidateFns:_i,kRouteContext:Wt,kRequestOriginalUrl:Pv}=Tt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:NQ,FST_ERR_DEC_UNDECLARED:IQ}=Mt(),FI=Kl(),UI={body:OQ,headers:PQ,params:xQ,querystring:LI,query:LI};function xv(t,e,r,n,s,i){this.id=t,this[Wt]=i,this.params=e,this.raw=r,this.query=n,this.log=s,this.body=void 0}xv.props=[];function AQ(t){if(typeof t=="function")return t;if(t===!0)return null;if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return ap.compile(e)}return ap.compile(t)}function kQ(t,e){return e?DQ(t,e):zI(t)}function zI(t){let e=t.props.slice();function r(n,s,i,o,a,c){this.id=n,this[Wt]=c,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;let l;for(let u=0;u<e.length;u++)l=e[u],this[l.key]=l.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function BI(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function DQ(t,e){let r=zI(t),n=AQ(e);return r[$Q]=!0,Object.defineProperties(r.prototype,{ip:{get(){let s=ap.all(this.raw,n);return s[s.length-1]}},ips:{get(){return ap.all(this.raw,n)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?BI(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return BI(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}function VI(t,e){if(!FI.hasKey(t,e)&&!FI.exist(t,e))throw new IQ(e,"request")}Object.defineProperties(xv.prototype,{server:{get(){return this[Wt].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[Pv]||(this[Pv]=this.raw.originalUrl||this.raw.url),this[Pv]}},method:{get(){return this.raw.method}},routeOptions:{get(){let t=this[Wt],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0;return{method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,config:t.config,schema:t.schema,version:n}}},is404:{get(){return this[Wt].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host[0]==="["?this.host.slice(0,this.host.indexOf("]")+1):this.host.split(":",1)[0]}},port:{get(){let t=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(t))return t;let e=this.headers.host??this.headers[":authority"]??"",r=parseInt(e.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=UI[t];return this[Wt][e]}else if(typeof t=="object")return this[Wt][_i]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[Wt][_i]?.has(t))return this[Wt][_i].get(t);let i=(this[Wt].validatorCompiler||this.server[Ov].validatorCompiler||this.server[Ov].setupValidator(this.server[CQ])||this.server[Ov].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[Wt][_i]==null&&(this[Wt][_i]=new WeakMap),this[Wt][_i].set(t,i),i}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&UI[r],s;if(n&&(s=this[Wt][n]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new NQ(r);return s==null&&(this[Wt][_i]?.has(e)?s=this[Wt][_i].get(e):s=this.compileValidationSchema(e,r)),s(t)}},getDecorator:{value:function(t){VI(this,t);let e=this[t];return typeof e=="function"?e.bind(this):e}},setDecorator:{value:function(t,e){VI(this,t),this[t]=e}}});Cv.exports=xv;Cv.exports.buildRequest=kQ});var lp=E((pNe,HI)=>{"use strict";var{kFourOhFourContext:MQ,kReplySerializerDefault:jQ,kSchemaErrorFormatter:qQ,kErrorHandler:LQ,kChildLoggerFactory:FQ,kOptions:UQ,kReply:BQ,kRequest:VQ,kBodyLimit:zQ,kLogLevel:HQ,kContentTypeParser:GQ,kRouteByFastify:WQ,kRequestCacheValidateFns:KQ,kReplyCacheSerializeFns:JQ}=Tt();function YQ({schema:t,handler:e,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:c,attachValidation:l,validatorCompiler:u,serializerCompiler:d,replySerializer:p,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:m,server:y,isFastify:g}){this.schema=t,this.handler=e,this.Reply=y[BQ],this.Request=y[VQ],this.contentTypeParser=y[GQ],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||y[LQ],this.requestIdLogLabel=n||y[UQ].requestIdLogLabel,this.childLoggerFactory=s||y[FQ],this._middie=null,this._parserOptions={limit:o||y[zQ]},this.exposeHeadRoute=h,this.prefixTrailingSlash=m,this.logLevel=a||y[HQ],this.logSerializers=c,this[MQ]=null,this.attachValidation=l,this[jQ]=p,this.schemaErrorFormatter=f||y[qQ]||XQ,this[WQ]=g,this[KQ]=null,this[JQ]=null,this.validatorCompiler=u||null,this.serializerCompiler=d||null,this.server=y}function XQ(t,e){let r="",n=", ";for(let s=0;s!==t.length;++s){let i=t[s];r+=e+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}HI.exports=YQ});var kv=E(ss=>{"use strict";var Nv=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Iv=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Xl=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},up=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function GI(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var Av=class{constructor(e,r,n){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=GI(this.collectionStart),this.records=n||new up,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=GI(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},fp=class extends Xl{constructor(e,r,n,s,i){if(super(e||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new Av(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},dp=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};ss.Fifo=dp;ss.FifoMap=Nv;ss.FifoObject=dp;ss.HitStatisticsRecord=up;ss.Lru=Xl;ss.LruHitStatistics=fp;ss.LruMap=Iv;ss.LruObject=Xl;ss.LruObjectHitStatistics=fp});var XI=E((gNe,Ya)=>{"use strict";var QQ=typeof Buffer<"u",WI=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,KI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function JI(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),QQ&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(WI.test(t)===!1&&KI.test(t)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(WI.test(t)===!1)return n}else if(KI.test(t)===!1)return n;return YI(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function YI(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let s=[t];for(;s.length;){let i=s;s=[];for(let o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&o.constructor!==null&&typeof o.constructor=="object"&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let c=o[a];c&&typeof c=="object"&&s.push(c)}}}return t}function Dv(t,e,r){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return JI(t,e,r)}finally{Error.stackTraceLimit=n}}function ZQ(t,e){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return JI(t,e,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}}Ya.exports=Dv;Ya.exports.default=Dv;Ya.exports.parse=Dv;Ya.exports.safeParse=ZQ;Ya.exports.scan=YI});var Uv=E((yNe,Zl)=>{"use strict";var{AsyncResource:eZ}=require("node:async_hooks"),{FifoMap:eA}=kv(),{parse:tZ}=XI(),{kDefaultJsonParse:Ql,kContentTypeParser:Xa,kBodyLimit:rZ,kRequestPayloadStream:tA,kState:jv,kTestInternals:nZ,kReplyIsError:QI,kRouteContext:sZ}=Tt(),{FST_ERR_CTP_INVALID_TYPE:qv,FST_ERR_CTP_EMPTY_TYPE:iZ,FST_ERR_CTP_ALREADY_PRESENT:oZ,FST_ERR_CTP_INVALID_HANDLER:aZ,FST_ERR_CTP_INVALID_PARSE_TYPE:cZ,FST_ERR_CTP_BODY_TOO_LARGE:ZI,FST_ERR_CTP_INVALID_MEDIA_TYPE:lZ,FST_ERR_CTP_INVALID_CONTENT_LENGTH:uZ,FST_ERR_CTP_EMPTY_JSON_BODY:fZ,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Lv,FST_ERR_CTP_INVALID_JSON_BODY:dZ}=Mt(),{FSTSEC001:hZ}=Ua();function ks(t,e,r){this[Ql]=nA(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new Mv(!0,!1,t,this[Ql])),this.customParsers.set("text/plain",new Mv(!0,!1,t,Fv)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new eA(100)}ks.prototype.add=function(t,e,r){let n=typeof t=="string";if(n){if(t=t.trim().toLowerCase(),t.length===0)throw new iZ}else if(!(t instanceof RegExp))throw new qv;if(typeof r!="function")throw new aZ;if(this.existingParser(t))throw new oZ(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new cZ(e.parseAs);let s=new Mv(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);t==="*"?this.customParsers.set("",s):n?(this.parserList.unshift(t),this.customParsers.set(t,s)):(vZ(t),this.parserRegExpList.unshift(t),this.customParsers.set(t.toString(),s))};ks.prototype.hasParser=function(t){if(typeof t=="string")t=t.trim().toLowerCase();else{if(!(t instanceof RegExp))throw new qv;t=t.toString()}return this.customParsers.has(t)};ks.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[Ql]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==Fv:this.hasParser(t)};ks.prototype.getParser=function(t){let e=this.customParsers.get(t);if(e!==void 0||(e=this.cache.get(t),e!==void 0))return e;let r=t.toLowerCase();for(let n=0;n!==this.parserList.length;++n){let s=this.parserList[n];if(r.slice(0,s.length)===s&&(r.length===s.length||r.charCodeAt(s.length)===59||r.charCodeAt(s.length)===32||r.charCodeAt(s.length)===9))return e=this.customParsers.get(s),this.cache.set(t,e),e}for(let n=0;n!==this.parserRegExpList.length;++n){let s=this.parserRegExpList[n];if(s.test(t))return e=this.customParsers.get(s.toString()),this.cache.set(t,e),e}return this.customParsers.get("")};ks.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new eA(100)};ks.prototype.remove=function(t){let e;if(typeof t=="string")t=t.trim().toLowerCase(),e=this.parserList;else{if(!(t instanceof RegExp))throw new qv;t=t.toString(),e=this.parserRegExpList}let r=this.customParsers.delete(t),n=e.findIndex(s=>s.toString()===t);return n>-1&&e.splice(n,1),r||n>-1};ks.prototype.run=function(t,e,r,n){let s=this.getParser(t);if(s===void 0){if(r.is404===!0){e(r,n);return}n[QI]=!0,n.send(new lZ(t||void 0));return}let i=new eZ("content-type-parser:run",r),o=i.bind(c);if(s.asString===!0||s.asBuffer===!0){rA(r,n,n[sZ]._parserOptions,s,o);return}let a=s.fn(r,r[tA],o);a&&typeof a.then=="function"&&a.then(l=>{o(null,l)},o);function c(l,u){if(i.emitDestroy(),l!=null){n.header("connection","close"),n[QI]=!0,n.send(l);return}r.body=u,e(r,n)}};function rA(t,e,r,n,s){let i=n.asString===!0,o=r.limit===null?n.bodyLimit:r.limit,a=Number(t.headers["content-length"]);if(a>o){s(new ZI,void 0);return}let c=0,l=i?"":[],u=t[tA]||t.raw;i&&u.setEncoding("utf8"),u.on("data",d),u.on("end",p),u.on("error",p),u.resume();function d(f){c+=i?Buffer.byteLength(f):f.length;let{receivedEncodedLength:h=0}=u;if(c>o||h>o){u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),s(new ZI,void 0);return}i?l+=f:l.push(f)}function p(f){if(u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),f!=null){typeof f.statusCode=="number"&&f.statusCode>=400||(f.statusCode=400),s(f,void 0);return}if(!Number.isNaN(a)&&(u.receivedEncodedLength||c)!==a){s(new uZ,void 0);return}i||(l=Buffer.concat(l));let h=n.fn(t,l,s);h&&typeof h.then=="function"&&h.then(m=>{s(null,m)},s)}}function nA(t,e){let r={protoAction:t,constructorAction:e};return n;function n(s,i,o){if(i.length===0){o(new fZ,void 0);return}try{o(null,tZ(i,r))}catch{o(new dZ,void 0)}}}function Fv(t,e,r){r(null,e)}function Mv(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function pZ(t){let e=new ks;return e[Ql]=t[Ql],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function mZ(t,e,r){if(this[jv].started)throw new Lv("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[rZ]),Array.isArray(t)?t.forEach(n=>this[Xa].add(n,e,r)):this[Xa].add(t,e,r),this}function gZ(t){return this[Xa].hasParser(t)}function yZ(t){if(this[jv].started)throw new Lv("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[Xa].remove(e);else this[Xa].remove(t)}function _Z(){if(this[jv].started)throw new Lv("removeAllContentTypeParsers");this[Xa].removeAll()}function vZ(t){t.source[0]!=="^"&&t.source.includes(";?")===!1&&hZ(t.source)}Zl.exports=ks;Zl.exports.helpers={buildContentTypeParser:pZ,addContentTypeParser:mZ,hasContentTypeParser:gZ,removeContentTypeParser:yZ,removeAllContentTypeParsers:_Z};Zl.exports.defaultParsers={getDefaultJsonParser:nA,defaultTextParser:Fv};Zl.exports[nZ]={rawBody:rA}});var hp=E(oA=>{var sA=Object.prototype.hasOwnProperty;function iA(t,e,r){for(r of t.keys())if(eu(r,e))return r}function eu(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&eu(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=iA(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=iA(e,s),!s)||!eu(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(sA.call(t,r)&&++n&&!sA.call(e,r)||!(r in e)||!eu(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}oA.dequal=eu});var uA=E((vNe,lA)=>{"use strict";var{dequal:aA}=hp(),wZ=Symbol.for("json-schema-ref"),Bv=class{#e;#t;#i;#n;#o;constructor(e={}){this.#e={},this.#t={},this.#i=e.insertRefSymbol??!1,this.#n=e.allowEqualDuplicates??!0,this.#o=e.cloneSchemaWithoutRefs??!1}addSchema(e,r,n=!0){n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#a(e,r));let s=e.$id;s!==void 0&&typeof s=="string"&&(s.charAt(0)==="#"?this.#d(e,r,s):(this.#a(e,s),r=s));let i=e.$ref;if(i!==void 0&&typeof i=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#p(i,r);this.#e[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in e)typeof e[o]=="object"&&e[o]!==null&&this.addSchema(e[o],r,!1)}getSchema(e,r="#"){let n=this.#e[e];if(n===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:cA(n.schema,r)}hasSchema(e){return this.#e[e]!==void 0}getSchemaRefs(e){let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let n=this.#e[e];for(let s of n.refs){let i=s.schemaId;i===e||r[i]!==void 0||(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(e){if(this.#t[e]!==void 0)return;let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#o&&r.refs.length===0&&(this.#t[e]={schema:r.schema,anchors:r.anchors});let n=[];this.#h(r.schema,e,!0,n);let s=this.getSchemaDependencies(e);for(let i in s){let o=s[i];this.#h(o,i,!0,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#p(i.ref,i.sourceSchemaId),c=this.getDerefSchema(o,a);if(c===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=c,i.targetSchemaId=o}for(let i of n)this.#l(i,n)}getDerefSchema(e,r="#"){let n=this.#t[e];return n===void 0&&(this.derefSchema(e),n=this.#t[e]),n.anchors[r]!==void 0?n.anchors[r]:cA(n.schema,r)}#p(e,r){let n=e.indexOf("#");return n===-1?{refSchemaId:e,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#h(e,r,n,s=[]){let i=Array.isArray(e)?[...e]:{...e};n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#u(i,r));let o=i.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#c(i,r,o):(this.#u(i,o),r=o)),i.$ref!==void 0&&s.push({ref:i.$ref,sourceSchemaId:r,sourceSchema:i});for(let a in i){let c=i[a];typeof c=="object"&&c!==null&&(i[a]=this.#h(c,r,!1,s))}return i}#l(e,r){let{sourceSchema:n,targetSchema:s}=e;if(n.$ref){if(this.#i&&(n[wZ]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#l(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(aA(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${i}" already exists in schema "${e.sourceSchemaId}".`)}n[i]=s[i]}e.isResolved=!0}}#a(e,r){let n=this.#e[r];if(n!==void 0){if(this.#n&&aA(e,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:e,anchors:{},refs:[]}}#d(e,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in schema "${r}".`);s[n]=e}#u(e,r){this.#t[r]===void 0&&(this.#t[r]={schema:e,anchors:{}})}#c(e,r,n){let{anchors:s}=this.#t[r];s[n]=e}};function cA(t,e){let r=e.split("/"),n=t;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}lA.exports={RefResolver:Bv}});var nu=E(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.regexpCode=ke.getEsmExportName=ke.getProperty=ke.safeStringify=ke.stringify=ke.strConcat=ke.addCodeArg=ke.str=ke._=ke.nil=ke._Code=ke.Name=ke.IDENTIFIER=ke._CodeOrName=void 0;var tu=class{};ke._CodeOrName=tu;ke.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var $o=class extends tu{constructor(e){if(super(),!ke.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ke.Name=$o;var Zr=class extends tu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof $o&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ke._Code=Zr;ke.nil=new Zr("");function fA(t,...e){let r=[t[0]],n=0;for(;n<e.length;)zv(r,e[n]),r.push(t[++n]);return new Zr(r)}ke._=fA;var Vv=new Zr("+");function dA(t,...e){let r=[ru(t[0])],n=0;for(;n<e.length;)r.push(Vv),zv(r,e[n]),r.push(Vv,ru(t[++n]));return bZ(r),new Zr(r)}ke.str=dA;function zv(t,e){e instanceof Zr?t.push(...e._items):e instanceof $o?t.push(e):t.push(RZ(e))}ke.addCodeArg=zv;function bZ(t){let e=1;for(;e<t.length-1;){if(t[e]===Vv){let r=EZ(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function EZ(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof $o||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof $o))return`"${t}${e.slice(1)}`}function SZ(t,e){return e.emptyStr()?t:t.emptyStr()?e:dA`${t}${e}`}ke.strConcat=SZ;function RZ(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:ru(Array.isArray(t)?t.join(","):t)}function TZ(t){return new Zr(ru(t))}ke.stringify=TZ;function ru(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ke.safeStringify=ru;function $Z(t){return typeof t=="string"&&ke.IDENTIFIER.test(t)?new Zr(`.${t}`):fA`[${t}]`}ke.getProperty=$Z;function OZ(t){if(typeof t=="string"&&ke.IDENTIFIER.test(t))return new Zr(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}ke.getEsmExportName=OZ;function PZ(t){return new Zr(t.toString())}ke.regexpCode=PZ});var Wv=E(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ValueScope=Cr.ValueScopeName=Cr.Scope=Cr.varKinds=Cr.UsedValueState=void 0;var xr=nu(),Hv=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},pp;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(pp||(Cr.UsedValueState=pp={}));Cr.varKinds={const:new xr.Name("const"),let:new xr.Name("let"),var:new xr.Name("var")};var mp=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof xr.Name?e:this.name(e)}name(e){return new xr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Cr.Scope=mp;var gp=class extends xr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,xr._)`.${new xr.Name(r)}[${n}]`}};Cr.ValueScopeName=gp;var xZ=(0,xr._)`\n`,Gv=class extends mp{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?xZ:xr.nil}}get(){return this._scope}name(e){return new gp(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,xr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=xr.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,pp.Started);let u=r(l);if(u){let d=this.opts.es5?Cr.varKinds.var:Cr.varKinds.const;i=(0,xr._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,xr._)`${i}${u}${this.opts._n}`;else throw new Hv(l);c.set(l,pp.Completed)})}return i}};Cr.ValueScope=Gv});var ve=E(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.or=ge.and=ge.not=ge.CodeGen=ge.operators=ge.varKinds=ge.ValueScopeName=ge.ValueScope=ge.Scope=ge.Name=ge.regexpCode=ge.stringify=ge.getProperty=ge.nil=ge.strConcat=ge.str=ge._=void 0;var Pe=nu(),Cn=Wv(),vi=nu();Object.defineProperty(ge,"_",{enumerable:!0,get:function(){return vi._}});Object.defineProperty(ge,"str",{enumerable:!0,get:function(){return vi.str}});Object.defineProperty(ge,"strConcat",{enumerable:!0,get:function(){return vi.strConcat}});Object.defineProperty(ge,"nil",{enumerable:!0,get:function(){return vi.nil}});Object.defineProperty(ge,"getProperty",{enumerable:!0,get:function(){return vi.getProperty}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return vi.stringify}});Object.defineProperty(ge,"regexpCode",{enumerable:!0,get:function(){return vi.regexpCode}});Object.defineProperty(ge,"Name",{enumerable:!0,get:function(){return vi.Name}});var wp=Wv();Object.defineProperty(ge,"Scope",{enumerable:!0,get:function(){return wp.Scope}});Object.defineProperty(ge,"ValueScope",{enumerable:!0,get:function(){return wp.ValueScope}});Object.defineProperty(ge,"ValueScopeName",{enumerable:!0,get:function(){return wp.ValueScopeName}});Object.defineProperty(ge,"varKinds",{enumerable:!0,get:function(){return wp.varKinds}});ge.operators={GT:new Pe._Code(">"),GTE:new Pe._Code(">="),LT:new Pe._Code("<"),LTE:new Pe._Code("<="),EQ:new Pe._Code("==="),NEQ:new Pe._Code("!=="),NOT:new Pe._Code("!"),OR:new Pe._Code("||"),AND:new Pe._Code("&&"),ADD:new Pe._Code("+")};var Ds=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Kv=class extends Ds{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Cn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Za(this.rhs,e,r)),this}get names(){return this.rhs instanceof Pe._CodeOrName?this.rhs.names:{}}},yp=class extends Ds{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Pe.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Za(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Pe.Name?{}:{...this.lhs.names};return vp(e,this.rhs)}},Jv=class extends yp{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Yv=class extends Ds{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Xv=class extends Ds{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Qv=class extends Ds{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Zv=class extends Ds{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Za(this.code,e,r),this}get names(){return this.code instanceof Pe._CodeOrName?this.code.names:{}}},su=class extends Ds{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(CZ(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>xo(e,r.names),{})}},Ms=class extends su{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},ew=class extends su{},Qa=class extends Ms{};Qa.kind="else";var Oo=class t extends Ms{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Qa(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(hA(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Za(this.condition,e,r),this}get names(){let e=super.names;return vp(e,this.condition),this.else&&xo(e,this.else.names),e}};Oo.kind="if";var Po=class extends Ms{};Po.kind="for";var tw=class extends Po{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Za(this.iteration,e,r),this}get names(){return xo(super.names,this.iteration.names)}},rw=class extends Po{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Cn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=vp(super.names,this.from);return vp(e,this.to)}},_p=class extends Po{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Za(this.iterable,e,r),this}get names(){return xo(super.names,this.iterable.names)}},iu=class extends Ms{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};iu.kind="func";var ou=class extends su{render(e){return"return "+super.render(e)}};ou.kind="return";var nw=class extends Ms{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&xo(e,this.catch.names),this.finally&&xo(e,this.finally.names),e}},au=class extends Ms{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};au.kind="catch";var cu=class extends Ms{render(e){return"finally"+super.render(e)}};cu.kind="finally";var sw=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Cn.Scope({parent:e}),this._nodes=[new ew]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Kv(e,i,n)),i}const(e,r,n){return this._def(Cn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Cn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Cn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new yp(e,r,n))}add(e,r){return this._leafNode(new Jv(e,ge.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Pe.nil&&this._leafNode(new Zv(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Pe.addCodeArg)(r,s));return r.push("}"),new Pe._Code(r)}if(e,r,n){if(this._blockNode(new Oo(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Oo(e))}else(){return this._elseNode(new Qa)}endIf(){return this._endBlockNode(Oo,Qa)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new tw(e),r)}forRange(e,r,n,s,i=this.opts.es5?Cn.varKinds.var:Cn.varKinds.let){let o=this._scope.toName(e);return this._for(new rw(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Cn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Pe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Pe._)`${o}.length`,a=>{this.var(i,(0,Pe._)`${o}[${a}]`),n(i)})}return this._for(new _p("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Cn.varKinds.var:Cn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Pe._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new _p("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Po)}label(e){return this._leafNode(new Yv(e))}break(e){return this._leafNode(new Xv(e))}return(e){let r=new ou;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ou)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new nw;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new au(i),r(i)}return n&&(this._currNode=s.finally=new cu,this.code(n)),this._endBlockNode(au,cu)}throw(e){return this._leafNode(new Qv(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Pe.nil,n,s){return this._blockNode(new iu(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(iu)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Oo))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ge.CodeGen=sw;function xo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function vp(t,e){return e instanceof Pe._CodeOrName?xo(t,e.names):t}function Za(t,e,r){if(t instanceof Pe.Name)return n(t);if(!s(t))return t;return new Pe._Code(t._items.reduce((i,o)=>(o instanceof Pe.Name&&(o=n(o)),o instanceof Pe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Pe._Code&&i._items.some(o=>o instanceof Pe.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function CZ(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function hA(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Pe._)`!${iw(t)}`}ge.not=hA;var NZ=pA(ge.operators.AND);function IZ(...t){return t.reduce(NZ)}ge.and=IZ;var AZ=pA(ge.operators.OR);function kZ(...t){return t.reduce(AZ)}ge.or=kZ;function pA(t){return(e,r)=>e===Pe.nil?r:r===Pe.nil?e:(0,Pe._)`${iw(e)} ${t} ${iw(r)}`}function iw(t){return t instanceof Pe.Name?t:(0,Pe._)`(${t})`}});var De=E(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.checkStrictMode=we.getErrorPath=we.Type=we.useFunc=we.setEvaluated=we.evaluatedPropsToName=we.mergeEvaluated=we.eachItem=we.unescapeJsonPointer=we.escapeJsonPointer=we.escapeFragment=we.unescapeFragment=we.schemaRefOrVal=we.schemaHasRulesButRef=we.schemaHasRules=we.checkUnknownRules=we.alwaysValidSchema=we.toHash=void 0;var He=ve(),DZ=nu();function MZ(t){let e={};for(let r of t)e[r]=!0;return e}we.toHash=MZ;function jZ(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(yA(t,e),!_A(e,t.self.RULES.all))}we.alwaysValidSchema=jZ;function yA(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||bA(t,`unknown keyword: "${i}"`)}we.checkUnknownRules=yA;function _A(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}we.schemaHasRules=_A;function qZ(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}we.schemaHasRulesButRef=qZ;function LZ({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,He._)`${r}`}return(0,He._)`${t}${e}${(0,He.getProperty)(n)}`}we.schemaRefOrVal=LZ;function FZ(t){return vA(decodeURIComponent(t))}we.unescapeFragment=FZ;function UZ(t){return encodeURIComponent(aw(t))}we.escapeFragment=UZ;function aw(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}we.escapeJsonPointer=aw;function vA(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}we.unescapeJsonPointer=vA;function BZ(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}we.eachItem=BZ;function mA({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof He.Name?(i instanceof He.Name?t(s,i,o):e(s,i,o),o):i instanceof He.Name?(e(s,o,i),i):r(i,o);return a===He.Name&&!(c instanceof He.Name)?n(s,c):c}}we.mergeEvaluated={props:mA({mergeNames:(t,e,r)=>t.if((0,He._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,He._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,He._)`${r} || {}`).code((0,He._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,He._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,He._)`${r} || {}`),cw(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:wA}),items:mA({mergeNames:(t,e,r)=>t.if((0,He._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,He._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,He._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,He._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function wA(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,He._)`{}`);return e!==void 0&&cw(t,r,e),r}we.evaluatedPropsToName=wA;function cw(t,e,r){Object.keys(r).forEach(n=>t.assign((0,He._)`${e}${(0,He.getProperty)(n)}`,!0))}we.setEvaluated=cw;var gA={};function VZ(t,e){return t.scopeValue("func",{ref:e,code:gA[e.code]||(gA[e.code]=new DZ._Code(e.code))})}we.useFunc=VZ;var ow;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ow||(we.Type=ow={}));function zZ(t,e,r){if(t instanceof He.Name){let n=e===ow.Num;return r?n?(0,He._)`"[" + ${t} + "]"`:(0,He._)`"['" + ${t} + "']"`:n?(0,He._)`"/" + ${t}`:(0,He._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,He.getProperty)(t).toString():"/"+aw(t)}we.getErrorPath=zZ;function bA(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}we.checkStrictMode=bA});var js=E(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});var Kt=ve(),HZ={data:new Kt.Name("data"),valCxt:new Kt.Name("valCxt"),instancePath:new Kt.Name("instancePath"),parentData:new Kt.Name("parentData"),parentDataProperty:new Kt.Name("parentDataProperty"),rootData:new Kt.Name("rootData"),dynamicAnchors:new Kt.Name("dynamicAnchors"),vErrors:new Kt.Name("vErrors"),errors:new Kt.Name("errors"),this:new Kt.Name("this"),self:new Kt.Name("self"),scope:new Kt.Name("scope"),json:new Kt.Name("json"),jsonPos:new Kt.Name("jsonPos"),jsonLen:new Kt.Name("jsonLen"),jsonPart:new Kt.Name("jsonPart")};lw.default=HZ});var lu=E(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.extendErrors=Jt.resetErrorsCount=Jt.reportExtraError=Jt.reportError=Jt.keyword$DataError=Jt.keywordError=void 0;var Ne=ve(),bp=De(),dr=js();Jt.keywordError={message:({keyword:t})=>(0,Ne.str)`must pass "${t}" keyword validation`};Jt.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ne.str)`"${t}" keyword must be ${e} ($data)`:(0,Ne.str)`"${t}" keyword is invalid ($data)`};function GZ(t,e=Jt.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=RA(t,e,r);n??(o||a)?EA(i,c):SA(s,(0,Ne._)`[${c}]`)}Jt.reportError=GZ;function WZ(t,e=Jt.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=RA(t,e,r);EA(s,a),i||o||SA(n,dr.default.vErrors)}Jt.reportExtraError=WZ;function KZ(t,e){t.assign(dr.default.errors,e),t.if((0,Ne._)`${dr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ne._)`${dr.default.vErrors}.length`,e),()=>t.assign(dr.default.vErrors,null)))}Jt.resetErrorsCount=KZ;function JZ({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,dr.default.errors,a=>{t.const(o,(0,Ne._)`${dr.default.vErrors}[${a}]`),t.if((0,Ne._)`${o}.instancePath === undefined`,()=>t.assign((0,Ne._)`${o}.instancePath`,(0,Ne.strConcat)(dr.default.instancePath,i.errorPath))),t.assign((0,Ne._)`${o}.schemaPath`,(0,Ne.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ne._)`${o}.schema`,r),t.assign((0,Ne._)`${o}.data`,n))})}Jt.extendErrors=JZ;function EA(t,e){let r=t.const("err",e);t.if((0,Ne._)`${dr.default.vErrors} === null`,()=>t.assign(dr.default.vErrors,(0,Ne._)`[${r}]`),(0,Ne._)`${dr.default.vErrors}.push(${r})`),t.code((0,Ne._)`${dr.default.errors}++`)}function SA(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ne._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ne._)`${n}.errors`,e),r.return(!1))}var Co={keyword:new Ne.Name("keyword"),schemaPath:new Ne.Name("schemaPath"),params:new Ne.Name("params"),propertyName:new Ne.Name("propertyName"),message:new Ne.Name("message"),schema:new Ne.Name("schema"),parentSchema:new Ne.Name("parentSchema")};function RA(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ne._)`{}`:YZ(t,e,r)}function YZ(t,e,r={}){let{gen:n,it:s}=t,i=[XZ(s,r),QZ(t,r)];return ZZ(t,e,i),n.object(...i)}function XZ({errorPath:t},{instancePath:e}){let r=e?(0,Ne.str)`${t}${(0,bp.getErrorPath)(e,bp.Type.Str)}`:t;return[dr.default.instancePath,(0,Ne.strConcat)(dr.default.instancePath,r)]}function QZ({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ne.str)`${e}/${t}`;return r&&(s=(0,Ne.str)`${s}${(0,bp.getErrorPath)(r,bp.Type.Str)}`),[Co.schemaPath,s]}function ZZ(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([Co.keyword,s],[Co.params,typeof e=="function"?e(t):e||(0,Ne._)`{}`]),c.messages&&n.push([Co.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Co.schema,o],[Co.parentSchema,(0,Ne._)`${u}${d}`],[dr.default.data,i]),l&&n.push([Co.propertyName,l])}});var $A=E(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.boolOrEmptySchema=ec.topBoolOrEmptySchema=void 0;var eee=lu(),tee=ve(),ree=js(),nee={message:"boolean schema is false"};function see(t){let{gen:e,schema:r,validateName:n}=t;r===!1?TA(t,!1):typeof r=="object"&&r.$async===!0?e.return(ree.default.data):(e.assign((0,tee._)`${n}.errors`,null),e.return(!0))}ec.topBoolOrEmptySchema=see;function iee(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),TA(t)):r.var(e,!0)}ec.boolOrEmptySchema=iee;function TA(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,eee.reportError)(s,nee,void 0,e)}});var uw=E(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.getRules=tc.isJSONType=void 0;var oee=["string","number","integer","boolean","null","object","array"],aee=new Set(oee);function cee(t){return typeof t=="string"&&aee.has(t)}tc.isJSONType=cee;function lee(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}tc.getRules=lee});var fw=E(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.shouldUseRule=wi.shouldUseGroup=wi.schemaHasRulesForType=void 0;function uee({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&OA(t,n)}wi.schemaHasRulesForType=uee;function OA(t,e){return e.rules.some(r=>PA(t,r))}wi.shouldUseGroup=OA;function PA(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}wi.shouldUseRule=PA});var uu=E(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.reportTypeError=Yt.checkDataTypes=Yt.checkDataType=Yt.coerceAndCheckDataType=Yt.getJSONTypes=Yt.getSchemaTypes=Yt.DataType=void 0;var fee=uw(),dee=fw(),hee=lu(),ue=ve(),xA=De(),rc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(rc||(Yt.DataType=rc={}));function pee(t){let e=CA(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Yt.getSchemaTypes=pee;function CA(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(fee.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Yt.getJSONTypes=CA;function mee(t,e){let{gen:r,data:n,opts:s}=t,i=gee(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,dee.schemaHasRulesForType)(t,e[0]));if(o){let a=hw(e,n,s.strictNumbers,rc.Wrong);r.if(a,()=>{i.length?yee(t,e,i):pw(t)})}return o}Yt.coerceAndCheckDataType=mee;var NA=new Set(["string","number","integer","boolean","null"]);function gee(t,e){return e?t.filter(r=>NA.has(r)||e==="array"&&r==="array"):[]}function yee(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,ue._)`typeof ${s}`),a=n.let("coerced",(0,ue._)`undefined`);i.coerceTypes==="array"&&n.if((0,ue._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ue._)`${s}[0]`).assign(o,(0,ue._)`typeof ${s}`).if(hw(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ue._)`${a} !== undefined`);for(let l of r)(NA.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),pw(t),n.endIf(),n.if((0,ue._)`${a} !== undefined`,()=>{n.assign(s,a),_ee(t,a)});function c(l){switch(l){case"string":n.elseIf((0,ue._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ue._)`"" + ${s}`).elseIf((0,ue._)`${s} === null`).assign(a,(0,ue._)`""`);return;case"number":n.elseIf((0,ue._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ue._)`+${s}`);return;case"integer":n.elseIf((0,ue._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ue._)`+${s}`);return;case"boolean":n.elseIf((0,ue._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ue._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ue._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ue._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ue._)`[${s}]`)}}}function _ee({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ue._)`${e} !== undefined`,()=>t.assign((0,ue._)`${e}[${r}]`,n))}function dw(t,e,r,n=rc.Correct){let s=n===rc.Correct?ue.operators.EQ:ue.operators.NEQ,i;switch(t){case"null":return(0,ue._)`${e} ${s} null`;case"array":i=(0,ue._)`Array.isArray(${e})`;break;case"object":i=(0,ue._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,ue._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,ue._)`typeof ${e} ${s} ${t}`}return n===rc.Correct?i:(0,ue.not)(i);function o(a=ue.nil){return(0,ue.and)((0,ue._)`typeof ${e} == "number"`,a,r?(0,ue._)`isFinite(${e})`:ue.nil)}}Yt.checkDataType=dw;function hw(t,e,r,n){if(t.length===1)return dw(t[0],e,r,n);let s,i=(0,xA.toHash)(t);if(i.array&&i.object){let o=(0,ue._)`typeof ${e} != "object"`;s=i.null?o:(0,ue._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ue.nil;i.number&&delete i.integer;for(let o in i)s=(0,ue.and)(s,dw(o,e,r,n));return s}Yt.checkDataTypes=hw;var vee={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ue._)`{type: ${t}}`:(0,ue._)`{type: ${e}}`};function pw(t){let e=wee(t);(0,hee.reportError)(e,vee)}Yt.reportTypeError=pw;function wee(t){let{gen:e,data:r,schema:n}=t,s=(0,xA.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var AA=E(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.assignDefaults=void 0;var nc=ve(),bee=De();function Eee(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)IA(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>IA(t,i,s.default))}Ep.assignDefaults=Eee;function IA(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,nc._)`${i}${(0,nc.getProperty)(e)}`;if(s){(0,bee.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,nc._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,nc._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,nc._)`${a} = ${(0,nc.stringify)(r)}`)}});var en=E(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.validateUnion=Be.validateArray=Be.usePattern=Be.callValidateCode=Be.schemaProperties=Be.allSchemaProperties=Be.noPropertyInData=Be.propertyInData=Be.isOwnProperty=Be.hasPropFunc=Be.reportMissingProp=Be.checkMissingProp=Be.checkReportMissingProp=void 0;var Qe=ve(),mw=De(),bi=js(),See=De();function Ree(t,e){let{gen:r,data:n,it:s}=t;r.if(yw(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Qe._)`${e}`},!0),t.error()})}Be.checkReportMissingProp=Ree;function Tee({gen:t,data:e,it:{opts:r}},n,s){return(0,Qe.or)(...n.map(i=>(0,Qe.and)(yw(t,e,i,r.ownProperties),(0,Qe._)`${s} = ${i}`)))}Be.checkMissingProp=Tee;function $ee(t,e){t.setParams({missingProperty:e},!0),t.error()}Be.reportMissingProp=$ee;function kA(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Qe._)`Object.prototype.hasOwnProperty`})}Be.hasPropFunc=kA;function gw(t,e,r){return(0,Qe._)`${kA(t)}.call(${e}, ${r})`}Be.isOwnProperty=gw;function Oee(t,e,r,n){let s=(0,Qe._)`${e}${(0,Qe.getProperty)(r)} !== undefined`;return n?(0,Qe._)`${s} && ${gw(t,e,r)}`:s}Be.propertyInData=Oee;function yw(t,e,r,n){let s=(0,Qe._)`${e}${(0,Qe.getProperty)(r)} === undefined`;return n?(0,Qe.or)(s,(0,Qe.not)(gw(t,e,r))):s}Be.noPropertyInData=yw;function DA(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Be.allSchemaProperties=DA;function Pee(t,e){return DA(e).filter(r=>!(0,mw.alwaysValidSchema)(t,e[r]))}Be.schemaProperties=Pee;function xee({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,Qe._)`${t}, ${e}, ${n}${s}`:e,d=[[bi.default.instancePath,(0,Qe.strConcat)(bi.default.instancePath,i)],[bi.default.parentData,o.parentData],[bi.default.parentDataProperty,o.parentDataProperty],[bi.default.rootData,bi.default.rootData]];o.opts.dynamicRef&&d.push([bi.default.dynamicAnchors,bi.default.dynamicAnchors]);let p=(0,Qe._)`${u}, ${r.object(...d)}`;return c!==Qe.nil?(0,Qe._)`${a}.call(${c}, ${p})`:(0,Qe._)`${a}(${p})`}Be.callValidateCode=xee;var Cee=(0,Qe._)`new RegExp`;function Nee({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Qe._)`${s.code==="new RegExp"?Cee:(0,See.useFunc)(t,s)}(${r}, ${n})`})}Be.usePattern=Nee;function Iee(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,Qe._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:mw.Type.Num},i),e.if((0,Qe.not)(i),a)})}}Be.validateArray=Iee;function Aee(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,mw.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,Qe._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,Qe.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Be.validateUnion=Aee});var qA=E(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.validateKeywordUsage=is.validSchemaType=is.funcKeywordCode=is.macroKeywordCode=void 0;var hr=ve(),No=js(),kee=en(),Dee=lu();function Mee(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=jA(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:hr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}is.macroKeywordCode=Mee;function jee(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;Lee(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=jA(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&MA(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&MA(t),y(()=>qee(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,hr._)`await `),w=>n.assign(d,!1).if((0,hr._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,hr._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,hr._)`${u}.errors`;return n.assign(g,null),m(hr.nil),g}function m(g=e.async?(0,hr._)`await `:hr.nil){let w=c.opts.passContext?No.default.this:No.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,hr._)`${g}${(0,kee.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,hr.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}is.funcKeywordCode=jee;function MA(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,hr._)`${n.parentData}[${n.parentDataProperty}]`))}function qee(t,e){let{gen:r}=t;r.if((0,hr._)`Array.isArray(${e})`,()=>{r.assign(No.default.vErrors,(0,hr._)`${No.default.vErrors} === null ? ${e} : ${No.default.vErrors}.concat(${e})`).assign(No.default.errors,(0,hr._)`${No.default.vErrors}.length`),(0,Dee.extendErrors)(t)},()=>t.error())}function Lee({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function jA(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,hr.stringify)(r)})}function Fee(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}is.validSchemaType=Fee;function Uee({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}is.validateKeywordUsage=Uee});var FA=E(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.extendSubschemaMode=Ei.extendSubschemaData=Ei.getSubschema=void 0;var os=ve(),LA=De();function Bee(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,os._)`${t.schemaPath}${(0,os.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,os._)`${t.schemaPath}${(0,os.getProperty)(e)}${(0,os.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,LA.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Ei.getSubschema=Bee;function Vee(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,os._)`${e.data}${(0,os.getProperty)(r)}`,!0);c(p),t.errorPath=(0,os.str)`${l}${(0,LA.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,os._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof os.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Ei.extendSubschemaData=Vee;function zee(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Ei.extendSubschemaMode=zee});var qs=E((kNe,UA)=>{"use strict";UA.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var VA=E((DNe,BA)=>{"use strict";var Si=BA.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Sp(e,n,s,t,"",t)};Si.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Si.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Si.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Si.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Sp(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Si.arrayKeywords)for(var p=0;p<d.length;p++)Sp(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Si.propsKeywords){if(d&&typeof d=="object")for(var f in d)Sp(t,e,r,d[f],s+"/"+u+"/"+Hee(f),i,s,u,n,f)}else(u in Si.keywords||t.allKeys&&!(u in Si.skipKeywords))&&Sp(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function Hee(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var fu=E(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getSchemaRefs=Nr.resolveUrl=Nr.normalizeId=Nr._getFullPath=Nr.getFullPath=Nr.inlineRef=void 0;var Gee=De(),Wee=qs(),Kee=VA(),Jee=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Yee(t,e=!0){return typeof t=="boolean"?!0:e===!0?!_w(t):e?zA(t)<=e:!1}Nr.inlineRef=Yee;var Xee=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _w(t){for(let e in t){if(Xee.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(_w)||typeof r=="object"&&_w(r))return!0}return!1}function zA(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Jee.has(r)&&(typeof t[r]=="object"&&(0,Gee.eachItem)(t[r],n=>e+=zA(n)),e===1/0))return 1/0}return e}function HA(t,e="",r){r!==!1&&(e=sc(e));let n=t.parse(e);return GA(t,n)}Nr.getFullPath=HA;function GA(t,e){return t.serialize(e).split("#")[0]+"#"}Nr._getFullPath=GA;var Qee=/#\/?$/;function sc(t){return t?t.replace(Qee,""):""}Nr.normalizeId=sc;function Zee(t,e,r){return r=sc(r),t.resolve(e,r)}Nr.resolveUrl=Zee;var ete=/^[a-z_][-a-z0-9._]*$/i;function tte(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=sc(t[r]||e),i={"":s},o=HA(n,s,!1),a={},c=new Set;return Kee(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=sc(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==sc(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!ete.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!Wee(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Nr.getSchemaRefs=tte});var pu=E(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getData=Ri.KeywordCxt=Ri.validateFunctionCode=void 0;var XA=$A(),WA=uu(),ww=fw(),Rp=uu(),rte=AA(),hu=qA(),vw=FA(),X=ve(),se=js(),nte=fu(),Ls=De(),du=lu();function ste(t){if(ek(t)&&(tk(t),ZA(t))){ate(t);return}QA(t,()=>(0,XA.topBoolOrEmptySchema)(t))}Ri.validateFunctionCode=ste;function QA({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,X._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,X._)`"use strict"; ${KA(r,s)}`),ote(t,s),t.code(i)}):t.func(e,(0,X._)`${se.default.data}, ${ite(s)}`,n.$async,()=>t.code(KA(r,s)).code(i))}function ite(t){return(0,X._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,X._)`, ${se.default.dynamicAnchors}={}`:X.nil}}={}`}function ote(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,X._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,X._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,X._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,X._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,X._)`""`),t.var(se.default.parentData,(0,X._)`undefined`),t.var(se.default.parentDataProperty,(0,X._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`{}`)})}function ate(t){let{schema:e,opts:r,gen:n}=t;QA(t,()=>{r.$comment&&e.$comment&&nk(t),dte(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&cte(t),rk(t),mte(t)})}function cte(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function KA(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function lte(t,e){if(ek(t)&&(tk(t),ZA(t))){ute(t,e);return}(0,XA.boolOrEmptySchema)(t,e)}function ZA({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function ek(t){return typeof t.schema!="boolean"}function ute(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&nk(t),hte(t),pte(t);let i=n.const("_errs",se.default.errors);rk(t,i),n.var(e,(0,X._)`${i} === ${se.default.errors}`)}function tk(t){(0,Ls.checkUnknownRules)(t),fte(t)}function rk(t,e){if(t.opts.jtd)return JA(t,[],!1,e);let r=(0,WA.getSchemaTypes)(t.schema),n=(0,WA.coerceAndCheckDataType)(t,r);JA(t,r,!n,e)}function fte(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Ls.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function dte(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ls.checkStrictMode)(t,"default is ignored in the schema root")}function hte(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,nte.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function pte(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function nk({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,X._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,X.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function mte(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,X._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,X._)`new ${s}(${se.default.vErrors})`)):(e.assign((0,X._)`${n}.errors`,se.default.vErrors),i.unevaluated&&gte(t),e.return((0,X._)`${se.default.errors} === 0`))}function gte({gen:t,evaluated:e,props:r,items:n}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),n instanceof X.Name&&t.assign((0,X._)`${e}.items`,n)}function JA(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,Ls.schemaHasRulesButRef)(i,u))){s.block(()=>ik(t,"$ref",u.all.$ref.definition));return}c.jtd||yte(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,ww.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Rp.checkDataType)(p.type,o,c.strictNumbers)),YA(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Rp.reportTypeError)(t)),s.endIf()):YA(t,p),a||s.if((0,X._)`${se.default.errors} === ${n||0}`))}}function YA(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,rte.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,ww.shouldUseRule)(n,i)&&ik(t,i.keyword,i.definition,e.type)})}function yte(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(_te(t,e),t.opts.allowUnionTypes||vte(t,e),wte(t,t.dataTypes))}function _te(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{sk(t.dataTypes,r)||bw(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Ete(t,e)}}function vte(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&bw(t,"use allowUnionTypes to allow union type keyword")}function wte(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,ww.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>bte(e,o))&&bw(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function bte(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function sk(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Ete(t,e){let r=[];for(let n of t.dataTypes)sk(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function bw(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ls.checkStrictMode)(t,e,t.opts.strictTypes)}var Tp=class{constructor(e,r,n){if((0,hu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ls.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",ok(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,hu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,X.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?du.reportExtraError:du.reportError)(this,this.def.error,r)}$dataError(){(0,du.reportError)(this,this.def.$dataError||du.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,du.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=X.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,X.or)(o(),a());function o(){if(n.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,X._)`${(0,Rp.checkDataTypes)(c,r,i.opts.strictNumbers,Rp.DataType.Wrong)}`}return X.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${c}(${r})`}return X.nil}}subschema(e,r){let n=(0,vw.getSubschema)(this.it,e);(0,vw.extendSubschemaData)(n,this.it,e),(0,vw.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return lte(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Ls.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Ls.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}};Ri.KeywordCxt=Tp;function ik(t,e,r,n){let s=new Tp(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,hu.funcKeywordCode)(s,r):"macro"in r?(0,hu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,hu.funcKeywordCode)(s,r)}var Ste=/^\/(?:[^~]|~0|~1)*$/,Rte=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ok(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!Ste.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=se.default.rootData}else{let l=Rte.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,X._)`${i}${(0,X.getProperty)((0,Ls.unescapeJsonPointer)(l))}`,o=(0,X._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Ri.getData=ok});var $p=E(Sw=>{"use strict";Object.defineProperty(Sw,"__esModule",{value:!0});var Ew=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Sw.default=Ew});var mu=E($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});var Rw=fu(),Tw=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Rw.resolveUrl)(e,r,n),this.missingSchema=(0,Rw.normalizeId)((0,Rw.getFullPath)(e,this.missingRef))}};$w.default=Tw});var Pp=E(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.resolveSchema=tn.getCompilingSchema=tn.resolveRef=tn.compileSchema=tn.SchemaEnv=void 0;var Nn=ve(),Tte=$p(),Io=js(),In=fu(),ak=De(),$te=pu(),ic=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,In.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};tn.SchemaEnv=ic;function Pw(t){let e=ck.call(this,t);if(e)return e;let r=(0,In.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Nn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Tte.default,code:(0,Nn._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:Io.default.data,parentData:Io.default.parentData,parentDataProperty:Io.default.parentDataProperty,dataNames:[Io.default.data],dataPathArr:[Nn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Nn.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Nn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Nn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,$te.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(Io.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${Io.default.self}`,`${Io.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof Nn.Name?void 0:h,items:m instanceof Nn.Name?void 0:m,dynamicProps:h instanceof Nn.Name,dynamicItems:m instanceof Nn.Name},f.source&&(f.source.evaluated=(0,Nn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}tn.compileSchema=Pw;function Ote(t,e,r){var n;r=(0,In.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Cte.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new ic({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Pte.call(this,i)}tn.resolveRef=Ote;function Pte(t){return(0,In.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Pw.call(this,t)}function ck(t){for(let e of this._compilations)if(xte(e,t))return e}tn.getCompilingSchema=ck;function xte(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Cte(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Op.call(this,t,e)}function Op(t,e){let r=this.opts.uriResolver.parse(e),n=(0,In._getFullPath)(this.opts.uriResolver,r),s=(0,In.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Ow.call(this,r,t);let i=(0,In.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Op.call(this,t,o);return typeof a?.schema!="object"?void 0:Ow.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Pw.call(this,o),i===(0,In.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,In.resolveUrl)(this.opts.uriResolver,s,l)),new ic({schema:a,schemaId:c,root:t,baseId:s})}return Ow.call(this,r,o)}}tn.resolveSchema=Op;var Nte=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ow(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,ak.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Nte.has(a)&&l&&(e=(0,In.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,ak.schemaHasRulesButRef)(r,this.RULES)){let a=(0,In.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Op.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new ic({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var lk=E((UNe,Ite)=>{Ite.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Cw=E((BNe,hk)=>{"use strict";var Ate=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),fk=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function xw(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}var kte=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function uk(t){return t.length=0,!0}function Dte(t,e,r){if(t.length){let n=xw(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function Mte(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=Dte;for(let c=0;c<t.length;c++){let l=t[c];if(!(l==="["||l==="]"))if(l===":"){if(i===!0&&(o=!0),!a(s,n,r))break;if(++e>7){r.error=!0;break}c>0&&t[c-1]===":"&&(i=!0),n.push(":");continue}else if(l==="%"){if(!a(s,n,r))break;a=uk}else{s.push(l);continue}}return s.length&&(a===uk?r.zone=s.join(""):o?n.push(s.join("")):n.push(xw(s))),r.address=n.join(""),r}function dk(t){if(jte(t,":")<2)return{host:t,isIPV6:!1};let e=Mte(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function jte(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function qte(t){let e=t,r=[],n=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(s===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function Lte(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Fte(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!fk(r)){let n=dk(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}hk.exports={nonSimpleDomain:kte,recomposeAuthority:Fte,normalizeComponentEncoding:Lte,removeDotSegments:qte,isIPv4:fk,isUUID:Ate,normalizeIPv6:dk,stringArrayToHexStripped:xw}});var _k=E((VNe,yk)=>{"use strict";var{isUUID:Ute}=Cw(),Bte=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,Vte=["http","https","ws","wss","urn","urn:uuid"];function zte(t){return Vte.indexOf(t)!==-1}function Nw(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function pk(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function mk(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Hte(t){return t.secure=Nw(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Gte(t){if((t.port===(Nw(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Wte(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(Bte);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=Iw(s);t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Kte(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=Iw(s);i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function Jte(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!Ute(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Yte(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var gk={scheme:"http",domainHost:!0,parse:pk,serialize:mk},Xte={scheme:"https",domainHost:gk.domainHost,parse:pk,serialize:mk},xp={scheme:"ws",domainHost:!0,parse:Hte,serialize:Gte},Qte={scheme:"wss",domainHost:xp.domainHost,parse:xp.parse,serialize:xp.serialize},Zte={scheme:"urn",parse:Wte,serialize:Kte,skipNormalize:!0},ere={scheme:"urn:uuid",parse:Jte,serialize:Yte,skipNormalize:!0},Cp={http:gk,https:Xte,ws:xp,wss:Qte,urn:Zte,"urn:uuid":ere};Object.setPrototypeOf(Cp,null);function Iw(t){return t&&(Cp[t]||Cp[t.toLowerCase()])||void 0}yk.exports={wsIsSecure:Nw,SCHEMES:Cp,isValidSchemeName:zte,getSchemeHandler:Iw}});var oc=E((zNe,Ip)=>{"use strict";var{normalizeIPv6:tre,removeDotSegments:gu,recomposeAuthority:rre,normalizeComponentEncoding:Np,isIPv4:nre,nonSimpleDomain:sre}=Cw(),{SCHEMES:ire,getSchemeHandler:vk}=_k();function ore(t,e){return typeof t=="string"?t=as(Fs(t,e),e):typeof t=="object"&&(t=Fs(as(t,e),e)),t}function are(t,e,r){let n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=wk(Fs(t,n),Fs(e,n),n,!0);return n.skipEscape=!0,as(s,n)}function wk(t,e,r,n){let s={};return n||(t=Fs(as(t,r),r),e=Fs(as(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=gu(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=gu(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=gu(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=gu(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function cre(t,e,r){return typeof t=="string"?(t=unescape(t),t=as(Np(Fs(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=as(Np(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=as(Np(Fs(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=as(Np(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function as(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=vk(n.scheme||r.scheme);i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let o=rre(r);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=gu(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var lre=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Fs(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);let i=t.match(lre);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host)if(nre(n.host)===!1){let c=tre(n.host);n.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=vk(r.scheme||n.scheme);if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&s===!1&&sre(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Aw={SCHEMES:ire,normalize:ore,resolve:are,resolveComponent:wk,equal:cre,serialize:as,parse:Fs};Ip.exports=Aw;Ip.exports.default=Aw;Ip.exports.fastUri=Aw});var Ek=E(kw=>{"use strict";Object.defineProperty(kw,"__esModule",{value:!0});var bk=oc();bk.code='require("ajv/dist/runtime/uri").default';kw.default=bk});var Ck=E(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.CodeGen=jt.Name=jt.nil=jt.stringify=jt.str=jt._=jt.KeywordCxt=void 0;var ure=pu();Object.defineProperty(jt,"KeywordCxt",{enumerable:!0,get:function(){return ure.KeywordCxt}});var ac=ve();Object.defineProperty(jt,"_",{enumerable:!0,get:function(){return ac._}});Object.defineProperty(jt,"str",{enumerable:!0,get:function(){return ac.str}});Object.defineProperty(jt,"stringify",{enumerable:!0,get:function(){return ac.stringify}});Object.defineProperty(jt,"nil",{enumerable:!0,get:function(){return ac.nil}});Object.defineProperty(jt,"Name",{enumerable:!0,get:function(){return ac.Name}});Object.defineProperty(jt,"CodeGen",{enumerable:!0,get:function(){return ac.CodeGen}});var fre=$p(),Ok=mu(),dre=uw(),yu=Pp(),hre=ve(),_u=fu(),Ap=uu(),Mw=De(),Sk=lk(),pre=Ek(),Pk=(t,e)=>new RegExp(t,e);Pk.code="new RegExp";var mre=["removeAdditional","useDefaults","coerceTypes"],gre=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),yre={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_re={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Rk=200;function vre(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,R,O,T;let P=t.strict,I=(e=t.code)===null||e===void 0?void 0:e.optimize,C=I===!0||I===void 0?1:I||0,N=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Pk,B=(s=t.uriResolver)!==null&&s!==void 0?s:pre.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:C,regExp:N}:{optimize:C,regExp:N},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:Rk,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:Rk,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(R=t.validateFormats)!==null&&R!==void 0?R:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:B}}var vu=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...vre(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new hre.ValueScope({scope:{},prefixes:gre,es5:r,lines:n}),this.logger=Tre(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,dre.getRules)(),Tk.call(this,yre,e,"NOT SUPPORTED"),Tk.call(this,_re,e,"DEPRECATED","warn"),this._metaOpts=Sre.call(this),e.formats&&bre.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Ere.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),wre.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Sk;n==="id"&&(s={...Sk},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof Ok.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,_u.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=$k.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new yu.SchemaEnv({schema:{},schemaId:n});if(r=yu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=$k.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,_u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ore.call(this,n,r),!r)return(0,Mw.eachItem)(n,i=>Dw.call(this,i)),this;xre.call(this,r);let s={...r,type:(0,Ap.getJSONTypes)(r.type),schemaType:(0,Ap.getJSONTypes)(r.schemaType)};return(0,Mw.eachItem)(n,s.type.length===0?i=>Dw.call(this,i,s):i=>s.type.forEach(o=>Dw.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=xk(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,_u.normalizeId)(o||n);let l=_u.getSchemaRefs.call(this,e,n);return c=new yu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):yu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{yu.compileSchema.call(this,e)}finally{this.opts=r}}};vu.ValidationError=fre.default;vu.MissingRefError=Ok.default;jt.default=vu;function Tk(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function $k(t){return t=(0,_u.normalizeId)(t),this.schemas[t]||this.refs[t]}function wre(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function bre(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Ere(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Sre(){let t={...this.opts};for(let e of mre)delete t[e];return t}var Rre={log(){},warn(){},error(){}};function Tre(t){if(t===!1)return Rre;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var $re=/^[a-z_$][a-z0-9_$:-]*$/i;function Ore(t,e){let{RULES:r}=this;if((0,Mw.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!$re.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Dw(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Ap.getJSONTypes)(e.type),schemaType:(0,Ap.getJSONTypes)(e.schemaType)}};e.before?Pre.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function Pre(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function xre(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=xk(e)),t.validateSchema=this.compile(e,!0))}var Cre={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function xk(t){return{anyOf:[t,Cre]}}});var Nk=E(jw=>{"use strict";Object.defineProperty(jw,"__esModule",{value:!0});var Nre={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};jw.default=Nre});var Dk=E(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.callRef=Ao.getValidate=void 0;var Ire=mu(),Ik=en(),Ir=ve(),cc=js(),Ak=Pp(),kp=De(),Are={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=Ak.resolveRef.call(c,l,s,r);if(u===void 0)throw new Ire.default(n.opts.uriResolver,s,r);if(u instanceof Ak.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return Dp(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return Dp(t,(0,Ir._)`${h}.validate`,l,l.$async)}function p(h){let m=kk(t,h);Dp(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Ir.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Ir.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function kk(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ir._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ao.getValidate=kk;function Dp(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?cc.default.this:Ir.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Ir._)`await ${(0,Ik.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Ir._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,Ik.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Ir._)`${h}.errors`;s.assign(cc.default.vErrors,(0,Ir._)`${cc.default.vErrors} === null ? ${m} : ${cc.default.vErrors}.concat(${m})`),s.assign(cc.default.errors,(0,Ir._)`${cc.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=kp.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Ir._)`${h}.evaluated.props`);i.props=kp.mergeEvaluated.props(s,g,i.props,Ir.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=kp.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Ir._)`${h}.evaluated.items`);i.items=kp.mergeEvaluated.items(s,g,i.items,Ir.Name)}}}Ao.callRef=Dp;Ao.default=Are});var Mk=E(qw=>{"use strict";Object.defineProperty(qw,"__esModule",{value:!0});var kre=Nk(),Dre=Dk(),Mre=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",kre.default,Dre.default];qw.default=Mre});var jk=E(Lw=>{"use strict";Object.defineProperty(Lw,"__esModule",{value:!0});var Mp=ve(),Ti=Mp.operators,jp={maximum:{okStr:"<=",ok:Ti.LTE,fail:Ti.GT},minimum:{okStr:">=",ok:Ti.GTE,fail:Ti.LT},exclusiveMaximum:{okStr:"<",ok:Ti.LT,fail:Ti.GTE},exclusiveMinimum:{okStr:">",ok:Ti.GT,fail:Ti.LTE}},jre={message:({keyword:t,schemaCode:e})=>(0,Mp.str)`must be ${jp[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Mp._)`{comparison: ${jp[t].okStr}, limit: ${e}}`},qre={keyword:Object.keys(jp),type:"number",schemaType:"number",$data:!0,error:jre,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Mp._)`${r} ${jp[e].fail} ${n} || isNaN(${r})`)}};Lw.default=qre});var qk=E(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});var wu=ve(),Lre={message:({schemaCode:t})=>(0,wu.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,wu._)`{multipleOf: ${t}}`},Fre={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Lre,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,wu._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,wu._)`${o} !== parseInt(${o})`;t.fail$data((0,wu._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Fw.default=Fre});var Fk=E(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});function Lk(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Uw.default=Lk;Lk.code='require("ajv/dist/runtime/ucs2length").default'});var Uk=E(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});var ko=ve(),Ure=De(),Bre=Fk(),Vre={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ko.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ko._)`{limit: ${t}}`},zre={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vre,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ko.operators.GT:ko.operators.LT,o=s.opts.unicode===!1?(0,ko._)`${r}.length`:(0,ko._)`${(0,Ure.useFunc)(t.gen,Bre.default)}(${r})`;t.fail$data((0,ko._)`${o} ${i} ${n}`)}};Bw.default=zre});var Bk=E(Vw=>{"use strict";Object.defineProperty(Vw,"__esModule",{value:!0});var Hre=en(),qp=ve(),Gre={message:({schemaCode:t})=>(0,qp.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,qp._)`{pattern: ${t}}`},Wre={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Gre,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,qp._)`(new RegExp(${s}, ${o}))`:(0,Hre.usePattern)(t,n);t.fail$data((0,qp._)`!${a}.test(${e})`)}};Vw.default=Wre});var Vk=E(zw=>{"use strict";Object.defineProperty(zw,"__esModule",{value:!0});var bu=ve(),Kre={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,bu.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,bu._)`{limit: ${t}}`},Jre={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kre,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?bu.operators.GT:bu.operators.LT;t.fail$data((0,bu._)`Object.keys(${r}).length ${s} ${n}`)}};zw.default=Jre});var zk=E(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});var Eu=en(),Su=ve(),Yre=De(),Xre={message:({params:{missingProperty:t}})=>(0,Su.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Su._)`{missingProperty: ${t}}`},Qre={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Xre,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,Yre.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(Su.nil,d);else for(let f of r)(0,Eu.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Eu.checkMissingProp)(t,r,f)),(0,Eu.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Eu.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Eu.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Su.not)(h),()=>{t.error(),e.break()})},Su.nil)}}};Hw.default=Qre});var Hk=E(Gw=>{"use strict";Object.defineProperty(Gw,"__esModule",{value:!0});var Ru=ve(),Zre={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Ru.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Ru._)`{limit: ${t}}`},ene={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Zre,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Ru.operators.GT:Ru.operators.LT;t.fail$data((0,Ru._)`${r}.length ${s} ${n}`)}};Gw.default=ene});var Tu=E(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});var Gk=qs();Gk.code='require("ajv/dist/runtime/equal").default';Ww.default=Gk});var Wk=E(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});var Kw=uu(),qt=ve(),tne=De(),rne=Tu(),nne={message:({params:{i:t,j:e}})=>(0,qt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,qt._)`{i: ${t}, j: ${e}}`},sne={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:nne,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,Kw.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,qt._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,qt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,qt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,Kw.checkDataTypes)(l,y,a.opts.strictNumbers,Kw.DataType.Wrong),w=e.const("indices",(0,qt._)`{}`);e.for((0,qt._)`;${h}--;`,()=>{e.let(y,(0,qt._)`${r}[${h}]`),e.if(g,(0,qt._)`continue`),l.length>1&&e.if((0,qt._)`typeof ${y} == "string"`,(0,qt._)`${y} += "_"`),e.if((0,qt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,qt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,qt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,tne.useFunc)(e,rne.default),g=e.name("outer");e.label(g).for((0,qt._)`;${h}--;`,()=>e.for((0,qt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,qt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};Jw.default=sne});var Kk=E(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});var Yw=ve(),ine=De(),one=Tu(),ane={message:"must be equal to constant",params:({schemaCode:t})=>(0,Yw._)`{allowedValue: ${t}}`},cne={keyword:"const",$data:!0,error:ane,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Yw._)`!${(0,ine.useFunc)(e,one.default)}(${r}, ${s})`):t.fail((0,Yw._)`${i} !== ${r}`)}};Xw.default=cne});var Jk=E(Qw=>{"use strict";Object.defineProperty(Qw,"__esModule",{value:!0});var $u=ve(),lne=De(),une=Tu(),fne={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,$u._)`{allowedValues: ${t}}`},dne={keyword:"enum",schemaType:"array",$data:!0,error:fne,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,lne.useFunc)(e,une.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,$u.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,$u._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,$u._)`${l()}(${r}, ${f}[${h}])`:(0,$u._)`${r} === ${m}`}}};Qw.default=dne});var Yk=E(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});var hne=jk(),pne=qk(),mne=Uk(),gne=Bk(),yne=Vk(),_ne=zk(),vne=Hk(),wne=Wk(),bne=Kk(),Ene=Jk(),Sne=[hne.default,pne.default,mne.default,gne.default,yne.default,_ne.default,vne.default,wne.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},bne.default,Ene.default];Zw.default=Sne});var tb=E(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.validateAdditionalItems=void 0;var Do=ve(),eb=De(),Rne={message:({params:{len:t}})=>(0,Do.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Do._)`{limit: ${t}}`},Tne={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Rne,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,eb.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Xk(t,n)}};function Xk(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Do._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Do._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,eb.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,Do._)`${a} <= ${e.length}`);r.if((0,Do.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:eb.Type.Num},l),o.allErrors||r.if((0,Do.not)(l),()=>r.break())})}}Ou.validateAdditionalItems=Xk;Ou.default=Tne});var rb=E(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.validateTuple=void 0;var Qk=ve(),Lp=De(),$ne=en(),One={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Zk(t,"additionalItems",e);r.items=!0,!(0,Lp.alwaysValidSchema)(r,e)&&t.ok((0,$ne.validateArray)(t))}};function Zk(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Lp.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,Qk._)`${i}.length`);r.forEach((d,p)=>{(0,Lp.alwaysValidSchema)(a,d)||(n.if((0,Qk._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Lp.checkStrictMode)(a,y,p.strictTuples)}}}Pu.validateTuple=Zk;Pu.default=One});var eD=E(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});var Pne=rb(),xne={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Pne.validateTuple)(t,"items")};nb.default=xne});var rD=E(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0});var tD=ve(),Cne=De(),Nne=en(),Ine=tb(),Ane={message:({params:{len:t}})=>(0,tD.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,tD._)`{limit: ${t}}`},kne={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ane,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Cne.alwaysValidSchema)(n,e)&&(s?(0,Ine.validateAdditionalItems)(t,s):t.ok((0,Nne.validateArray)(t)))}};sb.default=kne});var nD=E(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0});var rn=ve(),Fp=De(),Dne={message:({params:{min:t,max:e}})=>e===void 0?(0,rn.str)`must contain at least ${t} valid item(s)`:(0,rn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,rn._)`{minContains: ${t}}`:(0,rn._)`{minContains: ${t}, maxContains: ${e}}`},Mne={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Dne,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,rn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Fp.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Fp.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Fp.alwaysValidSchema)(i,r)){let m=(0,rn._)`${u} >= ${o}`;a!==void 0&&(m=(0,rn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,rn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:Fp.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,rn._)`${m}++`),a===void 0?e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,rn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};ib.default=Mne});var oD=E(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.validateSchemaDeps=cs.validatePropertyDeps=cs.error=void 0;var ob=ve(),jne=De(),xu=en();cs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,ob.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,ob._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var qne={keyword:"dependencies",type:"object",schemaType:"object",error:cs.error,code(t){let[e,r]=Lne(t);sD(t,e),iD(t,r)}};function Lne({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function sD(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,xu.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,xu.checkReportMissingProp)(t,l)}):(r.if((0,ob._)`${c} && (${(0,xu.checkMissingProp)(t,a,i)})`),(0,xu.reportMissingProp)(t,i),r.else())}}cs.validatePropertyDeps=sD;function iD(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,jne.alwaysValidSchema)(i,e[a])||(r.if((0,xu.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}cs.validateSchemaDeps=iD;cs.default=qne});var cD=E(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});var aD=ve(),Fne=De(),Une={message:"property name must be valid",params:({params:t})=>(0,aD._)`{propertyName: ${t.propertyName}}`},Bne={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Une,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Fne.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,aD.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};ab.default=Bne});var lb=E(cb=>{"use strict";Object.defineProperty(cb,"__esModule",{value:!0});var Up=en(),An=ve(),Vne=js(),Bp=De(),zne={message:"must NOT have additional properties",params:({params:t})=>(0,An._)`{additionalProperty: ${t.additionalProperty}}`},Hne={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zne,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Bp.alwaysValidSchema)(o,r))return;let l=(0,Up.allSchemaProperties)(n.properties),u=(0,Up.allSchemaProperties)(n.patternProperties);d(),t.ok((0,An._)`${i} === ${Vne.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,Bp.schemaRefOrVal)(o,n.properties,"properties");g=(0,Up.isOwnProperty)(e,w,y)}else l.length?g=(0,An.or)(...l.map(w=>(0,An._)`${y} === ${w}`)):g=An.nil;return u.length&&(g=(0,An.or)(g,...u.map(w=>(0,An._)`${(0,Up.usePattern)(t,w)}.test(${y})`))),(0,An.not)(g)}function f(y){e.code((0,An._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Bp.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,An.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,An.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:Bp.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};cb.default=Hne});var fD=E(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});var Gne=pu(),lD=en(),ub=De(),uD=lb(),Wne={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&uD.default.code(new Gne.KeywordCxt(i,uD.default,"additionalProperties"));let o=(0,lD.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=ub.mergeEvaluated.props(e,(0,ub.toHash)(o),i.props));let a=o.filter(d=>!(0,ub.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,lD.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};fb.default=Wne});var mD=E(db=>{"use strict";Object.defineProperty(db,"__esModule",{value:!0});var dD=en(),Vp=ve(),hD=De(),pD=De(),Kne={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,dD.allSchemaProperties)(r),c=a.filter(m=>(0,hD.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof Vp.Name)&&(i.props=(0,pD.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,hD.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,Vp._)`${(0,dD.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:pD.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,Vp._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,Vp.not)(u),()=>e.break())})})}}};db.default=Kne});var gD=E(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});var Jne=De(),Yne={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Jne.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};hb.default=Yne});var yD=E(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});var Xne=en(),Qne={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Xne.validateUnion,error:{message:"must match a schema in anyOf"}};pb.default=Qne});var _D=E(mb=>{"use strict";Object.defineProperty(mb,"__esModule",{value:!0});var zp=ve(),Zne=De(),ese={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,zp._)`{passingSchemas: ${t.passing}}`},tse={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ese,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,Zne.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,zp._)`${c} && ${o}`).assign(o,!1).assign(a,(0,zp._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,zp.Name)})})}}};mb.default=tse});var vD=E(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});var rse=De(),nse={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,rse.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};gb.default=nse});var ED=E(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});var Hp=ve(),bD=De(),sse={message:({params:t})=>(0,Hp.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Hp._)`{failingKeyword: ${t.ifClause}}`},ise={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:sse,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,bD.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=wD(n,"then"),i=wD(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,Hp.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Hp._)`${u}`):t.setParams({ifClause:u})}}}};function wD(t,e){let r=t.schema[e];return r!==void 0&&!(0,bD.alwaysValidSchema)(t,r)}yb.default=ise});var SD=E(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});var ose=De(),ase={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,ose.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};_b.default=ase});var RD=E(vb=>{"use strict";Object.defineProperty(vb,"__esModule",{value:!0});var cse=tb(),lse=eD(),use=rb(),fse=rD(),dse=nD(),hse=oD(),pse=cD(),mse=lb(),gse=fD(),yse=mD(),_se=gD(),vse=yD(),wse=_D(),bse=vD(),Ese=ED(),Sse=SD();function Rse(t=!1){let e=[_se.default,vse.default,wse.default,bse.default,Ese.default,Sse.default,pse.default,mse.default,hse.default,gse.default,yse.default];return t?e.push(lse.default,fse.default):e.push(cse.default,use.default),e.push(dse.default),e}vb.default=Rse});var TD=E(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});var yt=ve(),Tse={message:({schemaCode:t})=>(0,yt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,yt._)`{format: ${t}}`},$se={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Tse,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,yt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,yt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,yt._)`${m}.type || "string"`).assign(g,(0,yt._)`${m}.validate`),()=>r.assign(y,(0,yt._)`"string"`).assign(g,m)),t.fail$data((0,yt.or)(w(),_()));function w(){return c.strictSchema===!1?yt.nil:(0,yt._)`${o} && !${g}`}function _(){let v=u.$async?(0,yt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,yt._)`${g}(${n})`,S=(0,yt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,yt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,yt.regexpCode)(S):c.code.formats?(0,yt._)`${c.code.formats}${(0,yt.getProperty)(i)}`:void 0,R=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,yt._)`${R}.validate`]:["string",S,R]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,yt._)`await ${g}(${n})`}return typeof y=="function"?(0,yt._)`${g}(${n})`:(0,yt._)`${g}.test(${n})`}}}};wb.default=$se});var $D=E(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});var Ose=TD(),Pse=[Ose.default];bb.default=Pse});var OD=E(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.contentVocabulary=lc.metadataVocabulary=void 0;lc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];lc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var xD=E(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0});var xse=Mk(),Cse=Yk(),Nse=RD(),Ise=$D(),PD=OD(),Ase=[xse.default,Cse.default,(0,Nse.default)(),Ise.default,PD.metadataVocabulary,PD.contentVocabulary];Eb.default=Ase});var ND=E(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.DiscrError=void 0;var CD;(function(t){t.Tag="tag",t.Mapping="mapping"})(CD||(Gp.DiscrError=CD={}))});var AD=E(Rb=>{"use strict";Object.defineProperty(Rb,"__esModule",{value:!0});var uc=ve(),Sb=ND(),ID=Pp(),kse=mu(),Dse=De(),Mse={message:({params:{discrError:t,tagName:e}})=>t===Sb.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,uc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},jse={keyword:"discriminator",type:"object",schemaType:"object",error:Mse,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,uc._)`${r}${(0,uc.getProperty)(a)}`);e.if((0,uc._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:Sb.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,uc._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:Sb.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,uc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Dse.schemaHasRulesButRef)(S,i.self.RULES)){let R=S.$ref;if(S=ID.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,R),S instanceof ID.SchemaEnv&&(S=S.schema),S===void 0)throw new kse.default(i.opts.uriResolver,i.baseId,R)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};Rb.default=jse});var kD=E((IIe,qse)=>{qse.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var MD=E((Ze,Tb)=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.MissingRefError=Ze.ValidationError=Ze.CodeGen=Ze.Name=Ze.nil=Ze.stringify=Ze.str=Ze._=Ze.KeywordCxt=Ze.Ajv=void 0;var Lse=Ck(),Fse=xD(),Use=AD(),DD=kD(),Bse=["/properties"],Wp="http://json-schema.org/draft-07/schema",fc=class extends Lse.default{_addVocabularies(){super._addVocabularies(),Fse.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Use.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(DD,Bse):DD;this.addMetaSchema(e,Wp,!1),this.refs["http://json-schema.org/schema"]=Wp}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Wp)?Wp:void 0)}};Ze.Ajv=fc;Tb.exports=Ze=fc;Tb.exports.Ajv=fc;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default=fc;var Vse=pu();Object.defineProperty(Ze,"KeywordCxt",{enumerable:!0,get:function(){return Vse.KeywordCxt}});var dc=ve();Object.defineProperty(Ze,"_",{enumerable:!0,get:function(){return dc._}});Object.defineProperty(Ze,"str",{enumerable:!0,get:function(){return dc.str}});Object.defineProperty(Ze,"stringify",{enumerable:!0,get:function(){return dc.stringify}});Object.defineProperty(Ze,"nil",{enumerable:!0,get:function(){return dc.nil}});Object.defineProperty(Ze,"Name",{enumerable:!0,get:function(){return dc.Name}});Object.defineProperty(Ze,"CodeGen",{enumerable:!0,get:function(){return dc.CodeGen}});var zse=$p();Object.defineProperty(Ze,"ValidationError",{enumerable:!0,get:function(){return zse.default}});var Hse=mu();Object.defineProperty(Ze,"MissingRefError",{enumerable:!0,get:function(){return Hse.default}})});var Kp=E(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.formatNames=us.fastFormats=us.fullFormats=void 0;function ls(t,e){return{validate:t,compare:e}}us.fullFormats={date:ls(FD,xb),time:ls(Ob(!0),Cb),"date-time":ls(jD(!0),BD),"iso-time":ls(Ob(),UD),"iso-date-time":ls(jD(),VD),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Xse,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:sie,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Qse,int32:{type:"number",validate:tie},int64:{type:"number",validate:rie},float:{type:"number",validate:LD},double:{type:"number",validate:LD},password:!0,binary:!0};us.fastFormats={...us.fullFormats,date:ls(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,xb),time:ls(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Cb),"date-time":ls(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,BD),"iso-time":ls(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,UD),"iso-date-time":ls(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,VD),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};us.formatNames=Object.keys(us.fullFormats);function Gse(t){return t%4===0&&(t%100!==0||t%400===0)}var Wse=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Kse=[0,31,28,31,30,31,30,31,31,30,31,30,31];function FD(t){let e=Wse.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&Gse(r)?29:Kse[n])}function xb(t,e){if(t&&e)return t>e?1:t<e?-1:0}var $b=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function Ob(t){return function(r){let n=$b.exec(r);if(!n)return!1;let s=+n[1],i=+n[2],o=+n[3],a=n[4],c=n[5]==="-"?-1:1,l=+(n[6]||0),u=+(n[7]||0);if(l>23||u>59||t&&!a)return!1;if(s<=23&&i<=59&&o<60)return!0;let d=i-u*c,p=s-l*c-(d<0?1:0);return(p===23||p===-1)&&(d===59||d===-1)&&o<61}}function Cb(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function UD(t,e){if(!(t&&e))return;let r=$b.exec(t),n=$b.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var Pb=/t|\s/i;function jD(t){let e=Ob(t);return function(n){let s=n.split(Pb);return s.length===2&&FD(s[0])&&e(s[1])}}function BD(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function VD(t,e){if(!(t&&e))return;let[r,n]=t.split(Pb),[s,i]=e.split(Pb),o=xb(r,s);if(o!==void 0)return o||Cb(n,i)}var Jse=/\/|:/,Yse=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Xse(t){return Jse.test(t)&&Yse.test(t)}var qD=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Qse(t){return qD.lastIndex=0,qD.test(t)}var Zse=-(2**31),eie=2**31-1;function tie(t){return Number.isInteger(t)&&t<=eie&&t>=Zse}function rie(t){return Number.isInteger(t)}function LD(){return!0}var nie=/[^\\]\\Z/;function sie(t){if(nie.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var Iu=E(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.regexpCode=Me.getEsmExportName=Me.getProperty=Me.safeStringify=Me.stringify=Me.strConcat=Me.addCodeArg=Me.str=Me._=Me.nil=Me._Code=Me.Name=Me.IDENTIFIER=Me._CodeOrName=void 0;var Cu=class{};Me._CodeOrName=Cu;Me.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Mo=class extends Cu{constructor(e){if(super(),!Me.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Me.Name=Mo;var nn=class extends Cu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Mo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Me._Code=nn;Me.nil=new nn("");function zD(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Ib(r,e[n]),r.push(t[++n]);return new nn(r)}Me._=zD;var Nb=new nn("+");function HD(t,...e){let r=[Nu(t[0])],n=0;for(;n<e.length;)r.push(Nb),Ib(r,e[n]),r.push(Nb,Nu(t[++n]));return iie(r),new nn(r)}Me.str=HD;function Ib(t,e){e instanceof nn?t.push(...e._items):e instanceof Mo?t.push(e):t.push(cie(e))}Me.addCodeArg=Ib;function iie(t){let e=1;for(;e<t.length-1;){if(t[e]===Nb){let r=oie(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function oie(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Mo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Mo))return`"${t}${e.slice(1)}`}function aie(t,e){return e.emptyStr()?t:t.emptyStr()?e:HD`${t}${e}`}Me.strConcat=aie;function cie(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Nu(Array.isArray(t)?t.join(","):t)}function lie(t){return new nn(Nu(t))}Me.stringify=lie;function Nu(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Me.safeStringify=Nu;function uie(t){return typeof t=="string"&&Me.IDENTIFIER.test(t)?new nn(`.${t}`):zD`[${t}]`}Me.getProperty=uie;function fie(t){if(typeof t=="string"&&Me.IDENTIFIER.test(t))return new nn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Me.getEsmExportName=fie;function die(t){return new nn(t.toString())}Me.regexpCode=die});var Db=E(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ValueScope=kr.ValueScopeName=kr.Scope=kr.varKinds=kr.UsedValueState=void 0;var Ar=Iu(),Ab=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Jp;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Jp||(kr.UsedValueState=Jp={}));kr.varKinds={const:new Ar.Name("const"),let:new Ar.Name("let"),var:new Ar.Name("var")};var Yp=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Ar.Name?e:this.name(e)}name(e){return new Ar.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};kr.Scope=Yp;var Xp=class extends Ar.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Ar._)`.${new Ar.Name(r)}[${n}]`}};kr.ValueScopeName=Xp;var hie=(0,Ar._)`\n`,kb=class extends Yp{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?hie:Ar.nil}}get(){return this._scope}name(e){return new Xp(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Ar._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Ar.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,Jp.Started);let u=r(l);if(u){let d=this.opts.es5?kr.varKinds.var:kr.varKinds.const;i=(0,Ar._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,Ar._)`${i}${u}${this.opts._n}`;else throw new Ab(l);c.set(l,Jp.Completed)})}return i}};kr.ValueScope=kb});var he=E(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.or=ye.and=ye.not=ye.CodeGen=ye.operators=ye.varKinds=ye.ValueScopeName=ye.ValueScope=ye.Scope=ye.Name=ye.regexpCode=ye.stringify=ye.getProperty=ye.nil=ye.strConcat=ye.str=ye._=void 0;var xe=Iu(),kn=Db(),$i=Iu();Object.defineProperty(ye,"_",{enumerable:!0,get:function(){return $i._}});Object.defineProperty(ye,"str",{enumerable:!0,get:function(){return $i.str}});Object.defineProperty(ye,"strConcat",{enumerable:!0,get:function(){return $i.strConcat}});Object.defineProperty(ye,"nil",{enumerable:!0,get:function(){return $i.nil}});Object.defineProperty(ye,"getProperty",{enumerable:!0,get:function(){return $i.getProperty}});Object.defineProperty(ye,"stringify",{enumerable:!0,get:function(){return $i.stringify}});Object.defineProperty(ye,"regexpCode",{enumerable:!0,get:function(){return $i.regexpCode}});Object.defineProperty(ye,"Name",{enumerable:!0,get:function(){return $i.Name}});var tm=Db();Object.defineProperty(ye,"Scope",{enumerable:!0,get:function(){return tm.Scope}});Object.defineProperty(ye,"ValueScope",{enumerable:!0,get:function(){return tm.ValueScope}});Object.defineProperty(ye,"ValueScopeName",{enumerable:!0,get:function(){return tm.ValueScopeName}});Object.defineProperty(ye,"varKinds",{enumerable:!0,get:function(){return tm.varKinds}});ye.operators={GT:new xe._Code(">"),GTE:new xe._Code(">="),LT:new xe._Code("<"),LTE:new xe._Code("<="),EQ:new xe._Code("==="),NEQ:new xe._Code("!=="),NOT:new xe._Code("!"),OR:new xe._Code("||"),AND:new xe._Code("&&"),ADD:new xe._Code("+")};var Us=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Mb=class extends Us{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?kn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=pc(this.rhs,e,r)),this}get names(){return this.rhs instanceof xe._CodeOrName?this.rhs.names:{}}},Qp=class extends Us{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof xe.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=pc(this.rhs,e,r),this}get names(){let e=this.lhs instanceof xe.Name?{}:{...this.lhs.names};return em(e,this.rhs)}},jb=class extends Qp{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},qb=class extends Us{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Lb=class extends Us{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Fb=class extends Us{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Ub=class extends Us{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=pc(this.code,e,r),this}get names(){return this.code instanceof xe._CodeOrName?this.code.names:{}}},Au=class extends Us{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(pie(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Lo(e,r.names),{})}},Bs=class extends Au{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Bb=class extends Au{},hc=class extends Bs{};hc.kind="else";var jo=class t extends Bs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new hc(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(GD(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=pc(this.condition,e,r),this}get names(){let e=super.names;return em(e,this.condition),this.else&&Lo(e,this.else.names),e}};jo.kind="if";var qo=class extends Bs{};qo.kind="for";var Vb=class extends qo{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=pc(this.iteration,e,r),this}get names(){return Lo(super.names,this.iteration.names)}},zb=class extends qo{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?kn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=em(super.names,this.from);return em(e,this.to)}},Zp=class extends qo{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=pc(this.iterable,e,r),this}get names(){return Lo(super.names,this.iterable.names)}},ku=class extends Bs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ku.kind="func";var Du=class extends Au{render(e){return"return "+super.render(e)}};Du.kind="return";var Hb=class extends Bs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Lo(e,this.catch.names),this.finally&&Lo(e,this.finally.names),e}},Mu=class extends Bs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Mu.kind="catch";var ju=class extends Bs{render(e){return"finally"+super.render(e)}};ju.kind="finally";var Gb=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new kn.Scope({parent:e}),this._nodes=[new Bb]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Mb(e,i,n)),i}const(e,r,n){return this._def(kn.varKinds.const,e,r,n)}let(e,r,n){return this._def(kn.varKinds.let,e,r,n)}var(e,r,n){return this._def(kn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Qp(e,r,n))}add(e,r){return this._leafNode(new jb(e,ye.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==xe.nil&&this._leafNode(new Ub(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,xe.addCodeArg)(r,s));return r.push("}"),new xe._Code(r)}if(e,r,n){if(this._blockNode(new jo(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new jo(e))}else(){return this._elseNode(new hc)}endIf(){return this._endBlockNode(jo,hc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Vb(e),r)}forRange(e,r,n,s,i=this.opts.es5?kn.varKinds.var:kn.varKinds.let){let o=this._scope.toName(e);return this._for(new zb(i,o,r,n),()=>s(o))}forOf(e,r,n,s=kn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof xe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,xe._)`${o}.length`,a=>{this.var(i,(0,xe._)`${o}[${a}]`),n(i)})}return this._for(new Zp("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?kn.varKinds.var:kn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,xe._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Zp("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(qo)}label(e){return this._leafNode(new qb(e))}break(e){return this._leafNode(new Lb(e))}return(e){let r=new Du;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Du)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Hb;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Mu(i),r(i)}return n&&(this._currNode=s.finally=new ju,this.code(n)),this._endBlockNode(Mu,ju)}throw(e){return this._leafNode(new Fb(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=xe.nil,n,s){return this._blockNode(new ku(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ku)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof jo))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ye.CodeGen=Gb;function Lo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function em(t,e){return e instanceof xe._CodeOrName?Lo(t,e.names):t}function pc(t,e,r){if(t instanceof xe.Name)return n(t);if(!s(t))return t;return new xe._Code(t._items.reduce((i,o)=>(o instanceof xe.Name&&(o=n(o)),o instanceof xe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof xe._Code&&i._items.some(o=>o instanceof xe.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function pie(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function GD(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,xe._)`!${Wb(t)}`}ye.not=GD;var mie=WD(ye.operators.AND);function gie(...t){return t.reduce(mie)}ye.and=gie;var yie=WD(ye.operators.OR);function _ie(...t){return t.reduce(yie)}ye.or=_ie;function WD(t){return(e,r)=>e===xe.nil?r:r===xe.nil?e:(0,xe._)`${Wb(e)} ${t} ${Wb(r)}`}function Wb(t){return t instanceof xe.Name?t:(0,xe._)`(${t})`}});var je=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.checkStrictMode=be.getErrorPath=be.Type=be.useFunc=be.setEvaluated=be.evaluatedPropsToName=be.mergeEvaluated=be.eachItem=be.unescapeJsonPointer=be.escapeJsonPointer=be.escapeFragment=be.unescapeFragment=be.schemaRefOrVal=be.schemaHasRulesButRef=be.schemaHasRules=be.checkUnknownRules=be.alwaysValidSchema=be.toHash=void 0;var Ge=he(),vie=Iu();function wie(t){let e={};for(let r of t)e[r]=!0;return e}be.toHash=wie;function bie(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(YD(t,e),!XD(e,t.self.RULES.all))}be.alwaysValidSchema=bie;function YD(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||eM(t,`unknown keyword: "${i}"`)}be.checkUnknownRules=YD;function XD(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}be.schemaHasRules=XD;function Eie(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}be.schemaHasRulesButRef=Eie;function Sie({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ge._)`${r}`}return(0,Ge._)`${t}${e}${(0,Ge.getProperty)(n)}`}be.schemaRefOrVal=Sie;function Rie(t){return QD(decodeURIComponent(t))}be.unescapeFragment=Rie;function Tie(t){return encodeURIComponent(Jb(t))}be.escapeFragment=Tie;function Jb(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}be.escapeJsonPointer=Jb;function QD(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}be.unescapeJsonPointer=QD;function $ie(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}be.eachItem=$ie;function KD({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof Ge.Name?(i instanceof Ge.Name?t(s,i,o):e(s,i,o),o):i instanceof Ge.Name?(e(s,o,i),i):r(i,o);return a===Ge.Name&&!(c instanceof Ge.Name)?n(s,c):c}}be.mergeEvaluated={props:KD({mergeNames:(t,e,r)=>t.if((0,Ge._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ge._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ge._)`${r} || {}`).code((0,Ge._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ge._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ge._)`${r} || {}`),Yb(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:ZD}),items:KD({mergeNames:(t,e,r)=>t.if((0,Ge._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ge._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ge._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ge._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function ZD(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Ge._)`{}`);return e!==void 0&&Yb(t,r,e),r}be.evaluatedPropsToName=ZD;function Yb(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ge._)`${e}${(0,Ge.getProperty)(n)}`,!0))}be.setEvaluated=Yb;var JD={};function Oie(t,e){return t.scopeValue("func",{ref:e,code:JD[e.code]||(JD[e.code]=new vie._Code(e.code))})}be.useFunc=Oie;var Kb;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Kb||(be.Type=Kb={}));function Pie(t,e,r){if(t instanceof Ge.Name){let n=e===Kb.Num;return r?n?(0,Ge._)`"[" + ${t} + "]"`:(0,Ge._)`"['" + ${t} + "']"`:n?(0,Ge._)`"/" + ${t}`:(0,Ge._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ge.getProperty)(t).toString():"/"+Jb(t)}be.getErrorPath=Pie;function eM(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}be.checkStrictMode=eM});var Vs=E(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var Xt=he(),xie={data:new Xt.Name("data"),valCxt:new Xt.Name("valCxt"),instancePath:new Xt.Name("instancePath"),parentData:new Xt.Name("parentData"),parentDataProperty:new Xt.Name("parentDataProperty"),rootData:new Xt.Name("rootData"),dynamicAnchors:new Xt.Name("dynamicAnchors"),vErrors:new Xt.Name("vErrors"),errors:new Xt.Name("errors"),this:new Xt.Name("this"),self:new Xt.Name("self"),scope:new Xt.Name("scope"),json:new Xt.Name("json"),jsonPos:new Xt.Name("jsonPos"),jsonLen:new Xt.Name("jsonLen"),jsonPart:new Xt.Name("jsonPart")};Xb.default=xie});var qu=E(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.extendErrors=Qt.resetErrorsCount=Qt.reportExtraError=Qt.reportError=Qt.keyword$DataError=Qt.keywordError=void 0;var Ie=he(),rm=je(),pr=Vs();Qt.keywordError={message:({keyword:t})=>(0,Ie.str)`must pass "${t}" keyword validation`};Qt.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ie.str)`"${t}" keyword must be ${e} ($data)`:(0,Ie.str)`"${t}" keyword is invalid ($data)`};function Cie(t,e=Qt.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=nM(t,e,r);n??(o||a)?tM(i,c):rM(s,(0,Ie._)`[${c}]`)}Qt.reportError=Cie;function Nie(t,e=Qt.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=nM(t,e,r);tM(s,a),i||o||rM(n,pr.default.vErrors)}Qt.reportExtraError=Nie;function Iie(t,e){t.assign(pr.default.errors,e),t.if((0,Ie._)`${pr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ie._)`${pr.default.vErrors}.length`,e),()=>t.assign(pr.default.vErrors,null)))}Qt.resetErrorsCount=Iie;function Aie({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,pr.default.errors,a=>{t.const(o,(0,Ie._)`${pr.default.vErrors}[${a}]`),t.if((0,Ie._)`${o}.instancePath === undefined`,()=>t.assign((0,Ie._)`${o}.instancePath`,(0,Ie.strConcat)(pr.default.instancePath,i.errorPath))),t.assign((0,Ie._)`${o}.schemaPath`,(0,Ie.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ie._)`${o}.schema`,r),t.assign((0,Ie._)`${o}.data`,n))})}Qt.extendErrors=Aie;function tM(t,e){let r=t.const("err",e);t.if((0,Ie._)`${pr.default.vErrors} === null`,()=>t.assign(pr.default.vErrors,(0,Ie._)`[${r}]`),(0,Ie._)`${pr.default.vErrors}.push(${r})`),t.code((0,Ie._)`${pr.default.errors}++`)}function rM(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ie._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ie._)`${n}.errors`,e),r.return(!1))}var Fo={keyword:new Ie.Name("keyword"),schemaPath:new Ie.Name("schemaPath"),params:new Ie.Name("params"),propertyName:new Ie.Name("propertyName"),message:new Ie.Name("message"),schema:new Ie.Name("schema"),parentSchema:new Ie.Name("parentSchema")};function nM(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ie._)`{}`:kie(t,e,r)}function kie(t,e,r={}){let{gen:n,it:s}=t,i=[Die(s,r),Mie(t,r)];return jie(t,e,i),n.object(...i)}function Die({errorPath:t},{instancePath:e}){let r=e?(0,Ie.str)`${t}${(0,rm.getErrorPath)(e,rm.Type.Str)}`:t;return[pr.default.instancePath,(0,Ie.strConcat)(pr.default.instancePath,r)]}function Mie({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ie.str)`${e}/${t}`;return r&&(s=(0,Ie.str)`${s}${(0,rm.getErrorPath)(r,rm.Type.Str)}`),[Fo.schemaPath,s]}function jie(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([Fo.keyword,s],[Fo.params,typeof e=="function"?e(t):e||(0,Ie._)`{}`]),c.messages&&n.push([Fo.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Fo.schema,o],[Fo.parentSchema,(0,Ie._)`${u}${d}`],[pr.default.data,i]),l&&n.push([Fo.propertyName,l])}});var iM=E(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.boolOrEmptySchema=mc.topBoolOrEmptySchema=void 0;var qie=qu(),Lie=he(),Fie=Vs(),Uie={message:"boolean schema is false"};function Bie(t){let{gen:e,schema:r,validateName:n}=t;r===!1?sM(t,!1):typeof r=="object"&&r.$async===!0?e.return(Fie.default.data):(e.assign((0,Lie._)`${n}.errors`,null),e.return(!0))}mc.topBoolOrEmptySchema=Bie;function Vie(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),sM(t)):r.var(e,!0)}mc.boolOrEmptySchema=Vie;function sM(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,qie.reportError)(s,Uie,void 0,e)}});var Qb=E(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.getRules=gc.isJSONType=void 0;var zie=["string","number","integer","boolean","null","object","array"],Hie=new Set(zie);function Gie(t){return typeof t=="string"&&Hie.has(t)}gc.isJSONType=Gie;function Wie(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}gc.getRules=Wie});var Zb=E(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.shouldUseRule=Oi.shouldUseGroup=Oi.schemaHasRulesForType=void 0;function Kie({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&oM(t,n)}Oi.schemaHasRulesForType=Kie;function oM(t,e){return e.rules.some(r=>aM(t,r))}Oi.shouldUseGroup=oM;function aM(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Oi.shouldUseRule=aM});var Lu=E(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.reportTypeError=Zt.checkDataTypes=Zt.checkDataType=Zt.coerceAndCheckDataType=Zt.getJSONTypes=Zt.getSchemaTypes=Zt.DataType=void 0;var Jie=Qb(),Yie=Zb(),Xie=qu(),fe=he(),cM=je(),yc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(yc||(Zt.DataType=yc={}));function Qie(t){let e=lM(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Zt.getSchemaTypes=Qie;function lM(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Jie.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Zt.getJSONTypes=lM;function Zie(t,e){let{gen:r,data:n,opts:s}=t,i=eoe(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Yie.schemaHasRulesForType)(t,e[0]));if(o){let a=tE(e,n,s.strictNumbers,yc.Wrong);r.if(a,()=>{i.length?toe(t,e,i):rE(t)})}return o}Zt.coerceAndCheckDataType=Zie;var uM=new Set(["string","number","integer","boolean","null"]);function eoe(t,e){return e?t.filter(r=>uM.has(r)||e==="array"&&r==="array"):[]}function toe(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,fe._)`typeof ${s}`),a=n.let("coerced",(0,fe._)`undefined`);i.coerceTypes==="array"&&n.if((0,fe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,fe._)`${s}[0]`).assign(o,(0,fe._)`typeof ${s}`).if(tE(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,fe._)`${a} !== undefined`);for(let l of r)(uM.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),rE(t),n.endIf(),n.if((0,fe._)`${a} !== undefined`,()=>{n.assign(s,a),roe(t,a)});function c(l){switch(l){case"string":n.elseIf((0,fe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,fe._)`"" + ${s}`).elseIf((0,fe._)`${s} === null`).assign(a,(0,fe._)`""`);return;case"number":n.elseIf((0,fe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,fe._)`+${s}`);return;case"integer":n.elseIf((0,fe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,fe._)`+${s}`);return;case"boolean":n.elseIf((0,fe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,fe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,fe._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,fe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,fe._)`[${s}]`)}}}function roe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,fe._)`${e} !== undefined`,()=>t.assign((0,fe._)`${e}[${r}]`,n))}function eE(t,e,r,n=yc.Correct){let s=n===yc.Correct?fe.operators.EQ:fe.operators.NEQ,i;switch(t){case"null":return(0,fe._)`${e} ${s} null`;case"array":i=(0,fe._)`Array.isArray(${e})`;break;case"object":i=(0,fe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,fe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,fe._)`typeof ${e} ${s} ${t}`}return n===yc.Correct?i:(0,fe.not)(i);function o(a=fe.nil){return(0,fe.and)((0,fe._)`typeof ${e} == "number"`,a,r?(0,fe._)`isFinite(${e})`:fe.nil)}}Zt.checkDataType=eE;function tE(t,e,r,n){if(t.length===1)return eE(t[0],e,r,n);let s,i=(0,cM.toHash)(t);if(i.array&&i.object){let o=(0,fe._)`typeof ${e} != "object"`;s=i.null?o:(0,fe._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=fe.nil;i.number&&delete i.integer;for(let o in i)s=(0,fe.and)(s,eE(o,e,r,n));return s}Zt.checkDataTypes=tE;var noe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,fe._)`{type: ${t}}`:(0,fe._)`{type: ${e}}`};function rE(t){let e=soe(t);(0,Xie.reportError)(e,noe)}Zt.reportTypeError=rE;function soe(t){let{gen:e,data:r,schema:n}=t,s=(0,cM.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var dM=E(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.assignDefaults=void 0;var _c=he(),ioe=je();function ooe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)fM(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>fM(t,i,s.default))}nm.assignDefaults=ooe;function fM(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,_c._)`${i}${(0,_c.getProperty)(e)}`;if(s){(0,ioe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,_c._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,_c._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,_c._)`${a} = ${(0,_c.stringify)(r)}`)}});var sn=E(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.validateUnion=Ve.validateArray=Ve.usePattern=Ve.callValidateCode=Ve.schemaProperties=Ve.allSchemaProperties=Ve.noPropertyInData=Ve.propertyInData=Ve.isOwnProperty=Ve.hasPropFunc=Ve.reportMissingProp=Ve.checkMissingProp=Ve.checkReportMissingProp=void 0;var et=he(),nE=je(),Pi=Vs(),aoe=je();function coe(t,e){let{gen:r,data:n,it:s}=t;r.if(iE(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,et._)`${e}`},!0),t.error()})}Ve.checkReportMissingProp=coe;function loe({gen:t,data:e,it:{opts:r}},n,s){return(0,et.or)(...n.map(i=>(0,et.and)(iE(t,e,i,r.ownProperties),(0,et._)`${s} = ${i}`)))}Ve.checkMissingProp=loe;function uoe(t,e){t.setParams({missingProperty:e},!0),t.error()}Ve.reportMissingProp=uoe;function hM(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,et._)`Object.prototype.hasOwnProperty`})}Ve.hasPropFunc=hM;function sE(t,e,r){return(0,et._)`${hM(t)}.call(${e}, ${r})`}Ve.isOwnProperty=sE;function foe(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} !== undefined`;return n?(0,et._)`${s} && ${sE(t,e,r)}`:s}Ve.propertyInData=foe;function iE(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} === undefined`;return n?(0,et.or)(s,(0,et.not)(sE(t,e,r))):s}Ve.noPropertyInData=iE;function pM(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ve.allSchemaProperties=pM;function doe(t,e){return pM(e).filter(r=>!(0,nE.alwaysValidSchema)(t,e[r]))}Ve.schemaProperties=doe;function hoe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,et._)`${t}, ${e}, ${n}${s}`:e,d=[[Pi.default.instancePath,(0,et.strConcat)(Pi.default.instancePath,i)],[Pi.default.parentData,o.parentData],[Pi.default.parentDataProperty,o.parentDataProperty],[Pi.default.rootData,Pi.default.rootData]];o.opts.dynamicRef&&d.push([Pi.default.dynamicAnchors,Pi.default.dynamicAnchors]);let p=(0,et._)`${u}, ${r.object(...d)}`;return c!==et.nil?(0,et._)`${a}.call(${c}, ${p})`:(0,et._)`${a}(${p})`}Ve.callValidateCode=hoe;var poe=(0,et._)`new RegExp`;function moe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,et._)`${s.code==="new RegExp"?poe:(0,aoe.useFunc)(t,s)}(${r}, ${n})`})}Ve.usePattern=moe;function goe(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,et._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:nE.Type.Num},i),e.if((0,et.not)(i),a)})}}Ve.validateArray=goe;function yoe(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,nE.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,et._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,et.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ve.validateUnion=yoe});var yM=E(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.validateKeywordUsage=fs.validSchemaType=fs.funcKeywordCode=fs.macroKeywordCode=void 0;var mr=he(),Uo=Vs(),_oe=sn(),voe=qu();function woe(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=gM(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:mr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}fs.macroKeywordCode=woe;function boe(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;Soe(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=gM(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&mM(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&mM(t),y(()=>Eoe(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,mr._)`await `),w=>n.assign(d,!1).if((0,mr._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,mr._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,mr._)`${u}.errors`;return n.assign(g,null),m(mr.nil),g}function m(g=e.async?(0,mr._)`await `:mr.nil){let w=c.opts.passContext?Uo.default.this:Uo.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,mr._)`${g}${(0,_oe.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,mr.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}fs.funcKeywordCode=boe;function mM(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,mr._)`${n.parentData}[${n.parentDataProperty}]`))}function Eoe(t,e){let{gen:r}=t;r.if((0,mr._)`Array.isArray(${e})`,()=>{r.assign(Uo.default.vErrors,(0,mr._)`${Uo.default.vErrors} === null ? ${e} : ${Uo.default.vErrors}.concat(${e})`).assign(Uo.default.errors,(0,mr._)`${Uo.default.vErrors}.length`),(0,voe.extendErrors)(t)},()=>t.error())}function Soe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function gM(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,mr.stringify)(r)})}function Roe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}fs.validSchemaType=Roe;function Toe({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}fs.validateKeywordUsage=Toe});var vM=E(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.extendSubschemaMode=xi.extendSubschemaData=xi.getSubschema=void 0;var ds=he(),_M=je();function $oe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,ds._)`${t.schemaPath}${(0,ds.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,ds._)`${t.schemaPath}${(0,ds.getProperty)(e)}${(0,ds.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,_M.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}xi.getSubschema=$oe;function Ooe(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,ds._)`${e.data}${(0,ds.getProperty)(r)}`,!0);c(p),t.errorPath=(0,ds.str)`${l}${(0,_M.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,ds._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof ds.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}xi.extendSubschemaData=Ooe;function Poe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}xi.extendSubschemaMode=Poe});var bM=E((KIe,wM)=>{"use strict";var Ci=wM.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};sm(e,n,s,t,"",t)};Ci.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ci.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ci.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ci.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function sm(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Ci.arrayKeywords)for(var p=0;p<d.length;p++)sm(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Ci.propsKeywords){if(d&&typeof d=="object")for(var f in d)sm(t,e,r,d[f],s+"/"+u+"/"+xoe(f),i,s,u,n,f)}else(u in Ci.keywords||t.allKeys&&!(u in Ci.skipKeywords))&&sm(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function xoe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Fu=E(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.getSchemaRefs=Dr.resolveUrl=Dr.normalizeId=Dr._getFullPath=Dr.getFullPath=Dr.inlineRef=void 0;var Coe=je(),Noe=qs(),Ioe=bM(),Aoe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function koe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!oE(t):e?EM(t)<=e:!1}Dr.inlineRef=koe;var Doe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function oE(t){for(let e in t){if(Doe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(oE)||typeof r=="object"&&oE(r))return!0}return!1}function EM(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Aoe.has(r)&&(typeof t[r]=="object"&&(0,Coe.eachItem)(t[r],n=>e+=EM(n)),e===1/0))return 1/0}return e}function SM(t,e="",r){r!==!1&&(e=vc(e));let n=t.parse(e);return RM(t,n)}Dr.getFullPath=SM;function RM(t,e){return t.serialize(e).split("#")[0]+"#"}Dr._getFullPath=RM;var Moe=/#\/?$/;function vc(t){return t?t.replace(Moe,""):""}Dr.normalizeId=vc;function joe(t,e,r){return r=vc(r),t.resolve(e,r)}Dr.resolveUrl=joe;var qoe=/^[a-z_][-a-z0-9._]*$/i;function Loe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=vc(t[r]||e),i={"":s},o=SM(n,s,!1),a={},c=new Set;return Ioe(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=vc(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==vc(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!qoe.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!Noe(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Dr.getSchemaRefs=Loe});var Vu=E(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.getData=Ni.KeywordCxt=Ni.validateFunctionCode=void 0;var xM=iM(),TM=Lu(),cE=Zb(),im=Lu(),Foe=dM(),Bu=yM(),aE=vM(),Q=he(),ie=Vs(),Uoe=Fu(),zs=je(),Uu=qu();function Boe(t){if(IM(t)&&(AM(t),NM(t))){Hoe(t);return}CM(t,()=>(0,xM.topBoolOrEmptySchema)(t))}Ni.validateFunctionCode=Boe;function CM({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Q._)`${ie.default.data}, ${ie.default.valCxt}`,n.$async,()=>{t.code((0,Q._)`"use strict"; ${$M(r,s)}`),zoe(t,s),t.code(i)}):t.func(e,(0,Q._)`${ie.default.data}, ${Voe(s)}`,n.$async,()=>t.code($M(r,s)).code(i))}function Voe(t){return(0,Q._)`{${ie.default.instancePath}="", ${ie.default.parentData}, ${ie.default.parentDataProperty}, ${ie.default.rootData}=${ie.default.data}${t.dynamicRef?(0,Q._)`, ${ie.default.dynamicAnchors}={}`:Q.nil}}={}`}function zoe(t,e){t.if(ie.default.valCxt,()=>{t.var(ie.default.instancePath,(0,Q._)`${ie.default.valCxt}.${ie.default.instancePath}`),t.var(ie.default.parentData,(0,Q._)`${ie.default.valCxt}.${ie.default.parentData}`),t.var(ie.default.parentDataProperty,(0,Q._)`${ie.default.valCxt}.${ie.default.parentDataProperty}`),t.var(ie.default.rootData,(0,Q._)`${ie.default.valCxt}.${ie.default.rootData}`),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`${ie.default.valCxt}.${ie.default.dynamicAnchors}`)},()=>{t.var(ie.default.instancePath,(0,Q._)`""`),t.var(ie.default.parentData,(0,Q._)`undefined`),t.var(ie.default.parentDataProperty,(0,Q._)`undefined`),t.var(ie.default.rootData,ie.default.data),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`{}`)})}function Hoe(t){let{schema:e,opts:r,gen:n}=t;CM(t,()=>{r.$comment&&e.$comment&&DM(t),Yoe(t),n.let(ie.default.vErrors,null),n.let(ie.default.errors,0),r.unevaluated&&Goe(t),kM(t),Zoe(t)})}function Goe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Q._)`${r}.evaluated`),e.if((0,Q._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Q._)`${t.evaluated}.props`,(0,Q._)`undefined`)),e.if((0,Q._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Q._)`${t.evaluated}.items`,(0,Q._)`undefined`))}function $M(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Q._)`/*# sourceURL=${r} */`:Q.nil}function Woe(t,e){if(IM(t)&&(AM(t),NM(t))){Koe(t,e);return}(0,xM.boolOrEmptySchema)(t,e)}function NM({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function IM(t){return typeof t.schema!="boolean"}function Koe(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&DM(t),Xoe(t),Qoe(t);let i=n.const("_errs",ie.default.errors);kM(t,i),n.var(e,(0,Q._)`${i} === ${ie.default.errors}`)}function AM(t){(0,zs.checkUnknownRules)(t),Joe(t)}function kM(t,e){if(t.opts.jtd)return OM(t,[],!1,e);let r=(0,TM.getSchemaTypes)(t.schema),n=(0,TM.coerceAndCheckDataType)(t,r);OM(t,r,!n,e)}function Joe(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,zs.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Yoe(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,zs.checkStrictMode)(t,"default is ignored in the schema root")}function Xoe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Uoe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Qoe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function DM({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Q._)`${ie.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Q.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Q._)`${ie.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Zoe(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Q._)`${ie.default.errors} === 0`,()=>e.return(ie.default.data),()=>e.throw((0,Q._)`new ${s}(${ie.default.vErrors})`)):(e.assign((0,Q._)`${n}.errors`,ie.default.vErrors),i.unevaluated&&eae(t),e.return((0,Q._)`${ie.default.errors} === 0`))}function eae({gen:t,evaluated:e,props:r,items:n}){r instanceof Q.Name&&t.assign((0,Q._)`${e}.props`,r),n instanceof Q.Name&&t.assign((0,Q._)`${e}.items`,n)}function OM(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,zs.schemaHasRulesButRef)(i,u))){s.block(()=>jM(t,"$ref",u.all.$ref.definition));return}c.jtd||tae(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,cE.shouldUseGroup)(i,p)&&(p.type?(s.if((0,im.checkDataType)(p.type,o,c.strictNumbers)),PM(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,im.reportTypeError)(t)),s.endIf()):PM(t,p),a||s.if((0,Q._)`${ie.default.errors} === ${n||0}`))}}function PM(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Foe.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,cE.shouldUseRule)(n,i)&&jM(t,i.keyword,i.definition,e.type)})}function tae(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(rae(t,e),t.opts.allowUnionTypes||nae(t,e),sae(t,t.dataTypes))}function rae(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{MM(t.dataTypes,r)||lE(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),oae(t,e)}}function nae(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&lE(t,"use allowUnionTypes to allow union type keyword")}function sae(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,cE.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>iae(e,o))&&lE(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function iae(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function MM(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function oae(t,e){let r=[];for(let n of t.dataTypes)MM(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function lE(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,zs.checkStrictMode)(t,e,t.opts.strictTypes)}var om=class{constructor(e,r,n){if((0,Bu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,zs.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",qM(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Bu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ie.default.errors))}result(e,r,n){this.failResult((0,Q.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Q.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Q._)`${r} !== undefined && (${(0,Q.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Uu.reportExtraError:Uu.reportError)(this,this.def.error,r)}$dataError(){(0,Uu.reportError)(this,this.def.$dataError||Uu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Uu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Q.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Q.nil,r=Q.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Q.or)((0,Q._)`${s} === undefined`,r)),e!==Q.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Q.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Q.or)(o(),a());function o(){if(n.length){if(!(r instanceof Q.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,Q._)`${(0,im.checkDataTypes)(c,r,i.opts.strictNumbers,im.DataType.Wrong)}`}return Q.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Q._)`!${c}(${r})`}return Q.nil}}subschema(e,r){let n=(0,aE.getSubschema)(this.it,e);(0,aE.extendSubschemaData)(n,this.it,e),(0,aE.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Woe(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=zs.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=zs.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Q.Name)),!0}};Ni.KeywordCxt=om;function jM(t,e,r,n){let s=new om(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Bu.funcKeywordCode)(s,r):"macro"in r?(0,Bu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Bu.funcKeywordCode)(s,r)}var aae=/^\/(?:[^~]|~0|~1)*$/,cae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function qM(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return ie.default.rootData;if(t[0]==="/"){if(!aae.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=ie.default.rootData}else{let l=cae.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,Q._)`${i}${(0,Q.getProperty)((0,zs.unescapeJsonPointer)(l))}`,o=(0,Q._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Ni.getData=qM});var am=E(fE=>{"use strict";Object.defineProperty(fE,"__esModule",{value:!0});var uE=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};fE.default=uE});var zu=E(pE=>{"use strict";Object.defineProperty(pE,"__esModule",{value:!0});var dE=Fu(),hE=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,dE.resolveUrl)(e,r,n),this.missingSchema=(0,dE.normalizeId)((0,dE.getFullPath)(e,this.missingRef))}};pE.default=hE});var lm=E(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.resolveSchema=on.getCompilingSchema=on.resolveRef=on.compileSchema=on.SchemaEnv=void 0;var Dn=he(),lae=am(),Bo=Vs(),Mn=Fu(),LM=je(),uae=Vu(),wc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Mn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};on.SchemaEnv=wc;function gE(t){let e=FM.call(this,t);if(e)return e;let r=(0,Mn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Dn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:lae.default,code:(0,Dn._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:Bo.default.data,parentData:Bo.default.parentData,parentDataProperty:Bo.default.parentDataProperty,dataNames:[Bo.default.data],dataPathArr:[Dn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Dn.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Dn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Dn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,uae.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(Bo.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${Bo.default.self}`,`${Bo.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof Dn.Name?void 0:h,items:m instanceof Dn.Name?void 0:m,dynamicProps:h instanceof Dn.Name,dynamicItems:m instanceof Dn.Name},f.source&&(f.source.evaluated=(0,Dn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}on.compileSchema=gE;function fae(t,e,r){var n;r=(0,Mn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=pae.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new wc({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=dae.call(this,i)}on.resolveRef=fae;function dae(t){return(0,Mn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:gE.call(this,t)}function FM(t){for(let e of this._compilations)if(hae(e,t))return e}on.getCompilingSchema=FM;function hae(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function pae(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||cm.call(this,t,e)}function cm(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Mn._getFullPath)(this.opts.uriResolver,r),s=(0,Mn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return mE.call(this,r,t);let i=(0,Mn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=cm.call(this,t,o);return typeof a?.schema!="object"?void 0:mE.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||gE.call(this,o),i===(0,Mn.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,Mn.resolveUrl)(this.opts.uriResolver,s,l)),new wc({schema:a,schemaId:c,root:t,baseId:s})}return mE.call(this,r,o)}}on.resolveSchema=cm;var mae=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function mE(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,LM.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!mae.has(a)&&l&&(e=(0,Mn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,LM.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Mn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=cm.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new wc({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var UM=E((eAe,gae)=>{gae.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var VM=E(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});var BM=oc();BM.code='require("ajv/dist/runtime/uri").default';yE.default=BM});var XM=E(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.CodeGen=Lt.Name=Lt.nil=Lt.stringify=Lt.str=Lt._=Lt.KeywordCxt=void 0;var yae=Vu();Object.defineProperty(Lt,"KeywordCxt",{enumerable:!0,get:function(){return yae.KeywordCxt}});var bc=he();Object.defineProperty(Lt,"_",{enumerable:!0,get:function(){return bc._}});Object.defineProperty(Lt,"str",{enumerable:!0,get:function(){return bc.str}});Object.defineProperty(Lt,"stringify",{enumerable:!0,get:function(){return bc.stringify}});Object.defineProperty(Lt,"nil",{enumerable:!0,get:function(){return bc.nil}});Object.defineProperty(Lt,"Name",{enumerable:!0,get:function(){return bc.Name}});Object.defineProperty(Lt,"CodeGen",{enumerable:!0,get:function(){return bc.CodeGen}});var _ae=am(),KM=zu(),vae=Qb(),Hu=lm(),wae=he(),Gu=Fu(),um=Lu(),vE=je(),zM=UM(),bae=VM(),JM=(t,e)=>new RegExp(t,e);JM.code="new RegExp";var Eae=["removeAdditional","useDefaults","coerceTypes"],Sae=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Rae={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Tae={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},HM=200;function $ae(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,R,O,T;let P=t.strict,I=(e=t.code)===null||e===void 0?void 0:e.optimize,C=I===!0||I===void 0?1:I||0,N=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:JM,B=(s=t.uriResolver)!==null&&s!==void 0?s:bae.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:C,regExp:N}:{optimize:C,regExp:N},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:HM,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:HM,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(R=t.validateFormats)!==null&&R!==void 0?R:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:B}}var Wu=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...$ae(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new wae.ValueScope({scope:{},prefixes:Sae,es5:r,lines:n}),this.logger=Iae(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,vae.getRules)(),GM.call(this,Rae,e,"NOT SUPPORTED"),GM.call(this,Tae,e,"DEPRECATED","warn"),this._metaOpts=Cae.call(this),e.formats&&Pae.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&xae.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Oae.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=zM;n==="id"&&(s={...zM},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof KM.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Gu.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=WM.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Hu.SchemaEnv({schema:{},schemaId:n});if(r=Hu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=WM.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Gu.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(kae.call(this,n,r),!r)return(0,vE.eachItem)(n,i=>_E.call(this,i)),this;Mae.call(this,r);let s={...r,type:(0,um.getJSONTypes)(r.type),schemaType:(0,um.getJSONTypes)(r.schemaType)};return(0,vE.eachItem)(n,s.type.length===0?i=>_E.call(this,i,s):i=>s.type.forEach(o=>_E.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=YM(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Gu.normalizeId)(o||n);let l=Gu.getSchemaRefs.call(this,e,n);return c=new Hu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Hu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Hu.compileSchema.call(this,e)}finally{this.opts=r}}};Wu.ValidationError=_ae.default;Wu.MissingRefError=KM.default;Lt.default=Wu;function GM(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function WM(t){return t=(0,Gu.normalizeId)(t),this.schemas[t]||this.refs[t]}function Oae(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Pae(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function xae(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Cae(){let t={...this.opts};for(let e of Eae)delete t[e];return t}var Nae={log(){},warn(){},error(){}};function Iae(t){if(t===!1)return Nae;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Aae=/^[a-z_$][a-z0-9_$:-]*$/i;function kae(t,e){let{RULES:r}=this;if((0,vE.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Aae.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function _E(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,um.getJSONTypes)(e.type),schemaType:(0,um.getJSONTypes)(e.schemaType)}};e.before?Dae.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function Dae(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Mae(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=YM(e)),t.validateSchema=this.compile(e,!0))}var jae={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function YM(t){return{anyOf:[t,jae]}}});var QM=E(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});var qae={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wE.default=qae});var rj=E(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.callRef=Vo.getValidate=void 0;var Lae=zu(),ZM=sn(),Mr=he(),Ec=Vs(),ej=lm(),fm=je(),Fae={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=ej.resolveRef.call(c,l,s,r);if(u===void 0)throw new Lae.default(n.opts.uriResolver,s,r);if(u instanceof ej.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return dm(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return dm(t,(0,Mr._)`${h}.validate`,l,l.$async)}function p(h){let m=tj(t,h);dm(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Mr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Mr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function tj(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Mr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Vo.getValidate=tj;function dm(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Ec.default.this:Mr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Mr._)`await ${(0,ZM.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Mr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,ZM.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Mr._)`${h}.errors`;s.assign(Ec.default.vErrors,(0,Mr._)`${Ec.default.vErrors} === null ? ${m} : ${Ec.default.vErrors}.concat(${m})`),s.assign(Ec.default.errors,(0,Mr._)`${Ec.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=fm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Mr._)`${h}.evaluated.props`);i.props=fm.mergeEvaluated.props(s,g,i.props,Mr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=fm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Mr._)`${h}.evaluated.items`);i.items=fm.mergeEvaluated.items(s,g,i.items,Mr.Name)}}}Vo.callRef=dm;Vo.default=Fae});var nj=E(bE=>{"use strict";Object.defineProperty(bE,"__esModule",{value:!0});var Uae=QM(),Bae=rj(),Vae=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Uae.default,Bae.default];bE.default=Vae});var sj=E(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var hm=he(),Ii=hm.operators,pm={maximum:{okStr:"<=",ok:Ii.LTE,fail:Ii.GT},minimum:{okStr:">=",ok:Ii.GTE,fail:Ii.LT},exclusiveMaximum:{okStr:"<",ok:Ii.LT,fail:Ii.GTE},exclusiveMinimum:{okStr:">",ok:Ii.GT,fail:Ii.LTE}},zae={message:({keyword:t,schemaCode:e})=>(0,hm.str)`must be ${pm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,hm._)`{comparison: ${pm[t].okStr}, limit: ${e}}`},Hae={keyword:Object.keys(pm),type:"number",schemaType:"number",$data:!0,error:zae,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,hm._)`${r} ${pm[e].fail} ${n} || isNaN(${r})`)}};EE.default=Hae});var ij=E(SE=>{"use strict";Object.defineProperty(SE,"__esModule",{value:!0});var Ku=he(),Gae={message:({schemaCode:t})=>(0,Ku.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ku._)`{multipleOf: ${t}}`},Wae={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Gae,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Ku._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ku._)`${o} !== parseInt(${o})`;t.fail$data((0,Ku._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};SE.default=Wae});var aj=E(RE=>{"use strict";Object.defineProperty(RE,"__esModule",{value:!0});function oj(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}RE.default=oj;oj.code='require("ajv/dist/runtime/ucs2length").default'});var cj=E(TE=>{"use strict";Object.defineProperty(TE,"__esModule",{value:!0});var zo=he(),Kae=je(),Jae=aj(),Yae={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,zo.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,zo._)`{limit: ${t}}`},Xae={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Yae,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?zo.operators.GT:zo.operators.LT,o=s.opts.unicode===!1?(0,zo._)`${r}.length`:(0,zo._)`${(0,Kae.useFunc)(t.gen,Jae.default)}(${r})`;t.fail$data((0,zo._)`${o} ${i} ${n}`)}};TE.default=Xae});var lj=E($E=>{"use strict";Object.defineProperty($E,"__esModule",{value:!0});var Qae=sn(),mm=he(),Zae={message:({schemaCode:t})=>(0,mm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,mm._)`{pattern: ${t}}`},ece={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Zae,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,mm._)`(new RegExp(${s}, ${o}))`:(0,Qae.usePattern)(t,n);t.fail$data((0,mm._)`!${a}.test(${e})`)}};$E.default=ece});var uj=E(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});var Ju=he(),tce={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Ju.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Ju._)`{limit: ${t}}`},rce={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:tce,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Ju.operators.GT:Ju.operators.LT;t.fail$data((0,Ju._)`Object.keys(${r}).length ${s} ${n}`)}};OE.default=rce});var fj=E(PE=>{"use strict";Object.defineProperty(PE,"__esModule",{value:!0});var Yu=sn(),Xu=he(),nce=je(),sce={message:({params:{missingProperty:t}})=>(0,Xu.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Xu._)`{missingProperty: ${t}}`},ice={keyword:"required",type:"object",schemaType:"array",$data:!0,error:sce,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,nce.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(Xu.nil,d);else for(let f of r)(0,Yu.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Yu.checkMissingProp)(t,r,f)),(0,Yu.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Yu.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Yu.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Xu.not)(h),()=>{t.error(),e.break()})},Xu.nil)}}};PE.default=ice});var dj=E(xE=>{"use strict";Object.defineProperty(xE,"__esModule",{value:!0});var Qu=he(),oce={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Qu.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Qu._)`{limit: ${t}}`},ace={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:oce,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Qu.operators.GT:Qu.operators.LT;t.fail$data((0,Qu._)`${r}.length ${s} ${n}`)}};xE.default=ace});var gm=E(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});var hj=qs();hj.code='require("ajv/dist/runtime/equal").default';CE.default=hj});var pj=E(IE=>{"use strict";Object.defineProperty(IE,"__esModule",{value:!0});var NE=Lu(),Ft=he(),cce=je(),lce=gm(),uce={message:({params:{i:t,j:e}})=>(0,Ft.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Ft._)`{i: ${t}, j: ${e}}`},fce={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:uce,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,NE.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,Ft._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,Ft._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,Ft._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,NE.checkDataTypes)(l,y,a.opts.strictNumbers,NE.DataType.Wrong),w=e.const("indices",(0,Ft._)`{}`);e.for((0,Ft._)`;${h}--;`,()=>{e.let(y,(0,Ft._)`${r}[${h}]`),e.if(g,(0,Ft._)`continue`),l.length>1&&e.if((0,Ft._)`typeof ${y} == "string"`,(0,Ft._)`${y} += "_"`),e.if((0,Ft._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Ft._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Ft._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,cce.useFunc)(e,lce.default),g=e.name("outer");e.label(g).for((0,Ft._)`;${h}--;`,()=>e.for((0,Ft._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Ft._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};IE.default=fce});var mj=E(kE=>{"use strict";Object.defineProperty(kE,"__esModule",{value:!0});var AE=he(),dce=je(),hce=gm(),pce={message:"must be equal to constant",params:({schemaCode:t})=>(0,AE._)`{allowedValue: ${t}}`},mce={keyword:"const",$data:!0,error:pce,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,AE._)`!${(0,dce.useFunc)(e,hce.default)}(${r}, ${s})`):t.fail((0,AE._)`${i} !== ${r}`)}};kE.default=mce});var gj=E(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});var Zu=he(),gce=je(),yce=gm(),_ce={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Zu._)`{allowedValues: ${t}}`},vce={keyword:"enum",schemaType:"array",$data:!0,error:_ce,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,gce.useFunc)(e,yce.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,Zu.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,Zu._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,Zu._)`${l()}(${r}, ${f}[${h}])`:(0,Zu._)`${r} === ${m}`}}};DE.default=vce});var yj=E(ME=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});var wce=sj(),bce=ij(),Ece=cj(),Sce=lj(),Rce=uj(),Tce=fj(),$ce=dj(),Oce=pj(),Pce=mj(),xce=gj(),Cce=[wce.default,bce.default,Ece.default,Sce.default,Rce.default,Tce.default,$ce.default,Oce.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Pce.default,xce.default];ME.default=Cce});var qE=E(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.validateAdditionalItems=void 0;var Ho=he(),jE=je(),Nce={message:({params:{len:t}})=>(0,Ho.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ho._)`{limit: ${t}}`},Ice={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Nce,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,jE.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}_j(t,n)}};function _j(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Ho._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Ho._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,jE.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,Ho._)`${a} <= ${e.length}`);r.if((0,Ho.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:jE.Type.Num},l),o.allErrors||r.if((0,Ho.not)(l),()=>r.break())})}}ef.validateAdditionalItems=_j;ef.default=Ice});var LE=E(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.validateTuple=void 0;var vj=he(),ym=je(),Ace=sn(),kce={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return wj(t,"additionalItems",e);r.items=!0,!(0,ym.alwaysValidSchema)(r,e)&&t.ok((0,Ace.validateArray)(t))}};function wj(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=ym.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,vj._)`${i}.length`);r.forEach((d,p)=>{(0,ym.alwaysValidSchema)(a,d)||(n.if((0,vj._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,ym.checkStrictMode)(a,y,p.strictTuples)}}}tf.validateTuple=wj;tf.default=kce});var bj=E(FE=>{"use strict";Object.defineProperty(FE,"__esModule",{value:!0});var Dce=LE(),Mce={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Dce.validateTuple)(t,"items")};FE.default=Mce});var Sj=E(UE=>{"use strict";Object.defineProperty(UE,"__esModule",{value:!0});var Ej=he(),jce=je(),qce=sn(),Lce=qE(),Fce={message:({params:{len:t}})=>(0,Ej.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ej._)`{limit: ${t}}`},Uce={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Fce,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,jce.alwaysValidSchema)(n,e)&&(s?(0,Lce.validateAdditionalItems)(t,s):t.ok((0,qce.validateArray)(t)))}};UE.default=Uce});var Rj=E(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});var an=he(),_m=je(),Bce={message:({params:{min:t,max:e}})=>e===void 0?(0,an.str)`must contain at least ${t} valid item(s)`:(0,an.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,an._)`{minContains: ${t}}`:(0,an._)`{minContains: ${t}, maxContains: ${e}}`},Vce={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Bce,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,an._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,_m.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,_m.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,_m.alwaysValidSchema)(i,r)){let m=(0,an._)`${u} >= ${o}`;a!==void 0&&(m=(0,an._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,an._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:_m.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,an._)`${m}++`),a===void 0?e.if((0,an._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,an._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,an._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};BE.default=Vce});var Oj=E(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.validateSchemaDeps=hs.validatePropertyDeps=hs.error=void 0;var VE=he(),zce=je(),rf=sn();hs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,VE.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,VE._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Hce={keyword:"dependencies",type:"object",schemaType:"object",error:hs.error,code(t){let[e,r]=Gce(t);Tj(t,e),$j(t,r)}};function Gce({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function Tj(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,rf.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,rf.checkReportMissingProp)(t,l)}):(r.if((0,VE._)`${c} && (${(0,rf.checkMissingProp)(t,a,i)})`),(0,rf.reportMissingProp)(t,i),r.else())}}hs.validatePropertyDeps=Tj;function $j(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,zce.alwaysValidSchema)(i,e[a])||(r.if((0,rf.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}hs.validateSchemaDeps=$j;hs.default=Hce});var xj=E(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});var Pj=he(),Wce=je(),Kce={message:"property name must be valid",params:({params:t})=>(0,Pj._)`{propertyName: ${t.propertyName}}`},Jce={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Kce,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Wce.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,Pj.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};zE.default=Jce});var GE=E(HE=>{"use strict";Object.defineProperty(HE,"__esModule",{value:!0});var vm=sn(),jn=he(),Yce=Vs(),wm=je(),Xce={message:"must NOT have additional properties",params:({params:t})=>(0,jn._)`{additionalProperty: ${t.additionalProperty}}`},Qce={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Xce,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,wm.alwaysValidSchema)(o,r))return;let l=(0,vm.allSchemaProperties)(n.properties),u=(0,vm.allSchemaProperties)(n.patternProperties);d(),t.ok((0,jn._)`${i} === ${Yce.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,wm.schemaRefOrVal)(o,n.properties,"properties");g=(0,vm.isOwnProperty)(e,w,y)}else l.length?g=(0,jn.or)(...l.map(w=>(0,jn._)`${y} === ${w}`)):g=jn.nil;return u.length&&(g=(0,jn.or)(g,...u.map(w=>(0,jn._)`${(0,vm.usePattern)(t,w)}.test(${y})`))),(0,jn.not)(g)}function f(y){e.code((0,jn._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,wm.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,jn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,jn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:wm.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};HE.default=Qce});var Ij=E(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});var Zce=Vu(),Cj=sn(),WE=je(),Nj=GE(),ele={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Nj.default.code(new Zce.KeywordCxt(i,Nj.default,"additionalProperties"));let o=(0,Cj.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=WE.mergeEvaluated.props(e,(0,WE.toHash)(o),i.props));let a=o.filter(d=>!(0,WE.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,Cj.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};KE.default=ele});var Mj=E(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});var Aj=sn(),bm=he(),kj=je(),Dj=je(),tle={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,Aj.allSchemaProperties)(r),c=a.filter(m=>(0,kj.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof bm.Name)&&(i.props=(0,Dj.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,kj.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,bm._)`${(0,Aj.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:Dj.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,bm._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,bm.not)(u),()=>e.break())})})}}};JE.default=tle});var jj=E(YE=>{"use strict";Object.defineProperty(YE,"__esModule",{value:!0});var rle=je(),nle={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,rle.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};YE.default=nle});var qj=E(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});var sle=sn(),ile={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:sle.validateUnion,error:{message:"must match a schema in anyOf"}};XE.default=ile});var Lj=E(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});var Em=he(),ole=je(),ale={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Em._)`{passingSchemas: ${t.passing}}`},cle={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ale,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,ole.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,Em._)`${c} && ${o}`).assign(o,!1).assign(a,(0,Em._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,Em.Name)})})}}};QE.default=cle});var Fj=E(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});var lle=je(),ule={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,lle.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};ZE.default=ule});var Vj=E(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});var Sm=he(),Bj=je(),fle={message:({params:t})=>(0,Sm.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Sm._)`{failingKeyword: ${t.ifClause}}`},dle={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:fle,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Bj.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Uj(n,"then"),i=Uj(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,Sm.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Sm._)`${u}`):t.setParams({ifClause:u})}}}};function Uj(t,e){let r=t.schema[e];return r!==void 0&&!(0,Bj.alwaysValidSchema)(t,r)}eS.default=dle});var zj=E(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});var hle=je(),ple={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,hle.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};tS.default=ple});var Hj=E(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});var mle=qE(),gle=bj(),yle=LE(),_le=Sj(),vle=Rj(),wle=Oj(),ble=xj(),Ele=GE(),Sle=Ij(),Rle=Mj(),Tle=jj(),$le=qj(),Ole=Lj(),Ple=Fj(),xle=Vj(),Cle=zj();function Nle(t=!1){let e=[Tle.default,$le.default,Ole.default,Ple.default,xle.default,Cle.default,ble.default,Ele.default,wle.default,Sle.default,Rle.default];return t?e.push(gle.default,_le.default):e.push(mle.default,yle.default),e.push(vle.default),e}rS.default=Nle});var Gj=E(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});var _t=he(),Ile={message:({schemaCode:t})=>(0,_t.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,_t._)`{format: ${t}}`},Ale={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Ile,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,_t._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,_t._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,_t._)`${m}.type || "string"`).assign(g,(0,_t._)`${m}.validate`),()=>r.assign(y,(0,_t._)`"string"`).assign(g,m)),t.fail$data((0,_t.or)(w(),_()));function w(){return c.strictSchema===!1?_t.nil:(0,_t._)`${o} && !${g}`}function _(){let v=u.$async?(0,_t._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,_t._)`${g}(${n})`,S=(0,_t._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,_t._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,_t.regexpCode)(S):c.code.formats?(0,_t._)`${c.code.formats}${(0,_t.getProperty)(i)}`:void 0,R=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,_t._)`${R}.validate`]:["string",S,R]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,_t._)`await ${g}(${n})`}return typeof y=="function"?(0,_t._)`${g}(${n})`:(0,_t._)`${g}.test(${n})`}}}};nS.default=Ale});var Wj=E(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});var kle=Gj(),Dle=[kle.default];sS.default=Dle});var Kj=E(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.contentVocabulary=Sc.metadataVocabulary=void 0;Sc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Sc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Yj=E(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});var Mle=nj(),jle=yj(),qle=Hj(),Lle=Wj(),Jj=Kj(),Fle=[Mle.default,jle.default,(0,qle.default)(),Lle.default,Jj.metadataVocabulary,Jj.contentVocabulary];iS.default=Fle});var Qj=E(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.DiscrError=void 0;var Xj;(function(t){t.Tag="tag",t.Mapping="mapping"})(Xj||(Rm.DiscrError=Xj={}))});var eq=E(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});var Rc=he(),oS=Qj(),Zj=lm(),Ule=zu(),Ble=je(),Vle={message:({params:{discrError:t,tagName:e}})=>t===oS.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Rc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},zle={keyword:"discriminator",type:"object",schemaType:"object",error:Vle,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,Rc._)`${r}${(0,Rc.getProperty)(a)}`);e.if((0,Rc._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:oS.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Rc._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:oS.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Rc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Ble.schemaHasRulesButRef)(S,i.self.RULES)){let R=S.$ref;if(S=Zj.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,R),S instanceof Zj.SchemaEnv&&(S=S.schema),S===void 0)throw new Ule.default(i.opts.uriResolver,i.baseId,R)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};aS.default=zle});var tq=E((BAe,Hle)=>{Hle.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var nq=E((tt,cS)=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.MissingRefError=tt.ValidationError=tt.CodeGen=tt.Name=tt.nil=tt.stringify=tt.str=tt._=tt.KeywordCxt=tt.Ajv=void 0;var Gle=XM(),Wle=Yj(),Kle=eq(),rq=tq(),Jle=["/properties"],Tm="http://json-schema.org/draft-07/schema",Tc=class extends Gle.default{_addVocabularies(){super._addVocabularies(),Wle.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Kle.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(rq,Jle):rq;this.addMetaSchema(e,Tm,!1),this.refs["http://json-schema.org/schema"]=Tm}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Tm)?Tm:void 0)}};tt.Ajv=Tc;cS.exports=tt=Tc;cS.exports.Ajv=Tc;Object.defineProperty(tt,"__esModule",{value:!0});tt.default=Tc;var Yle=Vu();Object.defineProperty(tt,"KeywordCxt",{enumerable:!0,get:function(){return Yle.KeywordCxt}});var $c=he();Object.defineProperty(tt,"_",{enumerable:!0,get:function(){return $c._}});Object.defineProperty(tt,"str",{enumerable:!0,get:function(){return $c.str}});Object.defineProperty(tt,"stringify",{enumerable:!0,get:function(){return $c.stringify}});Object.defineProperty(tt,"nil",{enumerable:!0,get:function(){return $c.nil}});Object.defineProperty(tt,"Name",{enumerable:!0,get:function(){return $c.Name}});Object.defineProperty(tt,"CodeGen",{enumerable:!0,get:function(){return $c.CodeGen}});var Xle=am();Object.defineProperty(tt,"ValidationError",{enumerable:!0,get:function(){return Xle.default}});var Qle=zu();Object.defineProperty(tt,"MissingRefError",{enumerable:!0,get:function(){return Qle.default}})});var sq=E(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.formatLimitDefinition=void 0;var Zle=nq(),qn=he(),Ai=qn.operators,$m={formatMaximum:{okStr:"<=",ok:Ai.LTE,fail:Ai.GT},formatMinimum:{okStr:">=",ok:Ai.GTE,fail:Ai.LT},formatExclusiveMaximum:{okStr:"<",ok:Ai.LT,fail:Ai.GTE},formatExclusiveMinimum:{okStr:">",ok:Ai.GT,fail:Ai.LTE}},eue={message:({keyword:t,schemaCode:e})=>(0,qn.str)`should be ${$m[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,qn._)`{comparison: ${$m[t].okStr}, limit: ${e}}`};Oc.formatLimitDefinition={keyword:Object.keys($m),type:"string",schemaType:"string",$data:!0,error:eue,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let c=new Zle.KeywordCxt(i,a.RULES.all.format.definition,"format");c.$data?l():u();function l(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",(0,qn._)`${p}[${c.schemaCode}]`);t.fail$data((0,qn.or)((0,qn._)`typeof ${f} != "object"`,(0,qn._)`${f} instanceof RegExp`,(0,qn._)`typeof ${f}.compare != "function"`,d(f)))}function u(){let p=c.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?(0,qn._)`${o.code.formats}${(0,qn.getProperty)(p)}`:void 0});t.fail$data(d(h))}function d(p){return(0,qn._)`${p}.compare(${r}, ${n}) ${$m[s].fail} 0`}},dependencies:["format"]};var tue=t=>(t.addKeyword(Oc.formatLimitDefinition),t);Oc.default=tue});var fS=E((nf,aq)=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var Pc=Kp(),rue=sq(),lS=he(),iq=new lS.Name("fullFormats"),nue=new lS.Name("fastFormats"),uS=(t,e={keywords:!0})=>{if(Array.isArray(e))return oq(t,e,Pc.fullFormats,iq),t;let[r,n]=e.mode==="fast"?[Pc.fastFormats,nue]:[Pc.fullFormats,iq],s=e.formats||Pc.formatNames;return oq(t,s,r,n),e.keywords&&(0,rue.default)(t),t};uS.get=(t,e="full")=>{let n=(e==="fast"?Pc.fastFormats:Pc.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function oq(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=(0,lS._)`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}aq.exports=nf=uS;Object.defineProperty(nf,"__esModule",{value:!0});nf.default=uS});var hS=E((zAe,cq)=>{"use strict";var sue=MD(),iue=oc(),oue=fS(),aue=Gh()({proto:!0}),dS=class t{constructor(e){this.ajv=new sue({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:iue}),oue(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=aue(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new t(e.ajvOptions);for(let[n,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,n);return r}};cq.exports=dS});var uq=E((HAe,lq)=>{"use strict";var pS=class t{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(e){return new t(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};lq.exports=pS});var mq=E((GAe,gS)=>{"use strict";gS.exports=q;gS.exports.default=q;var cue={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},fq={enum:["array","boolean","integer","null","number","object","string"]},dq=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,lue=Kp().fullFormats.uri,hq=Kp().fullFormats.regex;function cn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(cn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(cn.errors=i,o===0):(cn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var mS={validate:q};function gr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return gr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let c=t.length;for(let l=0;l<c;l++){let u=o;mS.validate(t[l],{instancePath:e+"/"+l,parentData:t,parentDataProperty:l,rootData:s})||(i=i===null?mS.validate.errors:i.concat(mS.validate.errors),o=i.length);var a=u===o;if(!a)break}}}else return gr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return gr.errors=i,o===0}var pq=Tu().default;function q(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return q.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:cue.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let _=t.$id,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!dq.test(_))return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$schema!==void 0){let _=t.$schema,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!lue(_))return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$ref!==void 0){let _=t.$ref,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!dq.test(_))return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$comment!==void 0){let _=o;if(typeof t.$comment!="string")return q.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.title!==void 0){let _=o;if(typeof t.title!="string")return q.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.description!==void 0){let _=o;if(typeof t.description!="string")return q.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.readOnly!==void 0){let _=o;if(typeof t.readOnly!="boolean")return q.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.examples!==void 0){let _=o;if(o===_&&!Array.isArray(t.examples))return q.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=_===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let _=t.multipleOf,v=o;if(o===v)if(typeof _=="number"&&isFinite(_)){if(_<=0||isNaN(_))return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maximum!==void 0){let _=t.maximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let _=t.exclusiveMaximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.minimum!==void 0){let _=t.minimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let _=t.exclusiveMinimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maxLength!==void 0){let _=t.maxLength,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minLength!==void 0){let _=o;cn(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.pattern!==void 0){let _=t.pattern,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!hq(_))return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let _=o;q(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.items!==void 0){let _=t.items,v=o,S=o,$=!1,R=o;q(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var c=R===o;if($=$||c,!$){let T=o;gr(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?gr.errors:i.concat(gr.errors),o=i.length);var c=T===o;$=$||c}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let T={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[T]:i.push(T),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.maxItems!==void 0){let _=t.maxItems,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minItems!==void 0){let _=o;cn(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let _=o;if(typeof t.uniqueItems!="boolean")return q.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.contains!==void 0){let _=o;q(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let _=t.maxProperties,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minProperties!==void 0){let _=o;cn(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.required!==void 0){let _=t.required,v=o;if(o===o)if(Array.isArray(_)){var l=!0;let R=_.length;for(let O=0;O<R;O++){let T=o;if(typeof _[O]!="string")return q.errors=[{instancePath:e+"/required/"+O,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=T===o;if(!l)break}if(l){let O=_.length,T;if(O>1){let P={};for(;O--;){let I=_[O];if(typeof I=="string"){if(typeof P[I]=="number"){return T=P[I],q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:O,j:T},message:"must NOT have duplicate items (items ## "+T+" and "+O+" are identical)"}],!1;break}P[I]=O}}}}}else return q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let _=o;q(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.definitions!==void 0){let _=t.definitions,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let R=o;q(_[$],{instancePath:e+"/definitions/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var u=R===o;if(!u)break}else return q.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.properties!==void 0){let _=t.properties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let R=o;q(_[$],{instancePath:e+"/properties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var d=R===o;if(!d)break}else return q.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let _=t.patternProperties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_)){for(let $ in _){let R=o;if(o===R&&typeof $=="string"&&!hq($)){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:$};i===null?i=[O]:i.push(O),o++}var p=R===o;if(!p){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:$},message:"property name must be valid"};return i===null?i=[O]:i.push(O),o++,q.errors=i,!1;break}}if(p)for(let $ in _){let R=o;q(_[$],{instancePath:e+"/patternProperties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var f=R===o;if(!f)break}}else return q.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.dependencies!==void 0){let _=t.dependencies,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let R=_[$],O=o,T=o,P=!1,I=o;q(R,{instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var h=I===o;if(P=P||h,!P){let C=o;if(o===o)if(Array.isArray(R)){var m=!0;let te=R.length;for(let z=0;z<te;z++){let W=o;if(typeof R[z]!="string"){let Rr={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+z,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Rr]:i.push(Rr),o++}var m=W===o;if(!m)break}if(m){let z=R.length,W;if(z>1){let Rt={};for(;z--;){let Rr=R[z];if(typeof Rr=="string"){if(typeof Rt[Rr]=="number"){W=Rt[Rr];let Y={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:z,j:W},message:"must NOT have duplicate items (items ## "+W+" and "+z+" are identical)"};i===null?i=[Y]:i.push(Y),o++;break}Rt[Rr]=z}}}}}else{let te={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[te]:i.push(te),o++}var h=C===o;P=P||h}if(P)o=T,i!==null&&(T?i.length=T:i=null);else{let C={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[C]:i.push(C),o++,q.errors=i,!1}var y=O===o;if(!y)break}else return q.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let _=o;q(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.enum!==void 0){let _=t.enum,v=o;if(o===v)if(Array.isArray(_)){if(_.length<1)return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let $=_.length,R;if($>1){e:for(;$--;)for(R=$;R--;)if(pq(_[$],_[R])){return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:$,j:R},message:"must NOT have duplicate items (items ## "+R+" and "+$+" are identical)"}],!1;break e}}}}else return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.type!==void 0){let _=t.type,v=o,S=o,$=!1,R=o;if(!(_==="array"||_==="boolean"||_==="integer"||_==="null"||_==="number"||_==="object"||_==="string")){let T={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:fq.enum},message:"must be equal to one of the allowed values"};i===null?i=[T]:i.push(T),o++}var g=R===o;if($=$||g,!$){let T=o;if(o===T)if(Array.isArray(_))if(_.length<1){let I={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[I]:i.push(I),o++}else{var w=!0;let I=_.length;for(let C=0;C<I;C++){let N=_[C],B=o;if(!(N==="array"||N==="boolean"||N==="integer"||N==="null"||N==="number"||N==="object"||N==="string")){let z={instancePath:e+"/type/"+C,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:fq.enum},message:"must be equal to one of the allowed values"};i===null?i=[z]:i.push(z),o++}var w=B===o;if(!w)break}if(w){let C=_.length,N;if(C>1){e:for(;C--;)for(N=C;N--;)if(pq(_[C],_[N])){let B={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:C,j:N},message:"must NOT have duplicate items (items ## "+N+" and "+C+" are identical)"};i===null?i=[B]:i.push(B),o++;break e}}}}else{let I={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[I]:i.push(I),o++}var g=T===o;$=$||g}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let T={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[T]:i.push(T),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.format!==void 0){let _=o;if(typeof t.format!="string")return q.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let _=o;if(typeof t.contentMediaType!="string")return q.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let _=o;if(typeof t.contentEncoding!="string")return q.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.if!==void 0){let _=o;q(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.then!==void 0){let _=o;q(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.else!==void 0){let _=o;q(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.allOf!==void 0){let _=o;gr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?gr.errors:i.concat(gr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.anyOf!==void 0){let _=o;gr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?gr.errors:i.concat(gr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.oneOf!==void 0){let _=o;gr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?gr.errors:i.concat(gr.errors),o=i.length);var a=_===o}else var a=!0;if(a)if(t.not!==void 0){let _=o;q(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return q.errors=i,o===0}});var wS=E((WAe,gq)=>{"use strict";var yS=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},_S=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},vS=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};gq.exports={MergeError:yS,ResolverNotFoundError:_S,InvalidOnConflictOptionError:vS}});var vq=E((KAe,_q)=>{"use strict";var{dequal:uue}=hp(),{MergeError:bS}=wS();function yq(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(n=>t[r].includes(n));return e}function fue(t,e,r){let n=yq(e);if(n.length===0)throw new bS(t,e);r[t]=n}function due(t,e,r){for(let s=0;s<e.length;s++)Array.isArray(e[s])||(e[s]=[e[s]]);let n=yq(e);if(n.length===0)throw new bS(t,e);n.length===1?r[t]=n[0]:r[t]=n}function hue(t,e,r){let n=[];for(let s of e)for(let i of s)n.includes(i)||n.push(i);r[t]=n}function pue(t,e,r){r[t]=Math.min(...e)}function mue(t,e,r){r[t]=Math.max(...e)}function gue(t,e,r){let n=(a,c)=>c?n(c,a%c):a,s=(a,c)=>a*c/n(a,c),i=1;for(let a of e)for(;a*i%1!==0;)i*=10;let o=e[0]*i;for(let a of e)o=s(o,a*i);r[t]=o/i}function yue(t,e,r){let n=e[0];for(let s=1;s<e.length;s++)if(!uue(e[s],n))throw new bS(t,e);r[t]=n}function _ue(){}function vue(t,e,r){for(let n of e)if(n===!1){r[t]=!1;return}r[t]=!0}function wue(t,e,r){for(let n of e)if(n===!0){r[t]=!0;return}r[t]=!1}_q.exports={arraysIntersection:fue,hybridArraysIntersection:due,arraysUnion:hue,minNumber:pue,maxNumber:mue,commonMultiple:gue,allEqual:yue,booleanAnd:vue,booleanOr:wue,skip:_ue}});var Tq=E((JAe,Rq)=>{"use strict";var{dequal:bue}=hp(),lt=vq(),xm=wS(),Eq={$id:lt.skip,type:lt.hybridArraysIntersection,enum:lt.arraysIntersection,minLength:lt.maxNumber,maxLength:lt.minNumber,minimum:lt.maxNumber,maximum:lt.minNumber,multipleOf:lt.commonMultiple,exclusiveMinimum:lt.maxNumber,exclusiveMaximum:lt.minNumber,minItems:lt.maxNumber,maxItems:lt.minNumber,maxProperties:lt.minNumber,minProperties:lt.maxNumber,const:lt.allEqual,default:lt.allEqual,format:lt.allEqual,required:lt.arraysUnion,properties:Oue,patternProperties:Pm,additionalProperties:Om,items:Rue,additionalItems:Tue,definitions:Pm,$defs:Pm,nullable:lt.booleanAnd,oneOf:wq,anyOf:wq,allOf:lt.arraysUnion,not:Om,if:Pue,then:lt.skip,else:lt.skip,dependencies:bq,dependentRequired:bq,dependentSchemas:Pm,propertyNames:Om,uniqueItems:lt.booleanOr,contains:Om};function Om(t,e,r,n,s){r[t]=Ln(e,s)}function Eue(t){let e=[[]];for(let r of t){let n=[];for(let s of e)for(let i of r)n.push([...s,i]);e=n}return e}function wq(t,e,r,n,s){if(e.length===1){r[t]=e[0];return}let i=Eue(e),o=[];for(let a of i)try{let c=Ln(a,s);c!==void 0&&o.push(c)}catch(c){if(c instanceof xm.MergeError)continue;throw c}r[t]=o}function Sue(t,e){let{items:r,additionalItems:n}=t;return Array.isArray(r)?e<r.length?r[e]:n:r!==void 0?r:n}function Rue(t,e,r,n,s){let i=0;for(let a of e)Array.isArray(a)&&(i=Math.max(i,a.length));if(i===0){r[t]=Ln(e,s);return}let o=[];for(let a=0;a<i;a++){let c=[];for(let l of n){let u=Sue(l,a);u!==void 0&&c.push(u)}o[a]=Ln(c,s)}r[t]=o}function Tue(t,e,r,n,s){let i=!1;for(let a of n)if(Array.isArray(a.items)){i=!0;break}if(!i){r[t]=Ln(e,s);return}let o=[];for(let a of n){let c=a.additionalItems;c===void 0&&!Array.isArray(a.items)&&(c=a.items),c!==void 0&&o.push(c)}r[t]=Ln(o,s)}function $ue(t,e){let{properties:r,patternProperties:n,additionalProperties:s}=t;if(r?.[e]!==void 0)return r[e];for(let i of Object.keys(n??{}))if(new RegExp(i).test(e))return n[i];return s}function Oue(t,e,r,n,s){let i={};for(let a of n){let c=a.properties??{};for(let l of Object.keys(c)){if(i[l]!==void 0)continue;let u=c[l];i[l]=[u];for(let d of n){if(a===d)continue;let p=$ue(d,l);p!==void 0&&i[l].push(p)}}}let o={};for(let a of Object.keys(i)){let c=i[a];o[a]=Ln(c,s)}r[t]=o}function Pm(t,e,r,n,s){let i={};for(let a of e)for(let c of Object.keys(a))i[c]===void 0&&(i[c]=[]),i[c].push(a[c]);let o={};for(let a of Object.keys(i)){let c=i[a],l=Ln(c,s);o[a]=l}r[t]=o}function Pue(t,e,r,n,s){for(let i=0;i<n.length;i++){let o={if:n[i].if,then:n[i].then,else:n[i].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Ln([r.then,o],s)),r.else!==void 0&&(r.else=Ln([r.else,o],s))}}}function bq(t,e,r){let n={};for(let s of e)for(let i of Object.keys(s)){n[i]===void 0&&(n[i]=[]);let o=n[i];for(let a of s[i])o.includes(a)||o.push(a)}r[t]=n}function Ln(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},n={},s=!0;for(let i of t){if(i===!1)return!1;if(i!==!0){s=!1;for(let o of Object.keys(i))n[o]===void 0&&(n[o]=[]),n[o].push(i[o])}}if(s)return!0;for(let i of Object.keys(n)){let o=n[i];(e.resolvers[i]??e.defaultResolver)(i,o,r,t,e)}return r}function Sq(t,e,r,n,s){let i=s.onConflict??"throw";if(e.length===1||i==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!bue(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(i==="throw")throw new xm.ResolverNotFoundError(t,e);if(i!=="skip")throw new xm.InvalidOnConflictOptionError(i)}function xue(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=Sq),e.resolvers={...Eq,...e.resolvers},Ln(t,e)}Rq.exports={mergeSchemas:xue,keywordsResolvers:Eq,defaultResolver:Sq,...xm}});var Oq=E((YAe,$q)=>{"use strict";var{mergeSchemas:Cue}=Tq();function Nue(t){return Cue(t,{onConflict:"skip"})}$q.exports=Nue});var Pq=E((XAe,ES)=>{"use strict";function Iue(t,e,r,n){let s="";e.validatorSchemasIds.size>0?(s+=`const Validator = require('fast-json-stringify/lib/validator')
`,s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`;let{schema:i,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}ES.exports=Iue;ES.exports.dependencies={Serializer:Kh(),Validator:hS()}});var jq=E((QAe,xc)=>{"use strict";var{RefResolver:Aue}=uA(),kue=Kh(),Due=hS(),Go=uq(),xq=mq(),Mue=Oq(),jue=/'/g,Cm=2e4,Nq="default",que=`
const {
  asString,
  asNumber,
  asBoolean,
  asDateTime,
  asDate,
  asTime,
  asUnsafeString
} = serializer

const asInteger = serializer.asInteger.bind(serializer)

`,Lue=["floor","ceil","round","trunc"],Iq=["default","json-stringify"],sf=0;function SS(t,e){if(!xq(t)){e?e=`"${e}" `:e="";let r=xq.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=SS.errors,n}}function of(t,e){let r=e.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||e.schemaId,i=r.slice(n)||"#",o=t.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new Go(o,s,i);return o.$ref!==void 0?of(t,a):a}function Nm(t,e){let r=t.refResolver.getSchema(e,"#");return new Go(r,e,"#")}function Cq(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function RS(t,e){SS(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new Aue,rootSchemaId:t.$id||`__fjs_root_${sf++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=Cq(t,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let u in e.schema){let d=e.schema[u],p=Cq(d,u);r.refResolver.hasSchema(p)||(SS(d,u),r.refResolver.addSchema(d,u))}if(e.rounding&&!Lue.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(Iq.includes(e.largeArrayMechanism))Nq=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))Cm=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))Cm=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")Cm=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let s=new Go(t,r.rootSchemaId),i=Gr(r,s,"input"),o=`
    ${que}
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;i==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new kue(e),c=new Due(e.ajv);for(let u of r.validatorSchemasIds){let d=r.refResolver.getSchema(u);c.addSchema(d,u);let p=r.refResolver.getSchemaDependencies(u);for(let[f,h]of Object.entries(p))c.addSchema(h,f)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:c,serializer:a,code:`validator
serializer
${o}`,ajv:c.ajv};let l=new Function("validator","serializer",o);return e.mode==="standalone"?Pq()(l,r,a,c):l(c,a)}var Fue=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],Uue=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],Bue=["maxLength","minLength","pattern"],Vue=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function zue(t){for(let e of Fue)if(e in t)return"object";for(let e of Uue)if(e in t)return"array";for(let e of Bue)if(e in t)return"string";for(let e of Vue)if(e in t)return"number";return t.type}function Hue(t,e,r){let n=e.schema,s=Object.keys(n.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let u in a){let d=o.getPropertyLocation(u);i+=`
        if (/${u.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += asString(key) + JSON_STR_COLONS
          ${Gr(t,d,"value")}
          continue
        }
      `}let l=e.getPropertyLocation("additionalProperties").schema;if(l!==void 0)if(l===!0)i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let u=e.getPropertyLocation("additionalProperties");i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS
        ${Gr(t,u,"value")}
      `}return i+=`
    }
  `,i}function Gue(t,e){let r=e.schema,n=e.getPropertyLocation("properties"),s=r.required||[],i=Object.keys(r.properties||{}).sort((l,u)=>{let d=s.includes(l),p=s.includes(u);return d===p?0:d?-1:1}),o=s.includes(i[0]),a=`let value
`;for(let l of s)if(!i.includes(l)){let u=JSON.stringify(l);a+=`if (obj[${u}] === undefined) throw new Error('${u.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let c="";o||(a+=`let addComma = false
`,c="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let l of i){let u=n.getPropertyLocation(l);u.schema.$ref&&(u=of(t,u));let d=JSON.stringify(l),p=u.schema.default,f=s.includes(l);a+=`
      value = obj[${d}]
      if (value !== undefined) {
        ${c}
        json += ${JSON.stringify(d+":")}
        ${Gr(t,u,"value")}
      }`,p!==void 0?a+=` else {
        ${c}
        json += ${JSON.stringify(d+":"+JSON.stringify(p))}
      }
      `:f?a+=` else {
        throw new Error('${d.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(c="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=Hue(t,e,c)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function Im(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=of(t,a))}let n=[];for(let o of r){let a=Aq(t,o.schema,o.schemaId);delete a.$id,n.push(a)}let s=Mue(n),i=new Go(s,e);return t.refResolver.addSchema(s,e),i}function Aq(t,e,r){let n=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let s=t.mergedSchemasIds.get(e);s&&t.mergedSchemasIds.set(n,s);for(let i in e){let o=e[i];i==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=Aq(t,o,r)),n[i]=o}return n}function Wue(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function Kue(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=Dq(t);t.functionsNamesBySchema.set(r,n);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let i=`
  `,o=r.nullable===!0;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${Wue("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${Gue(t,e)}
    }
  `,t.functions.push(i),n}function Jue(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=of(t,n));let s=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=Dq(t);t.functionsNamesBySchema.set(r,i);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `,c=r.nullable===!0;if(a+=`
    ${c?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),Nq==="json-stringify"&&(a+=`if (arrayLength >= ${Cm}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(s)){for(let l=0;l<s.length;l++){let u=s[l];a+=`value = obj[${l}]`;let d=Gr(t,n.getPropertyLocation(l),"value");a+=`
        if (${l} < arrayLength) {
          if (${kq(u.type,"value")}) {
            ${d}
            if (${l} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${l} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          value = obj[i]
          json += JSON.stringify(value)
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let l=Gr(t,n,"value");a+=`
      for (let i = 0; i < arrayLength; i++) {
        value = obj[i]
        ${l}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,t.functions.push(a),i}function kq(t,e){let r;switch(t){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(t)&&(r=`(${t.map(s=>kq(s,e)).join(" || ")})`)}return r}function Dq(t){return"anonymous"+t.functionsCounter++}function Yue(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,c)=>{e.schema={...e.schema,type:a};let l=Mq(t,e,r),u=c===0?"if":"else if";switch(a){case"null":i+=`
          ${u} (${r} === null)
            ${l}
          `;break;case"string":{i+=`
          ${u}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${l}
        `;break}case"array":{i+=`
          ${u}(Array.isArray(${r}))
            ${l}
        `;break}case"integer":{i+=`
          ${u}(Number.isInteger(${r}) || ${r} === null)
            ${l}
        `;break}default:{i+=`
          ${u}(typeof ${r} === "${a}" || ${r} === null)
            ${l}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function Mq(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += JSON_STR_NULL";case"string":return n.format==="date-time"?`json += asDateTime(${r})`:n.format==="date"?`json += asDate(${r})`:n.format==="time"?`json += asTime(${r})`:n.format==="unsafe"?`json += asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += asString(${r}.source)
          } else {
            json += asString(${r}.toString())
          }
        } else {
          json += asString(${r})
        }
        `;case"integer":return`json += asInteger(${r})`;case"number":return`json += asNumber(${r})`;case"boolean":return`json += asBoolean(${r})`;case"object":return`json += ${Kue(t,e)}(${r})`;case"array":return`json += ${Jue(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function Xue(t,e){let r=t.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${e} === null) {
        json += JSON_STR_NULL
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(jue,"\\'")}'`,s&&(i+=`
      }
    `),i}function Que(t,e,r){let n=e.schema,s=t.mergedSchemasIds.get(n);if(s){let u=Nm(t,s);return Gr(t,u,r)}s=`__fjs_merged_${sf++}`,t.mergedSchemasIds.set(n,s);let{allOf:i,...o}=e.schema,a=[new Go(o,e.schemaId,e.jsonPointer)],c=e.getPropertyLocation("allOf");for(let u=0;u<i.length;u++)a.push(c.getPropertyLocation(u));let l=Im(t,s,a);return Gr(t,l,r)}function Zue(t,e,r){t.validatorSchemasIds.add(e.schemaId);let s=e.schema.anyOf?"anyOf":"oneOf",{[s]:i,...o}=e.schema,a=new Go(o,e.schemaId,e.jsonPointer),c=e.getPropertyLocation(s),l="";for(let d=0;d<i.length;d++){let p=c.getPropertyLocation(d),f=p.schema,h=t.mergedSchemasIds.get(f),m=null;h?m=Nm(t,h):(h=`__fjs_merged_${sf++}`,t.mergedSchemasIds.set(f,h),m=Im(t,h,[a,p]));let y=Gr(t,m,r),g=p.getSchemaRef();l+=`
      ${d===0?"if":"else if"}(validator.validate("${g}", ${r}))
        ${y}
    `}let u=e.getSchemaRef();return u.startsWith(t.rootSchemaId)&&(u=u.replace(t.rootSchemaId,"")),l+=`
    else throw new TypeError(\`The value of '${u}' does not match schema definition.\`)
  `,l}function efe(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:n,then:s,else:i,...o}=e.schema,a=new Go(o,e.schemaId,e.jsonPointer),l=e.getPropertyLocation("if").getSchemaRef(),u=e.getPropertyLocation("then"),d=t.mergedSchemasIds.get(s),p=null;if(d?p=Nm(t,d):(d=`__fjs_merged_${sf++}`,t.mergedSchemasIds.set(s,d),p=Im(t,d,[a,u])),!i)return`
      if (validator.validate("${l}", ${r})) {
        ${Gr(t,p,r)}
      } else {
        ${Gr(t,a,r)}
      }
    `;let f=e.getPropertyLocation("else"),h=t.mergedSchemasIds.get(i),m=null;return h?m=Nm(t,h):(h=`__fjs_merged_${sf++}`,t.mergedSchemasIds.set(i,h),m=Im(t,h,[a,f])),`
    if (validator.validate("${l}", ${r})) {
      ${Gr(t,p,r)}
    } else {
      ${Gr(t,m,r)}
    }
  `}function Gr(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=of(t,e),n=e.schema),n.allOf)return Que(t,e,r);if(n.anyOf||n.oneOf)return Zue(t,e,r);if(n.if&&n.then)return efe(t,e,r);if(n.type===void 0){let a=zue(n);a&&(n.type=a)}let s="",i=n.type,o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),n.const!==void 0?s+=Xue(e,r):Array.isArray(i)?s+=Yue(t,e,r):s+=Mq(t,e,r),o&&(s+=`
      }
    `),s}xc.exports=RS;xc.exports.default=RS;xc.exports.build=RS;xc.exports.validLargeArrayMechanisms=Iq;xc.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var Fq=E((ZAe,Am)=>{"use strict";var tfe=jq();function qq(){return function(e,r){let n=Object.assign({},r,{schema:e});return rfe.bind(null,n)}}function rfe(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),tfe(e,t)}function Lq(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=qq();return function(n,s={}){s.mode="standalone";let i=e(n,s);return function(o){let a=i(o);return t.storeFunction(o,a),new Function(a)}}}Am.exports.SerializerSelector=qq;Am.exports.StandaloneSerializer=Lq;Am.exports.default=Lq});var Uq=E((eke,af)=>{"use strict";var{SerializerSelector:TS,StandaloneSerializer:nfe}=Fq();af.exports=TS;af.exports.default=TS;af.exports.SerializerSelector=TS;af.exports.StandaloneSerializer=nfe});var Cc=E(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.regexpCode=qe.getEsmExportName=qe.getProperty=qe.safeStringify=qe.stringify=qe.strConcat=qe.addCodeArg=qe.str=qe._=qe.nil=qe._Code=qe.Name=qe.IDENTIFIER=qe._CodeOrName=void 0;var cf=class{};qe._CodeOrName=cf;qe.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Wo=class extends cf{constructor(e){if(super(),!qe.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};qe.Name=Wo;var ln=class extends cf{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Wo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};qe._Code=ln;qe.nil=new ln("");function Bq(t,...e){let r=[t[0]],n=0;for(;n<e.length;)OS(r,e[n]),r.push(t[++n]);return new ln(r)}qe._=Bq;var $S=new ln("+");function Vq(t,...e){let r=[lf(t[0])],n=0;for(;n<e.length;)r.push($S),OS(r,e[n]),r.push($S,lf(t[++n]));return sfe(r),new ln(r)}qe.str=Vq;function OS(t,e){e instanceof ln?t.push(...e._items):e instanceof Wo?t.push(e):t.push(afe(e))}qe.addCodeArg=OS;function sfe(t){let e=1;for(;e<t.length-1;){if(t[e]===$S){let r=ife(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function ife(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Wo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Wo))return`"${t}${e.slice(1)}`}function ofe(t,e){return e.emptyStr()?t:t.emptyStr()?e:Vq`${t}${e}`}qe.strConcat=ofe;function afe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:lf(Array.isArray(t)?t.join(","):t)}function cfe(t){return new ln(lf(t))}qe.stringify=cfe;function lf(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}qe.safeStringify=lf;function lfe(t){return typeof t=="string"&&qe.IDENTIFIER.test(t)?new ln(`.${t}`):Bq`[${t}]`}qe.getProperty=lfe;function ufe(t){if(typeof t=="string"&&qe.IDENTIFIER.test(t))return new ln(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}qe.getEsmExportName=ufe;function ffe(t){return new ln(t.toString())}qe.regexpCode=ffe});var jm=E(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ValueScope=qr.ValueScopeName=qr.Scope=qr.varKinds=qr.UsedValueState=void 0;var jr=Cc(),PS=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},km;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(km||(qr.UsedValueState=km={}));qr.varKinds={const:new jr.Name("const"),let:new jr.Name("let"),var:new jr.Name("var")};var Dm=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof jr.Name?e:this.name(e)}name(e){return new jr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};qr.Scope=Dm;var Mm=class extends jr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,jr._)`.${new jr.Name(r)}[${n}]`}};qr.ValueScopeName=Mm;var dfe=(0,jr._)`\n`,xS=class extends Dm{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?dfe:jr.nil}}get(){return this._scope}name(e){return new Mm(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,jr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=jr.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,km.Started);let u=r(l);if(u){let d=this.opts.es5?qr.varKinds.var:qr.varKinds.const;i=(0,jr._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,jr._)`${i}${u}${this.opts._n}`;else throw new PS(l);c.set(l,km.Completed)})}return i}};qr.ValueScope=xS});var ne=E(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.or=_e.and=_e.not=_e.CodeGen=_e.operators=_e.varKinds=_e.ValueScopeName=_e.ValueScope=_e.Scope=_e.Name=_e.regexpCode=_e.stringify=_e.getProperty=_e.nil=_e.strConcat=_e.str=_e._=void 0;var Ce=Cc(),Fn=jm(),ki=Cc();Object.defineProperty(_e,"_",{enumerable:!0,get:function(){return ki._}});Object.defineProperty(_e,"str",{enumerable:!0,get:function(){return ki.str}});Object.defineProperty(_e,"strConcat",{enumerable:!0,get:function(){return ki.strConcat}});Object.defineProperty(_e,"nil",{enumerable:!0,get:function(){return ki.nil}});Object.defineProperty(_e,"getProperty",{enumerable:!0,get:function(){return ki.getProperty}});Object.defineProperty(_e,"stringify",{enumerable:!0,get:function(){return ki.stringify}});Object.defineProperty(_e,"regexpCode",{enumerable:!0,get:function(){return ki.regexpCode}});Object.defineProperty(_e,"Name",{enumerable:!0,get:function(){return ki.Name}});var Um=jm();Object.defineProperty(_e,"Scope",{enumerable:!0,get:function(){return Um.Scope}});Object.defineProperty(_e,"ValueScope",{enumerable:!0,get:function(){return Um.ValueScope}});Object.defineProperty(_e,"ValueScopeName",{enumerable:!0,get:function(){return Um.ValueScopeName}});Object.defineProperty(_e,"varKinds",{enumerable:!0,get:function(){return Um.varKinds}});_e.operators={GT:new Ce._Code(">"),GTE:new Ce._Code(">="),LT:new Ce._Code("<"),LTE:new Ce._Code("<="),EQ:new Ce._Code("==="),NEQ:new Ce._Code("!=="),NOT:new Ce._Code("!"),OR:new Ce._Code("||"),AND:new Ce._Code("&&"),ADD:new Ce._Code("+")};var Hs=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},CS=class extends Hs{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Fn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Ic(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ce._CodeOrName?this.rhs.names:{}}},qm=class extends Hs{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ce.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Ic(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ce.Name?{}:{...this.lhs.names};return Fm(e,this.rhs)}},NS=class extends qm{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},IS=class extends Hs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},AS=class extends Hs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},kS=class extends Hs{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},DS=class extends Hs{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Ic(this.code,e,r),this}get names(){return this.code instanceof Ce._CodeOrName?this.code.names:{}}},uf=class extends Hs{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(hfe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Yo(e,r.names),{})}},Gs=class extends uf{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},MS=class extends uf{},Nc=class extends Gs{};Nc.kind="else";var Ko=class t extends Gs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Nc(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(zq(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Ic(this.condition,e,r),this}get names(){let e=super.names;return Fm(e,this.condition),this.else&&Yo(e,this.else.names),e}};Ko.kind="if";var Jo=class extends Gs{};Jo.kind="for";var jS=class extends Jo{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Ic(this.iteration,e,r),this}get names(){return Yo(super.names,this.iteration.names)}},qS=class extends Jo{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Fn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Fm(super.names,this.from);return Fm(e,this.to)}},Lm=class extends Jo{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Ic(this.iterable,e,r),this}get names(){return Yo(super.names,this.iterable.names)}},ff=class extends Gs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ff.kind="func";var df=class extends uf{render(e){return"return "+super.render(e)}};df.kind="return";var LS=class extends Gs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Yo(e,this.catch.names),this.finally&&Yo(e,this.finally.names),e}},hf=class extends Gs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};hf.kind="catch";var pf=class extends Gs{render(e){return"finally"+super.render(e)}};pf.kind="finally";var FS=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Fn.Scope({parent:e}),this._nodes=[new MS]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new CS(e,i,n)),i}const(e,r,n){return this._def(Fn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Fn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Fn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new qm(e,r,n))}add(e,r){return this._leafNode(new NS(e,_e.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ce.nil&&this._leafNode(new DS(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ce.addCodeArg)(r,s));return r.push("}"),new Ce._Code(r)}if(e,r,n){if(this._blockNode(new Ko(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ko(e))}else(){return this._elseNode(new Nc)}endIf(){return this._endBlockNode(Ko,Nc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new jS(e),r)}forRange(e,r,n,s,i=this.opts.es5?Fn.varKinds.var:Fn.varKinds.let){let o=this._scope.toName(e);return this._for(new qS(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Fn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ce.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ce._)`${o}.length`,a=>{this.var(i,(0,Ce._)`${o}[${a}]`),n(i)})}return this._for(new Lm("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Fn.varKinds.var:Fn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ce._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Lm("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Jo)}label(e){return this._leafNode(new IS(e))}break(e){return this._leafNode(new AS(e))}return(e){let r=new df;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(df)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new LS;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new hf(i),r(i)}return n&&(this._currNode=s.finally=new pf,this.code(n)),this._endBlockNode(hf,pf)}throw(e){return this._leafNode(new kS(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ce.nil,n,s){return this._blockNode(new ff(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ff)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ko))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};_e.CodeGen=FS;function Yo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Fm(t,e){return e instanceof Ce._CodeOrName?Yo(t,e.names):t}function Ic(t,e,r){if(t instanceof Ce.Name)return n(t);if(!s(t))return t;return new Ce._Code(t._items.reduce((i,o)=>(o instanceof Ce.Name&&(o=n(o)),o instanceof Ce._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ce._Code&&i._items.some(o=>o instanceof Ce.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function hfe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function zq(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ce._)`!${US(t)}`}_e.not=zq;var pfe=Hq(_e.operators.AND);function mfe(...t){return t.reduce(pfe)}_e.and=mfe;var gfe=Hq(_e.operators.OR);function yfe(...t){return t.reduce(gfe)}_e.or=yfe;function Hq(t){return(e,r)=>e===Ce.nil?r:r===Ce.nil?e:(0,Ce._)`${US(e)} ${t} ${US(r)}`}function US(t){return t instanceof Ce.Name?t:(0,Ce._)`(${t})`}});var pe=E(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.checkStrictMode=Ee.getErrorPath=Ee.Type=Ee.useFunc=Ee.setEvaluated=Ee.evaluatedPropsToName=Ee.mergeEvaluated=Ee.eachItem=Ee.unescapeJsonPointer=Ee.escapeJsonPointer=Ee.escapeFragment=Ee.unescapeFragment=Ee.schemaRefOrVal=Ee.schemaHasRulesButRef=Ee.schemaHasRules=Ee.checkUnknownRules=Ee.alwaysValidSchema=Ee.toHash=void 0;var We=ne(),_fe=Cc();function vfe(t){let e={};for(let r of t)e[r]=!0;return e}Ee.toHash=vfe;function wfe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Kq(t,e),!Jq(e,t.self.RULES.all))}Ee.alwaysValidSchema=wfe;function Kq(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||Qq(t,`unknown keyword: "${i}"`)}Ee.checkUnknownRules=Kq;function Jq(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Ee.schemaHasRules=Jq;function bfe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ee.schemaHasRulesButRef=bfe;function Efe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,We._)`${r}`}return(0,We._)`${t}${e}${(0,We.getProperty)(n)}`}Ee.schemaRefOrVal=Efe;function Sfe(t){return Yq(decodeURIComponent(t))}Ee.unescapeFragment=Sfe;function Rfe(t){return encodeURIComponent(VS(t))}Ee.escapeFragment=Rfe;function VS(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ee.escapeJsonPointer=VS;function Yq(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ee.unescapeJsonPointer=Yq;function Tfe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Ee.eachItem=Tfe;function Gq({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof We.Name?(i instanceof We.Name?t(s,i,o):e(s,i,o),o):i instanceof We.Name?(e(s,o,i),i):r(i,o);return a===We.Name&&!(c instanceof We.Name)?n(s,c):c}}Ee.mergeEvaluated={props:Gq({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,We._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,We._)`${r} || {}`).code((0,We._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,We._)`${r} || {}`),zS(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Xq}),items:Gq({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,We._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,We._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Xq(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,We._)`{}`);return e!==void 0&&zS(t,r,e),r}Ee.evaluatedPropsToName=Xq;function zS(t,e,r){Object.keys(r).forEach(n=>t.assign((0,We._)`${e}${(0,We.getProperty)(n)}`,!0))}Ee.setEvaluated=zS;var Wq={};function $fe(t,e){return t.scopeValue("func",{ref:e,code:Wq[e.code]||(Wq[e.code]=new _fe._Code(e.code))})}Ee.useFunc=$fe;var BS;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(BS||(Ee.Type=BS={}));function Ofe(t,e,r){if(t instanceof We.Name){let n=e===BS.Num;return r?n?(0,We._)`"[" + ${t} + "]"`:(0,We._)`"['" + ${t} + "']"`:n?(0,We._)`"/" + ${t}`:(0,We._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,We.getProperty)(t).toString():"/"+VS(t)}Ee.getErrorPath=Ofe;function Qq(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ee.checkStrictMode=Qq});var un=E(HS=>{"use strict";Object.defineProperty(HS,"__esModule",{value:!0});var er=ne(),Pfe={data:new er.Name("data"),valCxt:new er.Name("valCxt"),instancePath:new er.Name("instancePath"),parentData:new er.Name("parentData"),parentDataProperty:new er.Name("parentDataProperty"),rootData:new er.Name("rootData"),dynamicAnchors:new er.Name("dynamicAnchors"),vErrors:new er.Name("vErrors"),errors:new er.Name("errors"),this:new er.Name("this"),self:new er.Name("self"),scope:new er.Name("scope"),json:new er.Name("json"),jsonPos:new er.Name("jsonPos"),jsonLen:new er.Name("jsonLen"),jsonPart:new er.Name("jsonPart")};HS.default=Pfe});var mf=E(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.extendErrors=tr.resetErrorsCount=tr.reportExtraError=tr.reportError=tr.keyword$DataError=tr.keywordError=void 0;var Ae=ne(),Bm=pe(),yr=un();tr.keywordError={message:({keyword:t})=>(0,Ae.str)`must pass "${t}" keyword validation`};tr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ae.str)`"${t}" keyword must be ${e} ($data)`:(0,Ae.str)`"${t}" keyword is invalid ($data)`};function xfe(t,e=tr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=tL(t,e,r);n??(o||a)?Zq(i,c):eL(s,(0,Ae._)`[${c}]`)}tr.reportError=xfe;function Cfe(t,e=tr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=tL(t,e,r);Zq(s,a),i||o||eL(n,yr.default.vErrors)}tr.reportExtraError=Cfe;function Nfe(t,e){t.assign(yr.default.errors,e),t.if((0,Ae._)`${yr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ae._)`${yr.default.vErrors}.length`,e),()=>t.assign(yr.default.vErrors,null)))}tr.resetErrorsCount=Nfe;function Ife({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,yr.default.errors,a=>{t.const(o,(0,Ae._)`${yr.default.vErrors}[${a}]`),t.if((0,Ae._)`${o}.instancePath === undefined`,()=>t.assign((0,Ae._)`${o}.instancePath`,(0,Ae.strConcat)(yr.default.instancePath,i.errorPath))),t.assign((0,Ae._)`${o}.schemaPath`,(0,Ae.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ae._)`${o}.schema`,r),t.assign((0,Ae._)`${o}.data`,n))})}tr.extendErrors=Ife;function Zq(t,e){let r=t.const("err",e);t.if((0,Ae._)`${yr.default.vErrors} === null`,()=>t.assign(yr.default.vErrors,(0,Ae._)`[${r}]`),(0,Ae._)`${yr.default.vErrors}.push(${r})`),t.code((0,Ae._)`${yr.default.errors}++`)}function eL(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ae._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ae._)`${n}.errors`,e),r.return(!1))}var Xo={keyword:new Ae.Name("keyword"),schemaPath:new Ae.Name("schemaPath"),params:new Ae.Name("params"),propertyName:new Ae.Name("propertyName"),message:new Ae.Name("message"),schema:new Ae.Name("schema"),parentSchema:new Ae.Name("parentSchema")};function tL(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ae._)`{}`:Afe(t,e,r)}function Afe(t,e,r={}){let{gen:n,it:s}=t,i=[kfe(s,r),Dfe(t,r)];return Mfe(t,e,i),n.object(...i)}function kfe({errorPath:t},{instancePath:e}){let r=e?(0,Ae.str)`${t}${(0,Bm.getErrorPath)(e,Bm.Type.Str)}`:t;return[yr.default.instancePath,(0,Ae.strConcat)(yr.default.instancePath,r)]}function Dfe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ae.str)`${e}/${t}`;return r&&(s=(0,Ae.str)`${s}${(0,Bm.getErrorPath)(r,Bm.Type.Str)}`),[Xo.schemaPath,s]}function Mfe(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([Xo.keyword,s],[Xo.params,typeof e=="function"?e(t):e||(0,Ae._)`{}`]),c.messages&&n.push([Xo.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Xo.schema,o],[Xo.parentSchema,(0,Ae._)`${u}${d}`],[yr.default.data,i]),l&&n.push([Xo.propertyName,l])}});var nL=E(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.boolOrEmptySchema=Ac.topBoolOrEmptySchema=void 0;var jfe=mf(),qfe=ne(),Lfe=un(),Ffe={message:"boolean schema is false"};function Ufe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?rL(t,!1):typeof r=="object"&&r.$async===!0?e.return(Lfe.default.data):(e.assign((0,qfe._)`${n}.errors`,null),e.return(!0))}Ac.topBoolOrEmptySchema=Ufe;function Bfe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),rL(t)):r.var(e,!0)}Ac.boolOrEmptySchema=Bfe;function rL(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,jfe.reportError)(s,Ffe,void 0,e)}});var GS=E(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.getRules=kc.isJSONType=void 0;var Vfe=["string","number","integer","boolean","null","object","array"],zfe=new Set(Vfe);function Hfe(t){return typeof t=="string"&&zfe.has(t)}kc.isJSONType=Hfe;function Gfe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}kc.getRules=Gfe});var WS=E(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.shouldUseRule=Di.shouldUseGroup=Di.schemaHasRulesForType=void 0;function Wfe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&sL(t,n)}Di.schemaHasRulesForType=Wfe;function sL(t,e){return e.rules.some(r=>iL(t,r))}Di.shouldUseGroup=sL;function iL(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Di.shouldUseRule=iL});var gf=E(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.reportTypeError=rr.checkDataTypes=rr.checkDataType=rr.coerceAndCheckDataType=rr.getJSONTypes=rr.getSchemaTypes=rr.DataType=void 0;var Kfe=GS(),Jfe=WS(),Yfe=mf(),de=ne(),oL=pe(),Dc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Dc||(rr.DataType=Dc={}));function Xfe(t){let e=aL(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}rr.getSchemaTypes=Xfe;function aL(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Kfe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}rr.getJSONTypes=aL;function Qfe(t,e){let{gen:r,data:n,opts:s}=t,i=Zfe(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Jfe.schemaHasRulesForType)(t,e[0]));if(o){let a=JS(e,n,s.strictNumbers,Dc.Wrong);r.if(a,()=>{i.length?ede(t,e,i):YS(t)})}return o}rr.coerceAndCheckDataType=Qfe;var cL=new Set(["string","number","integer","boolean","null"]);function Zfe(t,e){return e?t.filter(r=>cL.has(r)||e==="array"&&r==="array"):[]}function ede(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,de._)`typeof ${s}`),a=n.let("coerced",(0,de._)`undefined`);i.coerceTypes==="array"&&n.if((0,de._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,de._)`${s}[0]`).assign(o,(0,de._)`typeof ${s}`).if(JS(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,de._)`${a} !== undefined`);for(let l of r)(cL.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),YS(t),n.endIf(),n.if((0,de._)`${a} !== undefined`,()=>{n.assign(s,a),tde(t,a)});function c(l){switch(l){case"string":n.elseIf((0,de._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,de._)`"" + ${s}`).elseIf((0,de._)`${s} === null`).assign(a,(0,de._)`""`);return;case"number":n.elseIf((0,de._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,de._)`+${s}`);return;case"integer":n.elseIf((0,de._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,de._)`+${s}`);return;case"boolean":n.elseIf((0,de._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,de._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,de._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,de._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,de._)`[${s}]`)}}}function tde({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,de._)`${e} !== undefined`,()=>t.assign((0,de._)`${e}[${r}]`,n))}function KS(t,e,r,n=Dc.Correct){let s=n===Dc.Correct?de.operators.EQ:de.operators.NEQ,i;switch(t){case"null":return(0,de._)`${e} ${s} null`;case"array":i=(0,de._)`Array.isArray(${e})`;break;case"object":i=(0,de._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,de._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,de._)`typeof ${e} ${s} ${t}`}return n===Dc.Correct?i:(0,de.not)(i);function o(a=de.nil){return(0,de.and)((0,de._)`typeof ${e} == "number"`,a,r?(0,de._)`isFinite(${e})`:de.nil)}}rr.checkDataType=KS;function JS(t,e,r,n){if(t.length===1)return KS(t[0],e,r,n);let s,i=(0,oL.toHash)(t);if(i.array&&i.object){let o=(0,de._)`typeof ${e} != "object"`;s=i.null?o:(0,de._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=de.nil;i.number&&delete i.integer;for(let o in i)s=(0,de.and)(s,KS(o,e,r,n));return s}rr.checkDataTypes=JS;var rde={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,de._)`{type: ${t}}`:(0,de._)`{type: ${e}}`};function YS(t){let e=nde(t);(0,Yfe.reportError)(e,rde)}rr.reportTypeError=YS;function nde(t){let{gen:e,data:r,schema:n}=t,s=(0,oL.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var uL=E(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.assignDefaults=void 0;var Mc=ne(),sde=pe();function ide(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)lL(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>lL(t,i,s.default))}Vm.assignDefaults=ide;function lL(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Mc._)`${i}${(0,Mc.getProperty)(e)}`;if(s){(0,sde.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Mc._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Mc._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,Mc._)`${a} = ${(0,Mc.stringify)(r)}`)}});var Ut=E(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.validateUnion=ze.validateArray=ze.usePattern=ze.callValidateCode=ze.schemaProperties=ze.allSchemaProperties=ze.noPropertyInData=ze.propertyInData=ze.isOwnProperty=ze.hasPropFunc=ze.reportMissingProp=ze.checkMissingProp=ze.checkReportMissingProp=void 0;var rt=ne(),XS=pe(),Mi=un(),ode=pe();function ade(t,e){let{gen:r,data:n,it:s}=t;r.if(ZS(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,rt._)`${e}`},!0),t.error()})}ze.checkReportMissingProp=ade;function cde({gen:t,data:e,it:{opts:r}},n,s){return(0,rt.or)(...n.map(i=>(0,rt.and)(ZS(t,e,i,r.ownProperties),(0,rt._)`${s} = ${i}`)))}ze.checkMissingProp=cde;function lde(t,e){t.setParams({missingProperty:e},!0),t.error()}ze.reportMissingProp=lde;function fL(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,rt._)`Object.prototype.hasOwnProperty`})}ze.hasPropFunc=fL;function QS(t,e,r){return(0,rt._)`${fL(t)}.call(${e}, ${r})`}ze.isOwnProperty=QS;function ude(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} !== undefined`;return n?(0,rt._)`${s} && ${QS(t,e,r)}`:s}ze.propertyInData=ude;function ZS(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} === undefined`;return n?(0,rt.or)(s,(0,rt.not)(QS(t,e,r))):s}ze.noPropertyInData=ZS;function dL(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ze.allSchemaProperties=dL;function fde(t,e){return dL(e).filter(r=>!(0,XS.alwaysValidSchema)(t,e[r]))}ze.schemaProperties=fde;function dde({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,rt._)`${t}, ${e}, ${n}${s}`:e,d=[[Mi.default.instancePath,(0,rt.strConcat)(Mi.default.instancePath,i)],[Mi.default.parentData,o.parentData],[Mi.default.parentDataProperty,o.parentDataProperty],[Mi.default.rootData,Mi.default.rootData]];o.opts.dynamicRef&&d.push([Mi.default.dynamicAnchors,Mi.default.dynamicAnchors]);let p=(0,rt._)`${u}, ${r.object(...d)}`;return c!==rt.nil?(0,rt._)`${a}.call(${c}, ${p})`:(0,rt._)`${a}(${p})`}ze.callValidateCode=dde;var hde=(0,rt._)`new RegExp`;function pde({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,rt._)`${s.code==="new RegExp"?hde:(0,ode.useFunc)(t,s)}(${r}, ${n})`})}ze.usePattern=pde;function mde(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,rt._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:XS.Type.Num},i),e.if((0,rt.not)(i),a)})}}ze.validateArray=mde;function gde(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,XS.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,rt._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,rt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}ze.validateUnion=gde});var mL=E(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.validateKeywordUsage=ps.validSchemaType=ps.funcKeywordCode=ps.macroKeywordCode=void 0;var _r=ne(),Qo=un(),yde=Ut(),_de=mf();function vde(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=pL(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:_r.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}ps.macroKeywordCode=vde;function wde(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;Ede(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=pL(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&hL(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&hL(t),y(()=>bde(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,_r._)`await `),w=>n.assign(d,!1).if((0,_r._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,_r._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,_r._)`${u}.errors`;return n.assign(g,null),m(_r.nil),g}function m(g=e.async?(0,_r._)`await `:_r.nil){let w=c.opts.passContext?Qo.default.this:Qo.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,_r._)`${g}${(0,yde.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,_r.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}ps.funcKeywordCode=wde;function hL(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,_r._)`${n.parentData}[${n.parentDataProperty}]`))}function bde(t,e){let{gen:r}=t;r.if((0,_r._)`Array.isArray(${e})`,()=>{r.assign(Qo.default.vErrors,(0,_r._)`${Qo.default.vErrors} === null ? ${e} : ${Qo.default.vErrors}.concat(${e})`).assign(Qo.default.errors,(0,_r._)`${Qo.default.vErrors}.length`),(0,_de.extendErrors)(t)},()=>t.error())}function Ede({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function pL(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,_r.stringify)(r)})}function Sde(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}ps.validSchemaType=Sde;function Rde({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}ps.validateKeywordUsage=Rde});var yL=E(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.extendSubschemaMode=ji.extendSubschemaData=ji.getSubschema=void 0;var ms=ne(),gL=pe();function Tde(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,ms._)`${t.schemaPath}${(0,ms.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,ms._)`${t.schemaPath}${(0,ms.getProperty)(e)}${(0,ms.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,gL.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ji.getSubschema=Tde;function $de(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,ms._)`${e.data}${(0,ms.getProperty)(r)}`,!0);c(p),t.errorPath=(0,ms.str)`${l}${(0,gL.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,ms._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof ms.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}ji.extendSubschemaData=$de;function Ode(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}ji.extendSubschemaMode=Ode});var vL=E((mke,_L)=>{"use strict";var qi=_L.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};zm(e,n,s,t,"",t)};qi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};qi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};qi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};qi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function zm(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in qi.arrayKeywords)for(var p=0;p<d.length;p++)zm(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in qi.propsKeywords){if(d&&typeof d=="object")for(var f in d)zm(t,e,r,d[f],s+"/"+u+"/"+Pde(f),i,s,u,n,f)}else(u in qi.keywords||t.allKeys&&!(u in qi.skipKeywords))&&zm(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function Pde(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var yf=E(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.getSchemaRefs=Lr.resolveUrl=Lr.normalizeId=Lr._getFullPath=Lr.getFullPath=Lr.inlineRef=void 0;var xde=pe(),Cde=qs(),Nde=vL(),Ide=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ade(t,e=!0){return typeof t=="boolean"?!0:e===!0?!eR(t):e?wL(t)<=e:!1}Lr.inlineRef=Ade;var kde=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function eR(t){for(let e in t){if(kde.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(eR)||typeof r=="object"&&eR(r))return!0}return!1}function wL(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Ide.has(r)&&(typeof t[r]=="object"&&(0,xde.eachItem)(t[r],n=>e+=wL(n)),e===1/0))return 1/0}return e}function bL(t,e="",r){r!==!1&&(e=jc(e));let n=t.parse(e);return EL(t,n)}Lr.getFullPath=bL;function EL(t,e){return t.serialize(e).split("#")[0]+"#"}Lr._getFullPath=EL;var Dde=/#\/?$/;function jc(t){return t?t.replace(Dde,""):""}Lr.normalizeId=jc;function Mde(t,e,r){return r=jc(r),t.resolve(e,r)}Lr.resolveUrl=Mde;var jde=/^[a-z_][-a-z0-9._]*$/i;function qde(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=jc(t[r]||e),i={"":s},o=bL(n,s,!1),a={},c=new Set;return Nde(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=jc(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==jc(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!jde.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!Cde(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Lr.getSchemaRefs=qde});var qc=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.getData=Li.KeywordCxt=Li.validateFunctionCode=void 0;var OL=nL(),SL=gf(),rR=WS(),Hm=gf(),Lde=uL(),vf=mL(),tR=yL(),Z=ne(),oe=un(),Fde=yf(),Ws=pe(),_f=mf();function Ude(t){if(CL(t)&&(NL(t),xL(t))){zde(t);return}PL(t,()=>(0,OL.topBoolOrEmptySchema)(t))}Li.validateFunctionCode=Ude;function PL({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Z._)`${oe.default.data}, ${oe.default.valCxt}`,n.$async,()=>{t.code((0,Z._)`"use strict"; ${RL(r,s)}`),Vde(t,s),t.code(i)}):t.func(e,(0,Z._)`${oe.default.data}, ${Bde(s)}`,n.$async,()=>t.code(RL(r,s)).code(i))}function Bde(t){return(0,Z._)`{${oe.default.instancePath}="", ${oe.default.parentData}, ${oe.default.parentDataProperty}, ${oe.default.rootData}=${oe.default.data}${t.dynamicRef?(0,Z._)`, ${oe.default.dynamicAnchors}={}`:Z.nil}}={}`}function Vde(t,e){t.if(oe.default.valCxt,()=>{t.var(oe.default.instancePath,(0,Z._)`${oe.default.valCxt}.${oe.default.instancePath}`),t.var(oe.default.parentData,(0,Z._)`${oe.default.valCxt}.${oe.default.parentData}`),t.var(oe.default.parentDataProperty,(0,Z._)`${oe.default.valCxt}.${oe.default.parentDataProperty}`),t.var(oe.default.rootData,(0,Z._)`${oe.default.valCxt}.${oe.default.rootData}`),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`${oe.default.valCxt}.${oe.default.dynamicAnchors}`)},()=>{t.var(oe.default.instancePath,(0,Z._)`""`),t.var(oe.default.parentData,(0,Z._)`undefined`),t.var(oe.default.parentDataProperty,(0,Z._)`undefined`),t.var(oe.default.rootData,oe.default.data),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`{}`)})}function zde(t){let{schema:e,opts:r,gen:n}=t;PL(t,()=>{r.$comment&&e.$comment&&AL(t),Jde(t),n.let(oe.default.vErrors,null),n.let(oe.default.errors,0),r.unevaluated&&Hde(t),IL(t),Qde(t)})}function Hde(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Z._)`${r}.evaluated`),e.if((0,Z._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Z._)`${t.evaluated}.props`,(0,Z._)`undefined`)),e.if((0,Z._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Z._)`${t.evaluated}.items`,(0,Z._)`undefined`))}function RL(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Z._)`/*# sourceURL=${r} */`:Z.nil}function Gde(t,e){if(CL(t)&&(NL(t),xL(t))){Wde(t,e);return}(0,OL.boolOrEmptySchema)(t,e)}function xL({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function CL(t){return typeof t.schema!="boolean"}function Wde(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&AL(t),Yde(t),Xde(t);let i=n.const("_errs",oe.default.errors);IL(t,i),n.var(e,(0,Z._)`${i} === ${oe.default.errors}`)}function NL(t){(0,Ws.checkUnknownRules)(t),Kde(t)}function IL(t,e){if(t.opts.jtd)return TL(t,[],!1,e);let r=(0,SL.getSchemaTypes)(t.schema),n=(0,SL.coerceAndCheckDataType)(t,r);TL(t,r,!n,e)}function Kde(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Ws.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Jde(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ws.checkStrictMode)(t,"default is ignored in the schema root")}function Yde(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Fde.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Xde(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function AL({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Z._)`${oe.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Z.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Z._)`${oe.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Qde(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Z._)`${oe.default.errors} === 0`,()=>e.return(oe.default.data),()=>e.throw((0,Z._)`new ${s}(${oe.default.vErrors})`)):(e.assign((0,Z._)`${n}.errors`,oe.default.vErrors),i.unevaluated&&Zde(t),e.return((0,Z._)`${oe.default.errors} === 0`))}function Zde({gen:t,evaluated:e,props:r,items:n}){r instanceof Z.Name&&t.assign((0,Z._)`${e}.props`,r),n instanceof Z.Name&&t.assign((0,Z._)`${e}.items`,n)}function TL(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,Ws.schemaHasRulesButRef)(i,u))){s.block(()=>DL(t,"$ref",u.all.$ref.definition));return}c.jtd||ehe(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,rR.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Hm.checkDataType)(p.type,o,c.strictNumbers)),$L(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Hm.reportTypeError)(t)),s.endIf()):$L(t,p),a||s.if((0,Z._)`${oe.default.errors} === ${n||0}`))}}function $L(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Lde.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,rR.shouldUseRule)(n,i)&&DL(t,i.keyword,i.definition,e.type)})}function ehe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(the(t,e),t.opts.allowUnionTypes||rhe(t,e),nhe(t,t.dataTypes))}function the(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{kL(t.dataTypes,r)||nR(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),ihe(t,e)}}function rhe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&nR(t,"use allowUnionTypes to allow union type keyword")}function nhe(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,rR.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>she(e,o))&&nR(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function she(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function kL(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ihe(t,e){let r=[];for(let n of t.dataTypes)kL(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function nR(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ws.checkStrictMode)(t,e,t.opts.strictTypes)}var Gm=class{constructor(e,r,n){if((0,vf.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ws.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",ML(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,vf.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",oe.default.errors))}result(e,r,n){this.failResult((0,Z.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Z.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Z._)`${r} !== undefined && (${(0,Z.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?_f.reportExtraError:_f.reportError)(this,this.def.error,r)}$dataError(){(0,_f.reportError)(this,this.def.$dataError||_f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,_f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Z.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Z.nil,r=Z.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Z.or)((0,Z._)`${s} === undefined`,r)),e!==Z.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Z.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Z.or)(o(),a());function o(){if(n.length){if(!(r instanceof Z.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,Z._)`${(0,Hm.checkDataTypes)(c,r,i.opts.strictNumbers,Hm.DataType.Wrong)}`}return Z.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Z._)`!${c}(${r})`}return Z.nil}}subschema(e,r){let n=(0,tR.getSubschema)(this.it,e);(0,tR.extendSubschemaData)(n,this.it,e),(0,tR.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Gde(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Ws.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Ws.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Z.Name)),!0}};Li.KeywordCxt=Gm;function DL(t,e,r,n){let s=new Gm(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,vf.funcKeywordCode)(s,r):"macro"in r?(0,vf.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,vf.funcKeywordCode)(s,r)}var ohe=/^\/(?:[^~]|~0|~1)*$/,ahe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ML(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return oe.default.rootData;if(t[0]==="/"){if(!ohe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=oe.default.rootData}else{let l=ahe.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,Z._)`${i}${(0,Z.getProperty)((0,Ws.unescapeJsonPointer)(l))}`,o=(0,Z._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Li.getData=ML});var wf=E(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});var sR=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};iR.default=sR});var Ks=E(cR=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});var oR=yf(),aR=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,oR.resolveUrl)(e,r,n),this.missingSchema=(0,oR.normalizeId)((0,oR.getFullPath)(e,this.missingRef))}};cR.default=aR});var ea=E(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.resolveSchema=fn.getCompilingSchema=fn.resolveRef=fn.compileSchema=fn.SchemaEnv=void 0;var Un=ne(),che=wf(),Zo=un(),Bn=yf(),jL=pe(),lhe=qc(),Lc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Bn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};fn.SchemaEnv=Lc;function uR(t){let e=qL.call(this,t);if(e)return e;let r=(0,Bn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Un.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:che.default,code:(0,Un._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:Zo.default.data,parentData:Zo.default.parentData,parentDataProperty:Zo.default.parentDataProperty,dataNames:[Zo.default.data],dataPathArr:[Un.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Un.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Un.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Un._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,lhe.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(Zo.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${Zo.default.self}`,`${Zo.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof Un.Name?void 0:h,items:m instanceof Un.Name?void 0:m,dynamicProps:h instanceof Un.Name,dynamicItems:m instanceof Un.Name},f.source&&(f.source.evaluated=(0,Un.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}fn.compileSchema=uR;function uhe(t,e,r){var n;r=(0,Bn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=hhe.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Lc({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=fhe.call(this,i)}fn.resolveRef=uhe;function fhe(t){return(0,Bn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:uR.call(this,t)}function qL(t){for(let e of this._compilations)if(dhe(e,t))return e}fn.getCompilingSchema=qL;function dhe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function hhe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Wm.call(this,t,e)}function Wm(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Bn._getFullPath)(this.opts.uriResolver,r),s=(0,Bn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return lR.call(this,r,t);let i=(0,Bn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Wm.call(this,t,o);return typeof a?.schema!="object"?void 0:lR.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||uR.call(this,o),i===(0,Bn.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,Bn.resolveUrl)(this.opts.uriResolver,s,l)),new Lc({schema:a,schemaId:c,root:t,baseId:s})}return lR.call(this,r,o)}}fn.resolveSchema=Wm;var phe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function lR(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,jL.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!phe.has(a)&&l&&(e=(0,Bn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,jL.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Bn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Wm.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Lc({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var LL=E((bke,mhe)=>{mhe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var UL=E(fR=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});var FL=oc();FL.code='require("ajv/dist/runtime/uri").default';fR.default=FL});var pR=E(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.CodeGen=Bt.Name=Bt.nil=Bt.stringify=Bt.str=Bt._=Bt.KeywordCxt=void 0;var ghe=qc();Object.defineProperty(Bt,"KeywordCxt",{enumerable:!0,get:function(){return ghe.KeywordCxt}});var Fc=ne();Object.defineProperty(Bt,"_",{enumerable:!0,get:function(){return Fc._}});Object.defineProperty(Bt,"str",{enumerable:!0,get:function(){return Fc.str}});Object.defineProperty(Bt,"stringify",{enumerable:!0,get:function(){return Fc.stringify}});Object.defineProperty(Bt,"nil",{enumerable:!0,get:function(){return Fc.nil}});Object.defineProperty(Bt,"Name",{enumerable:!0,get:function(){return Fc.Name}});Object.defineProperty(Bt,"CodeGen",{enumerable:!0,get:function(){return Fc.CodeGen}});var yhe=wf(),GL=Ks(),_he=GS(),bf=ea(),vhe=ne(),Ef=yf(),Km=gf(),hR=pe(),BL=LL(),whe=UL(),WL=(t,e)=>new RegExp(t,e);WL.code="new RegExp";var bhe=["removeAdditional","useDefaults","coerceTypes"],Ehe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),She={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Rhe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},VL=200;function The(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,R,O,T;let P=t.strict,I=(e=t.code)===null||e===void 0?void 0:e.optimize,C=I===!0||I===void 0?1:I||0,N=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:WL,B=(s=t.uriResolver)!==null&&s!==void 0?s:whe.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:C,regExp:N}:{optimize:C,regExp:N},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:VL,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:VL,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(R=t.validateFormats)!==null&&R!==void 0?R:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:B}}var Sf=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...The(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new vhe.ValueScope({scope:{},prefixes:Ehe,es5:r,lines:n}),this.logger=Nhe(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,_he.getRules)(),zL.call(this,She,e,"NOT SUPPORTED"),zL.call(this,Rhe,e,"DEPRECATED","warn"),this._metaOpts=xhe.call(this),e.formats&&Ohe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Phe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),$he.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=BL;n==="id"&&(s={...BL},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof GL.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ef.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=HL.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new bf.SchemaEnv({schema:{},schemaId:n});if(r=bf.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=HL.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Ef.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ahe.call(this,n,r),!r)return(0,hR.eachItem)(n,i=>dR.call(this,i)),this;Dhe.call(this,r);let s={...r,type:(0,Km.getJSONTypes)(r.type),schemaType:(0,Km.getJSONTypes)(r.schemaType)};return(0,hR.eachItem)(n,s.type.length===0?i=>dR.call(this,i,s):i=>s.type.forEach(o=>dR.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=KL(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Ef.normalizeId)(o||n);let l=Ef.getSchemaRefs.call(this,e,n);return c=new bf.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):bf.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{bf.compileSchema.call(this,e)}finally{this.opts=r}}};Sf.ValidationError=yhe.default;Sf.MissingRefError=GL.default;Bt.default=Sf;function zL(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function HL(t){return t=(0,Ef.normalizeId)(t),this.schemas[t]||this.refs[t]}function $he(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Ohe(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Phe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function xhe(){let t={...this.opts};for(let e of bhe)delete t[e];return t}var Che={log(){},warn(){},error(){}};function Nhe(t){if(t===!1)return Che;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Ihe=/^[a-z_$][a-z0-9_$:-]*$/i;function Ahe(t,e){let{RULES:r}=this;if((0,hR.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Ihe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function dR(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Km.getJSONTypes)(e.type),schemaType:(0,Km.getJSONTypes)(e.schemaType)}};e.before?khe.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function khe(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Dhe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=KL(e)),t.validateSchema=this.compile(e,!0))}var Mhe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function KL(t){return{anyOf:[t,Mhe]}}});var JL=E(mR=>{"use strict";Object.defineProperty(mR,"__esModule",{value:!0});var jhe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};mR.default=jhe});var gR=E(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.callRef=ta.getValidate=void 0;var qhe=Ks(),YL=Ut(),Fr=ne(),Uc=un(),XL=ea(),Jm=pe(),Lhe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=XL.resolveRef.call(c,l,s,r);if(u===void 0)throw new qhe.default(n.opts.uriResolver,s,r);if(u instanceof XL.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return Ym(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return Ym(t,(0,Fr._)`${h}.validate`,l,l.$async)}function p(h){let m=QL(t,h);Ym(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Fr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Fr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function QL(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Fr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ta.getValidate=QL;function Ym(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Uc.default.this:Fr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Fr._)`await ${(0,YL.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Fr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,YL.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Fr._)`${h}.errors`;s.assign(Uc.default.vErrors,(0,Fr._)`${Uc.default.vErrors} === null ? ${m} : ${Uc.default.vErrors}.concat(${m})`),s.assign(Uc.default.errors,(0,Fr._)`${Uc.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=Jm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Fr._)`${h}.evaluated.props`);i.props=Jm.mergeEvaluated.props(s,g,i.props,Fr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=Jm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Fr._)`${h}.evaluated.items`);i.items=Jm.mergeEvaluated.items(s,g,i.items,Fr.Name)}}}ta.callRef=Ym;ta.default=Lhe});var ZL=E(yR=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});var Fhe=JL(),Uhe=gR(),Bhe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Fhe.default,Uhe.default];yR.default=Bhe});var eF=E(_R=>{"use strict";Object.defineProperty(_R,"__esModule",{value:!0});var Xm=ne(),Fi=Xm.operators,Qm={maximum:{okStr:"<=",ok:Fi.LTE,fail:Fi.GT},minimum:{okStr:">=",ok:Fi.GTE,fail:Fi.LT},exclusiveMaximum:{okStr:"<",ok:Fi.LT,fail:Fi.GTE},exclusiveMinimum:{okStr:">",ok:Fi.GT,fail:Fi.LTE}},Vhe={message:({keyword:t,schemaCode:e})=>(0,Xm.str)`must be ${Qm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Xm._)`{comparison: ${Qm[t].okStr}, limit: ${e}}`},zhe={keyword:Object.keys(Qm),type:"number",schemaType:"number",$data:!0,error:Vhe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Xm._)`${r} ${Qm[e].fail} ${n} || isNaN(${r})`)}};_R.default=zhe});var tF=E(vR=>{"use strict";Object.defineProperty(vR,"__esModule",{value:!0});var Rf=ne(),Hhe={message:({schemaCode:t})=>(0,Rf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Rf._)`{multipleOf: ${t}}`},Ghe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Hhe,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Rf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Rf._)`${o} !== parseInt(${o})`;t.fail$data((0,Rf._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};vR.default=Ghe});var nF=E(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});function rF(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}wR.default=rF;rF.code='require("ajv/dist/runtime/ucs2length").default'});var sF=E(bR=>{"use strict";Object.defineProperty(bR,"__esModule",{value:!0});var ra=ne(),Whe=pe(),Khe=nF(),Jhe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ra.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ra._)`{limit: ${t}}`},Yhe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Jhe,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ra.operators.GT:ra.operators.LT,o=s.opts.unicode===!1?(0,ra._)`${r}.length`:(0,ra._)`${(0,Whe.useFunc)(t.gen,Khe.default)}(${r})`;t.fail$data((0,ra._)`${o} ${i} ${n}`)}};bR.default=Yhe});var iF=E(ER=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});var Xhe=Ut(),Zm=ne(),Qhe={message:({schemaCode:t})=>(0,Zm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Zm._)`{pattern: ${t}}`},Zhe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Qhe,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Zm._)`(new RegExp(${s}, ${o}))`:(0,Xhe.usePattern)(t,n);t.fail$data((0,Zm._)`!${a}.test(${e})`)}};ER.default=Zhe});var oF=E(SR=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0});var Tf=ne(),epe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Tf.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Tf._)`{limit: ${t}}`},tpe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:epe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Tf.operators.GT:Tf.operators.LT;t.fail$data((0,Tf._)`Object.keys(${r}).length ${s} ${n}`)}};SR.default=tpe});var aF=E(RR=>{"use strict";Object.defineProperty(RR,"__esModule",{value:!0});var $f=Ut(),Of=ne(),rpe=pe(),npe={message:({params:{missingProperty:t}})=>(0,Of.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Of._)`{missingProperty: ${t}}`},spe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:npe,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,rpe.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(Of.nil,d);else for(let f of r)(0,$f.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,$f.checkMissingProp)(t,r,f)),(0,$f.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,$f.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,$f.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Of.not)(h),()=>{t.error(),e.break()})},Of.nil)}}};RR.default=spe});var cF=E(TR=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});var Pf=ne(),ipe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Pf.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Pf._)`{limit: ${t}}`},ope={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ipe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Pf.operators.GT:Pf.operators.LT;t.fail$data((0,Pf._)`${r}.length ${s} ${n}`)}};TR.default=ope});var eg=E($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});var lF=qs();lF.code='require("ajv/dist/runtime/equal").default';$R.default=lF});var uF=E(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});var OR=gf(),Vt=ne(),ape=pe(),cpe=eg(),lpe={message:({params:{i:t,j:e}})=>(0,Vt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Vt._)`{i: ${t}, j: ${e}}`},upe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lpe,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,OR.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,Vt._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,Vt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,Vt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,OR.checkDataTypes)(l,y,a.opts.strictNumbers,OR.DataType.Wrong),w=e.const("indices",(0,Vt._)`{}`);e.for((0,Vt._)`;${h}--;`,()=>{e.let(y,(0,Vt._)`${r}[${h}]`),e.if(g,(0,Vt._)`continue`),l.length>1&&e.if((0,Vt._)`typeof ${y} == "string"`,(0,Vt._)`${y} += "_"`),e.if((0,Vt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Vt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Vt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,ape.useFunc)(e,cpe.default),g=e.name("outer");e.label(g).for((0,Vt._)`;${h}--;`,()=>e.for((0,Vt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Vt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};PR.default=upe});var fF=E(CR=>{"use strict";Object.defineProperty(CR,"__esModule",{value:!0});var xR=ne(),fpe=pe(),dpe=eg(),hpe={message:"must be equal to constant",params:({schemaCode:t})=>(0,xR._)`{allowedValue: ${t}}`},ppe={keyword:"const",$data:!0,error:hpe,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,xR._)`!${(0,fpe.useFunc)(e,dpe.default)}(${r}, ${s})`):t.fail((0,xR._)`${i} !== ${r}`)}};CR.default=ppe});var dF=E(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});var xf=ne(),mpe=pe(),gpe=eg(),ype={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,xf._)`{allowedValues: ${t}}`},_pe={keyword:"enum",schemaType:"array",$data:!0,error:ype,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,mpe.useFunc)(e,gpe.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,xf.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,xf._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,xf._)`${l()}(${r}, ${f}[${h}])`:(0,xf._)`${r} === ${m}`}}};NR.default=_pe});var hF=E(IR=>{"use strict";Object.defineProperty(IR,"__esModule",{value:!0});var vpe=eF(),wpe=tF(),bpe=sF(),Epe=iF(),Spe=oF(),Rpe=aF(),Tpe=cF(),$pe=uF(),Ope=fF(),Ppe=dF(),xpe=[vpe.default,wpe.default,bpe.default,Epe.default,Spe.default,Rpe.default,Tpe.default,$pe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Ope.default,Ppe.default];IR.default=xpe});var kR=E(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.validateAdditionalItems=void 0;var na=ne(),AR=pe(),Cpe={message:({params:{len:t}})=>(0,na.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,na._)`{limit: ${t}}`},Npe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Cpe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,AR.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}pF(t,n)}};function pF(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,na._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,na._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,AR.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,na._)`${a} <= ${e.length}`);r.if((0,na.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:AR.Type.Num},l),o.allErrors||r.if((0,na.not)(l),()=>r.break())})}}Cf.validateAdditionalItems=pF;Cf.default=Npe});var DR=E(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.validateTuple=void 0;var mF=ne(),tg=pe(),Ipe=Ut(),Ape={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return gF(t,"additionalItems",e);r.items=!0,!(0,tg.alwaysValidSchema)(r,e)&&t.ok((0,Ipe.validateArray)(t))}};function gF(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=tg.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,mF._)`${i}.length`);r.forEach((d,p)=>{(0,tg.alwaysValidSchema)(a,d)||(n.if((0,mF._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,tg.checkStrictMode)(a,y,p.strictTuples)}}}Nf.validateTuple=gF;Nf.default=Ape});var yF=E(MR=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});var kpe=DR(),Dpe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,kpe.validateTuple)(t,"items")};MR.default=Dpe});var vF=E(jR=>{"use strict";Object.defineProperty(jR,"__esModule",{value:!0});var _F=ne(),Mpe=pe(),jpe=Ut(),qpe=kR(),Lpe={message:({params:{len:t}})=>(0,_F.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,_F._)`{limit: ${t}}`},Fpe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Lpe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Mpe.alwaysValidSchema)(n,e)&&(s?(0,qpe.validateAdditionalItems)(t,s):t.ok((0,jpe.validateArray)(t)))}};jR.default=Fpe});var wF=E(qR=>{"use strict";Object.defineProperty(qR,"__esModule",{value:!0});var dn=ne(),rg=pe(),Upe={message:({params:{min:t,max:e}})=>e===void 0?(0,dn.str)`must contain at least ${t} valid item(s)`:(0,dn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,dn._)`{minContains: ${t}}`:(0,dn._)`{minContains: ${t}, maxContains: ${e}}`},Bpe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Upe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,dn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,rg.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,rg.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,rg.alwaysValidSchema)(i,r)){let m=(0,dn._)`${u} >= ${o}`;a!==void 0&&(m=(0,dn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,dn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:rg.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,dn._)`${m}++`),a===void 0?e.if((0,dn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,dn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,dn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};qR.default=Bpe});var SF=E(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.validateSchemaDeps=gs.validatePropertyDeps=gs.error=void 0;var LR=ne(),Vpe=pe(),If=Ut();gs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,LR.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,LR._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var zpe={keyword:"dependencies",type:"object",schemaType:"object",error:gs.error,code(t){let[e,r]=Hpe(t);bF(t,e),EF(t,r)}};function Hpe({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function bF(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,If.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,If.checkReportMissingProp)(t,l)}):(r.if((0,LR._)`${c} && (${(0,If.checkMissingProp)(t,a,i)})`),(0,If.reportMissingProp)(t,i),r.else())}}gs.validatePropertyDeps=bF;function EF(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Vpe.alwaysValidSchema)(i,e[a])||(r.if((0,If.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}gs.validateSchemaDeps=EF;gs.default=zpe});var TF=E(FR=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});var RF=ne(),Gpe=pe(),Wpe={message:"property name must be valid",params:({params:t})=>(0,RF._)`{propertyName: ${t.propertyName}}`},Kpe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Wpe,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Gpe.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,RF.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};FR.default=Kpe});var BR=E(UR=>{"use strict";Object.defineProperty(UR,"__esModule",{value:!0});var ng=Ut(),Vn=ne(),Jpe=un(),sg=pe(),Ype={message:"must NOT have additional properties",params:({params:t})=>(0,Vn._)`{additionalProperty: ${t.additionalProperty}}`},Xpe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Ype,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,sg.alwaysValidSchema)(o,r))return;let l=(0,ng.allSchemaProperties)(n.properties),u=(0,ng.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Vn._)`${i} === ${Jpe.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,sg.schemaRefOrVal)(o,n.properties,"properties");g=(0,ng.isOwnProperty)(e,w,y)}else l.length?g=(0,Vn.or)(...l.map(w=>(0,Vn._)`${y} === ${w}`)):g=Vn.nil;return u.length&&(g=(0,Vn.or)(g,...u.map(w=>(0,Vn._)`${(0,ng.usePattern)(t,w)}.test(${y})`))),(0,Vn.not)(g)}function f(y){e.code((0,Vn._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,sg.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,Vn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,Vn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:sg.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};UR.default=Xpe});var PF=E(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});var Qpe=qc(),$F=Ut(),VR=pe(),OF=BR(),Zpe={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&OF.default.code(new Qpe.KeywordCxt(i,OF.default,"additionalProperties"));let o=(0,$F.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=VR.mergeEvaluated.props(e,(0,VR.toHash)(o),i.props));let a=o.filter(d=>!(0,VR.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,$F.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};zR.default=Zpe});var IF=E(HR=>{"use strict";Object.defineProperty(HR,"__esModule",{value:!0});var xF=Ut(),ig=ne(),CF=pe(),NF=pe(),eme={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,xF.allSchemaProperties)(r),c=a.filter(m=>(0,CF.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof ig.Name)&&(i.props=(0,NF.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,CF.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,ig._)`${(0,xF.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:NF.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,ig._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,ig.not)(u),()=>e.break())})})}}};HR.default=eme});var AF=E(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});var tme=pe(),rme={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,tme.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};GR.default=rme});var kF=E(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});var nme=Ut(),sme={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nme.validateUnion,error:{message:"must match a schema in anyOf"}};WR.default=sme});var DF=E(KR=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});var og=ne(),ime=pe(),ome={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,og._)`{passingSchemas: ${t.passing}}`},ame={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ome,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,ime.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,og._)`${c} && ${o}`).assign(o,!1).assign(a,(0,og._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,og.Name)})})}}};KR.default=ame});var MF=E(JR=>{"use strict";Object.defineProperty(JR,"__esModule",{value:!0});var cme=pe(),lme={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,cme.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};JR.default=lme});var LF=E(YR=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});var ag=ne(),qF=pe(),ume={message:({params:t})=>(0,ag.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,ag._)`{failingKeyword: ${t.ifClause}}`},fme={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ume,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,qF.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=jF(n,"then"),i=jF(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,ag.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,ag._)`${u}`):t.setParams({ifClause:u})}}}};function jF(t,e){let r=t.schema[e];return r!==void 0&&!(0,qF.alwaysValidSchema)(t,r)}YR.default=fme});var FF=E(XR=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});var dme=pe(),hme={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,dme.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};XR.default=hme});var UF=E(QR=>{"use strict";Object.defineProperty(QR,"__esModule",{value:!0});var pme=kR(),mme=yF(),gme=DR(),yme=vF(),_me=wF(),vme=SF(),wme=TF(),bme=BR(),Eme=PF(),Sme=IF(),Rme=AF(),Tme=kF(),$me=DF(),Ome=MF(),Pme=LF(),xme=FF();function Cme(t=!1){let e=[Rme.default,Tme.default,$me.default,Ome.default,Pme.default,xme.default,wme.default,bme.default,vme.default,Eme.default,Sme.default];return t?e.push(mme.default,yme.default):e.push(pme.default,gme.default),e.push(_me.default),e}QR.default=Cme});var BF=E(ZR=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});var vt=ne(),Nme={message:({schemaCode:t})=>(0,vt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,vt._)`{format: ${t}}`},Ime={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Nme,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,vt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,vt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,vt._)`${m}.type || "string"`).assign(g,(0,vt._)`${m}.validate`),()=>r.assign(y,(0,vt._)`"string"`).assign(g,m)),t.fail$data((0,vt.or)(w(),_()));function w(){return c.strictSchema===!1?vt.nil:(0,vt._)`${o} && !${g}`}function _(){let v=u.$async?(0,vt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,vt._)`${g}(${n})`,S=(0,vt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,vt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,vt.regexpCode)(S):c.code.formats?(0,vt._)`${c.code.formats}${(0,vt.getProperty)(i)}`:void 0,R=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,vt._)`${R}.validate`]:["string",S,R]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,vt._)`await ${g}(${n})`}return typeof y=="function"?(0,vt._)`${g}(${n})`:(0,vt._)`${g}.test(${n})`}}}};ZR.default=Ime});var VF=E(eT=>{"use strict";Object.defineProperty(eT,"__esModule",{value:!0});var Ame=BF(),kme=[Ame.default];eT.default=kme});var zF=E(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.contentVocabulary=Bc.metadataVocabulary=void 0;Bc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Bc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var GF=E(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});var Dme=ZL(),Mme=hF(),jme=UF(),qme=VF(),HF=zF(),Lme=[Dme.default,Mme.default,(0,jme.default)(),qme.default,HF.metadataVocabulary,HF.contentVocabulary];tT.default=Lme});var rT=E(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});cg.DiscrError=void 0;var WF;(function(t){t.Tag="tag",t.Mapping="mapping"})(WF||(cg.DiscrError=WF={}))});var JF=E(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});var Vc=ne(),nT=rT(),KF=ea(),Fme=Ks(),Ume=pe(),Bme={message:({params:{discrError:t,tagName:e}})=>t===nT.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Vc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Vme={keyword:"discriminator",type:"object",schemaType:"object",error:Bme,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,Vc._)`${r}${(0,Vc.getProperty)(a)}`);e.if((0,Vc._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:nT.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Vc._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:nT.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Vc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Ume.schemaHasRulesButRef)(S,i.self.RULES)){let R=S.$ref;if(S=KF.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,R),S instanceof KF.SchemaEnv&&(S=S.schema),S===void 0)throw new Fme.default(i.opts.uriResolver,i.baseId,R)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};sT.default=Vme});var YF=E((lDe,zme)=>{zme.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var QF=E((nt,iT)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.MissingRefError=nt.ValidationError=nt.CodeGen=nt.Name=nt.nil=nt.stringify=nt.str=nt._=nt.KeywordCxt=nt.Ajv=void 0;var Hme=pR(),Gme=GF(),Wme=JF(),XF=YF(),Kme=["/properties"],lg="http://json-schema.org/draft-07/schema",zc=class extends Hme.default{_addVocabularies(){super._addVocabularies(),Gme.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Wme.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(XF,Kme):XF;this.addMetaSchema(e,lg,!1),this.refs["http://json-schema.org/schema"]=lg}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(lg)?lg:void 0)}};nt.Ajv=zc;iT.exports=nt=zc;iT.exports.Ajv=zc;Object.defineProperty(nt,"__esModule",{value:!0});nt.default=zc;var Jme=qc();Object.defineProperty(nt,"KeywordCxt",{enumerable:!0,get:function(){return Jme.KeywordCxt}});var Hc=ne();Object.defineProperty(nt,"_",{enumerable:!0,get:function(){return Hc._}});Object.defineProperty(nt,"str",{enumerable:!0,get:function(){return Hc.str}});Object.defineProperty(nt,"stringify",{enumerable:!0,get:function(){return Hc.stringify}});Object.defineProperty(nt,"nil",{enumerable:!0,get:function(){return Hc.nil}});Object.defineProperty(nt,"Name",{enumerable:!0,get:function(){return Hc.Name}});Object.defineProperty(nt,"CodeGen",{enumerable:!0,get:function(){return Hc.CodeGen}});var Yme=wf();Object.defineProperty(nt,"ValidationError",{enumerable:!0,get:function(){return Yme.default}});var Xme=Ks();Object.defineProperty(nt,"MissingRefError",{enumerable:!0,get:function(){return Xme.default}})});var Js=E(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.checkMetadata=void 0;var Qme=pe(),Zme={keyword:"metadata",schemaType:"object",code(t){ZF(t);let{gen:e,schema:r,it:n}=t;if((0,Qme.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function ZF({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}Af.checkMetadata=ZF;Af.default=Zme});var ug=E(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.hasRef=void 0;var e2=ea(),kf=ne(),ege=Ks(),t2=un(),r2=gR(),tge=Js(),rge={keyword:"ref",schemaType:"string",code(t){(0,tge.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{schemaEnv:{root:o}}=i,a=e.name("valid");s.nullable?(e.var(a,(0,kf._)`${r} === null`),e.if((0,kf.not)(a),c)):(e.var(a,!1),c()),t.ok(a);function c(){var d;let p=(d=o.schema.definitions)===null||d===void 0?void 0:d[n];if(!p)throw new ege.default(i.opts.uriResolver,"",n,`No definition ${n}`);oT(p)||!i.opts.inlineRefs?l(p):u(p)}function l(d){let p=e2.compileSchema.call(i.self,new e2.SchemaEnv({schema:d,root:o,schemaPath:`/definitions/${n}`})),f=(0,r2.getValidate)(t,p),h=e.const("_errs",t2.default.errors);(0,r2.callRef)(t,f,p,p.$async),e.assign(a,(0,kf._)`${h} === ${t2.default.errors}`)}function u(d){let p=e.scopeValue("schema",i.opts.code.source===!0?{ref:d,code:(0,kf.stringify)(d)}:{ref:d});t.subschema({schema:d,dataTypes:[],schemaPath:kf.nil,topSchemaRef:p,errSchemaPath:`/definitions/${n}`},a)}}};function oT(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&oT(r))return!0}return!1}Df.hasRef=oT;Df.default=rge});var cT=E(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});var nge=/t|\s/i,sge=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ige=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,oge=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s2(t,e){let r=t.split(nge);return r.length===2&&n2(r[0])&&age(r[1])||e&&r.length===1&&n2(r[0])}aT.default=s2;function n2(t){let e=sge.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=oge[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function age(t){let e=ige.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],i=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}s2.code='require("ajv/dist/runtime/timestamp").default'});var Gc=E(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.typeErrorParams=Ui.typeErrorMessage=Ui.typeError=void 0;var cge=ne();function lge(t){return{message:e=>i2(e,t),params:e=>o2(e,t)}}Ui.typeError=lge;function i2({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}Ui.typeErrorMessage=i2;function o2({parentSchema:t},e){return(0,cge._)`{type: ${e}, nullable: ${!!t?.nullable}}`}Ui.typeErrorParams=o2});var lT=E(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.intRange=void 0;var Wr=ne(),uge=cT(),fge=pe(),dge=Js(),a2=Gc();Wc.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var hge={message:t=>(0,a2.typeErrorMessage)(t,t.schema),params:t=>(0,a2.typeErrorParams)(t,t.schema)};function pge(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,Wr._)`${r} instanceof Date `;let o=(0,fge.useFunc)(e,uge.default),a=i?(0,Wr._)`, true`:Wr.nil,c=(0,Wr._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?c:(0,Wr.or)((0,Wr._)`${r} instanceof Date`,c)}var mge={keyword:"type",schemaType:"string",error:hge,code(t){(0,dge.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,i;switch(r){case"boolean":case"string":i=(0,Wr._)`typeof ${e} == ${r}`;break;case"timestamp":{i=pge(t);break}case"float32":case"float64":i=(0,Wr._)`typeof ${e} == "number"`;break;default:{let o=r;if(i=(0,Wr._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,Wr._)`${i} && ${e} >= 0`);else{let[a,c]=Wc.intRange[o];i=(0,Wr._)`${i} && ${e} >= ${a} && ${e} <= ${c}`}}}t.pass(n.nullable?(0,Wr.or)((0,Wr._)`${e} === null`,i):i)}};Wc.default=mge});var Jc=E(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.checkNullableObject=Kc.checkNullable=void 0;var fg=ne();function c2({gen:t,data:e,parentSchema:r},n=fg.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,fg._)`${e} === null`),n=(0,fg.not)(s)):t.let(s,!1),[s,n]}Kc.checkNullable=c2;function gge(t,e){let[r,n]=c2(t,e);return[r,(0,fg._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Kc.checkNullableObject=gge});var l2=E(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0});var Bi=ne(),yge=Js(),_ge=Jc(),vge={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Bi._)`{allowedValues: ${t}}`},wge={keyword:"enum",schemaType:"array",error:vge,code(t){(0,yge.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,c=(0,Bi._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let u;[a,u]=(0,_ge.checkNullable)(t,c),e.if(u,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,Bi.and)(c,(0,Bi.or)(...n.map(u=>(0,Bi._)`${r} === ${u}`))),i.nullable&&(a=(0,Bi.or)((0,Bi._)`${r} === null`,a))}t.pass(a);function l(){e.forOf("v",s,u=>e.if((0,Bi._)`${a} = ${r} === ${u}`,()=>e.break()))}}};uT.default=wge});var f2=E(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});var bge=pe(),Ege=Ut(),u2=ne(),Sge=Js(),Rge=Jc(),Tge=Gc(),$ge={keyword:"elements",schemaType:"object",error:(0,Tge.typeError)("array"),code(t){(0,Sge.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,bge.alwaysValidSchema)(s,n))return;let[i]=(0,Rge.checkNullable)(t);e.if((0,u2.not)(i),()=>e.if((0,u2._)`Array.isArray(${r})`,()=>e.assign(i,(0,Ege.validateArray)(t)),()=>t.error())),t.ok(i)}};fT.default=$ge});var hT=E(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.validateProperties=Vi.error=void 0;var dT=Ut(),d2=pe(),Ys=ne(),Oge=Js(),Pge=Jc(),h2=Gc(),Yc;(function(t){t.Additional="additional",t.Missing="missing"})(Yc||(Yc={}));Vi.error={message:t=>{let{params:e}=t;return e.propError?e.propError===Yc.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,h2.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===Yc.Additional?(0,Ys._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,Ys._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,h2.typeErrorParams)(t,"object")}};var xge={keyword:"properties",schemaType:"object",error:Vi.error,code:p2};function p2(t){(0,Oge.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(f())throw new Error("JTD: properties and optionalProperties have common members");let[a,c]=h("properties"),[l,u]=h("optionalProperties");if(c.length===0&&u.length===0&&i)return;let[d,p]=s.jtdDiscriminator===void 0?(0,Pge.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(p,()=>e.assign(d,!0).block(()=>{m(c,"properties",!0),m(u,"optionalProperties"),i||g()})),t.pass(d);function f(){let _=n.properties,v=n.optionalProperties;if(!(_&&v))return!1;for(let S in _)if(Object.prototype.hasOwnProperty.call(v,S))return!0;return!1}function h(_){let v=n[_],S=v?(0,dT.allSchemaProperties)(v):[];if(s.jtdDiscriminator&&S.some(R=>R===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${_}`);let $=S.filter(R=>!(0,d2.alwaysValidSchema)(s,v[R]));return[S,$]}function m(_,v,S){let $=e.var("valid");for(let O of _)e.if((0,dT.propertyInData)(e,r,O,s.opts.ownProperties),()=>y(O,v,$),()=>R(O)),t.ok($);function R(O){S?(e.assign($,!1),t.error(!1,{propError:Yc.Missing,missingProperty:O},{schemaPath:O})):e.assign($,!0)}}function y(_,v,S){t.subschema({keyword:v,schemaProp:_,dataProp:_},S)}function g(){e.forIn("key",r,_=>{let v=w(_,a,"properties",s.jtdDiscriminator),S=w(_,l,"optionalProperties"),$=v===!0?S:S===!0?v:(0,Ys.and)(v,S);e.if($,()=>{s.opts.removeAdditional?e.code((0,Ys._)`delete ${r}[${_}]`):(t.error(!1,{propError:Yc.Additional,additionalProperty:_},{instancePath:_,parentSchema:!0}),s.opts.allErrors||e.break())})})}function w(_,v,S,$){let R;if(v.length>8){let O=(0,d2.schemaRefOrVal)(s,n[S],S);R=(0,Ys.not)((0,dT.isOwnProperty)(e,O,_)),$!==void 0&&(R=(0,Ys.and)(R,(0,Ys._)`${_} !== ${$}`))}else if(v.length||$!==void 0){let O=$===void 0?v:[$].concat(v);R=(0,Ys.and)(...O.map(T=>(0,Ys._)`${_} !== ${T}`))}else R=!0;return R}}Vi.validateProperties=p2;Vi.default=xge});var g2=E(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});var m2=hT(),Cge={keyword:"optionalProperties",schemaType:"object",error:m2.error,code(t){t.parentSchema.properties||(0,m2.validateProperties)(t)}};pT.default=Cge});var _2=E(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0});var sa=ne(),Nge=Js(),Ige=Jc(),y2=Gc(),dg=rT(),Age={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===dg.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,y2.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,sa._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,y2.typeErrorParams)(t,"object")}},kge={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:Age,code(t){(0,Nge.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[i,o]=(0,Ige.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,sa.not)(i)),t.error(),e.endIf(),t.ok(i);function a(){let u=e.const("tag",(0,sa._)`${r}${(0,sa.getProperty)(n)}`);e.if((0,sa._)`${u} === undefined`),t.error(!1,{discrError:dg.DiscrError.Tag,tag:u}),e.elseIf((0,sa._)`typeof ${u} == "string"`),c(u),e.else(),t.error(!1,{discrError:dg.DiscrError.Tag,tag:u},{instancePath:n}),e.endIf()}function c(u){e.if(!1);for(let d in s.mapping)e.elseIf((0,sa._)`${u} === ${d}`),e.assign(i,l(d));e.else(),t.error(!1,{discrError:dg.DiscrError.Mapping,tag:u},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function l(u){let d=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:u,jtdDiscriminator:n},d),d}}};mT.default=kge});var w2=E(gT=>{"use strict";Object.defineProperty(gT,"__esModule",{value:!0});var v2=pe(),hg=ne(),Dge=Js(),Mge=Jc(),jge=Gc(),qge={keyword:"values",schemaType:"object",error:(0,jge.typeError)("object"),code(t){(0,Dge.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t,[i,o]=(0,Mge.checkNullableObject)(t,r);(0,v2.alwaysValidSchema)(s,n)?e.if((0,hg.not)((0,hg.or)(o,i)),()=>t.error()):(e.if(o),e.assign(i,a()),e.elseIf((0,hg.not)(i)),t.error(),e.endIf()),t.ok(i);function a(){let c=e.name("valid");if(s.allErrors){let u=e.let("valid",!0);return l(()=>e.assign(u,!1)),u}return e.var(c,!0),l(()=>e.break()),c;function l(u){e.forIn("key",r,d=>{t.subschema({keyword:"values",dataProp:d,dataPropType:v2.Type.Str},c),e.if((0,hg.not)(c),u)})}}}};gT.default=qge});var b2=E(yT=>{"use strict";Object.defineProperty(yT,"__esModule",{value:!0});var Lge=Ut(),Fge={keyword:"union",schemaType:"array",trackErrors:!0,code:Lge.validateUnion,error:{message:"must match a schema in union"}};yT.default=Fge});var E2=E(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});var Uge=ug(),Bge=lT(),Vge=l2(),zge=f2(),Hge=hT(),Gge=g2(),Wge=_2(),Kge=w2(),Jge=b2(),Yge=Js(),Xge=["definitions",Uge.default,Bge.default,Vge.default,zge.default,Hge.default,Gge.default,Wge.default,Kge.default,Jge.default,Yge.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];_T.default=Xge});var $2=E(vT=>{"use strict";Object.defineProperty(vT,"__esModule",{value:!0});var Xs=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},Qge=t=>({optionalProperties:Xs(t)}),Zge=t=>({properties:{ref:{type:"string"}},optionalProperties:Xs(t)}),eye=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Xs(t)}),tye=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Xs(t)}),rye=t=>({properties:{elements:{ref:"schema"}},optionalProperties:Xs(t)}),R2=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Xs(t)}}),T2=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Xs(t)}}),nye=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[R2(!1),T2(!1)]}}}},optionalProperties:Xs(t)}),sye=t=>({properties:{values:{ref:"schema"}},optionalProperties:Xs(t)}),S2=t=>({metadata:{union:[Qge,Zge,eye,tye,rye,R2,T2,nye,sye].map(e=>e(t))}}),iye={definitions:{schema:S2(!1)},...S2(!0)};vT.default=iye});var wT=E(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});pg.jtdForms=void 0;pg.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var P2=E(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0});var bT=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,oye={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function O2(t){return bT.lastIndex=0,'"'+(bT.test(t)?t.replace(bT,e=>{let r=oye[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}ET.default=O2;O2.code='require("ajv/dist/runtime/quote").default'});var k2=E(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});var aye=wT(),C2=ea(),Te=ne(),cye=Ks(),Xe=un(),lye=Ut(),uye=ug(),fye=pe(),dye=P2(),hye={elements:mye,values:gye,discriminator:yye,properties:x2,optionalProperties:x2,enum:Mf,type:_ye,ref:wye};function N2(t,e){let r=C2.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Te.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),c={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Xe.default.data},l;try{this._compilations.add(t),t.serializeName=a,o.func(a,Xe.default.data,!1,()=>{o.let(Xe.default.json,(0,Te.str)``),jf(c),o.return(Xe.default.json)}),o.optimize(this.opts.code.optimize);let u=o.toString();l=`${o.scopeRefs(Xe.default.scope)}return ${u}`;let p=new Function(`${Xe.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:p}),t.serialize=p}catch(u){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete t.serialize,delete t.serializeName,u}finally{this._compilations.delete(t)}return t}RT.default=N2;function jf(t){let e;for(let r of aye.jtdForms)if(r in t.schema){e=r;break}pye(t,e?hye[e]:Eye)}function pye(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,Te._)`${s} === undefined || ${s} === null`,()=>r.add(Xe.default.json,(0,Te._)`"null"`),()=>e(t))}function mye(t){let{gen:e,schema:r,data:n}=t;e.add(Xe.default.json,(0,Te.str)`[`);let s=e.let("first",!0);e.forOf("el",n,i=>{ST(t,s),jf({...t,schema:r.elements,data:i})}),e.add(Xe.default.json,(0,Te.str)`]`)}function gye(t){let{gen:e,schema:r,data:n}=t;e.add(Xe.default.json,(0,Te.str)`{`);let s=e.let("first",!0);e.forIn("key",n,i=>I2(t,i,r.values,s)),e.add(Xe.default.json,(0,Te.str)`}`)}function I2(t,e,r,n){let{gen:s,data:i}=t;ST(t,n),Mf({...t,data:e}),s.add(Xe.default.json,(0,Te.str)`:`);let o=s.const("value",(0,Te._)`${i}${(0,Te.getProperty)(e)}`);jf({...t,schema:r,data:o})}function yye(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(Xe.default.json,(0,Te.str)`{${JSON.stringify(s)}:`);let i=e.const("tag",(0,Te._)`${n}${(0,Te.getProperty)(s)}`);Mf({...t,data:i}),e.if(!1);for(let o in r.mapping){e.elseIf((0,Te._)`${i} === ${o}`);let a=r.mapping[o];A2({...t,schema:a},s)}e.endIf(),e.add(Xe.default.json,(0,Te.str)`}`)}function x2(t){let{gen:e}=t;e.add(Xe.default.json,(0,Te.str)`{`),A2(t),e.add(Xe.default.json,(0,Te.str)`}`)}function A2(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o}=n,a=p(i),c=p(o),l=f(a.concat(c)),u=!e,d;for(let g of a)u?u=!1:r.add(Xe.default.json,(0,Te.str)`,`),m(g,i[g],h(g));u&&(d=r.let("first",!0));for(let g of c){let w=h(g);r.if((0,Te.and)((0,Te._)`${w} !== undefined`,(0,lye.isOwnProperty)(r,s,g)),()=>{ST(t,d),m(g,o[g],w)})}n.additionalProperties&&r.forIn("key",s,g=>r.if(y(g,l),()=>I2(t,g,{},d)));function p(g){return g?Object.keys(g):[]}function f(g){if(e&&g.push(e),new Set(g).size!==g.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return g}function h(g){return r.const("value",(0,Te._)`${s}${(0,Te.getProperty)(g)}`)}function m(g,w,_){r.add(Xe.default.json,(0,Te.str)`${JSON.stringify(g)}:`),jf({...t,schema:w,data:_})}function y(g,w){return w.length?(0,Te.and)(...w.map(_=>(0,Te._)`${g} !== ${_}`)):!0}}function _ye(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(Xe.default.json,(0,Te._)`${n} ? "true" : "false"`);break;case"string":Mf(t);break;case"timestamp":e.if((0,Te._)`${n} instanceof Date`,()=>e.add(Xe.default.json,(0,Te._)`'"' + ${n}.toISOString() + '"'`),()=>Mf(t));break;default:vye(t)}}function Mf({gen:t,data:e}){t.add(Xe.default.json,(0,Te._)`${(0,fye.useFunc)(t,dye.default)}(${e})`)}function vye({gen:t,data:e}){t.add(Xe.default.json,(0,Te._)`"" + ${e}`)}function wye(t){let{gen:e,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=t,{ref:a}=i,c=s[a];if(!c)throw new cye.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,uye.hasRef)(c))return jf({...t,schema:c});let{root:l}=o,u=N2.call(r,new C2.SchemaEnv({schema:c,root:l}),s);e.add(Xe.default.json,(0,Te._)`${bye(e,u)}(${n})`)}function bye(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,Te._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function Eye({gen:t,data:e}){t.add(Xe.default.json,(0,Te._)`JSON.stringify(${e})`)}function ST({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(Xe.default.json,(0,Te.str)`,`)):t.add(Xe.default.json,(0,Te.str)`,`)}});var M2=E(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.parseJsonString=Hi.parseJsonNumber=Hi.parseJson=void 0;var Sye=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function Qs(t,e){let r;Qs.message=void 0;let n;e&&(t=t.slice(e));try{return Qs.position=e+t.length,JSON.parse(t)}catch(s){if(n=Sye.exec(s.message),!n){Qs.message="unexpected end";return}r=+n[1];let i=t[r];t=t.slice(0,r),Qs.position=e+r;try{return JSON.parse(t)}catch{Qs.message=`unexpected token ${i}`;return}}}Hi.parseJson=Qs;Qs.message=void 0;Qs.position=0;Qs.code='require("ajv/dist/runtime/parseJson").parseJson';function Zs(t,e,r){let n="",s;if(Zs.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!i(r)){o();return}if(r)return Zs.position=e,+n;if(t[e]==="."&&(n+=".",e++,!i())){o();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!i())){o();return}return Zs.position=e,+n;function i(a){let c=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)c=!0,n+=s,e++;return c}function o(){Zs.position=e,Zs.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}Hi.parseJsonNumber=Zs;Zs.message=void 0;Zs.position=0;Zs.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var D2={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},Rye=97,Tye=48;function zi(t,e){let r="",n;for(zi.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in D2)r+=D2[n],e++;else if(n==="u"){e++;let i=4,o=0;for(;i--;){if(o<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-Rye+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-Tye;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return zi.position=e,r;function s(i){zi.position=e,zi.message=i}}Hi.parseJsonString=zi;zi.message=void 0;zi.position=0;zi.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var W2=E(IT=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0});var $ye=wT(),F2=ea(),ee=ne(),Oye=Ks(),Re=un(),Pye=Ut(),xye=ug(),Cye=lT(),OT=M2(),U2=pe(),Nye=cT(),Iye={elements:Mye,values:jye,discriminator:Lye,properties:j2,optionalProperties:j2,enum:Uye,type:Fye,ref:Bye};function B2(t,e){let r=F2.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ee.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),c={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Re.default.data,parseName:a,char:o.name("c")},l;try{this._compilations.add(t),t.parseName=a,Aye(c),o.optimize(this.opts.code.optimize);let u=o.toString();l=`${o.scopeRefs(Re.default.scope)}return ${u}`;let p=new Function(`${Re.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:p}),t.parse=p}catch(u){throw l&&this.logger.error("Error compiling parser, function code:",l),delete t.parse,delete t.parseName,u}finally{this._compilations.delete(t)}return t}IT.default=B2;var $T=(0,ee._)`undefined`;function Aye(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,ee._)`${Re.default.json}, ${Re.default.jsonPos}, ${Re.default.jsonPart}`,!1,()=>{e.let(Re.default.data),e.let(n),e.assign((0,ee._)`${r}.message`,$T),e.assign((0,ee._)`${r}.position`,$T),e.assign(Re.default.jsonPos,(0,ee._)`${Re.default.jsonPos} || 0`),e.const(Re.default.jsonLen,(0,ee._)`${Re.default.json}.length`),mg(t),NT(t),e.if(Re.default.jsonPart,()=>{e.assign((0,ee._)`${r}.position`,Re.default.jsonPos),e.return(Re.default.data)}),e.if((0,ee._)`${Re.default.jsonPos} === ${Re.default.jsonLen}`,()=>e.return(Re.default.data)),Xc(t)})}function mg(t){let e;for(let r of $ye.jtdForms)if(r in t.schema){e=r;break}e?Dye(t,Iye[e]):xT(t)}var kye=L2(!0,L2(!1,Xc));function Dye(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);qf(t,"null",e,()=>r.assign(s,null))}function Mye(t){let{gen:e,schema:r,data:n}=t;ys(t,"[");let s=e.let("i",0);e.assign(n,(0,ee._)`[]`),PT(t,"]",()=>{let i=e.let("el");mg({...t,schema:r.elements,data:i}),e.assign((0,ee._)`${n}[${s}++]`,i)})}function jye(t){let{gen:e,schema:r,data:n}=t;ys(t,"{"),e.assign(n,(0,ee._)`{}`),PT(t,"}",()=>qye(t,r.values))}function PT(t,e,r){V2(t,e,r),ys(t,e)}function V2(t,e,r){let{gen:n}=t;n.for((0,ee._)`;${Re.default.jsonPos}<${Re.default.jsonLen} && ${gg(1)}!==${e};`,()=>{r(),qf(t,",",()=>n.break(),s)});function s(){qf(t,e,()=>{},Xc)}}function qye(t,e){let{gen:r}=t,n=r.let("key");ia({...t,data:n}),ys(t,":"),H2(t,n,e)}function Lye(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:i}=n;ys(t,"{"),e.assign(r,(0,ee._)`{}`);let o=e.const("pos",Re.default.jsonPos),a=e.let("value"),c=e.let("tag");V2(t,"}",()=>{let l=e.let("key");ia({...t,data:l}),ys(t,":"),e.if((0,ee._)`${l} === ${s}`,()=>{ia({...t,data:c}),e.assign((0,ee._)`${r}[${l}]`,c),e.break()},()=>xT({...t,data:a}))}),e.assign(Re.default.jsonPos,o),e.if((0,ee._)`${c} === undefined`),ei(t,(0,ee.str)`discriminator tag not found`);for(let l in i)e.elseIf((0,ee._)`${c} === ${l}`),z2({...t,schema:i[l]},s);e.else(),ei(t,(0,ee.str)`discriminator value not in schema`),e.endIf()}function j2(t){let{gen:e,data:r}=t;ys(t,"{"),e.assign(r,(0,ee._)`{}`),z2(t)}function z2(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(PT(t,"}",()=>{let c=r.let("key");if(ia({...t,data:c}),ys(t,":"),r.if(!1),q2(t,c,i),q2(t,c,o),e){r.elseIf((0,ee._)`${c} === ${e}`);let l=r.let("tag");ia({...t,data:l})}r.else(),a?xT({...t,data:(0,ee._)`${s}[${c}]`}):ei(t,(0,ee.str)`property ${c} not allowed`),r.endIf()}),i){let c=(0,Pye.hasPropFunc)(r),l=(0,ee.and)(...Object.keys(i).map(u=>(0,ee._)`${c}.call(${s}, ${u})`));r.if((0,ee.not)(l),()=>ei(t,(0,ee.str)`missing required properties`))}}function q2(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,ee._)`${e} === ${s}`),H2(t,e,r[s])}function H2(t,e,r){mg({...t,schema:r,data:(0,ee._)`${t.data}[${e}]`})}function Fye(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":kye(t);break;case"string":ia(t);break;case"timestamp":{ia(t);let i=(0,U2.useFunc)(e,Nye.default),{allowDate:o,parseDate:a}=s.opts,c=o?(0,ee._)`!${i}(${n}, true)`:(0,ee._)`!${i}(${n})`,l=a?(0,ee.or)(c,(0,ee._)`(${n} = new Date(${n}), false)`,(0,ee._)`isNaN(${n}.valueOf())`):c;e.if(l,()=>ei(t,(0,ee.str)`invalid timestamp`));break}case"float32":case"float64":TT(t);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))TT(t,16),i==="uint32"&&e.if((0,ee._)`${n} < 0`,()=>ei(t,(0,ee.str)`integer out of range`));else{let[o,a,c]=Cye.intRange[i];TT(t,c),e.if((0,ee._)`${n} < ${o} || ${n} > ${a}`,()=>ei(t,(0,ee.str)`integer out of range`))}}}}function ia(t){ys(t,'"'),CT(t,OT.parseJsonString)}function Uye(t){let{gen:e,data:r,schema:n}=t,s=n.enum;ys(t,'"'),e.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);e.elseIf((0,ee._)`${gg(o.length)} === ${o}`),e.assign(r,(0,ee.str)`${i}`),e.add(Re.default.jsonPos,o.length)}e.else(),Xc(t),e.endIf()}function TT(t,e){let{gen:r}=t;NT(t),r.if((0,ee._)`"-0123456789".indexOf(${gg(1)}) < 0`,()=>Xc(t),()=>CT(t,OT.parseJsonNumber,e))}function L2(t,e){return r=>{let{gen:n,data:s}=r;qf(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function Bye(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:i}=t,{ref:o}=s,a=n[o];if(!a)throw new Oye.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,xye.hasRef)(a))return mg({...t,schema:a});let{root:c}=i,l=B2.call(r,new F2.SchemaEnv({schema:a,root:c}),n);G2(t,Vye(e,l),!0)}function Vye(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,ee._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function xT(t){CT(t,OT.parseJson)}function CT(t,e,r){G2(t,(0,U2.useFunc)(t.gen,e),r)}function G2(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,ee._)`${e}(${Re.default.json}, ${Re.default.jsonPos}${r?(0,ee._)`, ${r}`:ee.nil})`),n.assign(Re.default.jsonPos,(0,ee._)`${e}.position`),n.if((0,ee._)`${s} === undefined`,()=>ei(t,(0,ee._)`${e}.message`))}function ys(t,e){qf(t,e,Xc)}function qf(t,e,r,n){let{gen:s}=t,i=e.length;NT(t),s.if((0,ee._)`${gg(i)} === ${e}`,()=>{s.add(Re.default.jsonPos,i),n?.(t)},()=>r(t))}function NT({gen:t,char:e}){t.code((0,ee._)`while((${e}=${Re.default.json}[${Re.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${Re.default.jsonPos}++;`)}function gg(t){return t===1?(0,ee._)`${Re.default.json}[${Re.default.jsonPos}]`:(0,ee._)`${Re.default.json}.slice(${Re.default.jsonPos}, ${Re.default.jsonPos}+${t})`}function Xc(t){ei(t,(0,ee._)`"unexpected token " + ${Re.default.json}[${Re.default.jsonPos}]`)}function ei({gen:t,parseName:e},r){t.assign((0,ee._)`${e}.message`,r),t.assign((0,ee._)`${e}.position`,Re.default.jsonPos),t.return($T)}});var DT=E((st,kT)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.MissingRefError=st.ValidationError=st.CodeGen=st.Name=st.nil=st.stringify=st.str=st._=st.KeywordCxt=st.Ajv=void 0;var zye=pR(),Hye=E2(),Gye=$2(),Wye=k2(),Kye=W2(),AT="JTD-meta-schema",Qc=class extends zye.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(Hye.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(Gye.default,AT,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(AT)?AT:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(Wye.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(Kye.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};st.Ajv=Qc;kT.exports=st=Qc;kT.exports.Ajv=Qc;Object.defineProperty(st,"__esModule",{value:!0});st.default=Qc;var Jye=qc();Object.defineProperty(st,"KeywordCxt",{enumerable:!0,get:function(){return Jye.KeywordCxt}});var Zc=ne();Object.defineProperty(st,"_",{enumerable:!0,get:function(){return Zc._}});Object.defineProperty(st,"str",{enumerable:!0,get:function(){return Zc.str}});Object.defineProperty(st,"stringify",{enumerable:!0,get:function(){return Zc.stringify}});Object.defineProperty(st,"nil",{enumerable:!0,get:function(){return Zc.nil}});Object.defineProperty(st,"Name",{enumerable:!0,get:function(){return Zc.Name}});Object.defineProperty(st,"CodeGen",{enumerable:!0,get:function(){return Zc.CodeGen}});var Yye=wf();Object.defineProperty(st,"ValidationError",{enumerable:!0,get:function(){return Yye.default}});var Xye=Ks();Object.defineProperty(st,"MissingRefError",{enumerable:!0,get:function(){return Xye.default}})});var MT=E((CDe,K2)=>{"use strict";var Qye=oc();K2.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:Qye,addUsedSchema:!1,allErrors:!1})});var X2=E((NDe,Y2)=>{"use strict";var Zye=QF().default,e0e=DT(),J2=MT(),jT=class{constructor(e,r){r.mode==="JTD"?this.ajv=new e0e(Object.assign({},J2,r.customOptions)):this.ajv=new Zye(Object.assign({},J2,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&fS()(this.ajv),r.onCreate?.(this.ajv);let s=Object.values(e);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};Y2.exports=jT});var Z2=E((IDe,Q2)=>{"use strict";var t0e=DT(),r0e=MT(),qT=class{constructor(e,r){this.ajv=new t0e(Object.assign({},r0e,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};Q2.exports=qT});var rU=E((Ff,tU)=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var Lf=jm(),zn=Cc();function eU(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?i(e,n):i(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let c=t.getSchema(a);if(!c)throw new Error(`moduleCode: no schema with id ${a}`);return c}function s(a){let c={},l=a?.validateName,u=o(c,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${l};${r}export default ${l};${r}${u}`:`"use strict";${r}module.exports = ${l};${r}module.exports.default = ${l};${r}${u}`}function i(a,c){var l;let u={},d=(0,zn._)`"use strict";`;for(let p in a){let f=c(a[p]);if(f){let h=o(u,f.source),m=t.opts.code.esm?(0,zn._)`export const ${(0,zn.getEsmExportName)(p)}`:(0,zn._)`exports${(0,zn.getProperty)(p)}`;d=(0,zn._)`${d}${r}${m} = ${(l=f.source)===null||l===void 0?void 0:l.validateName};${r}${h}`}}return`${d}`}function o(a,c){if(!c)throw new Error('moduleCode: function does not have "source" property');if(p(c.validateName)===Lf.UsedValueState.Completed)return zn.nil;f(c.validateName,Lf.UsedValueState.Started);let l=t.scope.scopeCode(c.scopeValues,a,d),u=new zn._Code(`${l}${r}${c.validateCode}`);return c.evaluated?(0,zn._)`${u}${c.validateName}.evaluated = ${c.evaluated};${r}`:u;function d(h){var m;let y=(m=h.value)===null||m===void 0?void 0:m.ref;if(h.prefix==="validate"&&typeof y=="function")return o(a,y.source);if((h.prefix==="root"||h.prefix==="wrapper")&&typeof y=="object"){let{validate:g,validateName:w}=y;if(!w)throw new Error("ajv internal error");let _=t.opts.code.es5?Lf.varKinds.var:Lf.varKinds.const,v=(0,zn._)`${_} ${h} = {validate: ${w}};`;if(p(w)===Lf.UsedValueState.Started)return v;let S=o(a,g?.source);return(0,zn._)`${v}${r}${S}`}}function p(h){var m;return(m=a[h.prefix])===null||m===void 0?void 0:m.get(h)}function f(h,m){let{prefix:y}=h;(a[y]=a[y]||new Map).set(h,m)}}}tU.exports=Ff=eU;Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=eU});var iU=E((ADe,sU)=>{"use strict";var nU=LT(),n0e=rU().default;function s0e(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=nU();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=e(n,s);return function(o){let a=i(o),c=n0e(i[nU.AjvReference].ajv,a);return t.storeFunction(o,c),a}}}sU.exports=s0e});var LT=E((kDe,el)=>{"use strict";var aU=Symbol.for("fastify.ajv-compiler.reference"),i0e=X2(),o0e=Z2();function FT(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,i){let o=oU({},i);if(r.has(o))return r.get(o);let a=new o0e(s,i),c=a.buildSerializerFunction.bind(a);return r.set(o,c),c}:function(s,i){let o=oU(s,i.customOptions);if(e.has(o))return e.get(o);let a=new i0e(s,i),c=a.buildValidatorFunction.bind(a);return e.set(o,c),i.customOptions.code!==void 0&&(c[aU]=a),c}}function oU(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}el.exports=FT;el.exports.default=FT;el.exports.AjvCompiler=FT;el.exports.AjvReference=aU;el.exports.StandaloneValidator=iU()});var UT=E((DDe,cU)=>{"use strict";var{buildSchemas:a0e}=zl(),c0e=Uq(),l0e=LT();function u0e(t,e){if(t)return new tl(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=l0e()),r.buildSerializer||(r.buildSerializer=c0e());let n={bucket:e&&e.bucket||a0e,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new tl(void 0,n)}var tl=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};tl.buildSchemaController=u0e;cU.exports=tl});var Uf=E((MDe,lU)=>{"use strict";var f0e="2.0.0",d0e=Number.MAX_SAFE_INTEGER||9007199254740991,h0e=16,p0e=250,m0e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];lU.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:h0e,MAX_SAFE_BUILD_LENGTH:p0e,MAX_SAFE_INTEGER:d0e,RELEASE_TYPES:m0e,SEMVER_SPEC_VERSION:f0e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Bf=E((jDe,uU)=>{"use strict";var g0e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};uU.exports=g0e});var rl=E((_s,fU)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:BT,MAX_SAFE_BUILD_LENGTH:y0e,MAX_LENGTH:_0e}=Uf(),v0e=Bf();_s=fU.exports={};var w0e=_s.re=[],b0e=_s.safeRe=[],H=_s.src=[],E0e=_s.safeSrc=[],G=_s.t={},S0e=0,VT="[a-zA-Z0-9-]",R0e=[["\\s",1],["\\d",_0e],[VT,y0e]],T0e=t=>{for(let[e,r]of R0e)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},le=(t,e,r)=>{let n=T0e(e),s=S0e++;v0e(t,s,e),G[t]=s,H[s]=e,E0e[s]=n,w0e[s]=new RegExp(e,r?"g":void 0),b0e[s]=new RegExp(n,r?"g":void 0)};le("NUMERICIDENTIFIER","0|[1-9]\\d*");le("NUMERICIDENTIFIERLOOSE","\\d+");le("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${VT}*`);le("MAINVERSION",`(${H[G.NUMERICIDENTIFIER]})\\.(${H[G.NUMERICIDENTIFIER]})\\.(${H[G.NUMERICIDENTIFIER]})`);le("MAINVERSIONLOOSE",`(${H[G.NUMERICIDENTIFIERLOOSE]})\\.(${H[G.NUMERICIDENTIFIERLOOSE]})\\.(${H[G.NUMERICIDENTIFIERLOOSE]})`);le("PRERELEASEIDENTIFIER",`(?:${H[G.NONNUMERICIDENTIFIER]}|${H[G.NUMERICIDENTIFIER]})`);le("PRERELEASEIDENTIFIERLOOSE",`(?:${H[G.NONNUMERICIDENTIFIER]}|${H[G.NUMERICIDENTIFIERLOOSE]})`);le("PRERELEASE",`(?:-(${H[G.PRERELEASEIDENTIFIER]}(?:\\.${H[G.PRERELEASEIDENTIFIER]})*))`);le("PRERELEASELOOSE",`(?:-?(${H[G.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${H[G.PRERELEASEIDENTIFIERLOOSE]})*))`);le("BUILDIDENTIFIER",`${VT}+`);le("BUILD",`(?:\\+(${H[G.BUILDIDENTIFIER]}(?:\\.${H[G.BUILDIDENTIFIER]})*))`);le("FULLPLAIN",`v?${H[G.MAINVERSION]}${H[G.PRERELEASE]}?${H[G.BUILD]}?`);le("FULL",`^${H[G.FULLPLAIN]}$`);le("LOOSEPLAIN",`[v=\\s]*${H[G.MAINVERSIONLOOSE]}${H[G.PRERELEASELOOSE]}?${H[G.BUILD]}?`);le("LOOSE",`^${H[G.LOOSEPLAIN]}$`);le("GTLT","((?:<|>)?=?)");le("XRANGEIDENTIFIERLOOSE",`${H[G.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);le("XRANGEIDENTIFIER",`${H[G.NUMERICIDENTIFIER]}|x|X|\\*`);le("XRANGEPLAIN",`[v=\\s]*(${H[G.XRANGEIDENTIFIER]})(?:\\.(${H[G.XRANGEIDENTIFIER]})(?:\\.(${H[G.XRANGEIDENTIFIER]})(?:${H[G.PRERELEASE]})?${H[G.BUILD]}?)?)?`);le("XRANGEPLAINLOOSE",`[v=\\s]*(${H[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[G.XRANGEIDENTIFIERLOOSE]})(?:${H[G.PRERELEASELOOSE]})?${H[G.BUILD]}?)?)?`);le("XRANGE",`^${H[G.GTLT]}\\s*${H[G.XRANGEPLAIN]}$`);le("XRANGELOOSE",`^${H[G.GTLT]}\\s*${H[G.XRANGEPLAINLOOSE]}$`);le("COERCEPLAIN",`(^|[^\\d])(\\d{1,${BT}})(?:\\.(\\d{1,${BT}}))?(?:\\.(\\d{1,${BT}}))?`);le("COERCE",`${H[G.COERCEPLAIN]}(?:$|[^\\d])`);le("COERCEFULL",H[G.COERCEPLAIN]+`(?:${H[G.PRERELEASE]})?(?:${H[G.BUILD]})?(?:$|[^\\d])`);le("COERCERTL",H[G.COERCE],!0);le("COERCERTLFULL",H[G.COERCEFULL],!0);le("LONETILDE","(?:~>?)");le("TILDETRIM",`(\\s*)${H[G.LONETILDE]}\\s+`,!0);_s.tildeTrimReplace="$1~";le("TILDE",`^${H[G.LONETILDE]}${H[G.XRANGEPLAIN]}$`);le("TILDELOOSE",`^${H[G.LONETILDE]}${H[G.XRANGEPLAINLOOSE]}$`);le("LONECARET","(?:\\^)");le("CARETTRIM",`(\\s*)${H[G.LONECARET]}\\s+`,!0);_s.caretTrimReplace="$1^";le("CARET",`^${H[G.LONECARET]}${H[G.XRANGEPLAIN]}$`);le("CARETLOOSE",`^${H[G.LONECARET]}${H[G.XRANGEPLAINLOOSE]}$`);le("COMPARATORLOOSE",`^${H[G.GTLT]}\\s*(${H[G.LOOSEPLAIN]})$|^$`);le("COMPARATOR",`^${H[G.GTLT]}\\s*(${H[G.FULLPLAIN]})$|^$`);le("COMPARATORTRIM",`(\\s*)${H[G.GTLT]}\\s*(${H[G.LOOSEPLAIN]}|${H[G.XRANGEPLAIN]})`,!0);_s.comparatorTrimReplace="$1$2$3";le("HYPHENRANGE",`^\\s*(${H[G.XRANGEPLAIN]})\\s+-\\s+(${H[G.XRANGEPLAIN]})\\s*$`);le("HYPHENRANGELOOSE",`^\\s*(${H[G.XRANGEPLAINLOOSE]})\\s+-\\s+(${H[G.XRANGEPLAINLOOSE]})\\s*$`);le("STAR","(<|>)?=?\\s*\\*");le("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");le("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var yg=E((qDe,dU)=>{"use strict";var $0e=Object.freeze({loose:!0}),O0e=Object.freeze({}),P0e=t=>t?typeof t!="object"?$0e:t:O0e;dU.exports=P0e});var zT=E((LDe,mU)=>{"use strict";var hU=/^[0-9]+$/,pU=(t,e)=>{let r=hU.test(t),n=hU.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},x0e=(t,e)=>pU(e,t);mU.exports={compareIdentifiers:pU,rcompareIdentifiers:x0e}});var nr=E((FDe,yU)=>{"use strict";var _g=Bf(),{MAX_LENGTH:gU,MAX_SAFE_INTEGER:vg}=Uf(),{safeRe:wg,t:bg}=rl(),C0e=yg(),{compareIdentifiers:nl}=zT(),HT=class t{constructor(e,r){if(r=C0e(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>gU)throw new TypeError(`version is longer than ${gU} characters`);_g("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?wg[bg.LOOSE]:wg[bg.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<vg)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_g("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),nl(this.major,e.major)||nl(this.minor,e.minor)||nl(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(_g("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return nl(n,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(_g("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return nl(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?wg[bg.PRERELEASELOOSE]:wg[bg.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),nl(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};yU.exports=HT});var oa=E((UDe,vU)=>{"use strict";var _U=nr(),N0e=(t,e,r=!1)=>{if(t instanceof _U)return t;try{return new _U(t,e)}catch(n){if(!r)return null;throw n}};vU.exports=N0e});var bU=E((BDe,wU)=>{"use strict";var I0e=oa(),A0e=(t,e)=>{let r=I0e(t,e);return r?r.version:null};wU.exports=A0e});var SU=E((VDe,EU)=>{"use strict";var k0e=oa(),D0e=(t,e)=>{let r=k0e(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};EU.exports=D0e});var $U=E((zDe,TU)=>{"use strict";var RU=nr(),M0e=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new RU(t instanceof RU?t.version:t,r).inc(e,n,s).version}catch{return null}};TU.exports=M0e});var xU=E((HDe,PU)=>{"use strict";var OU=oa(),j0e=(t,e)=>{let r=OU(t,null,!0),n=OU(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};PU.exports=j0e});var NU=E((GDe,CU)=>{"use strict";var q0e=nr(),L0e=(t,e)=>new q0e(t,e).major;CU.exports=L0e});var AU=E((WDe,IU)=>{"use strict";var F0e=nr(),U0e=(t,e)=>new F0e(t,e).minor;IU.exports=U0e});var DU=E((KDe,kU)=>{"use strict";var B0e=nr(),V0e=(t,e)=>new B0e(t,e).patch;kU.exports=V0e});var jU=E((JDe,MU)=>{"use strict";var z0e=oa(),H0e=(t,e)=>{let r=z0e(t,e);return r&&r.prerelease.length?r.prerelease:null};MU.exports=H0e});var hn=E((YDe,LU)=>{"use strict";var qU=nr(),G0e=(t,e,r)=>new qU(t,r).compare(new qU(e,r));LU.exports=G0e});var UU=E((XDe,FU)=>{"use strict";var W0e=hn(),K0e=(t,e,r)=>W0e(e,t,r);FU.exports=K0e});var VU=E((QDe,BU)=>{"use strict";var J0e=hn(),Y0e=(t,e)=>J0e(t,e,!0);BU.exports=Y0e});var Eg=E((ZDe,HU)=>{"use strict";var zU=nr(),X0e=(t,e,r)=>{let n=new zU(t,r),s=new zU(e,r);return n.compare(s)||n.compareBuild(s)};HU.exports=X0e});var WU=E((eMe,GU)=>{"use strict";var Q0e=Eg(),Z0e=(t,e)=>t.sort((r,n)=>Q0e(r,n,e));GU.exports=Z0e});var JU=E((tMe,KU)=>{"use strict";var e_e=Eg(),t_e=(t,e)=>t.sort((r,n)=>e_e(n,r,e));KU.exports=t_e});var Vf=E((rMe,YU)=>{"use strict";var r_e=hn(),n_e=(t,e,r)=>r_e(t,e,r)>0;YU.exports=n_e});var Sg=E((nMe,XU)=>{"use strict";var s_e=hn(),i_e=(t,e,r)=>s_e(t,e,r)<0;XU.exports=i_e});var GT=E((sMe,QU)=>{"use strict";var o_e=hn(),a_e=(t,e,r)=>o_e(t,e,r)===0;QU.exports=a_e});var WT=E((iMe,ZU)=>{"use strict";var c_e=hn(),l_e=(t,e,r)=>c_e(t,e,r)!==0;ZU.exports=l_e});var Rg=E((oMe,eB)=>{"use strict";var u_e=hn(),f_e=(t,e,r)=>u_e(t,e,r)>=0;eB.exports=f_e});var Tg=E((aMe,tB)=>{"use strict";var d_e=hn(),h_e=(t,e,r)=>d_e(t,e,r)<=0;tB.exports=h_e});var KT=E((cMe,rB)=>{"use strict";var p_e=GT(),m_e=WT(),g_e=Vf(),y_e=Rg(),__e=Sg(),v_e=Tg(),w_e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return p_e(t,r,n);case"!=":return m_e(t,r,n);case">":return g_e(t,r,n);case">=":return y_e(t,r,n);case"<":return __e(t,r,n);case"<=":return v_e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};rB.exports=w_e});var sB=E((lMe,nB)=>{"use strict";var b_e=nr(),E_e=oa(),{safeRe:$g,t:Og}=rl(),S_e=(t,e)=>{if(t instanceof b_e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?$g[Og.COERCEFULL]:$g[Og.COERCE]);else{let c=e.includePrerelease?$g[Og.COERCERTLFULL]:$g[Og.COERCERTL],l;for(;(l=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return E_e(`${n}.${s}.${i}${o}${a}`,e)};nB.exports=S_e});var oB=E((uMe,iB)=>{"use strict";var JT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};iB.exports=JT});var pn=E((fMe,uB)=>{"use strict";var R_e=/\s+/g,YT=class t{constructor(e,r){if(r=$_e(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof XT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(R_e," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!cB(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&A_e(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&N_e)|(this.options.loose&&I_e))+":"+e,s=aB.get(n);if(s)return s;let i=this.options.loose,o=i?Ur[vr.HYPHENRANGELOOSE]:Ur[vr.HYPHENRANGE];e=e.replace(o,V_e(this.options.includePrerelease)),it("hyphen replace",e),e=e.replace(Ur[vr.COMPARATORTRIM],P_e),it("comparator trim",e),e=e.replace(Ur[vr.TILDETRIM],x_e),it("tilde trim",e),e=e.replace(Ur[vr.CARETTRIM],C_e),it("caret trim",e);let a=e.split(" ").map(d=>k_e(d,this.options)).join(" ").split(/\s+/).map(d=>B_e(d,this.options));i&&(a=a.filter(d=>(it("loose invalid filter",d,this.options),!!d.match(Ur[vr.COMPARATORLOOSE])))),it("range list",a);let c=new Map,l=a.map(d=>new XT(d,this.options));for(let d of l){if(cB(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return aB.set(n,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>lB(n,r)&&e.set.some(s=>lB(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new O_e(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(z_e(this.set[r],e,this.options))return!0;return!1}};uB.exports=YT;var T_e=oB(),aB=new T_e,$_e=yg(),XT=zf(),it=Bf(),O_e=nr(),{safeRe:Ur,t:vr,comparatorTrimReplace:P_e,tildeTrimReplace:x_e,caretTrimReplace:C_e}=rl(),{FLAG_INCLUDE_PRERELEASE:N_e,FLAG_LOOSE:I_e}=Uf(),cB=t=>t.value==="<0.0.0-0",A_e=t=>t.value==="",lB=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},k_e=(t,e)=>(it("comp",t,e),t=j_e(t,e),it("caret",t),t=D_e(t,e),it("tildes",t),t=L_e(t,e),it("xrange",t),t=U_e(t,e),it("stars",t),t),wr=t=>!t||t.toLowerCase()==="x"||t==="*",D_e=(t,e)=>t.trim().split(/\s+/).map(r=>M_e(r,e)).join(" "),M_e=(t,e)=>{let r=e.loose?Ur[vr.TILDELOOSE]:Ur[vr.TILDE];return t.replace(r,(n,s,i,o,a)=>{it("tilde",t,n,s,i,o,a);let c;return wr(s)?c="":wr(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:wr(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(it("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,it("tilde return",c),c})},j_e=(t,e)=>t.trim().split(/\s+/).map(r=>q_e(r,e)).join(" "),q_e=(t,e)=>{it("caret",t,e);let r=e.loose?Ur[vr.CARETLOOSE]:Ur[vr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,c)=>{it("caret",t,s,i,o,a,c);let l;return wr(i)?l="":wr(o)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:wr(a)?i==="0"?l=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(it("replaceCaret pr",c),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(it("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),it("caret return",l),l})},L_e=(t,e)=>(it("replaceXRanges",t,e),t.split(/\s+/).map(r=>F_e(r,e)).join(" ")),F_e=(t,e)=>{t=t.trim();let r=e.loose?Ur[vr.XRANGELOOSE]:Ur[vr.XRANGE];return t.replace(r,(n,s,i,o,a,c)=>{it("xRange",t,n,s,i,o,a,c);let l=wr(i),u=l||wr(o),d=u||wr(a),p=d;return s==="="&&p&&(s=""),c=e.includePrerelease?"-0":"",l?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(u&&(o=0),a=0,s===">"?(s=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",u?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),it("xRange return",n),n})},U_e=(t,e)=>(it("replaceStars",t,e),t.trim().replace(Ur[vr.STAR],"")),B_e=(t,e)=>(it("replaceGTE0",t,e),t.trim().replace(Ur[e.includePrerelease?vr.GTE0PRE:vr.GTE0],"")),V_e=t=>(e,r,n,s,i,o,a,c,l,u,d,p)=>(wr(n)?r="":wr(s)?r=`>=${n}.0.0${t?"-0":""}`:wr(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,wr(l)?c="":wr(u)?c=`<${+l+1}.0.0-0`:wr(d)?c=`<${l}.${+u+1}.0-0`:p?c=`<=${l}.${u}.${d}-${p}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),z_e=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(it(t[n].semver),t[n].semver!==XT.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var zf=E((dMe,gB)=>{"use strict";var Hf=Symbol("SemVer ANY"),e$=class t{static get ANY(){return Hf}constructor(e,r){if(r=fB(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ZT("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Hf?this.value="":this.value=this.operator+this.semver.version,ZT("comp",this)}parse(e){let r=this.options.loose?dB[hB.COMPARATORLOOSE]:dB[hB.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new pB(n[2],this.options.loose):this.semver=Hf}toString(){return this.value}test(e){if(ZT("Comparator.test",e,this.options.loose),this.semver===Hf||e===Hf)return!0;if(typeof e=="string")try{e=new pB(e,this.options)}catch{return!1}return QT(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new mB(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new mB(this.value,r).test(e.semver):(r=fB(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||QT(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||QT(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};gB.exports=e$;var fB=yg(),{safeRe:dB,t:hB}=rl(),QT=KT(),ZT=Bf(),pB=nr(),mB=pn()});var Gf=E((hMe,yB)=>{"use strict";var H_e=pn(),G_e=(t,e,r)=>{try{e=new H_e(e,r)}catch{return!1}return e.test(t)};yB.exports=G_e});var vB=E((pMe,_B)=>{"use strict";var W_e=pn(),K_e=(t,e)=>new W_e(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));_B.exports=K_e});var bB=E((mMe,wB)=>{"use strict";var J_e=nr(),Y_e=pn(),X_e=(t,e,r)=>{let n=null,s=null,i=null;try{i=new Y_e(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new J_e(n,r))}),n};wB.exports=X_e});var SB=E((gMe,EB)=>{"use strict";var Q_e=nr(),Z_e=pn(),eve=(t,e,r)=>{let n=null,s=null,i=null;try{i=new Z_e(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Q_e(n,r))}),n};EB.exports=eve});var $B=E((yMe,TB)=>{"use strict";var t$=nr(),tve=pn(),RB=Vf(),rve=(t,e)=>{t=new tve(t,e);let r=new t$("0.0.0");if(t.test(r)||(r=new t$("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new t$(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||RB(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||RB(r,i))&&(r=i)}return r&&t.test(r)?r:null};TB.exports=rve});var PB=E((_Me,OB)=>{"use strict";var nve=pn(),sve=(t,e)=>{try{return new nve(t,e).range||"*"}catch{return null}};OB.exports=sve});var Pg=E((vMe,IB)=>{"use strict";var ive=nr(),NB=zf(),{ANY:ove}=NB,ave=pn(),cve=Gf(),xB=Vf(),CB=Sg(),lve=Tg(),uve=Rg(),fve=(t,e,r,n)=>{t=new ive(t,n),e=new ave(e,n);let s,i,o,a,c;switch(r){case">":s=xB,i=lve,o=CB,a=">",c=">=";break;case"<":s=CB,i=uve,o=xB,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(cve(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,p=null;if(u.forEach(f=>{f.semver===ove&&(f=new NB(">=0.0.0")),d=d||f,p=p||f,s(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(t,p.semver))return!1;if(p.operator===c&&o(t,p.semver))return!1}return!0};IB.exports=fve});var kB=E((wMe,AB)=>{"use strict";var dve=Pg(),hve=(t,e,r)=>dve(t,e,">",r);AB.exports=hve});var MB=E((bMe,DB)=>{"use strict";var pve=Pg(),mve=(t,e,r)=>pve(t,e,"<",r);DB.exports=mve});var LB=E((EMe,qB)=>{"use strict";var jB=pn(),gve=(t,e,r)=>(t=new jB(t,r),e=new jB(e,r),t.intersects(e,r));qB.exports=gve});var UB=E((SMe,FB)=>{"use strict";var yve=Gf(),_ve=hn();FB.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((u,d)=>_ve(u,d,r));for(let u of o)yve(u,e,r)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var WB=E((RMe,GB)=>{"use strict";var BB=pn(),n$=zf(),{ANY:r$}=n$,Wf=Gf(),s$=hn(),vve=(t,e,r={})=>{if(t===e)return!0;t=new BB(t,r),e=new BB(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=bve(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},wve=[new n$(">=0.0.0-0")],VB=[new n$(">=0.0.0")],bve=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===r$){if(e.length===1&&e[0].semver===r$)return!0;r.includePrerelease?t=wve:t=VB}if(e.length===1&&e[0].semver===r$){if(r.includePrerelease)return!0;e=VB}let n=new Set,s,i;for(let f of t)f.operator===">"||f.operator===">="?s=zB(s,f,r):f.operator==="<"||f.operator==="<="?i=HB(i,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(s&&i){if(o=s$(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let f of n){if(s&&!Wf(f,String(s),r)||i&&!Wf(f,String(i),r))return null;for(let h of e)if(!Wf(f,String(h),r))return!1;return!0}let a,c,l,u,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",s){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=zB(s,f,r),a===f&&a!==s)return!1}else if(s.operator===">="&&!Wf(s.semver,String(f),r))return!1}if(i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=HB(i,f,r),c===f&&c!==i)return!1}else if(i.operator==="<="&&!Wf(i.semver,String(f),r))return!1}if(!f.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&u&&!s&&o!==0||p||d)},zB=(t,e,r)=>{if(!t)return e;let n=s$(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},HB=(t,e,r)=>{if(!t)return e;let n=s$(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};GB.exports=vve});var XB=E((TMe,YB)=>{"use strict";var i$=rl(),KB=Uf(),Eve=nr(),JB=zT(),Sve=oa(),Rve=bU(),Tve=SU(),$ve=$U(),Ove=xU(),Pve=NU(),xve=AU(),Cve=DU(),Nve=jU(),Ive=hn(),Ave=UU(),kve=VU(),Dve=Eg(),Mve=WU(),jve=JU(),qve=Vf(),Lve=Sg(),Fve=GT(),Uve=WT(),Bve=Rg(),Vve=Tg(),zve=KT(),Hve=sB(),Gve=zf(),Wve=pn(),Kve=Gf(),Jve=vB(),Yve=bB(),Xve=SB(),Qve=$B(),Zve=PB(),ewe=Pg(),twe=kB(),rwe=MB(),nwe=LB(),swe=UB(),iwe=WB();YB.exports={parse:Sve,valid:Rve,clean:Tve,inc:$ve,diff:Ove,major:Pve,minor:xve,patch:Cve,prerelease:Nve,compare:Ive,rcompare:Ave,compareLoose:kve,compareBuild:Dve,sort:Mve,rsort:jve,gt:qve,lt:Lve,eq:Fve,neq:Uve,gte:Bve,lte:Vve,cmp:zve,coerce:Hve,Comparator:Gve,Range:Wve,satisfies:Kve,toComparators:Jve,maxSatisfying:Yve,minSatisfying:Xve,minVersion:Qve,validRange:Zve,outside:ewe,gtr:twe,ltr:rwe,intersects:nwe,simplifyRange:swe,subset:iwe,SemVer:Eve,re:i$.re,src:i$.src,tokens:i$.t,SEMVER_SPEC_VERSION:KB.SEMVER_SPEC_VERSION,RELEASE_TYPES:KB.RELEASE_TYPES,compareIdentifiers:JB.compareIdentifiers,rcompareIdentifiers:JB.rcompareIdentifiers}});var f$=E(($Me,u$)=>{"use strict";var o$=XB(),c$=require("node:assert"),l$=Symbol.for("registered-plugin"),{kTestInternals:owe}=Tt(),{exist:awe,existReply:cwe,existRequest:lwe}=Kl(),{FST_ERR_PLUGIN_VERSION_MISMATCH:uwe,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:fwe,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:dwe}=Mt(),hwe=/-(?:rc|pre|alpha).+$/u;function Kf(t){return t[Symbol.for("plugin-meta")]}function QB(t){let e=ZB(t);if(e)return e;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===t)return i}}return t.name?t.name:null}function pwe(t){return t.toString().split(`
`,2).map(e=>e.trim()).join(" -- ")}function ZB(t){return t[Symbol.for("fastify.display-name")]}function eV(t){return!!t[Symbol.for("skip-override")]}function tV(t){let e=Kf(t);if(!e)return;let r=e.dependencies;r&&(c$(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{c$(this[l$].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function rV(t){let e=Kf(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&a$(this,"Fastify",r.fastify,n),r.reply&&a$(this,"Reply",r.reply,n),r.request&&a$(this,"Request",r.request,n))}var mwe={Fastify:awe,Request:lwe,Reply:cwe};function a$(t,e,r,n){c$(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!mwe[e].call(t,s))throw new fwe(s,i,e)})}function gwe(t){let e=Kf(t);if(e?.fastify==null)return;let r=e.fastify,n=hwe.test(this.version);if(!(n===!0&&o$.gt(this.version,o$.coerce(r))===!0)&&r&&o$.satisfies(this.version,r,{includePrerelease:n})===!1)throw new uwe(e.name,r,this.version)}function ywe(t){let e=Kf(t);if(!e)return;let r=e.name;if(r)return this[l$].push(r),r}function _we(t,e){if(t.constructor.name==="AsyncFunction"&&t.length===3)throw new dwe(e)}function vwe(t){let e=ywe.call(this,t)||QB(t);return _we.call(this,t,e),gwe.call(this,t),rV.call(this,t),tV.call(this,t),eV(t)}u$.exports={getPluginName:QB,getFuncPreview:pwe,kRegisteredPlugins:l$,getDisplayName:ZB,registerPlugin:vwe};u$.exports[owe]={shouldSkipOverride:eV,getMeta:Kf,checkDecorators:rV,checkDependencies:tV}});var xg=E((OMe,nV)=>{"use strict";function wwe(t,e){let r=e||Ewe();return t?Swe(t,r):r}function bwe(t,e){return t.genReqId(e)}function Ewe(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function Swe(t,e){return function(r){return r.headers[t]||e(r)}}nV.exports={getGenReqId:bwe,reqIdGenFactory:wwe}});var h$=E((PMe,oV)=>{"use strict";var sV=12,Rwe=0,d$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Twe(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",s=0,i=0,o=e,a=sV;e>-1&&e<r;){var c=iV(t[e+1],4),l=iV(t[e+2],0),u=c|l,d=d$[u];if(a=d$[256+a+d],i=i<<6|u&d$[364+d],a===sV)n+=t.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===Rwe)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(s)}var $we={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function iV(t,e){var r=$we[t];return r===void 0?255:r<<e}oV.exports=Twe});var fV=E((xMe,uV)=>{"use strict";var aV=h$(),cV=/\+/g,lV=function(){};lV.prototype=Object.create(null);function Owe(t){let e=new lV;if(typeof t!="string")return e;let r=t.length,n="",s="",i=-1,o=-1,a=!1,c=!1,l=!1,u=!1,d=!1,p=0;for(let f=0;f<r+1;f++)if(p=f!==r?t.charCodeAt(f):38,p===38){if(d=o>i,d||(o=f),n=t.slice(i+1,o),d||n.length>0){l&&(n=n.replace(cV," ")),a&&(n=aV(n)||n),d&&(s=t.slice(o+1,f),u&&(s=s.replace(cV," ")),c&&(s=aV(s)||s));let h=e[n];h===void 0?e[n]=s:h.pop?h.push(s):e[n]=[h,s]}s="",i=f,o=f,a=!1,c=!1,l=!1,u=!1}else p===61?o<=i?o=f:c=!0:p===43?o>i?u=!0:l=!0:p===37&&(o>i?c=!0:a=!0);return e}uV.exports=Owe});var hV=E((CMe,dV)=>{var vs=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Pwe=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function xwe(t){let e=t.length;if(e===0)return"";let r="",n=0,s=0;e:for(;s<e;s++){let i=t.charCodeAt(s);for(;i<128;){if(Pwe[i]!==1&&(n<s&&(r+=t.slice(n,s)),n=s+1,r+=vs[i]),++s===e)break e;i=t.charCodeAt(s)}if(n<s&&(r+=t.slice(n,s)),i<2048){n=s+1,r+=vs[192|i>>6]+vs[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=vs[224|i>>12]+vs[128|i>>6&63]+vs[128|i&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=vs[240|i>>18]+vs[128|i>>12&63]+vs[128|i>>6&63]+vs[128|i&63]}return n===0?t:n<e?r+t.slice(n):r}dV.exports={encodeString:xwe}});var gV=E((NMe,mV)=>{"use strict";var{encodeString:p$}=hV();function pV(t){let e=typeof t;return e==="string"?p$(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:p$(""+t):""}function Cwe(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],c=t[a],l=p$(a)+"=";if(o&&(e+=r),Array.isArray(c)){i=c.length;for(let u=0;u<i;u++)u&&(e+=r),e+=l,e+=pV(c[u])}else e+=l,e+=pV(c)}return e}mV.exports=Cwe});var wV=E((IMe,Jf)=>{"use strict";var yV=fV(),_V=gV(),vV={parse:yV,stringify:_V};Jf.exports=vV;Jf.exports.default=vV;Jf.exports.parse=yV;Jf.exports.stringify=_V});var EV=E(bV=>{"use strict";Object.defineProperty(bV,"__esModule",{value:!0})});var SV=E(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.types=void 0;var Nwe;(function(t){t[t.ROOT=0]="ROOT",t[t.GROUP=1]="GROUP",t[t.POSITION=2]="POSITION",t[t.SET=3]="SET",t[t.RANGE=4]="RANGE",t[t.REPETITION=5]="REPETITION",t[t.REFERENCE=6]="REFERENCE",t[t.CHAR=7]="CHAR"})(Nwe=Yf.types||(Yf.types={}))});var TV=E(RV=>{"use strict";Object.defineProperty(RV,"__esModule",{value:!0})});var ri=E(ti=>{"use strict";var Iwe=ti&&ti.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),m$=ti&&ti.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Iwe(e,t,r)};Object.defineProperty(ti,"__esModule",{value:!0});m$(EV(),ti);m$(SV(),ti);m$(TV(),ti)});var Cg=E(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.anyChar=sr.notWhitespace=sr.whitespace=sr.notInts=sr.ints=sr.notWords=sr.words=void 0;var Le=ri(),$V=()=>[{type:Le.types.RANGE,from:48,to:57}],OV=()=>[{type:Le.types.CHAR,value:95},{type:Le.types.RANGE,from:97,to:122},{type:Le.types.RANGE,from:65,to:90},{type:Le.types.RANGE,from:48,to:57}],PV=()=>[{type:Le.types.CHAR,value:9},{type:Le.types.CHAR,value:10},{type:Le.types.CHAR,value:11},{type:Le.types.CHAR,value:12},{type:Le.types.CHAR,value:13},{type:Le.types.CHAR,value:32},{type:Le.types.CHAR,value:160},{type:Le.types.CHAR,value:5760},{type:Le.types.RANGE,from:8192,to:8202},{type:Le.types.CHAR,value:8232},{type:Le.types.CHAR,value:8233},{type:Le.types.CHAR,value:8239},{type:Le.types.CHAR,value:8287},{type:Le.types.CHAR,value:12288},{type:Le.types.CHAR,value:65279}],Awe=()=>[{type:Le.types.CHAR,value:10},{type:Le.types.CHAR,value:13},{type:Le.types.CHAR,value:8232},{type:Le.types.CHAR,value:8233}];sr.words=()=>({type:Le.types.SET,set:OV(),not:!1});sr.notWords=()=>({type:Le.types.SET,set:OV(),not:!0});sr.ints=()=>({type:Le.types.SET,set:$V(),not:!1});sr.notInts=()=>({type:Le.types.SET,set:$V(),not:!0});sr.whitespace=()=>({type:Le.types.SET,set:PV(),not:!1});sr.notWhitespace=()=>({type:Le.types.SET,set:PV(),not:!0});sr.anyChar=()=>({type:Le.types.SET,set:Awe(),not:!0})});var CV=E(mn=>{"use strict";var kwe=mn&&mn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dwe=mn&&mn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mwe=mn&&mn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kwe(e,t,r);return Dwe(e,t),e};Object.defineProperty(mn,"__esModule",{value:!0});mn.tokenizeClass=mn.strToChars=void 0;var xV=ri(),sl=Mwe(Cg()),jwe="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";mn.strToChars=t=>{let e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t.replace(e,(r,n,s,i,o,a,c)=>{if(s)return r;let l=n?8:i?parseInt(i,16):o?parseInt(o,16):a?jwe.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[c],u=String.fromCharCode(l);return/[[\]{}^$.|?*+()]/.test(u)?`\\${u}`:u})};mn.tokenizeClass=(t,e)=>{var r,n,s,i,o,a,c;let l=[],u,d,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(u=p.exec(t))!==null;){let f=(c=(a=(o=(i=(s=(n=(r=u[1]&&sl.words())!==null&&r!==void 0?r:u[2]&&sl.ints())!==null&&n!==void 0?n:u[3]&&sl.whitespace())!==null&&s!==void 0?s:u[4]&&sl.notWords())!==null&&i!==void 0?i:u[5]&&sl.notInts())!==null&&o!==void 0?o:u[6]&&sl.notWhitespace())!==null&&a!==void 0?a:u[7]&&{type:xV.types.RANGE,from:(u[8]||u[9]).charCodeAt(0),to:(d=u[10]).charCodeAt(d.length-1)})!==null&&c!==void 0?c:(d=u[16])&&{type:xV.types.CHAR,value:d.charCodeAt(0)};if(f)l.push(f);else return[l,p.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated character class`)}});var g$=E(ws=>{"use strict";var qwe=ws&&ws.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lwe=ws&&ws.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AV=ws&&ws.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qwe(e,t,r);return Lwe(e,t),e};Object.defineProperty(ws,"__esModule",{value:!0});ws.tokenizer=void 0;var NV=AV(CV()),zt=ri(),aa=AV(Cg()),Fwe=/^[a-zA-Z_$]$/i,Uwe=/^[a-zA-Z0-9_$]$/i,IV=/\d/;ws.tokenizer=t=>{let e=0,r,n={type:zt.types.ROOT,stack:[]},s=n,i=n.stack,o=[],a=[],c=0,l=d=>{throw new SyntaxError(`Invalid regular expression: /${t}/: Nothing to repeat at column ${d-1}`)},u=NV.strToChars(t);for(;e<u.length;)switch(r=u[e++]){case"\\":if(e===u.length)throw new SyntaxError(`Invalid regular expression: /${t}/: \\ at end of pattern`);switch(r=u[e++]){case"b":i.push({type:zt.types.POSITION,value:"b"});break;case"B":i.push({type:zt.types.POSITION,value:"B"});break;case"w":i.push(aa.words());break;case"W":i.push(aa.notWords());break;case"d":i.push(aa.ints());break;case"D":i.push(aa.notInts());break;case"s":i.push(aa.whitespace());break;case"S":i.push(aa.notWhitespace());break;default:if(IV.test(r)){let d=r;for(;e<u.length&&IV.test(u[e]);)d+=u[e++];let p=parseInt(d,10),f={type:zt.types.REFERENCE,value:p};i.push(f),a.push({reference:f,stack:i,index:i.length-1})}else i.push({type:zt.types.CHAR,value:r.charCodeAt(0)})}break;case"^":i.push({type:zt.types.POSITION,value:"^"});break;case"$":i.push({type:zt.types.POSITION,value:"$"});break;case"[":{let d;u[e]==="^"?(d=!0,e++):d=!1;let p=NV.tokenizeClass(u.slice(e),t);e+=p[1],i.push({type:zt.types.SET,set:p[0],not:d});break}case".":i.push(aa.anyChar());break;case"(":{let d={type:zt.types.GROUP,stack:[],remember:!0};if(u[e]==="?")if(r=u[e+1],e+=2,r==="=")d.followedBy=!0,d.remember=!1;else if(r==="!")d.notFollowedBy=!0,d.remember=!1;else if(r==="<"){let p="";if(Fwe.test(u[e]))p+=u[e],e++;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);for(;e<u.length&&Uwe.test(u[e]);)p+=u[e],e++;if(!p)throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);if(u[e]!==">")throw new SyntaxError(`Invalid regular expression: /${t}/: Unclosed capture group name, expected '>', found '${u[e]}' at column ${e+1}`);d.name=p,e++}else if(r===":")d.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid group, character '${r}' after '?' at column ${e-1}`);else c+=1;i.push(d),o.push(s),s=d,i=d.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unmatched ) at column ${e-1}`);s=o.pop(),i=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let d=[];s.options.push(d),i=d;break}case"{":{let d=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(e)),p,f;d!==null?(i.length===0&&l(e),p=parseInt(d[1],10),f=d[2]?d[3]?parseInt(d[3],10):1/0:p,e+=d[0].length,i.push({type:zt.types.REPETITION,min:p,max:f,value:i.pop()})):i.push({type:zt.types.CHAR,value:123});break}case"?":i.length===0&&l(e),i.push({type:zt.types.REPETITION,min:0,max:1,value:i.pop()});break;case"+":i.length===0&&l(e),i.push({type:zt.types.REPETITION,min:1,max:1/0,value:i.pop()});break;case"*":i.length===0&&l(e),i.push({type:zt.types.REPETITION,min:0,max:1/0,value:i.pop()});break;default:i.push({type:zt.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated group`);return Bwe(a,c),n};function Bwe(t,e){for(let r of t.reverse())if(e<r.reference.value){r.reference.type=zt.types.CHAR;let n=r.reference.value.toString();if(r.reference.value=parseInt(n,8),!/^[0-7]+$/.test(n)){let s=0;for(;n[s]!=="8"&&n[s]!=="9";)s+=1;if(s===0?(r.reference.value=n.charCodeAt(0),s+=1):r.reference.value=parseInt(n.slice(0,s),8),n.length>s){let i=r.stack.splice(r.index+1);for(let o of n.slice(s))r.stack.push({type:zt.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...i)}}}}});var DV=E(ir=>{"use strict";var Vwe=ir&&ir.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zwe=ir&&ir.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hwe=ir&&ir.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Vwe(e,t,r);return zwe(e,t),e};Object.defineProperty(ir,"__esModule",{value:!0});ir.NOTANYCHAR=ir.WHITESPACE=ir.WORDS=ir.INTS=void 0;var Ng=Hwe(Cg()),kV=ri();function Ig(t){let e={},r=0;for(let n of t)n.type===kV.types.CHAR&&(e[n.value]=!0),n.type===kV.types.RANGE&&(e[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},e),len:r}}ir.INTS=Ig(Ng.ints().set);ir.WORDS=Ig(Ng.words().set);ir.WHITESPACE=Ig(Ng.whitespace().set);ir.NOTANYCHAR=Ig(Ng.anyChar().set)});var jV=E(gn=>{"use strict";var Gwe=gn&&gn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wwe=gn&&gn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Kwe=gn&&gn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gwe(e,t,r);return Wwe(e,t),e};Object.defineProperty(gn,"__esModule",{value:!0});gn.writeSetTokens=gn.setChar=void 0;var Mg=ri(),Ag=Kwe(DV());function Dg(t){return t===94?"\\^":t===92?"\\\\":t===93?"\\]":t===45?"\\-":String.fromCharCode(t)}gn.setChar=Dg;function kg(t,{lookup:e,len:r}){if(r!==t.length)return!1;let n=e();for(let s of t){if(s.type===Mg.types.SET)return!1;let i=s.type===Mg.types.CHAR?s.value:`${s.from}-${s.to}`;if(n[i])n[i]=!1;else return!1}return!0}function MV(t,e=!1){if(kg(t.set,Ag.INTS))return t.not?"\\D":"\\d";if(kg(t.set,Ag.WORDS))return t.not?"\\W":"\\w";if(t.not&&kg(t.set,Ag.NOTANYCHAR))return".";if(kg(t.set,Ag.WHITESPACE))return t.not?"\\S":"\\s";let r="";for(let s=0;s<t.set.length;s++){let i=t.set[s];r+=Jwe(i)}let n=`${t.not?"^":""}${r}`;return e?n:`[${n}]`}gn.writeSetTokens=MV;function Jwe(t){return t.type===Mg.types.CHAR?Dg(t.value):t.type===Mg.types.RANGE?`${Dg(t.from)}-${Dg(t.to)}`:MV(t,!0)}});var _$=E(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.reconstruct=void 0;var Gi=ri(),y$=jV(),qV=t=>t.map(il.reconstruct).join(""),LV=t=>{if("options"in t)return t.options.map(qV).join("|");if("stack"in t)return qV(t.stack);throw new Error("options or stack must be Root or Group token")};il.reconstruct=t=>{switch(t.type){case Gi.types.ROOT:return LV(t);case Gi.types.CHAR:{let e=String.fromCharCode(t.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case Gi.types.POSITION:return t.value==="^"||t.value==="$"?t.value:`\\${t.value}`;case Gi.types.REFERENCE:return`\\${t.value}`;case Gi.types.SET:return y$.writeSetTokens(t);case Gi.types.GROUP:return`(${t.name?`?<${t.name}>`:t.remember?"":t.followedBy?"?=":t.notFollowedBy?"?!":"?:"}${LV(t)})`;case Gi.types.REPETITION:{let{min:e,max:r}=t,n;return e===0&&r===1?n="?":e===1&&r===1/0?n="+":e===0&&r===1/0?n="*":r===1/0?n=`{${e},}`:e===r?n=`{${e}}`:n=`{${e},${r}}`,`${il.reconstruct(t.value)}${n}`}case Gi.types.RANGE:return`${y$.setChar(t.from)}-${y$.setChar(t.to)}`;default:throw new Error(`Invalid token type ${t}`)}}});var BV=E((yn,jg)=>{"use strict";var Ywe=yn&&yn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),v$=yn&&yn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ywe(e,t,r)};Object.defineProperty(yn,"__esModule",{value:!0});yn.types=void 0;var FV=ri();Object.defineProperty(yn,"types",{enumerable:!0,get:function(){return FV.types}});v$(g$(),yn);v$(_$(),yn);var UV=g$(),Xwe=_$();v$(ri(),yn);yn.default=UV.tokenizer;jg.exports=UV.tokenizer;jg.exports.types=FV.types;jg.exports.reconstruct=Xwe.reconstruct});var zV=E((VMe,qg)=>{"use strict";var VV=BV(),Qwe=VV.types;function w$(t,e){e||(e={});let r=e.limit===void 0?25:e.limit;Zwe(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=VV(t)}catch{return!1}let n=0;return function s(i,o){let a,c,l;if(i.type===Qwe.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,l=i.options.length;a<l;a++)if(c=s({stack:i.options[a]},o),!c)return!1}let u=i.stack||i.value?.stack;if(!u)return!0;for(a=0;a<u.length;a++)if(c=s(u[a],o),!c)return!1;return!0}(t,0)}function Zwe(t){return{}.toString.call(t)==="[object RegExp]"}qg.exports=w$;qg.exports.default=w$;qg.exports.safeRegex=w$});var Lg=E((zMe,HV)=>{"use strict";HV.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t=new Map;return{get:e=>t.get(e)||null,set:(e,r)=>{t.set(e,r)}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var QV=E((HMe,XV)=>{"use strict";var GV=qs(),WV=Lg(),KV=Symbol("treeData");function JV(t,e=""){let r="",n=Object.keys(t);for(let s=0;s<n.length;s++){let i=n[s],o=t[i],a=s===n.length-1,c=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",l=a?"    ":"\u2502   ",d=(o[KV]||"").replaceAll(`
`,`
`+e+l);r+=e+c+i+d+`
`,r+=JV(o,e+l)}return r}function ebe(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function YV(t){return Array.isArray(t)?t.map(e=>YV(e)):typeof t=="symbol"?t.toString():typeof t=="function"?ebe(t):t}function tbe(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let c=JSON.stringify(YV(a));n[o]=c}}return n}function rbe(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function nbe(t){let e={...t.opts.constraints},r=e[WV.name];return delete e[WV.name],{...t,method:r,opts:{constraints:e}}}function sbe(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=rbe(t.metaData),e}function ibe(t){return t.reduce((e,r)=>{for(let n of e)if(GV(r.opts.constraints,n.opts.constraints)&&GV(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function obe(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(nbe)),n=n.map(s=>(s.metaData=tbe(s,r),s)),r.method===void 0&&(n=ibe(n)),n.map(sbe).join(`
${e}`)}function Fg(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[KV]=obe(t,r,n)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))Fg(s,e,r+s.prefix,n);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let i=Array.from(s.nodePaths).join("|");Fg(s,e,r+i,n)}t.wildcardChild&&Fg(t.wildcardChild,e,"*",n)}function abe(t,e){let r={};return Fg(t,r,t.prefix,e),JV(r)}XV.exports={prettyPrintTree:abe}});var tz=E((GMe,ez)=>{"use strict";var ZV=function(){};ZV.prototype=Object.create(null);ez.exports={NullObject:ZV}});var nz=E((WMe,rz)=>{"use strict";var{NullObject:cbe}=tz(),lbe=Lg(),b$=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let c of o)this.constraints.includes(c)||(c==="version"?this.constraints.unshift(c):this.constraints.push(c));let a=o.includes(lbe.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((c,l)=>Object.keys(c.constraints).length-Object.keys(l.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let n=0;n<e.length;n++)r.push(`params['${e[n]}'] = paramsArray[${n}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(cbe)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=e.get(i)||0;o|=1<<n,e.set(i,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let s=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};rz.exports=b$});var iz=E((KMe,sz)=>{"use strict";var ube=nz(),Gg={STATIC:0,PARAMETRIC:1,WILDCARD:2},Ug=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new ube),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},Bg=class extends Ug{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}getStaticChild(e,r=0){if(e.length===r)return this;let n=this.findStaticMatchingChild(e,r);return n?n.getStaticChild(e,r+n.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let n=e.charAt(0);return this.staticChildren[n]=new Vg(e),this.staticChildren[n]}},Vg=class t extends Bg{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=Gg.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(e,r,n){let s=this.getParametricChild(e);return s?(s.nodePaths.add(n),s):(s=new zg(e,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new Hg,this.wildcardChild}split(e,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new t(n);return i.staticChildren[s.charAt(0)]=this,e.staticChildren[n.charAt(0)]=i,i}getNextNode(e,r,n,s){let i=this.findStaticMatchingChild(e,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},zg=class extends Bg{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=Gg.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},Hg=class extends Ug{constructor(){super(),this.kind=Gg.WILDCARD}getNextNode(){return null}};sz.exports={StaticNode:Vg,ParametricNode:zg,WildcardNode:Hg,NODE_TYPES:Gg}});var az=E((JMe,oz)=>{"use strict";var fbe=require("node:assert");function Xf(){if(!(this instanceof Xf))return new Xf;this.store=new Map,this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Xf.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,s]=t.split(".",3);if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.set("x",e),this.store.set("*",e),this.store.set("x.x",e),this.store.set("x.x.x",e)),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store.set(`${r}.x`,e),this.store.set(`${r}.x.x`,e)),s>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store.set(`${r}.${n}.x`,e)),this.store.set(`${r}.${n}.${s}`,e),this};Xf.prototype.get=function(t){return this.store.get(t)};oz.exports={name:"version",mustMatchWhenDerived:!0,storage:Xf,validate(t){fbe(typeof t=="string","Version should be a string")}}});var lz=E((YMe,cz)=>{"use strict";var dbe=require("node:assert");function hbe(){let t=new Map,e=[];return{get:r=>{let n=t.get(r);if(n)return n;for(let s of e)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t.set(r,n)}}}cz.exports={name:"host",mustMatchWhenDerived:!1,storage:hbe,validate(t){dbe(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var fz=E((XMe,uz)=>{"use strict";var pbe=az(),mbe=lz(),E$=require("node:assert"),S$=class{constructor(e){if(this.strategies={version:pbe,host:mbe},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(E$(typeof e.name=="string"&&e.name!=="","strategy.name is required."),E$(e.storage&&typeof e.storage=="function","strategy.storage function is required."),E$(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let s=this.deriveSyncConstraints(e,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(e,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(c,l)=>{if(c!==null){s(c);return}e[o]=l,--i===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];n.isCustom?e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};uz.exports=S$});var hz=E((QMe,dz)=>{"use strict";var gbe=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];dz.exports=gbe});var gz=E((ZMe,mz)=>{"use strict";function pz(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function ybe(t,e){let r=!1,n=!1,s="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let c=t.charCodeAt(o+1),l=t.charCodeAt(o+2);pz(c,l)===null?r=!0:(n=!0,c===50&&l===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){s=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:s,shouldDecodeParam:n}}function _be(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let i=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=pz(i,o);r+=t.slice(n,s)+a,n=s+3}return t.slice(0,e)+r+t.slice(n)}mz.exports={safeDecodeURI:ybe,safeDecodeURIComponent:_be}});var P$=E((eje,$z)=>{"use strict";var wt=require("node:assert"),vbe=wV(),al=zV(),T$=qs(),{prettyPrintTree:wbe}=QV(),{StaticNode:yz,NODE_TYPES:_z}=iz(),bbe=fz(),ol=hz(),R$=Lg(),{safeDecodeURI:Ebe,safeDecodeURIComponent:vz}=gz(),wz=/^https?:\/\/.*?\//,ca=/(\/:[^/()]*?)\?(\/?)/,bz=/[.*+?^${}()|[\]\\]/g,Ez=/\/\/+/g;if(!al(wz))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!al(ca))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");if(!al(bz))throw new Error("the ESCAPE_REGEXP is not safe, update this module");if(!al(Ez))throw new Error("the REMOVE_DUPLICATE_SLASHES_REGEXP is not safe, update this module");function ht(t){if(!(this instanceof ht))return new ht(t);t=t||{},this._opts=t,t.defaultRoute?(wt(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(wt(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(wt(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=Sbe,t.querystringParser?(wt(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e.length===0?{}:vbe.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new bbe(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}ht.prototype.on=function(e,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),wt(typeof r=="string","Path should be a string"),wt(r.length>0,"The path could not be empty"),wt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),wt(typeof s=="function","Handler should be a function");let o=r.match(ca);if(o){wt(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let l=r.replace(ca,"$1$2"),u=r.replace(ca,"$2")||"/";this.on(e,l,n,s,i),this.on(e,u,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=$$(r)),this.ignoreTrailingSlash&&(r=O$(r));let c=Array.isArray(e)?e:[e];for(let l of c)wt(typeof l=="string","Method should be a string"),wt(ol.includes(l),`Method '${l}' is not an http method.`),this._on(l,r,n,s,i,a)};ht.prototype._on=function(e,r,n,s,i){let o={};n.constraints!==void 0&&(wt(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new yz("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let p=this.trees[e];this.trees[e]=new yz(""),this.trees[e].staticChildren["/"]=p}let c=this.trees[e],l=c.prefix.length,u=[];for(let p=0;p<=a.length;p++){if(a.charCodeAt(p)===58&&a.charCodeAt(p+1)===58){p++;continue}let f=a.charCodeAt(p)===58&&a.charCodeAt(p+1)!==58,h=a.charCodeAt(p)===42;if(f||h||p===a.length&&p!==l){let m=a.slice(l,p);this.caseSensitive||(m=m.toLowerCase()),m=m.replaceAll("::",":"),m=m.replaceAll("%","%25"),c=c.createStaticChild(m)}if(f){let m=!1,y=!0,g="",w=[],_=p+1;for(let v=_;;v++){let S=a.charCodeAt(v),$=S===40,R=S===45||S===46,O=S===47||v===a.length;if($||R||O){let T=a.slice(_,v);if(u.push(T),m=m||$||R,$){let C=Tz(a,v),N=a.slice(v,C+1);this.allowUnsafeRegex||wt(al(new RegExp(N)),`The regex '${N}' is not safe!`),w.push(Rz(N)),v=C+1,y=!0}else w.push(y?"(.*?)":`(${g}|(?:(?!${g}).)*)`),y=!1;let P=v;for(;v<a.length;v++){let C=a.charCodeAt(v);if(C===47)break;if(C===58)if(a.charCodeAt(v+1)===58)v++;else break}let I=a.slice(P,v);if(I&&(I=I.replaceAll("::",":"),I=I.replaceAll("%","%25"),w.push(g=Sz(I))),_=v+1,O||a.charCodeAt(v)===47||v===a.length){let C=m?"()"+I:I,N=a.slice(p,v);a=a.slice(0,p+1)+C+a.slice(v),p+=C.length;let B=m?new RegExp("^"+w.join("")+"$"):null;c=c.createParametricChild(B,I||null,N),l=p+1;break}}}}else if(h&&(u.push("*"),c=c.createWildcardChild(),l=p+1,p!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let p of this.routes){let f=p.opts.constraints||{};if(p.method===e&&p.pattern===a&&T$(f,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let d={method:e,path:r,pattern:a,params:u,opts:n,handler:s,store:i};this.routes.push(d),c.addRoute(d,this.constrainer)};ht.prototype.hasRoute=function(e,r,n){return this.findRoute(e,r,n)!==null};ht.prototype.findRoute=function(e,r,n={}){if(this.trees[e]===void 0)return null;let s=r,i=this.trees[e],o=i.prefix.length,a=[];for(let c=0;c<=s.length;c++){if(s.charCodeAt(c)===58&&s.charCodeAt(c+1)===58){c++;continue}let l=s.charCodeAt(c)===58&&s.charCodeAt(c+1)!==58,u=s.charCodeAt(c)===42;if(l||u||c===s.length&&c!==o){let d=s.slice(o,c);if(this.caseSensitive||(d=d.toLowerCase()),d=d.replaceAll("::",":"),d=d.replaceAll("%","%25"),i=i.getStaticChild(d),i===null)return null}if(l){let d=!1,p=!0,f="",h=[],m=c+1;for(let y=m;;y++){let g=s.charCodeAt(y),w=g===40,_=g===45||g===46,v=g===47||y===s.length;if(w||_||v){let S=s.slice(m,y);if(a.push(S),d=d||w||_,w){let O=Tz(s,y),T=s.slice(y,O+1);this.allowUnsafeRegex||wt(al(new RegExp(T)),`The regex '${T}' is not safe!`),h.push(Rz(T)),y=O+1,p=!1}else h.push(p?"(.*?)":`(${f}|(?:(?!${f}).)*)`),p=!1;let $=y;for(;y<s.length;y++){let O=s.charCodeAt(y);if(O===47)break;if(O===58)if(s.charCodeAt(y+1)===58)y++;else break}let R=s.slice($,y);if(R&&(R=R.replaceAll("::",":"),R=R.replaceAll("%","%25"),h.push(f=Sz(R))),m=y+1,v||s.charCodeAt(y)===47||y===s.length){let O=d?"()"+R:R,T=s.slice(c,y);s=s.slice(0,c+1)+O+s.slice(y),c+=O.length;let P=d?new RegExp("^"+h.join("")+"$"):null;if(i=i.getParametricChild(P,R||null,T),i===null)return null;o=c+1;break}}}}else if(u&&(a.push("*"),i=i.getWildcardChild(),o=c+1,c!==s.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(s=s.toLowerCase());for(let c of this.routes){let l=c.opts.constraints||{};if(c.method===e&&c.pattern===s&&T$(l,n))return{handler:c.handler,store:c.store,params:c.params}}return null};ht.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};ht.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};ht.prototype.reset=function(){this.trees={},this.routes=[]};ht.prototype.off=function(e,r,n){wt(typeof r=="string","Path should be a string"),wt(r.length>0,"The path could not be empty"),wt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),wt(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(ca);if(s){wt(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(ca,"$1$2"),a=r.replace(ca,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=$$(r)),this.ignoreTrailingSlash&&(r=O$(r));let i=Array.isArray(e)?e:[e];for(let o of i)this._off(o,r,n)};ht.prototype._off=function(e,r,n){wt(typeof e=="string","Method should be a string"),wt(ol.includes(e),`Method '${e}' is not an http method.`);function s(c){return e!==c.method||r!==c.path}function i(c){return s(c)||!T$(n,c.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};ht.prototype.lookup=function(e,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,i);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(e.method,e.url,o),c=this.callHandler(a,e,r,n);s(null,c)}catch(a){s(a)}})};ht.prototype.callHandler=function(e,r,n,s){return e===null?this._defaultRoute(r,n,s):s===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(s,r,n,e.params,e.store,e.searchParams)};ht.prototype.find=function(e,r,n){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(wz,"/")),this.ignoreDuplicateSlashes&&(r=$$(r));let i,o,a;try{i=Ebe(r,this.useSemicolonDelimiter),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=O$(r));let c=r;this.caseSensitive===!1&&(r=r.toLowerCase());let l=this.maxParamLength,u=s.prefix.length,d=[],p=r.length,f=[];for(;;){if(u===p&&s.isLeafNode){let g=s.handlerStorage.getMatchingHandler(n);if(g!==null)return{handler:g.handler,store:g.store,params:g._createParamsObject(d),searchParams:this.querystringParser(o)}}let h=s.getNextNode(r,u,f,d.length);if(h===null){if(f.length===0)return null;let g=f.pop();u=g.brotherPathIndex,d.splice(g.paramsCount),h=g.brotherNode}if(s=h,s.kind===_z.STATIC){u+=s.prefix.length;continue}if(s.kind===_z.WILDCARD){let g=c.slice(u);a&&(g=vz(g)),d.push(g),u=p;continue}let m=c.indexOf("/",u);m===-1&&(m=p);let y=c.slice(u,m);if(a&&(y=vz(y)),s.isRegex){let g=s.regex.exec(y);if(g===null)continue;for(let w=1;w<g.length;w++){let _=g[w];if(_.length>l)return null;d.push(_)}}else{if(y.length>l)return null;d.push(y)}u=m}};ht.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:s,handler:i,store:o}=e;this._on(r,n,s,i,o)}};ht.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};ht.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}};ht.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[R$.name]=R$;let o=new ht({...this._opts,constraints:i}),a=this.routes.map(c=>{let l={...c.opts.constraints,[R$.name]:c.method};return{...c,method:"MERGED",opts:{constraints:l}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":wbe(r,t)};for(let t in ol){if(!ol.hasOwnProperty(t))continue;let e=ol[t],r=e.toLowerCase();ht.prototype[r]=function(n,s,i){return this.on(e,n,s,i)}}ht.prototype.all=function(t,e,r){this.on(ol,t,e,r)};$z.exports=ht;function Sz(t){return t.replace(bz,"\\$&")}function $$(t){return t.indexOf("//")!==-1?t.replace(Ez,"/"):t}function O$(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function Rz(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function Tz(t,e){let r=1;for(;e<t.length;){if(e++,t.charCodeAt(e)===92){e++;continue}if(t.charCodeAt(e)===41?r--:t.charCodeAt(e)===40&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function Sbe(t){return t?t.store?Object.assign({},t.store):{}:{}}});var Pz=E((tje,Oz)=>{"use strict";function x$(t,e,r,n){if(r===void 0){e.header("content-length","0"),n(null,null);return}if(typeof r.resume=="function"){r.on("error",i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);return}if(typeof r.getReader=="function"){r.cancel("Stream cancelled by HEAD route").catch(i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),n(null,null);return}let s=""+Buffer.byteLength(r);e.header("content-length",s),n(null,null)}function Rbe(t){return t==null?x$:Array.isArray(t)?[...t,x$]:[t,x$]}Oz.exports={parseHeadOnSendHandlers:Rbe}});var Hz=E((rje,zz)=>{"use strict";var Tbe=P$(),$be=lp(),xz=y_(),{onRequestAbortHookRunner:Obe,lifecycleHooks:Cz,preParsingHookRunner:Pbe,onTimeoutHookRunner:xbe,onRequestHookRunner:Cbe}=pi(),{normalizeSchema:Nbe}=zl(),{parseHeadOnSendHandlers:Ibe}=Pz(),{compileSchemasForValidation:Abe,compileSchemasForSerialization:kbe}=d_(),{FST_ERR_SCH_VALIDATION_BUILD:Dbe,FST_ERR_SCH_SERIALIZATION_BUILD:Mbe,FST_ERR_DUPLICATED_ROUTE:jbe,FST_ERR_INVALID_URL:qbe,FST_ERR_HOOK_INVALID_HANDLER:Nz,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:Lbe,FST_ERR_ROUTE_DUPLICATED_HANDLER:Fbe,FST_ERR_ROUTE_HANDLER_NOT_FN:Iz,FST_ERR_ROUTE_MISSING_HANDLER:Ube,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:Bbe,FST_ERR_ROUTE_METHOD_INVALID:Vbe,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:zbe,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:Hbe,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:C$}=Mt(),{FSTDEP022:Gbe}=Ua(),{kRoutePrefix:Wbe,kSupportedHTTPMethods:A$,kLogLevel:Kbe,kLogSerializers:Az,kHooks:kz,kSchemaController:Jbe,kOptions:Dz,kReplySerializerDefault:N$,kReplyIsError:Ybe,kRequestPayloadStream:Xbe,kDisableRequestLogging:Qbe,kSchemaErrorFormatter:Zbe,kErrorHandler:Mz,kHasBeenDecorated:jz,kRequestAcceptVersion:I$,kRouteByFastify:eEe,kRouteContext:qz}=Tt(),{buildErrorHandler:tEe}=Hl(),{createChildLogger:rEe}=Vl(),{getGenReqId:nEe}=xg(),Lz=["allowUnsafeRegex","buildPrettyMeta","caseSensitive","constraints","defaultRoute","ignoreDuplicateSlashes","ignoreTrailingSlash","maxParamLength","onBadUrl","querystringParser","useSemicolonDelimiter"];function sEe(t){let e=Tbe(t.config),r,n,s,i,o,a,c,l,u,d,p,f,h=!1;return{setup(R,O){r=O.avvio,n=O.fourOhFour,i=O.hasLogger,o=O.setupResponseListeners,a=O.throwIfAlreadyStarted,s=R.logger,p=R.exposeHeadRoutes,c=R.disableRequestLogging,l=R.routerOptions.ignoreTrailingSlash,u=R.routerOptions.ignoreDuplicateSlashes,d=Object.hasOwn(R,"return503OnClosing")?R.return503OnClosing:!0,f=O.keepAliveConnections},routing:e.lookup.bind(e),route:S,hasRoute:_,prepareRoute:w,routeHandler:$,closeRoutes:()=>{h=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:m,hasConstraintStrategy:y,isAsyncConstraint:g,findRoute:v};function m(R){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(R)}function y(R){return e.hasConstraintStrategy(R)}function g(){return e.constrainer.asyncStrategiesInUse.size>0}function w({method:R,url:O,options:T,handler:P,isFastify:I}){if(typeof O!="string")throw new qbe(typeof O);if(!P&&typeof T=="function")P=T,T={};else if(P&&typeof P=="function"){if(Object.prototype.toString.call(T)!=="[object Object]")throw new Lbe(R,O);if(T.handler)throw typeof T.handler=="function"?new Fbe(R,O):new Iz(R,O)}return T=Object.assign({},T,{method:R,url:O,path:O,handler:P||T&&T.handler}),S.call(this,{options:T,isFastify:I})}function _({options:R}){let O=R.method?.toUpperCase()??"";return e.hasRoute(O,R.url||"",R.constraints)}function v(R){let O=e.find(R.method,R.url||"",R.constraints);return O?{handler:O.handler,params:O.params,searchParams:O.searchParams}:null}function S({options:R,isFastify:O}){a("Cannot add route!");let T={...R},P=T.url||T.path||"";if(!T.handler)throw new Ube(T.method,P);if(T.errorHandler!==void 0&&typeof T.errorHandler!="function")throw new Iz(T.method,P);Vz(T.bodyLimit);let I=T.exposeHeadRoute??p,C=!1,N=!1;if(Array.isArray(T.method))for(let W=0;W<T.method.length;++W)T.method[W]=Fz.call(this,T.method[W]),Uz.call(this,T.method[W],P,T.schema),C=T.method.includes("GET"),N=T.method.includes("HEAD");else T.method=Fz.call(this,T.method),Uz.call(this,T.method,P,T.schema),C=T.method==="GET",N=T.method==="HEAD";let B=I&&C?{...R}:null,te=this[Wbe];if(P==="/"&&te.length>0&&T.method!=="HEAD")switch(T.prefixTrailingSlash){case"slash":z.call(this,{path:P,isFastify:O});break;case"no-slash":z.call(this,{path:"",isFastify:O});break;case"both":default:z.call(this,{path:"",isFastify:O}),l!==!0&&(u!==!0||!te.endsWith("/"))&&z.call(this,{path:P,prefixing:!0,isFastify:O})}else P[0]==="/"&&te.endsWith("/")?z.call(this,{path:P.slice(1),isFastify:O}):z.call(this,{path:P,isFastify:O});return this;function z({path:W,prefixing:Rt=!1,isFastify:Rr=!1}){let Y=te+W;if(T.url=Y,T.path=Y,T.routePath=W,T.prefix=te,T.logLevel=T.logLevel||this[Kbe],(this[Az]||T.logSerializers)&&(T.logSerializers=Object.assign(Object.create(this[Az]),T.logSerializers)),T.attachValidation==null&&(T.attachValidation=!1),Rt===!1)for(let x of this[kz].onRoute)x.call(this,T);for(let x of Cz)if(T&&x in T){if(Array.isArray(T[x]))for(let D of T[x]){if(typeof D!="function")throw new Nz(x,Object.prototype.toString.call(D));if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new C$}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new C$}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new C$}else if(T[x]!==void 0&&typeof T[x]!="function")throw new Nz(x,Object.prototype.toString.call(T[x]))}let Yn=T.constraints||{},uo={...T.config,url:Y,method:T.method},re=new $be({schema:T.schema,handler:T.handler.bind(this),config:uo,errorHandler:T.errorHandler,childLoggerFactory:T.childLoggerFactory,bodyLimit:T.bodyLimit,logLevel:T.logLevel,logSerializers:T.logSerializers,attachValidation:T.attachValidation,schemaErrorFormatter:T.schemaErrorFormatter,replySerializer:this[N$],validatorCompiler:T.validatorCompiler,serializerCompiler:T.serializerCompiler,exposeHeadRoute:I,prefixTrailingSlash:T.prefixTrailingSlash||"both",server:this,isFastify:Rr}),fo=e.findRoute("HEAD",T.url,Yn)!==null;try{e.on(T.method,T.url,{constraints:Yn},$,re)}catch(x){if(!re[eEe])throw x.message.includes(`Method '${T.method}' already declared for route`)?new jbe(T.method,T.url):x}if(this.after((x,D)=>{re.errorHandler=T.errorHandler?tEe(this[Mz],T.errorHandler):this[Mz],re._parserOptions.limit=T.bodyLimit||null,re.logLevel=T.logLevel,re.logSerializers=T.logSerializers,re.attachValidation=T.attachValidation,re[N$]=this[N$],re.schemaErrorFormatter=T.schemaErrorFormatter||this[Zbe]||re.schemaErrorFormatter,r.once("preReady",()=>{for(let V of Cz){let U=this[kz][V].concat(T[V]||[]).map(ot=>ot.bind(this));re[V]=U.length?U:null}for(;!re.Request[jz]&&re.Request.parent;)re.Request=re.Request.parent;for(;!re.Reply[jz]&&re.Reply.parent;)re.Reply=re.Reply.parent;if(n.setContext(this,re),T.schema){re.schema=Nbe(re.schema,this.initialConfig);let V=this[Jbe];!T.validatorCompiler&&(T.schema.body||T.schema.headers||T.schema.querystring||T.schema.params)&&V.setupValidator(this[Dz]);try{let U=typeof T?.validatorCompiler=="function"||V.isCustomValidatorCompiler;Abe(re,T.validatorCompiler||V.validatorCompiler,U)}catch(U){throw new Dbe(T.method,Y,U.message)}T.schema.response&&!T.serializerCompiler&&V.setupSerializer(this[Dz]);try{kbe(re,T.serializerCompiler||V.serializerCompiler)}catch(U){throw new Mbe(T.method,Y,U.message)}}}),D(x)}),I&&C&&!N&&!fo){let x=Ibe(B.onSend);w.call(this,{method:"HEAD",url:W,options:{...B,onSend:x},isFastify:!0})}}}function $(R,O,T,P,I){let C=nEe(P.server,R),N={level:P.logLevel};P.logSerializers&&(N.serializers=P.logSerializers);let B=rEe(P,s,R,C,N);if(B[Qbe]=c,h===!0&&(R.httpVersionMajor!==2&&O.setHeader("Connection","close"),d)){let Rt={"Content-Type":"application/json","Content-Length":"80"};O.writeHead(503,Rt),O.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),B.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(R.headers.connection||"")==="keep-alive"&&f.has(R.socket)===!1&&(f.add(R.socket),R.socket.on("close",cEe.bind({keepAliveConnections:f,socket:R.socket}))),R.headers[I$]!==void 0&&(R.headers["accept-version"]=R.headers[I$],R.headers[I$]=void 0);let z=new P.Request(C,T,R,I,B,P),W=new P.Reply(O,z,B);c===!1&&B.info({req:z},"incoming request"),(i===!0||P.onResponse!==null)&&o(W),P.onRequest!==null?Cbe(P.onRequest,z,W,Bz):Bz(null,z,W),P.onRequestAbort!==null&&R.on("close",()=>{R.aborted&&Obe(P.onRequestAbort,z,iEe.bind(null,W))}),P.onTimeout!==null&&(z.raw.socket._meta||z.raw.socket.on("timeout",oEe),z.raw.socket._meta={context:P,request:z,reply:W})}}function iEe(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function oEe(){let{context:t,request:e,reply:r}=this._meta;xbe(t.onTimeout,e,r,lEe)}function Fz(t){if(typeof t!="string")throw new Vbe;if(t=t.toUpperCase(),!this[A$].bodyless.has(t)&&!this[A$].bodywith.has(t))throw new Bbe(t);return t}function Uz(t,e,r){if(this[A$].bodyless.has(t)&&r?.body)throw new zbe(t,e)}function Vz(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new Hbe(t)}function Bz(t,e,r){if(r.sent!==!0){if(t!=null){r[Ybe]=!0,r.send(t);return}e[Xbe]=e.raw,e[qz].preParsing!==null?Pbe(e[qz].preParsing,e,r,xz.bind(e.server)):xz.call(e.server,null,e,r)}}function aEe(t,e){let r=t.routerOptions||Object.create(null),n=Lz.filter(s=>Object.hasOwn(t,s));n.length>0&&Gbe(n.join(", "));for(let s of Lz)Object.hasOwn(r,s)||(r[s]=t[s]??e[s]);return r}function cEe(){this.keepAliveConnections.delete(this.socket)}function lEe(){}zz.exports={buildRouting:sEe,validateBodyLimitOption:Vz,buildRouterOptions:aEe}});var Qz=E((nje,Xz)=>{"use strict";var uEe=P$(),Gz=rp(),Wz=cp(),fEe=lp(),{kRoutePrefix:dEe,kCanSetNotFoundHandler:Qf,kFourOhFourLevelInstance:Zf,kFourOhFourContext:bs,kHooks:hEe,kErrorHandler:Kz}=Tt(),{lifecycleHooks:pEe}=pi(),{buildErrorHandler:mEe}=Hl(),{FST_ERR_NOT_FOUND:gEe}=Mt(),{createChildLogger:Jz}=Vl(),{getGenReqId:Yz}=xg();function yEe(t){let{logger:e,disableRequestLogging:r}=t,n=uEe({onBadUrl:a(),defaultRoute:d}),s=null;return{router:n,setNotFoundHandler:l,setContext:c,arrange404:i};function i(p){p[Zf]=p,p[Qf]=!0,n.onBadUrl=n.onBadUrl.bind(p),n.defaultRoute=n.defaultRoute.bind(p)}function o(p,f){let{url:h,method:m}=p.raw,y=`Route ${m}:${h} not found`;r||p.log.info(y),f.code(404).send({message:y,error:"Not Found",statusCode:404})}function a(){return function(f,h,m){let y=this[Zf][bs],g=Yz(y.server,h),w=Jz(y,e,h,g),_=new Wz(g,null,h,null,w,y),v=new Gz(m,_,w);s(_,v)}}function c(p,f){let h=Object.assign({},p[bs]);h.onSend=f.onSend,f[bs]=h}function l(p,f,h,m){this[Qf]===void 0&&(this[Qf]=!0),this[bs]===void 0&&(this[bs]=null);let y=this,g=this[dEe]||"/";if(this[Qf]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof p=="object"&&(p.preHandler&&(Array.isArray(p.preHandler)?p.preHandler=p.preHandler.map(w=>w.bind(y)):p.preHandler=p.preHandler.bind(y)),p.preValidation&&(Array.isArray(p.preValidation)?p.preValidation=p.preValidation.map(w=>w.bind(y)):p.preValidation=p.preValidation.bind(y))),typeof p=="function"&&(f=p,p=void 0),p=p||{},f?(this[Zf][Qf]=!1,f=f.bind(this),s=f):(f=o,s=o),this.after((w,_)=>{u.call(this,g,p,f,h,m),_(w)})}function u(p,f,h,m,y){let g=new fEe({schema:f.schema,handler:h,config:f.config||{},server:this});if(m.once("preReady",()=>{let w=this[bs];for(let _ of pEe){let v=this[hEe][_].concat(f[_]||[]).map(S=>S.bind(this));w[_]=v.length?v:null}w.errorHandler=f.errorHandler?mEe(this[Kz],f.errorHandler):this[Kz]}),this[bs]!==null&&p==="/"){Object.assign(this[bs],g);return}this[Zf][bs]=g,n.all(p+(p.endsWith("/")?"*":"/*"),y,g),n.all(p,y,g)}function d(p,f){let h=this[Zf][bs],m=Yz(h.server,p),y=Jz(h,e,p,m);y.info({req:p},"incoming request");let g=new Wz(m,null,p,null,y,h),w=new Gz(f,g,y);g.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),g.log.warn(n.prettyPrint()),w.code(404).send(new gEe)}}Xz.exports=yEe});var Zz=E((sje,Wg)=>{"use strict";Wg.exports=$e;Wg.exports.default=$e;var _Ee={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},routerOptions:{type:"object",additionalProperties:!1,properties:{ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},allowUnsafeRegex:{type:"boolean",default:!1},useSemicolonDelimiter:{type:"boolean",default:!1}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},vEe=Object.prototype.hasOwnProperty,wEe=new RegExp("idle","u");function $e(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader=!1),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!1);let m=o;for(let y in t)vEe.call(_Ee.properties,y)||delete t[y];if(m===o){let y=t.connectionTimeout,g=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let w=typeof y,_;if(_===void 0)if(w==="boolean"||y===null||w==="string"&&y&&y==+y&&!(y%1))_=+y;else return $e.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;_!==void 0&&(y=_,t!==void 0&&(t.connectionTimeout=_))}var a=g===o;if(a){let w=t.keepAliveTimeout,_=o;if(!(typeof w=="number"&&!(w%1)&&!isNaN(w)&&isFinite(w))){let S=typeof w,$;if($===void 0)if(S==="boolean"||w===null||S==="string"&&w&&w==+w&&!(w%1))$=+w;else return $e.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(w=$,t!==void 0&&(t.keepAliveTimeout=$))}var a=_===o;if(a){if(t.forceCloseConnections!==void 0){let S=t.forceCloseConnections,$=o,R=o,O=!1,T=null,P=o;if(typeof S!="string"){let N=typeof S,B;if(B===void 0)if(N=="number"||N=="boolean")B=""+S;else if(S===null)B="";else{let te={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}B!==void 0&&(S=B,t!==void 0&&(t.forceCloseConnections=B))}if(o===P&&typeof S=="string"&&!wEe.test(S)){let N={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[N]:i.push(N),o++}var c=P===o;c&&(O=!0,T=0);let I=o;if(typeof S!="boolean"){let N;if(N===void 0)if(S==="false"||S===0||S===null)N=!1;else if(S==="true"||S===1)N=!0;else{let B={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[B]:i.push(B),o++}N!==void 0&&(S=N,t!==void 0&&(t.forceCloseConnections=N))}var c=I===o;if(c&&O?(O=!1,T=[T,1]):c&&(O=!0,T=1),O)o=R,i!==null&&(R?i.length=R:i=null);else{let N={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return i===null?i=[N]:i.push(N),o++,$e.errors=i,!1}var a=$===o}else var a=!0;if(a){let S=t.maxRequestsPerSocket,$=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))&&S!==null){let O=typeof S,T;if(T===void 0)if(O==="boolean"||S===null||O==="string"&&S&&S==+S&&!(S%1))T=+S;else if(S===""||S===0||S===!1)T=null;else return $e.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;T!==void 0&&(S=T,t!==void 0&&(t.maxRequestsPerSocket=T))}var a=$===o;if(a){let O=t.requestTimeout,T=o;if(!(typeof O=="number"&&!(O%1)&&!isNaN(O)&&isFinite(O))){let I=typeof O,C;if(C===void 0)if(I==="boolean"||O===null||I==="string"&&O&&O==+O&&!(O%1))C=+O;else return $e.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;C!==void 0&&(O=C,t!==void 0&&(t.requestTimeout=C))}var a=T===o;if(a){let I=t.bodyLimit,C=o;if(!(typeof I=="number"&&!(I%1)&&!isNaN(I)&&isFinite(I))){let B=typeof I,te;if(te===void 0)if(B==="boolean"||I===null||B==="string"&&I&&I==+I&&!(I%1))te=+I;else return $e.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;te!==void 0&&(I=te,t!==void 0&&(t.bodyLimit=te))}var a=C===o;if(a){let B=t.caseSensitive,te=o;if(typeof B!="boolean"){let W;if(W===void 0)if(B==="false"||B===0||B===null)W=!1;else if(B==="true"||B===1)W=!0;else return $e.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;W!==void 0&&(B=W,t!==void 0&&(t.caseSensitive=W))}var a=te===o;if(a){let W=t.allowUnsafeRegex,Rt=o;if(typeof W!="boolean"){let Y;if(Y===void 0)if(W==="false"||W===0||W===null)Y=!1;else if(W==="true"||W===1)Y=!0;else return $e.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Y!==void 0&&(W=Y,t!==void 0&&(t.allowUnsafeRegex=Y))}var a=Rt===o;if(a){if(t.http2!==void 0){let Y=t.http2,Yn=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return $e.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.http2=re))}var a=Yn===o}else var a=!0;if(a){if(t.https!==void 0){let Y=t.https,Yn=o,uo=o,re=!0,Ia=o,fo=o,x=o,D=o,V=!1,U=null,ot=o;if(typeof Y!="boolean"){let ae;if(ae===void 0)if(Y==="false"||Y===0||Y===null)ae=!1;else if(Y==="true"||Y===1)ae=!0;else{let Tn={};i===null?i=[Tn]:i.push(Tn),o++}ae!==void 0&&(Y=ae,t!==void 0&&(t.https=ae))}var l=ot===o;l&&(V=!0,U=0);let ct=o;if(Y!==null){let ae;if(ae===void 0)if(Y===""||Y===0||Y===!1)ae=null;else{let Tn={};i===null?i=[Tn]:i.push(Tn),o++}ae!==void 0&&(Y=ae,t!==void 0&&(t.https=ae))}var l=ct===o;if(l&&V)V=!1,U=[U,1];else{l&&(V=!0,U=1);let ae=o;if(o===ae)if(Y&&typeof Y=="object"&&!Array.isArray(Y)){let ur;if(Y.allowHTTP1===void 0&&(ur="allowHTTP1")){let Hr={};i===null?i=[Hr]:i.push(Hr),o++}else{let Hr=o;for(let Xn in Y)Xn!=="allowHTTP1"&&delete Y[Xn];if(Hr===o&&Y.allowHTTP1!==void 0){let Xn=Y.allowHTTP1;if(typeof Xn!="boolean"){let ft;if(ft===void 0)if(Xn==="false"||Xn===0||Xn===null)ft=!1;else if(Xn==="true"||Xn===1)ft=!0;else{let $n={};i===null?i=[$n]:i.push($n),o++}ft!==void 0&&(Xn=ft,Y!==void 0&&(Y.allowHTTP1=ft))}}}}else{let ur={};i===null?i=[ur]:i.push(ur),o++}var l=ae===o;l&&V?(V=!1,U=[U,2]):l&&(V=!0,U=2)}if(V)o=D,i!==null&&(D?i.length=D:i=null);else{let ae={};i===null?i=[ae]:i.push(ae),o++}var u=x===o;if(u){let ae={};i===null?i=[ae]:i.push(ae),o++}else o=fo,i!==null&&(fo?i.length=fo:i=null);var d=Ia===o;if(o=uo,i!==null&&(uo?i.length=uo:i=null),d){let ae=o;t.https=!0;var d=ae===o;re=d}if(!re){let ae={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[ae]:i.push(ae),o++,$e.errors=i,!1}var a=Yn===o}else var a=!0;if(a){let Y=t.ignoreTrailingSlash,Yn=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return $e.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.ignoreTrailingSlash=re))}var a=Yn===o;if(a){let re=t.ignoreDuplicateSlashes,Ia=o;if(typeof re!="boolean"){let x;if(x===void 0)if(re==="false"||re===0||re===null)x=!1;else if(re==="true"||re===1)x=!0;else return $e.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;x!==void 0&&(re=x,t!==void 0&&(t.ignoreDuplicateSlashes=x))}var a=Ia===o;if(a){let x=t.disableRequestLogging,D=o;if(typeof x!="boolean"){let U;if(U===void 0)if(x==="false"||x===0||x===null)U=!1;else if(x==="true"||x===1)U=!0;else return $e.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;U!==void 0&&(x=U,t!==void 0&&(t.disableRequestLogging=U))}var a=D===o;if(a){let U=t.maxParamLength,ot=o;if(!(typeof U=="number"&&!(U%1)&&!isNaN(U)&&isFinite(U))){let $t=typeof U,ae;if(ae===void 0)if($t==="boolean"||U===null||$t==="string"&&U&&U==+U&&!(U%1))ae=+U;else return $e.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ae!==void 0&&(U=ae,t!==void 0&&(t.maxParamLength=ae))}var a=ot===o;if(a){let $t=t.onProtoPoisoning,ae=o;if(typeof $t!="string"){let ur=typeof $t,Hr;if(Hr===void 0)if(ur=="number"||ur=="boolean")Hr=""+$t;else if($t===null)Hr="";else return $e.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Hr!==void 0&&($t=Hr,t!==void 0&&(t.onProtoPoisoning=Hr))}var a=ae===o;if(a){let ur=t.onConstructorPoisoning,Hr=o;if(typeof ur!="string"){let ft=typeof ur,$n;if($n===void 0)if(ft=="number"||ft=="boolean")$n=""+ur;else if(ur===null)$n="";else return $e.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;$n!==void 0&&(ur=$n,t!==void 0&&(t.onConstructorPoisoning=$n))}var a=Hr===o;if(a){let ft=t.pluginTimeout,$n=o;if(!(typeof ft=="number"&&!(ft%1)&&!isNaN(ft)&&isFinite(ft))){let fr=typeof ft,ho;if(ho===void 0)if(fr==="boolean"||ft===null||fr==="string"&&ft&&ft==+ft&&!(ft%1))ho=+ft;else return $e.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ho!==void 0&&(ft=ho,t!==void 0&&(t.pluginTimeout=ho))}var a=$n===o;if(a){let fr=t.requestIdHeader,ho=o,X0=o,Aa=!1,f8=o;if(typeof fr!="boolean"){let kt;if(kt===void 0)if(fr==="false"||fr===0||fr===null)kt=!1;else if(fr==="true"||fr===1)kt=!0;else{let ch={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[ch]:i.push(ch),o++}kt!==void 0&&(fr=kt,t!==void 0&&(t.requestIdHeader=kt))}var p=f8===o;if(Aa=Aa||p,!Aa){let kt=o;if(typeof fr!="string"){let bP=typeof fr,dt;if(dt===void 0)if(bP=="number"||bP=="boolean")dt=""+fr;else if(fr===null)dt="";else{let On={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[On]:i.push(On),o++}dt!==void 0&&(fr=dt,t!==void 0&&(t.requestIdHeader=dt))}var p=kt===o;Aa=Aa||p}if(Aa)o=X0,i!==null&&(X0?i.length=X0:i=null);else{let kt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[kt]:i.push(kt),o++,$e.errors=i,!1}var a=ho===o;if(a){let kt=t.requestIdLogLabel,ch=o;if(typeof kt!="string"){let dt=typeof kt,On;if(On===void 0)if(dt=="number"||dt=="boolean")On=""+kt;else if(kt===null)On="";else return $e.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;On!==void 0&&(kt=On,t!==void 0&&(t.requestIdLogLabel=On))}var a=ch===o;if(a){let dt=t.http2SessionTimeout,On=o;if(!(typeof dt=="number"&&!(dt%1)&&!isNaN(dt)&&isFinite(dt))){let Qn=typeof dt,po;if(po===void 0)if(Qn==="boolean"||dt===null||Qn==="string"&&dt&&dt==+dt&&!(dt%1))po=+dt;else return $e.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;po!==void 0&&(dt=po,t!==void 0&&(t.http2SessionTimeout=po))}var a=On===o;if(a){let Qn=t.exposeHeadRoutes,po=o;if(typeof Qn!="boolean"){let Tr;if(Tr===void 0)if(Qn==="false"||Qn===0||Qn===null)Tr=!1;else if(Qn==="true"||Qn===1)Tr=!0;else return $e.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Tr!==void 0&&(Qn=Tr,t!==void 0&&(t.exposeHeadRoutes=Tr))}var a=po===o;if(a){let Tr=t.useSemicolonDelimiter,d8=o;if(typeof Tr!="boolean"){let ce;if(ce===void 0)if(Tr==="false"||Tr===0||Tr===null)ce=!1;else if(Tr==="true"||Tr===1)ce=!0;else return $e.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ce!==void 0&&(Tr=ce,t!==void 0&&(t.useSemicolonDelimiter=ce))}var a=d8===o;if(a){if(t.routerOptions!==void 0){let ce=t.routerOptions,Cl=o;if(o===Cl)if(ce&&typeof ce=="object"&&!Array.isArray(ce)){ce.ignoreTrailingSlash===void 0&&(ce.ignoreTrailingSlash=!1),ce.ignoreDuplicateSlashes===void 0&&(ce.ignoreDuplicateSlashes=!1),ce.maxParamLength===void 0&&(ce.maxParamLength=100),ce.allowUnsafeRegex===void 0&&(ce.allowUnsafeRegex=!1),ce.useSemicolonDelimiter===void 0&&(ce.useSemicolonDelimiter=!1);let ka=o;for(let Ke in ce)Ke==="ignoreTrailingSlash"||Ke==="ignoreDuplicateSlashes"||Ke==="maxParamLength"||Ke==="allowUnsafeRegex"||Ke==="useSemicolonDelimiter"||delete ce[Ke];if(ka===o){let Ke=ce.ignoreTrailingSlash,lh=o;if(typeof Ke!="boolean"){let pt;if(pt===void 0)if(Ke==="false"||Ke===0||Ke===null)pt=!1;else if(Ke==="true"||Ke===1)pt=!0;else return $e.errors=[{instancePath:e+"/routerOptions/ignoreTrailingSlash",schemaPath:"#/properties/routerOptions/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;pt!==void 0&&(Ke=pt,ce!==void 0&&(ce.ignoreTrailingSlash=pt))}var f=lh===o;if(f){let pt=ce.ignoreDuplicateSlashes,mo=o;if(typeof pt!="boolean"){let Je;if(Je===void 0)if(pt==="false"||pt===0||pt===null)Je=!1;else if(pt==="true"||pt===1)Je=!0;else return $e.errors=[{instancePath:e+"/routerOptions/ignoreDuplicateSlashes",schemaPath:"#/properties/routerOptions/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Je!==void 0&&(pt=Je,ce!==void 0&&(ce.ignoreDuplicateSlashes=Je))}var f=mo===o;if(f){let Je=ce.maxParamLength,h8=o;if(!(typeof Je=="number"&&!(Je%1)&&!isNaN(Je)&&isFinite(Je))){let Zn=typeof Je,go;if(go===void 0)if(Zn==="boolean"||Je===null||Zn==="string"&&Je&&Je==+Je&&!(Je%1))go=+Je;else return $e.errors=[{instancePath:e+"/routerOptions/maxParamLength",schemaPath:"#/properties/routerOptions/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;go!==void 0&&(Je=go,ce!==void 0&&(ce.maxParamLength=go))}var f=h8===o;if(f){let Zn=ce.allowUnsafeRegex,go=o;if(typeof Zn!="boolean"){let $r;if($r===void 0)if(Zn==="false"||Zn===0||Zn===null)$r=!1;else if(Zn==="true"||Zn===1)$r=!0;else return $e.errors=[{instancePath:e+"/routerOptions/allowUnsafeRegex",schemaPath:"#/properties/routerOptions/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;$r!==void 0&&(Zn=$r,ce!==void 0&&(ce.allowUnsafeRegex=$r))}var f=go===o;if(f){let $r=ce.useSemicolonDelimiter,p8=o;if(typeof $r!="boolean"){let Da;if(Da===void 0)if($r==="false"||$r===0||$r===null)Da=!1;else if($r==="true"||$r===1)Da=!0;else return $e.errors=[{instancePath:e+"/routerOptions/useSemicolonDelimiter",schemaPath:"#/properties/routerOptions/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Da!==void 0&&($r=Da,ce!==void 0&&(ce.useSemicolonDelimiter=Da))}var f=p8===o}}}}}}else return $e.errors=[{instancePath:e+"/routerOptions",schemaPath:"#/properties/routerOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Cl===o}else var a=!0;if(a)if(t.constraints!==void 0){let ce=t.constraints,Cl=o;if(o===Cl)if(ce&&typeof ce=="object"&&!Array.isArray(ce))for(let ka in ce){let Ke=ce[ka],lh=o;if(o===lh)if(Ke&&typeof Ke=="object"&&!Array.isArray(Ke)){let pt;if(Ke.name===void 0&&(pt="name")||Ke.storage===void 0&&(pt="storage")||Ke.validate===void 0&&(pt="validate")||Ke.deriveConstraint===void 0&&(pt="deriveConstraint"))return $e.errors=[{instancePath:e+"/constraints/"+ka.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:pt},message:"must have required property '"+pt+"'"}],!1;if(Ke.name!==void 0){let mo=Ke.name;if(typeof mo!="string"){let EP=typeof mo,Je;if(Je===void 0)if(EP=="number"||EP=="boolean")Je=""+mo;else if(mo===null)Je="";else return $e.errors=[{instancePath:e+"/constraints/"+ka.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Je!==void 0&&(mo=Je,Ke!==void 0&&(Ke.name=Je))}}}else return $e.errors=[{instancePath:e+"/constraints/"+ka.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=lh===o;if(!h)break}else return $e.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Cl===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return $e.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $e.errors=i,o===0}Wg.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1,allowErrorHandlerOverride:!0,routerOptions:{ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,allowUnsafeRegex:!1,useSemicolonDelimiter:!1}}});var eH=E((ije,Jg)=>{"use strict";var Kg=Zz(),bEe=Gh()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:EEe}=Mt();function SEe(t){let e=bEe(t);if(!Kg(e)){let r=new EEe(JSON.stringify(Kg.errors.map(n=>n.message)));throw r.errors=Kg.errors,r}return k$(e)}function k$(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?k$(n):n)}return Object.freeze(t)}Jg.exports=SEe;Jg.exports.defaultInitOptions=Kg.defaultInitOptions;Jg.exports.utils={deepFreezeObject:k$}});var lH=E((oje,cH)=>{"use strict";var{kAvvioBoot:REe,kChildren:tH,kRoutePrefix:rH,kLogLevel:nH,kLogSerializers:D$,kHooks:M$,kSchemaController:cl,kContentTypeParser:sH,kReply:iH,kRequest:oH,kFourOhFour:TEe,kPluginNameChain:aH,kErrorHandlerAlreadySet:$Ee}=Tt(),OEe=rp(),PEe=cp(),xEe=UT(),CEe=Uv(),{buildHooks:NEe}=pi(),ed=f$();cH.exports=function(e,r,n){let s=ed.registerPlugin.call(e,r),i=ed.getPluginName(r)||ed.getFuncPreview(r);if(s)return e[aH].push(i),e;let o=Object.create(e);e[tH].push(o),o.ready=e[REe].bind(o),o[tH]=[],o[iH]=OEe.buildReply(o[iH]),o[oH]=PEe.buildRequest(o[oH]),o[sH]=CEe.helpers.buildContentTypeParser(o[sH]),o[M$]=NEe(o[M$]),o[rH]=IEe(o[rH],n.prefix),o[nH]=n.logLevel||o[nH],o[cl]=xEe.buildSchemaController(e[cl]),o.getSchema=o[cl].getSchema.bind(o[cl]),o.getSchemas=o[cl].getSchemas.bind(o[cl]),o[ed.kRegisteredPlugins]=Object.create(o[ed.kRegisteredPlugins]),o[aH]=[i],o[$Ee]=!1,(o[D$]||n.logSerializers)&&(o[D$]=Object.assign(Object.create(o[D$]),n.logSerializers)),n.prefix&&o[TEe].arrange404(o);for(let a of o[M$].onRegister)a.call(e,o,n);return o};function IEe(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var pH=E(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.parseCookie=dH;Es.parse=dH;Es.stringifyCookie=qEe;Es.stringifySetCookie=Yg;Es.serialize=Yg;Es.parseSetCookie=LEe;Es.stringifySetCookie=Yg;Es.serialize=Yg;var uH=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,fH=/^[\u0021-\u003A\u003C-\u007E]*$/,AEe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,kEe=/^[\u0020-\u003A\u003D-\u007E]*$/,DEe=/^-?\d+$/,MEe=Object.prototype.toString,jEe=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function dH(t,e){let r=new jEe,n=t.length;if(n<2)return r;let s=e?.decode||hH,i=0;do{let o=q$(t,i,n);if(o===-1)break;let a=j$(t,i,n);if(o>a){i=t.lastIndexOf(";",o-1)+1;continue}let c=Wi(t,i,o);r[c]===void 0&&(r[c]=s(Wi(t,o+1,a))),i=a+1}while(i<n);return r}function qEe(t,e){let r=e?.encode||encodeURIComponent,n=[];for(let s of Object.keys(t)){let i=t[s];if(i===void 0)continue;if(!uH.test(s))throw new TypeError(`cookie name is invalid: ${s}`);let o=r(i);if(!fH.test(o))throw new TypeError(`cookie val is invalid: ${i}`);n.push(`${s}=${o}`)}return n.join("; ")}function Yg(t,e,r){let n=typeof t=="object"?t:{...r,name:t,value:String(e)},i=(typeof e=="object"?e:r)?.encode||encodeURIComponent;if(!uH.test(n.name))throw new TypeError(`argument name is invalid: ${n.name}`);let o=n.value?i(n.value):"";if(!fH.test(o))throw new TypeError(`argument val is invalid: ${n.value}`);let a=n.name+"="+o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!AEe.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!kEe.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!FEe(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function LEe(t,e){let r=e?.decode||hH,n=t.length,s=j$(t,0,n),i=q$(t,0,s),o=i===-1?{name:"",value:r(Wi(t,0,s))}:{name:Wi(t,0,i),value:r(Wi(t,i+1,s))},a=s+1;for(;a<n;){let c=j$(t,a,n),l=q$(t,a,c),u=l===-1?Wi(t,a,c):Wi(t,a,l),d=l===-1?void 0:Wi(t,l+1,c);switch(u.toLowerCase()){case"httponly":o.httpOnly=!0;break;case"secure":o.secure=!0;break;case"partitioned":o.partitioned=!0;break;case"domain":o.domain=d;break;case"path":o.path=d;break;case"max-age":d&&DEe.test(d)&&(o.maxAge=Number(d));break;case"expires":if(!d)break;let p=new Date(d);Number.isFinite(p.valueOf())&&(o.expires=p);break;case"priority":if(!d)break;let f=d.toLowerCase();(f==="low"||f==="medium"||f==="high")&&(o.priority=f);break;case"samesite":if(!d)break;let h=d.toLowerCase();(h==="lax"||h==="strict"||h==="none")&&(o.sameSite=h);break}a=c+1}return o}function j$(t,e,r){let n=t.indexOf(";",e);return n===-1?r:n}function q$(t,e,r){let n=t.indexOf("=",e);return n<r?n:-1}function Wi(t,e,r){let n=e,s=r;do{let i=t.charCodeAt(n);if(i!==32&&i!==9)break}while(++n<s);for(;s>n;){let i=t.charCodeAt(s-1);if(i!==32&&i!==9)break;s--}return t.slice(n,s)}function hH(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function FEe(t){return MEe.call(t)==="[object Date]"}});var gH=E((cje,Xg)=>{"use strict";var{format:L$}=require("node:util");function UEe(t){return mH({...t,name:"DeprecationWarning"})}function mH({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,c){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code))}};n&&(s={[t]:function(o,a,c){i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,c){let l;return o&&a&&c?l=L$(r,o,a,c):o&&a?l=L$(r,o,a):o?l=L$(r,o):l=r,l},i}var F$={createWarning:mH,createDeprecation:UEe};Xg.exports=F$;Xg.exports.default=F$;Xg.exports.processWarning=F$});var vH=E((lje,_H)=>{"use strict";var{URL:yH}=require("node:url"),U$="http://localhost";_H.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=U$+e);let n=typeof e=="object"?Object.assign(new yH(U$),e):new yH(e,U$);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},e.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var wH=E((uje,B$)=>{"use strict";var{randomUUID:BEe}=require("node:crypto"),{Readable:VEe}=require("node:stream"),ll;function zEe(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function HEe(t){ll=ll??new TextEncoder;let e=`----formdata-${BEe()}`,r=`--${e}\r
Content-Disposition: form-data`;let n=c=>c.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),s=c=>c.replace(/\r?\n|\r/g,`\r
`),i=new Uint8Array([13,10]);async function*o(){for(let[c,l]of t)if(typeof l=="string")yield ll.encode(`${r}; name="${n(s(c))}"\r
\r
`),yield ll.encode(`${s(l)}\r
`);else{let u=`${r}; name="${n(s(c))}"`;l.name&&(u+=`; filename="${n(l.name)}"`),u+=`\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,yield ll.encode(u),l.stream?yield*l.stream():yield l,yield i}yield ll.encode(`--${e}--`)}return{stream:VEe.from(o()),contentType:`multipart/form-data; boundary=${e}`}}B$.exports.isFormDataLike=zEe;B$.exports.formDataToStream=HEe});var SH=E((fje,Qg)=>{"use strict";var{Readable:bH,addAbortSignal:GEe}=require("node:stream"),z$=require("node:util"),WEe=pH(),KEe=require("node:assert"),{createDeprecation:JEe}=gH(),YEe=vH(),{isFormDataLike:XEe,formDataToStream:QEe}=wH(),{EventEmitter:ZEe}=require("node:events"),eSe=JEe({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function tSe(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var V$=class extends ZEe{constructor(e){super(),this.remoteAddress=e}};function EH(t){return new e(this);function e(r){Ki.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(Ki.prototype))this.constructor.prototype[n]=Ki.prototype[n];return z$.inherits(this.constructor,t.Request),this}}function Ki(t){bH.call(this,{autoDestroy:!1});let e=YEe(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let c=r[o];KEe(c!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+c}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||tSe(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(c=>WEe.serialize(c,o[c]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new V$(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return eSe(),this.socket},configurable:!0});let n=t.payload||t.body||null,s=n&&typeof n.resume=="function";if(XEe(n)){let o=QEe(n);n=o.stream,s=!0,this.headers["content-type"]=o.contentType,this.headers["transfer-encoding"]="chunked"}n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:t.simulate||{},payloadAsStream:t.payloadAsStream,signal:t.signal};let i=t.signal;i&&GEe(i,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=rSe,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=nSe}return this}function rSe(){let t=this._lightMyRequest.payload,e=!0,r=!1,n;for(;e&&(n=t.read());)r=!0,e=this.push(n);e&&!r&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function nSe(){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}z$.inherits(Ki,bH);z$.inherits(EH,Ki);Ki.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};Qg.exports=Ki;Qg.exports.Request=Ki;Qg.exports.CustomRequest=EH});var TH=E((dje,td)=>{"use strict";var Zg={decodeValues:!0,map:!1,silent:!1};function H$(t){return typeof t!="string"||t in{}}function G$(){return Object.create(null)}function W$(t){return typeof t=="string"&&!!t.trim()}function K$(t,e){var r=t.split(";").filter(W$),n=r.shift(),s=sSe(n),i=s.name,o=s.value;if(e=e?Object.assign({},Zg,e):Zg,H$(i))return null;try{o=e.decodeValues?decodeURIComponent(o):o}catch(c){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",c)}var a=G$();return a.name=i,a.value=o,r.forEach(function(c){var l=c.split("="),u=l.shift().trimLeft().toLowerCase();if(!H$(u)){var d=l.join("=");if(u==="expires")a.expires=new Date(d);else if(u==="max-age"){var p=parseInt(d,10);Number.isNaN(p)||(a.maxAge=p)}else u==="secure"?a.secure=!0:u==="httponly"?a.httpOnly=!0:u==="samesite"?a.sameSite=d:u==="partitioned"?a.partitioned=!0:u&&(a[u]=d)}}),a}function sSe(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function RH(t,e){if(e=e?Object.assign({},Zg,e):Zg,!t)return e.map?G$():[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e.map){var n=G$();return t.filter(W$).reduce(function(s,i){var o=K$(i,e);return o&&!H$(o.name)&&(s[o.name]=o),s},n)}else return t.filter(W$).map(function(s){return K$(s,e)}).filter(Boolean)}function iSe(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,s,i,o,a;function c(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function l(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(n=r,a=!1;c();)if(s=t.charAt(r),s===","){for(i=r,r+=1,c(),o=r;r<t.length&&l();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}td.exports=RH;td.exports.parse=RH;td.exports.parseString=K$;td.exports.splitCookiesString=iSe});var CH=E((hje,xH)=>{"use strict";var rd=require("node:http"),{Writable:oSe,Readable:$H,addAbortSignal:aSe}=require("node:stream"),cSe=require("node:util"),lSe=TH();function Ji(t,e,r){if(rd.ServerResponse.call(this,t),t._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new $H({read:a})};let c=t._lightMyRequest.signal;c&&aSe(c,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(uSe()),this._promiseCallback=typeof r=="function";let n=!1,s=a=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>e(a));process.nextTick(()=>e(null,a))}};this._lightMyRequest.onEndSuccess=s;let i=!1,o=a=>{if(n){this._lightMyRequest.stream&&!i&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(n=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>e(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{i=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=OH(this);a.raw.req=t,s(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}cSe.inherits(Ji,rd.ServerResponse);Ji.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};Ji.prototype.writeHead=function(){let t=rd.ServerResponse.prototype.writeHead.apply(this,arguments);return PH(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(OH(this)),t};Ji.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),rd.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(t,e)):(this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0)};Ji.prototype.end=function(t,e,r){t&&this.write(t,e),rd.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Ji.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};Ji.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function OH(t){t._lightMyRequest.headers===null&&PH(t),fSe(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return lSe.parse(this)}};if(e.trailers=t._lightMyRequest.trailers,t._lightMyRequest.payloadChunks){let r=Buffer.concat(t._lightMyRequest.payloadChunks);e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.json=function(){return JSON.parse(e.payload)}}else e.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return e.stream=function(){return t._lightMyRequest.stream?t._lightMyRequest.stream:$H.from(t._lightMyRequest.payloadChunks)},e}function uSe(){return new oSe({write(t,e,r){setImmediate(r)}})}function fSe(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let n=e[r];Array.isArray(n)?e[r]=n.map(s=>""+s):e[r]=""+n}}function PH(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header?.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}xH.exports=Ji});var NH=E((pje,J$)=>{"use strict";J$.exports=St;J$.exports.default=St;var dSe={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function St(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o,c=!1,l=null,u=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.url===void 0&&(v="url")){let S={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=u===o;p&&(c=!0,l=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.path===void 0&&(v="path")){let S={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=d===o;if(p&&c?(c=!1,l=[l,1]):p&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let v={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return i===null?i=[v]:i.push(v),o++,St.errors=i,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let v=t.url,S=o,$=o,R=!1,O=null,T=o;if(typeof v!="string"){let I=typeof v,C;if(C===void 0)if(I=="number"||I=="boolean")C=""+v;else if(v===null)C="";else{let N={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[N]:i.push(N),o++}C!==void 0&&(v=C,t!==void 0&&(t.url=C))}var h=T===o;h&&(R=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let I;if(v.pathname===void 0&&(I="pathname")){let C={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:I},message:"must have required property '"+I+"'"};i===null?i=[C]:i.push(C),o++}else{if(v.protocol!==void 0){let C=v.protocol,N=o;if(typeof C!="string"){let B=typeof C,te;if(te===void 0)if(B=="number"||B=="boolean")te=""+C;else if(C===null)te="";else{let z={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}te!==void 0&&(C=te,v!==void 0&&(v.protocol=te))}var f=N===o}else var f=!0;if(f){if(v.hostname!==void 0){let C=v.hostname,N=o;if(typeof C!="string"){let te=typeof C,z;if(z===void 0)if(te=="number"||te=="boolean")z=""+C;else if(C===null)z="";else{let W={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}z!==void 0&&(C=z,v!==void 0&&(v.hostname=z))}var f=N===o}else var f=!0;if(f)if(v.pathname!==void 0){let C=v.pathname,N=o;if(typeof C!="string"){let te=typeof C,z;if(z===void 0)if(te=="number"||te=="boolean")z=""+C;else if(C===null)z="";else{let W={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}z!==void 0&&(C=z,v!==void 0&&(v.pathname=z))}var f=N===o}else var f=!0}}}else{let I={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[I]:i.push(I),o++}var h=P===o;if(h&&R?(R=!1,O=[O,1]):h&&(R=!0,O=1),R)o=$,i!==null&&($?i.length=$:i=null);else{let I={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[I]:i.push(I),o++,St.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.path!==void 0){let v=t.path,S=o,$=o,R=!1,O=null,T=o;if(typeof v!="string"){let C=typeof v,N;if(N===void 0)if(C=="number"||C=="boolean")N=""+v;else if(v===null)N="";else{let B={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),o++}N!==void 0&&(v=N,t!==void 0&&(t.path=N))}var g=T===o;g&&(R=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let C;if(v.pathname===void 0&&(C="pathname")){let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"};i===null?i=[N]:i.push(N),o++}else{if(v.protocol!==void 0){let N=v.protocol,B=o;if(typeof N!="string"){let te=typeof N,z;if(z===void 0)if(te=="number"||te=="boolean")z=""+N;else if(N===null)z="";else{let W={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}z!==void 0&&(N=z,v!==void 0&&(v.protocol=z))}var y=B===o}else var y=!0;if(y){if(v.hostname!==void 0){let N=v.hostname,B=o;if(typeof N!="string"){let z=typeof N,W;if(W===void 0)if(z=="number"||z=="boolean")W=""+N;else if(N===null)W="";else{let Rt={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Rt]:i.push(Rt),o++}W!==void 0&&(N=W,v!==void 0&&(v.hostname=W))}var y=B===o}else var y=!0;if(y)if(v.pathname!==void 0){let N=v.pathname,B=o;if(typeof N!="string"){let z=typeof N,W;if(W===void 0)if(z=="number"||z=="boolean")W=""+N;else if(N===null)W="";else{let Rt={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Rt]:i.push(Rt),o++}W!==void 0&&(N=W,v!==void 0&&(v.pathname=W))}var y=B===o}else var y=!0}}}else{let C={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[C]:i.push(C),o++}var g=P===o;if(g&&R?(R=!1,O=[O,1]):g&&(R=!0,O=1),R)o=$,i!==null&&($?i.length=$:i=null);else{let C={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[C]:i.push(C),o++,St.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.cookies!==void 0){let v=t.cookies,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return St.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.headers!==void 0){let v=t.headers,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return St.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.query!==void 0){let v=t.query,S=o,$=o,R=!1,O=o;if(o===O&&!(v&&typeof v=="object"&&!Array.isArray(v))){let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),o++}var w=O===o;if(R=R||w,!R){let P=o;if(typeof v!="string"){let C=typeof v,N;if(N===void 0)if(C=="number"||C=="boolean")N=""+v;else if(v===null)N="";else{let B={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),o++}N!==void 0&&(v=N,t!==void 0&&(t.query=N))}var w=P===o;R=R||w}if(R)o=$,i!==null&&($?i.length=$:i=null);else{let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[P]:i.push(P),o++,St.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.simulate!==void 0){let v=t.simulate,S=o;if(o===S)if(v&&typeof v=="object"&&!Array.isArray(v)){if(v.end!==void 0){let R=v.end,O=o;if(typeof R!="boolean"){let T;if(T===void 0)if(R==="false"||R===0||R===null)T=!1;else if(R==="true"||R===1)T=!0;else return St.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;T!==void 0&&(R=T,v!==void 0&&(v.end=T))}var _=O===o}else var _=!0;if(_){if(v.split!==void 0){let R=v.split,O=o;if(typeof R!="boolean"){let P;if(P===void 0)if(R==="false"||R===0||R===null)P=!1;else if(R==="true"||R===1)P=!0;else return St.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(R=P,v!==void 0&&(v.split=P))}var _=O===o}else var _=!0;if(_){if(v.error!==void 0){let R=v.error,O=o;if(typeof R!="boolean"){let P;if(P===void 0)if(R==="false"||R===0||R===null)P=!1;else if(R==="true"||R===1)P=!0;else return St.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(R=P,v!==void 0&&(v.error=P))}var _=O===o}else var _=!0;if(_)if(v.close!==void 0){let R=v.close,O=o;if(typeof R!="boolean"){let P;if(P===void 0)if(R==="false"||R===0||R===null)P=!1;else if(R==="true"||R===1)P=!0;else return St.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(R=P,v!==void 0&&(v.close=P))}var _=O===o}else var _=!0}}}else return St.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.authority!==void 0){let v=t.authority,S=o;if(typeof v!="string"){let R=typeof v,O;if(O===void 0)if(R=="number"||R=="boolean")O=""+v;else if(v===null)O="";else return St.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.authority=O))}var m=S===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let v=t.remoteAddress,S=o;if(typeof v!="string"){let R=typeof v,O;if(O===void 0)if(R=="number"||R=="boolean")O=""+v;else if(v===null)O="";else return St.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.remoteAddress=O))}var m=S===o}else var m=!0;if(m){if(t.method!==void 0){let v=t.method,S=o;if(typeof v!="string"){let R=typeof v,O;if(O===void 0)if(R=="number"||R=="boolean")O=""+v;else if(v===null)O="";else return St.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.method=O))}if(!(v==="ACL"||v==="BIND"||v==="CHECKOUT"||v==="CONNECT"||v==="COPY"||v==="DELETE"||v==="GET"||v==="HEAD"||v==="LINK"||v==="LOCK"||v==="M-SEARCH"||v==="MERGE"||v==="MKACTIVITY"||v==="MKCALENDAR"||v==="MKCOL"||v==="MOVE"||v==="NOTIFY"||v==="OPTIONS"||v==="PATCH"||v==="POST"||v==="PROPFIND"||v==="PROPPATCH"||v==="PURGE"||v==="PUT"||v==="QUERY"||v==="REBIND"||v==="REPORT"||v==="SEARCH"||v==="SOURCE"||v==="SUBSCRIBE"||v==="TRACE"||v==="UNBIND"||v==="UNLINK"||v==="UNLOCK"||v==="UNSUBSCRIBE"||v==="acl"||v==="bind"||v==="checkout"||v==="connect"||v==="copy"||v==="delete"||v==="get"||v==="head"||v==="link"||v==="lock"||v==="m-search"||v==="merge"||v==="mkactivity"||v==="mkcalendar"||v==="mkcol"||v==="move"||v==="notify"||v==="options"||v==="patch"||v==="post"||v==="propfind"||v==="proppatch"||v==="purge"||v==="put"||v==="query"||v==="rebind"||v==="report"||v==="search"||v==="source"||v==="subscribe"||v==="trace"||v==="unbind"||v==="unlink"||v==="unlock"||v==="unsubscribe"))return St.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:dSe.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=S===o}else var m=!0;if(m)if(t.validate!==void 0){let v=t.validate,S=o;if(typeof v!="boolean"){let R;if(R===void 0)if(v==="false"||v===0||v===null)R=!1;else if(v==="true"||v===1)R=!0;else return St.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(v=R,t!==void 0&&(t.validate=R))}var m=S===o}else var m=!0}}}}}}}}}else return St.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return St.errors=i,o===0}});var kH=E((mje,sd)=>{"use strict";var hSe=require("node:assert"),Y$=SH(),ey=CH(),ry="The dispatch function has already been invoked",IH=NH();function X$(t,e,r){return r===void 0?new nd(t,e):ty(t,e,r)}function pSe(t,e){let r=t._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return e();let n=[];r.on("data",s=>n.push(Buffer.from(s))),r.on("end",()=>{let s=Buffer.concat(n);return t.headers["content-length"]=t.headers["content-length"]||""+s.length,delete t.headers["transfer-encoding"],t._lightMyRequest.payload=s,e()}),r.resume()}function AH(t,e,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),pSe(r,()=>t.call(e,r,n))}function ty(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(hSe(typeof t=="function","dispatchFunc should be a function"),!IH(e)))throw new Error(IH.errors.map(o=>o.message));let n=e.server||{},s=e.Request?Y$.CustomRequest:Y$;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),ey.prototype)),typeof r=="function"){let i=new s(e),o=new ey(i,r);return AH(t,n,i,o)}else return new Promise((i,o)=>{let a=new s(e),c=new ey(a,i,o);AH(t,n,a,c)})}function nd(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var mSe=["delete","get","head","options","patch","post","put","trace"];mSe.forEach(t=>{nd.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(ry);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var gSe=["body","cookies","headers","payload","query"];gSe.forEach(t=>{nd.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(ry);return this.option[t]=e,this}});nd.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(ry);if(this._hasInvoked=!0,typeof t=="function")ty(this.dispatch,this.option,t);else return this._promise=ty(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(nd.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(ry);this._hasInvoked=!0,this._promise=ty(this.dispatch,this.option)}return this._promise[t](...e)})});function ySe(t){return t instanceof Y$||t instanceof ey||t?.constructor?.name==="_CustomLMRRequest"}sd.exports=X$;sd.exports.default=X$;sd.exports.inject=X$;sd.exports.isInjection=ySe});var YH=E((gje,ld)=>{"use strict";var _Se="5.6.2",vSe=ax(),oy=require("node:http"),wSe=require("node:diagnostics_channel"),id,{kAvvioBoot:od,kChildren:Q$,kServerBindings:DH,kBodyLimit:bSe,kSupportedHTTPMethods:la,kRoutePrefix:MH,kLogLevel:ESe,kLogSerializers:SSe,kHooks:Z$,kSchemaController:Yi,kRequestAcceptVersion:RSe,kReplySerializerDefault:jH,kContentTypeParser:TSe,kReply:$Se,kRequest:OSe,kFourOhFour:PSe,kState:ut,kOptions:e1,kPluginNameChain:ad,kSchemaErrorFormatter:t1,kErrorHandler:ny,kKeepAliveConnections:r1,kChildLoggerFactory:n1,kGenReqId:s1,kErrorHandlerAlreadySet:sy}=Tt(),{createServer:xSe}=Dx(),cd=rp(),iy=cp(),CSe=lp(),ua=Kl(),fa=Uv(),qH=UT(),{Hooks:NSe,hookRunnerApplication:LH,supportedHooks:i1}=pi(),{createChildLogger:FH,defaultChildLoggerFactory:ISe,createLogger:ASe}=Vl(),UH=f$(),{getGenReqId:BH,reqIdGenFactory:KH}=xg(),{buildRouting:kSe,validateBodyLimitOption:DSe,buildRouterOptions:MSe}=Hz(),jSe=Qz(),JH=eH(),qSe=lH(),{appendStackTrace:LSe,AVVIO_ERRORS_MAP:VH,...da}=Mt(),FSe=l_(),{defaultInitOptions:Br}=JH,{FST_ERR_ASYNC_CONSTRAINT:USe,FST_ERR_BAD_URL:BSe,FST_ERR_OPTIONS_NOT_OBJ:VSe,FST_ERR_QSP_NOT_FN:zSe,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:HSe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:GSe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:WSe,FST_ERR_INSTANCE_ALREADY_LISTENING:KSe,FST_ERR_REOPENED_CLOSE_SERVER:JSe,FST_ERR_ROUTE_REWRITE_NOT_STR:YSe,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:zH,FST_ERR_ERROR_HANDLER_NOT_FN:XSe,FST_ERR_ERROR_HANDLER_ALREADY_SET:QSe,FST_ERR_ROUTE_METHOD_INVALID:ZSe}=da,{buildErrorHandler:HH}=Hl(),{FSTWRN004:eRe}=Ua(),GH=wSe.channel("fastify.initialization");function o1(t){let{options:e,genReqId:r,disableRequestLogging:n,hasLogger:s,initialConfig:i}=tRe(t,I,C),o=kSe({config:e.routerOptions}),a=jSe(e),c=re(o,e),{server:l,listen:u,forceCloseConnections:d,serverHasCloseAllConnections:p,serverHasCloseHttp2Sessions:f,keepAliveConnections:h}=xSe(e,c),m=cd.setupResponseListeners,y=qH.buildSchemaController(null,e.schemaController),g={[ut]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,aborted:!1,readyResolver:null},[r1]:h,[la]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[e1]:e,[Q$]:[],[DH]:[],[bSe]:e.bodyLimit,[MH]:"",[ESe]:"",[SSe]:null,[Z$]:new NSe,[Yi]:y,[t1]:null,[ny]:HH(),[sy]:!1,[n1]:e.childLoggerFactory||ISe,[jH]:null,[TSe]:new fa(e.bodyLimit,e.onProtoPoisoning||Br.onProtoPoisoning,e.onConstructorPoisoning||Br.onConstructorPoisoning),[$Se]:cd.buildReply(cd),[OSe]:iy.buildRequest(iy,e.trustProxy),[PSe]:a,[UH.kRegisteredPlugins]:[],[ad]:["fastify"],[od]:null,[s1]:r,routing:c,delete:function(D,V,U){return o.prepareRoute.call(this,{method:"DELETE",url:D,options:V,handler:U})},get:function(D,V,U){return o.prepareRoute.call(this,{method:"GET",url:D,options:V,handler:U})},head:function(D,V,U){return o.prepareRoute.call(this,{method:"HEAD",url:D,options:V,handler:U})},trace:function(D,V,U){return o.prepareRoute.call(this,{method:"TRACE",url:D,options:V,handler:U})},patch:function(D,V,U){return o.prepareRoute.call(this,{method:"PATCH",url:D,options:V,handler:U})},post:function(D,V,U){return o.prepareRoute.call(this,{method:"POST",url:D,options:V,handler:U})},put:function(D,V,U){return o.prepareRoute.call(this,{method:"PUT",url:D,options:V,handler:U})},options:function(D,V,U){return o.prepareRoute.call(this,{method:"OPTIONS",url:D,options:V,handler:U})},all:function(D,V,U){return o.prepareRoute.call(this,{method:this.supportedMethods,url:D,options:V,handler:U})},route:function(D){return o.route.call(this,{options:D})},hasRoute:function(D){return o.hasRoute.call(this,{options:D})},findRoute:function(D){return o.findRoute(D)},log:e.logger,withTypeProvider:O,addHook:T,addSchema:P,getSchema:y.getSchema.bind(y),getSchemas:y.getSchemas.bind(y),setValidatorCompiler:te,setSerializerCompiler:W,setSchemaController:Rt,setReplySerializer:Rr,setSchemaErrorFormatter:z,setGenReqId:Ia,addContentTypeParser:fa.helpers.addContentTypeParser,hasContentTypeParser:fa.helpers.hasContentTypeParser,getDefaultJsonParser:fa.defaultParsers.getDefaultJsonParser,defaultTextParser:fa.defaultParsers.defaultTextParser,removeContentTypeParser:fa.helpers.removeContentTypeParser,removeAllContentTypeParsers:fa.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(x){return this[UH.kRegisteredPlugins].includes(x)||this[ad].includes(x)},listen:u,server:l,addresses:function(){let x=this[DH].map(D=>D.address());return x.push(this.server.address()),x.filter(D=>D)},decorate:ua.add,hasDecorator:ua.exist,decorateReply:ua.decorateReply,decorateRequest:ua.decorateRequest,hasRequestDecorator:ua.existRequest,hasReplyDecorator:ua.existReply,getDecorator:ua.getInstanceDecorator,addHttpMethod:fo,inject:$,printRoutes:uo,setNotFoundHandler:B,setErrorHandler:Y,setChildLoggerFactory:Yn,initialConfig:i,addConstraintStrategy:o.addConstraintStrategy.bind(o),hasConstraintStrategy:o.hasConstraintStrategy.bind(o)};Object.defineProperties(g,{listeningOrigin:{get(){let x=this.addresses().slice(-1).pop();if(typeof x=="string")return x;let D=x.family==="IPv6"?`[${x.address}]`:x.address;return`${this[e1].https?"https":"http"}://${D}:${x.port}`}},pluginName:{configurable:!0,get(){return this[ad].length>1?this[ad].join(" -> "):this[ad][0]}},prefix:{configurable:!0,get(){return this[MH]}},validatorCompiler:{configurable:!0,get(){return this[Yi].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Yi].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[n1]}},version:{configurable:!0,get(){return _Se}},errorHandler:{configurable:!0,get(){return this[ny].func}},genReqId:{configurable:!0,get(){return this[s1]}},supportedMethods:{configurable:!1,get(){return[...this[la].bodyless,...this[la].bodywith]}}}),e.schemaErrorFormatter&&(WH(e.schemaErrorFormatter),g[t1]=e.schemaErrorFormatter.bind(g));let w=Number(e.pluginTimeout),_=vSe(g,{autostart:!1,timeout:isNaN(w)===!1?w:Br.pluginTimeout,expose:{use:"register"}});_.override=qSe,_.on("start",()=>g[ut].started=!0),g[od]=g.ready,g.ready=R,g.printPlugins=_.prettyPrint.bind(_),_.once("preReady",()=>{g.onClose((x,D)=>{g[ut].closing=!0,o.closeRoutes(),LH("preClose",g[od],g,function(){if(g[ut].listening){if(d==="idle")x.server.closeIdleConnections();else if(p&&d)x.server.closeAllConnections();else if(d===!0)for(let V of g[r1])V.destroy(),g[r1].delete(V)}f&&x.server.closeHttp2Sessions(),!e.serverFactory||g[ut].listening?x.server.close(function(V){V&&V.code!=="ERR_SERVER_NOT_RUNNING"?D(null):D()}):process.nextTick(D,null)})})});let v=new CSe({server:g,config:{}});return g.setNotFoundHandler(),a.arrange404(g),o.setup(e,{avvio:_,fourOhFour:a,hasLogger:s,setupResponseListeners:m,throwIfAlreadyStarted:S,keepAliveConnections:h}),l.on("clientError",e.clientErrorHandler.bind(g)),GH.hasSubscribers&&GH.publish({fastify:g}),"asyncDispose"in Symbol&&(g[Symbol.asyncDispose]=function(){return g.close()}),g;function S(x){if(g[ut].started)throw new KSe(x)}function $(x,D){if(id===void 0&&(id=kH()),g[ut].started){if(g[ut].closing){let V=new JSe;if(D){D(V);return}else return Promise.reject(V)}return id(c,x,D)}if(D)this.ready(V=>{V?D(V,null):id(c,x,D)});else return id((V,U)=>{this.ready(function(ot){if(ot){U.emit("error",ot);return}c(V,U)})},x)}function R(x){if(this[ut].readyResolver!==null){if(x!=null){this[ut].readyResolver.promise.then(()=>x(null,g),x);return}return this[ut].readyResolver.promise}if(process.nextTick(D),this[ut].readyResolver=FSe.withResolvers(),x)this[ut].readyResolver.promise.then(()=>x(null,g),x);else return this[ut].readyResolver.promise;function D(){g[od]((U,ot)=>{U||g[ut].started||g[ut].ready||g[ut].booting?V(U):(g[ut].booting=!0,LH("onReady",g[od],g,V)),ot()})}function V(U){if(U=U!=null&&VH[U.code]!=null?LSe(U,new VH[U.code](U.message)):U,U)return g[ut].readyResolver.reject(U);g[ut].readyResolver.resolve(g),g[ut].booting=!1,g[ut].ready=!0,g[ut].readyResolver=null}}function O(){return this}function T(x,D){if(S('Cannot call "addHook"!'),D==null)throw new da.FST_ERR_HOOK_INVALID_HANDLER(x,D);if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new da.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onReady"||x==="onListen"){if(D.constructor.name==="AsyncFunction"&&D.length!==0)throw new da.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new da.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new da.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return x==="onClose"?this.onClose(D.bind(this)):x==="onReady"||x==="onListen"||x==="onRoute"?this[Z$].add(x,D):this.after((U,ot)=>{try{V.call(this,x,D),ot(U)}catch(ct){ot(ct)}}),this;function V(U,ot){this[Z$].add(U,ot),this[Q$].forEach(ct=>V.call(ct,U,ot))}}function P(x){return S('Cannot call "addSchema"!'),this[Yi].add(x),this[Q$].forEach(D=>D.addSchema(x)),this}function I(x,D){x.headers["accept-version"]!==void 0&&(x.headers[RSe]=x.headers["accept-version"],x.headers["accept-version"]=void 0),a.router.lookup(x,D)}function C(x,D,V){if(e.frameworkErrors){let ot=BH(v.server,D),ct=FH(v,e.logger,D,ot),$t=new iy(ot,null,D,null,ct,v),ae=new cd(V,$t,ct);return n===!1&&ct.info({req:$t},"incoming request"),e.frameworkErrors(new BSe(x),$t,ae)}let U=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${x}' is not a valid url component","statusCode":400}`;V.writeHead(400,{"Content-Type":"application/json","Content-Length":U.length}),V.end(U)}function N(x,D,V){if(x!==!1)return function(ot){if(ot){if(e.frameworkErrors){let $t=BH(v.server,D),ae=FH(v,e.logger,D,$t),Tn=new iy($t,null,D,null,ae,v),ur=new cd(V,Tn,ae);return n===!1&&ae.info({req:Tn},"incoming request"),e.frameworkErrors(new USe,Tn,ur)}let ct='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';V.writeHead(500,{"Content-Type":"application/json","Content-Length":ct.length}),V.end(ct)}}}function B(x,D){return S('Cannot call "setNotFoundHandler"!'),a.setNotFoundHandler.call(this,x,D,_,o.routeHandler),this}function te(x){return S('Cannot call "setValidatorCompiler"!'),this[Yi].setValidatorCompiler(x),this}function z(x){return S('Cannot call "setSchemaErrorFormatter"!'),WH(x),this[t1]=x.bind(this),this}function W(x){return S('Cannot call "setSerializerCompiler"!'),this[Yi].setSerializerCompiler(x),this}function Rt(x){S('Cannot call "setSchemaController"!');let D=this[Yi],V=qH.buildSchemaController(D,Object.assign({},D.opts,x));return this[Yi]=V,this.getSchema=V.getSchema.bind(V),this.getSchemas=V.getSchemas.bind(V),this}function Rr(x){return S('Cannot call "setReplySerializer"!'),this[jH]=x,this}function Y(x){if(S('Cannot call "setErrorHandler"!'),typeof x!="function")throw new XSe;if(!e.allowErrorHandlerOverride&&this[sy])throw new QSe;return this[sy]&&eRe("To disable this behavior, set 'allowErrorHandlerOverride' to false or ignore this message. For more information, visit: https://fastify.dev/docs/latest/Reference/Server/#allowerrorhandleroverride"),this[sy]=!0,this[ny]=HH(this[ny],x.bind(this)),this}function Yn(x){return S('Cannot call "setChildLoggerFactory"!'),this[n1]=x,this}function uo(x={}){return x.includeMeta=x.includeHooks?x.includeMeta?i1.concat(x.includeMeta):i1:x.includeMeta,o.printRoutes(x)}function re(x,{rewriteUrl:D,logger:V}){let U;return function(ct,$t){if(U===void 0&&(U=x.isAsyncConstraint()),D){ct.originalUrl=ct.url;let ae=D.call(g,ct);if(typeof ae=="string")ct.url=ae;else{let Tn=new YSe(ct.url,typeof ae);ct.destroy(Tn)}}x.routing(ct,$t,N(U,ct,$t))}}function Ia(x){return S('Cannot call "setGenReqId"!'),this[s1]=KH(this[e1].requestIdHeader,x),this}function fo(x,{hasBody:D=!1}={}){if(typeof x!="string"||oy.METHODS.indexOf(x)===-1)throw new ZSe;D===!0?(this[la].bodywith.add(x),this[la].bodyless.delete(x)):(this[la].bodywith.delete(x),this[la].bodyless.add(x));let V=x.toLowerCase();return this.hasDecorator(V)||this.decorate(V,function(U,ot,ct){return o.prepareRoute.call(this,{method:x,url:U,options:ot,handler:ct})}),this}}function tRe(t,e,r){if(t&&typeof t!="object")throw new VSe;if(t=Object.assign({},t),t.querystringParser&&typeof t.querystringParser!="function"||t.routerOptions?.querystringParser&&typeof t.routerOptions.querystringParser!="function")throw new zSe(typeof(t.querystringParser??t.routerOptions.querystringParser));if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new HSe(typeof t.schemaController.bucket);DSe(t.bodyLimit);let n=typeof t.requestIdHeader=="string"&&t.requestIdHeader.length!==0?t.requestIdHeader.toLowerCase():t.requestIdHeader===!0&&"request-id",s=KH(n,t.genReqId),i=t.requestIdLogLabel||"reqId";t.bodyLimit=t.bodyLimit||Br.bodyLimit;let o=t.disableRequestLogging||!1,a=Object.assign({customOptions:{},plugins:[]},t.ajv);if(!a.customOptions||Object.prototype.toString.call(a.customOptions)!=="[object Object]")throw new GSe(typeof a.customOptions);if(!a.plugins||!Array.isArray(a.plugins))throw new WSe(typeof a.plugins);let{logger:c,hasLogger:l}=ASe(t);t.connectionTimeout=t.connectionTimeout||Br.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||Br.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||Br.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||Br.requestTimeout,t.logger=c,t.requestIdHeader=n,t.requestIdLogLabel=i,t.disableRequestLogging=o,t.ajv=a,t.clientErrorHandler=t.clientErrorHandler||nRe,t.allowErrorHandlerOverride=t.allowErrorHandlerOverride??Br.allowErrorHandlerOverride;let u=JH(t);return t.exposeHeadRoutes=u.exposeHeadRoutes,t.http2SessionTimeout=u.http2SessionTimeout,t.routerOptions=MSe(t,{defaultRoute:e,onBadUrl:r,ignoreTrailingSlash:Br.ignoreTrailingSlash,ignoreDuplicateSlashes:Br.ignoreDuplicateSlashes,maxParamLength:Br.maxParamLength,allowUnsafeRegex:Br.allowUnsafeRegex,buildPrettyMeta:rRe,useSemicolonDelimiter:Br.useSemicolonDelimiter}),{options:t,genReqId:s,disableRequestLogging:o,hasLogger:l,initialConfig:u}}function rRe(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(i1).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function nRe(t,e){if(t.code==="ECONNRESET"||e.destroyed)return;let r,n,s,i;t.code==="ERR_HTTP_REQUEST_TIMEOUT"?(n="408",s=oy.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Timeout","statusCode":408}`,i="timeout"):t.code==="HPE_HEADER_OVERFLOW"?(n="431",s=oy.STATUS_CODES[n],r=`{"error":"${s}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,i="header_overflow"):(n="400",s=oy.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Error","statusCode":400}`,i="error"),this.log.trace({err:t},`client ${i}`),e.writable&&e.write(`HTTP/1.1 ${n} ${s}\r
Content-Length: ${r.length}\r
Content-Type: application/json\r
\r
${r}`),e.destroy(t)}function WH(t){if(typeof t!="function")throw new zH(typeof t);if(t.constructor.name==="AsyncFunction")throw new zH("AsyncFunction")}ld.exports=o1;ld.exports.errorCodes=da;ld.exports.fastify=o1;ld.exports.default=o1});var QH=E(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.range=ha.balanced=void 0;var sRe=(t,e,r)=>{let n=t instanceof RegExp?XH(t,r):t,s=e instanceof RegExp?XH(e,r):e,i=n!==null&&s!=null&&(0,ha.range)(n,s,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+n.length,i[1]),post:r.slice(i[1]+s.length)}};ha.balanced=sRe;var XH=(t,e)=>{let r=e.match(t);return r?r[0]:null},iRe=(t,e,r)=>{let n,s,i,o,a,c=r.indexOf(t),l=r.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(t===e)return[c,l];for(n=[],i=r.length;u>=0&&!a;){if(u===c)n.push(u),c=r.indexOf(t,u+1);else if(n.length===1){let d=n.pop();d!==void 0&&(a=[d,l])}else s=n.pop(),s!==void 0&&s<i&&(i=s,o=l),l=r.indexOf(e,u+1);u=c<l&&c>=0?c:l}n.length&&o!==void 0&&(a=[i,o])}return a};ha.range=iRe});var i4=E(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});l1.expand=_Re;var ZH=QH(),e4="\0SLASH"+Math.random()+"\0",t4="\0OPEN"+Math.random()+"\0",c1="\0CLOSE"+Math.random()+"\0",r4="\0COMMA"+Math.random()+"\0",n4="\0PERIOD"+Math.random()+"\0",oRe=new RegExp(e4,"g"),aRe=new RegExp(t4,"g"),cRe=new RegExp(c1,"g"),lRe=new RegExp(r4,"g"),uRe=new RegExp(n4,"g"),fRe=/\\\\/g,dRe=/\\{/g,hRe=/\\}/g,pRe=/\\,/g,mRe=/\\./g;function a1(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function gRe(t){return t.replace(fRe,e4).replace(dRe,t4).replace(hRe,c1).replace(pRe,r4).replace(mRe,n4)}function yRe(t){return t.replace(oRe,"\\").replace(aRe,"{").replace(cRe,"}").replace(lRe,",").replace(uRe,".")}function s4(t){if(!t)return[""];let e=[],r=(0,ZH.balanced)("{","}",t);if(!r)return t.split(",");let{pre:n,body:s,post:i}=r,o=n.split(",");o[o.length-1]+="{"+s+"}";let a=s4(i);return i.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function _Re(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),ud(gRe(t),!0).map(yRe)):[]}function vRe(t){return"{"+t+"}"}function wRe(t){return/^-?0\d/.test(t)}function bRe(t,e){return t<=e}function ERe(t,e){return t>=e}function ud(t,e){let r=[],n=(0,ZH.balanced)("{","}",t);if(!n)return[t];let s=n.pre,i=n.post.length?ud(n.post,!1):[""];if(/\$$/.test(n.pre))for(let o=0;o<i.length;o++){let a=s+"{"+n.body+"}"+i[o];r.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),c=o||a,l=n.body.indexOf(",")>=0;if(!c&&!l)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+c1+n.post,ud(t)):[t];let u;if(c)u=n.body.split(/\.\./);else if(u=s4(n.body),u.length===1&&u[0]!==void 0&&(u=ud(u[0],!1).map(vRe),u.length===1))return i.map(p=>n.pre+u[0]+p);let d;if(c&&u[0]!==void 0&&u[1]!==void 0){let p=a1(u[0]),f=a1(u[1]),h=Math.max(u[0].length,u[1].length),m=u.length===3&&u[2]!==void 0?Math.abs(a1(u[2])):1,y=bRe;f<p&&(m*=-1,y=ERe);let w=u.some(wRe);d=[];for(let _=p;y(_,f);_+=m){let v;if(a)v=String.fromCharCode(_),v==="\\"&&(v="");else if(v=String(_),w){let S=h-v.length;if(S>0){let $=new Array(S+1).join("0");_<0?v="-"+$+v.slice(1):v=$+v}}d.push(v)}}else{d=[];for(let p=0;p<u.length;p++)d.push.apply(d,ud(u[p],!1))}for(let p=0;p<d.length;p++)for(let f=0;f<i.length;f++){let h=s+d[p]+i[f];(!e||c||h)&&r.push(h)}}return r}});var o4=E(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.assertValidPattern=void 0;var SRe=1024*64,RRe=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>SRe)throw new TypeError("pattern is too long")};ay.assertValidPattern=RRe});var c4=E(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.parseClass=void 0;var TRe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},fd=t=>t.replace(/[[\]\\-]/g,"\\$&"),$Re=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a4=t=>t.join(""),ORe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],s=[],i=r+1,o=!1,a=!1,c=!1,l=!1,u=r,d="";e:for(;i<t.length;){let m=t.charAt(i);if((m==="!"||m==="^")&&i===r+1){l=!0,i++;continue}if(m==="]"&&o&&!c){u=i+1;break}if(o=!0,m==="\\"&&!c){c=!0,i++;continue}if(m==="["&&!c){for(let[y,[g,w,_]]of Object.entries(TRe))if(t.startsWith(y,i)){if(d)return["$.",!1,t.length-r,!0];i+=y.length,_?s.push(g):n.push(g),a=a||w;continue e}}if(c=!1,d){m>d?n.push(fd(d)+"-"+fd(m)):m===d&&n.push(fd(m)),d="",i++;continue}if(t.startsWith("-]",i+1)){n.push(fd(m+"-")),i+=2;continue}if(t.startsWith("-",i+1)){d=m,i+=2;continue}n.push(fd(m)),i++}if(u<i)return["",!1,0,!1];if(!n.length&&!s.length)return["$.",!1,t.length-r,!0];if(s.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!l){let m=n[0].length===2?n[0].slice(-1):n[0];return[$Re(m),!1,u-r,!1]}let p="["+(l?"^":"")+a4(n)+"]",f="["+(l?"":"^")+a4(s)+"]";return[n.length&&s.length?"("+p+"|"+f+")":n.length?p:f,a,u-r,!0]};cy.parseClass=ORe});var uy=E(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});ly.unescape=void 0;var PRe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!0}={})=>r?e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?t.replace(/\[([^\/\\{}])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");ly.unescape=PRe});var d1=E(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.AST=void 0;var xRe=c4(),fy=uy(),CRe=new Set(["!","?","+","*","@"]),l4=t=>CRe.has(t),NRe="(?!(?:^|/)\\.\\.?(?:$|/))",dy="(?!\\.)",IRe=new Set(["[","."]),ARe=new Set(["..","."]),kRe=new Set("().*{}+?[]^$\\!"),DRe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),f1="[^/]",u4=f1+"*?",f4=f1+"+?",u1=class t{type;#e;#t;#i=!1;#n=[];#o;#p;#h;#l=!1;#a;#d;#u=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#o=r,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#h=this.#e===this?[]:this.#e.#h,e==="!"&&!this.#e.#l&&this.#h.push(this),this.#p=this.#o?this.#o.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#d!==void 0?this.#d:this.type?this.#d=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#d=this.#n.map(e=>String(e)).join("")}#c(){if(this!==this.#e)throw new Error("should only call on root");if(this.#l)return this;this.toString(),this.#l=!0;let e;for(;e=this.#h.pop();){if(e.type!=="!")continue;let r=e,n=r.#o;for(;n;){for(let s=r.#p+1;!n.type&&s<n.#n.length;s++)for(let i of e.#n){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(n.#n[s])}r=n,n=r.#o}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#o===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#l&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#p===0)return!0;let e=this.#o;for(let r=0;r<this.#p;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#n.length:0;return this.#p===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#s(e,r,n,s){let i=!1,o=!1,a=-1,c=!1;if(r.type===null){let f=n,h="";for(;f<e.length;){let m=e.charAt(f++);if(i||m==="\\"){i=!i,h+=m;continue}if(o){f===a+1?(m==="^"||m==="!")&&(c=!0):m==="]"&&!(f===a+2&&c)&&(o=!1),h+=m;continue}else if(m==="["){o=!0,a=f,c=!1,h+=m;continue}if(!s.noext&&l4(m)&&e.charAt(f)==="("){r.push(h),h="";let y=new t(m,r);f=t.#s(e,y,f,s),r.push(y);continue}h+=m}return r.push(h),f}let l=n+1,u=new t(null,r),d=[],p="";for(;l<e.length;){let f=e.charAt(l++);if(i||f==="\\"){i=!i,p+=f;continue}if(o){l===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(l===a+2&&c)&&(o=!1),p+=f;continue}else if(f==="["){o=!0,a=l,c=!1,p+=f;continue}if(l4(f)&&e.charAt(l)==="("){u.push(p),p="";let h=new t(f,u);u.push(h),l=t.#s(e,h,l,s);continue}if(f==="|"){u.push(p),p="",d.push(u),u=new t(null,r);continue}if(f===")")return p===""&&r.#n.length===0&&(r.#u=!0),u.push(p),p="",r.push(...d,u),l;p+=f}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],l}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#s(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,s,i]=this.toRegExpSource();if(!(s||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#a.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#c(),!this.type){let c=this.isStart()&&this.isEnd()&&!this.#n.some(f=>typeof f!="string"),l=this.#n.map(f=>{let[h,m,y,g]=typeof f=="string"?t.#b(f,this.#t,c):f.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||g,h}).join(""),u="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&ARe.has(this.#n[0]))){let h=IRe,m=r&&h.has(l.charAt(0))||l.startsWith("\\.")&&h.has(l.charAt(2))||l.startsWith("\\.\\.")&&h.has(l.charAt(4)),y=!r&&!e&&h.has(l.charAt(0));u=m?NRe:y?dy:""}let d="";return this.isEnd()&&this.#e.#l&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+l+d,(0,fy.unescape)(l),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",s=this.type==="!"?"(?:(?!(?:":"(?:",i=this.#m(r);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){let c=this.toString();return this.#n=[c],this.type=null,this.#t=void 0,[c,(0,fy.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!dy?"":this.#m(!0);o===i&&(o=""),o&&(i=`(?:${i})(?:${o})*?`);let a="";if(this.type==="!"&&this.#u)a=(this.isStart()&&!r?dy:"")+f4;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?dy:"")+u4+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=s+i+c}return[a,(0,fy.unescape)(i),this.#t=!!this.#t,this.#i]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,s,i,o]=r.toRegExpSource(e);return this.#i=this.#i||o,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#b(e,r,n=!1){let s=!1,i="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(s){s=!1,i+=(kRe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?i+="\\\\":s=!0;continue}if(c==="["){let[l,u,d,p]=(0,xRe.parseClass)(e,a);if(d){i+=l,o=o||u,a+=d-1,r=r||p;continue}}if(c==="*"){i+=n&&e==="*"?f4:u4,r=!0;continue}if(c==="?"){i+=f1,r=!0;continue}i+=DRe(c)}return[i,(0,fy.unescape)(e),!!r,o]}};hy.AST=u1});var h1=E(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.escape=void 0;var MRe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!1}={})=>r?e?t.replace(/[?*()[\]{}]/g,"[$&]"):t.replace(/[?*()[\]\\{}]/g,"\\$&"):e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");py.escape=MRe});var Xi=E(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.unescape=J.escape=J.AST=J.Minimatch=J.match=J.makeRe=J.braceExpand=J.defaults=J.filter=J.GLOBSTAR=J.sep=J.minimatch=void 0;var jRe=i4(),my=o4(),p4=d1(),qRe=h1(),LRe=uy(),FRe=(t,e,r={})=>((0,my.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new pa(e,r).match(t));J.minimatch=FRe;var URe=/^\*+([^+@!?\*\[\(]*)$/,BRe=t=>e=>!e.startsWith(".")&&e.endsWith(t),VRe=t=>e=>e.endsWith(t),zRe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),HRe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),GRe=/^\*+\.\*+$/,WRe=t=>!t.startsWith(".")&&t.includes("."),KRe=t=>t!=="."&&t!==".."&&t.includes("."),JRe=/^\.\*+$/,YRe=t=>t!=="."&&t!==".."&&t.startsWith("."),XRe=/^\*+$/,QRe=t=>t.length!==0&&!t.startsWith("."),ZRe=t=>t.length!==0&&t!=="."&&t!=="..",eTe=/^\?+([^+@!?\*\[\(]*)?$/,tTe=([t,e=""])=>{let r=m4([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},rTe=([t,e=""])=>{let r=g4([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},nTe=([t,e=""])=>{let r=g4([t]);return e?n=>r(n)&&n.endsWith(e):r},sTe=([t,e=""])=>{let r=m4([t]);return e?n=>r(n)&&n.endsWith(e):r},m4=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},g4=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},y4=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",d4={win32:{sep:"\\"},posix:{sep:"/"}};J.sep=y4==="win32"?d4.win32.sep:d4.posix.sep;J.minimatch.sep=J.sep;J.GLOBSTAR=Symbol("globstar **");J.minimatch.GLOBSTAR=J.GLOBSTAR;var iTe="[^/]",oTe=iTe+"*?",aTe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",cTe="(?:(?!(?:\\/|^)\\.).)*?",lTe=(t,e={})=>r=>(0,J.minimatch)(r,t,e);J.filter=lTe;J.minimatch.filter=J.filter;var _n=(t,e={})=>Object.assign({},t,e),uTe=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return J.minimatch;let e=J.minimatch;return Object.assign((n,s,i={})=>e(n,s,_n(t,i)),{Minimatch:class extends e.Minimatch{constructor(s,i={}){super(s,_n(t,i))}static defaults(s){return e.defaults(_n(t,s)).Minimatch}},AST:class extends e.AST{constructor(s,i,o={}){super(s,i,_n(t,o))}static fromGlob(s,i={}){return e.AST.fromGlob(s,_n(t,i))}},unescape:(n,s={})=>e.unescape(n,_n(t,s)),escape:(n,s={})=>e.escape(n,_n(t,s)),filter:(n,s={})=>e.filter(n,_n(t,s)),defaults:n=>e.defaults(_n(t,n)),makeRe:(n,s={})=>e.makeRe(n,_n(t,s)),braceExpand:(n,s={})=>e.braceExpand(n,_n(t,s)),match:(n,s,i={})=>e.match(n,s,_n(t,i)),sep:e.sep,GLOBSTAR:J.GLOBSTAR})};J.defaults=uTe;J.minimatch.defaults=J.defaults;var fTe=(t,e={})=>((0,my.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,jRe.expand)(t));J.braceExpand=fTe;J.minimatch.braceExpand=J.braceExpand;var dTe=(t,e={})=>new pa(t,e).makeRe();J.makeRe=dTe;J.minimatch.makeRe=J.makeRe;var hTe=(t,e,r={})=>{let n=new pa(e,r);return t=t.filter(s=>n.match(s)),n.options.nonull&&!t.length&&t.push(e),t};J.match=hTe;J.minimatch.match=J.match;var h4=/[?*]|[+@!]\(.*?\)|\[|\]/,pTe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),pa=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,my.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||y4,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let s=this.globParts.map((i,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=i[0]===""&&i[1]===""&&(i[2]==="?"||!h4.test(i[2]))&&!h4.test(i[3]),l=/^[a-z]:/i.test(i[0]);if(c)return[...i.slice(0,4),...i.slice(4).map(u=>this.parse(u))];if(l)return[i[0],...i.slice(1).map(u=>this.parse(u))]}return i.map(c=>this.parse(c))});if(this.debug(this.pattern,s),this.set=s.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){let o=this.set[i];o[0]===""&&o[1]===""&&this.globParts[i][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)e[n][s]==="**"&&(e[n][s]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let s=n;for(;r[s+1]==="**";)s++;s!==n&&r.splice(n,s-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,s)=>{let i=n[n.length-1];return s==="**"&&i==="**"?n:s===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(n.pop(),n):(n.push(s),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let s=1;s<e.length-1;s++){let i=e[s];s===1&&i===""&&e[0]===""||(i==="."||i==="")&&(r=!0,e.splice(s,1),s--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let s=e[n-1];s&&s!=="."&&s!==".."&&s!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let s=-1;for(;(s=n.indexOf("**",s+1))!==-1;){let o=s;for(;n[o+1]==="**";)o++;o>s&&n.splice(s+1,o-s);let a=n[s+1],c=n[s+2],l=n[s+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;r=!0,n.splice(s,1);let u=n.slice(0);u[s]="**",e.push(u),s--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let i=0;for(;(i=n.indexOf("..",i+1))!==-1;){let o=n[i-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let c=i===1&&n[i+1]==="**"?["."]:[];n.splice(i-1,2,...c),n.length===0&&n.push(""),i-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let s=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(s){e[r]=[],e[n]=s;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let s=0,i=0,o=[],a="";for(;s<e.length&&i<r.length;)if(e[s]===r[i])o.push(a==="b"?r[i]:e[s]),s++,i++;else if(n&&e[s]==="**"&&r[i]===e[s+1])o.push(e[s]),s++;else if(n&&r[i]==="**"&&e[s]===r[i+1])o.push(r[i]),i++;else if(e[s]==="*"&&r[i]&&(this.options.dot||!r[i].startsWith("."))&&r[i]!=="**"){if(a==="b")return!1;a="a",o.push(e[s]),s++,i++}else if(r[i]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(a==="a")return!1;a="b",o.push(r[i]),s++,i++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let s=this.options;if(this.isWindows){let m=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!m&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),g=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),w=!g&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=y?3:m?0:void 0,v=w?3:g?0:void 0;if(typeof _=="number"&&typeof v=="number"){let[S,$]=[e[_],r[v]];S.toLowerCase()===$.toLowerCase()&&(r[v]=S,v>_?r=r.slice(v):_>v&&(e=e.slice(_)))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,c=e.length,l=r.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===J.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var p=o,f=a+1;if(f===l){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!s.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<c;){var h=e[p];if(this.debug(`
globstar while`,e,p,r,f,h),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,c,h),!0;if(h==="."||h===".."||!s.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===c))}let m;if(typeof u=="string"?(m=d===u,this.debug("string match",u,d,m)):(m=u.test(d),this.debug("pattern match",u,d,m)),!m)return!1}if(o===c&&a===l)return!0;if(o===c)return n;if(a===l)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,J.braceExpand)(this.pattern,this.options)}parse(e){(0,my.assertValidPattern)(e);let r=this.options;if(e==="**")return J.GLOBSTAR;if(e==="")return"";let n,s=null;(n=e.match(XRe))?s=r.dot?ZRe:QRe:(n=e.match(URe))?s=(r.nocase?r.dot?HRe:zRe:r.dot?VRe:BRe)(n[1]):(n=e.match(eTe))?s=(r.nocase?r.dot?rTe:tTe:r.dot?nTe:sTe)(n):(n=e.match(GRe))?s=r.dot?KRe:WRe:(n=e.match(JRe))&&(s=YRe);let i=p4.AST.fromGlob(e,this.options).toMMPattern();return s&&typeof i=="object"&&Reflect.defineProperty(i,"test",{value:s}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?oTe:r.dot?aTe:cTe,s=new Set(r.nocase?["i"]:[]),i=e.map(c=>{let l=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))s.add(p);return typeof d=="string"?pTe(d):d===J.GLOBSTAR?J.GLOBSTAR:d._src});l.forEach((d,p)=>{let f=l[p+1],h=l[p-1];d!==J.GLOBSTAR||h===J.GLOBSTAR||(h===void 0?f!==void 0&&f!==J.GLOBSTAR?l[p+1]="(?:\\/|"+n+"\\/)?"+f:l[p]=n:f===void 0?l[p-1]=h+"(?:\\/|\\/"+n+")?":f!==J.GLOBSTAR&&(l[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+f,l[p+1]=J.GLOBSTAR))});let u=l.filter(d=>d!==J.GLOBSTAR);if(this.partial&&u.length>=1){let d=[];for(let p=1;p<=u.length;p++)d.push(u.slice(0,p).join("/"));return"(?:"+d.join("|")+")"}return u.join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];i="^"+o+i+a+"$",this.partial&&(i="^(?:\\/|"+o+i.slice(1,-1)+a+")$"),this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let s=this.slashSplit(e);this.debug(this.pattern,"split",s);let i=this.set;this.debug(this.pattern,"set",i);let o=s[s.length-1];if(!o)for(let a=s.length-2;!o&&a>=0;a--)o=s[a];for(let a=0;a<i.length;a++){let c=i[a],l=s;if(n.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return J.minimatch.defaults(e).Minimatch}};J.Minimatch=pa;var mTe=d1();Object.defineProperty(J,"AST",{enumerable:!0,get:function(){return mTe.AST}});var gTe=h1();Object.defineProperty(J,"escape",{enumerable:!0,get:function(){return gTe.escape}});var yTe=uy();Object.defineProperty(J,"unescape",{enumerable:!0,get:function(){return yTe.unescape}});J.minimatch.AST=p4.AST;J.minimatch.Minimatch=pa;J.minimatch.escape=qRe.escape;J.minimatch.unescape=LRe.unescape});var E4=E(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});yy.LRUCache=void 0;var _Te=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,v4=new Set,p1=typeof process=="object"&&process?process:{},w4=(t,e,r,n)=>{typeof p1.emitWarning=="function"?p1.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},gy=globalThis.AbortController,_4=globalThis.AbortSignal;if(typeof gy>"u"){_4=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},gy=class{constructor(){e()}signal=new _4;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let t=p1.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,w4("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var vTe=t=>!v4.has(t),xje=Symbol("type"),Qi=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),b4=t=>Qi(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ul:null:null,ul=class extends Array{constructor(e){super(e),this.fill(0)}},m1=class t{heap;length;static#e=!1;static create(e){let r=b4(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},g1=class t{#e;#t;#i;#n;#o;#p;#h;#l;get perf(){return this.#l}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#d;#u;#c;#s;#m;#b;#w;#g;#P;#y;#R;#T;#_;#v;#E;#$;#r;#k;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#_,autopurgeTimers:e.#v,sizes:e.#R,keyMap:e.#u,keyList:e.#c,valList:e.#s,next:e.#m,prev:e.#b,get head(){return e.#w},get tail(){return e.#g},free:e.#P,isBackgroundFetch:r=>e.#f(r),backgroundFetch:(r,n,s,i)=>e.#B(r,n,s,i),moveToTail:r=>e.#M(r),indexes:r=>e.#C(r),rindexes:r=>e.#N(r),isStale:r=>e.#S(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#a}get fetchMethod(){return this.#p}get memoMethod(){return this.#h}get dispose(){return this.#i}get onInsert(){return this.#n}get disposeAfter(){return this.#o}constructor(e){let{max:r=0,ttl:n,ttlResolution:s=1,ttlAutopurge:i,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,onInsert:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:f,maxSize:h=0,maxEntrySize:m=0,sizeCalculation:y,fetchMethod:g,memoMethod:w,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:$,ignoreFetchAbort:R,perf:O}=e;if(O!==void 0&&typeof O?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(this.#l=O??_Te,r!==0&&!Qi(r))throw new TypeError("max option must be a nonnegative integer");let T=r?b4(r):Array;if(!T)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=h,this.maxEntrySize=m||this.#t,this.sizeCalculation=y,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#h=w,g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#p=g,this.#$=!!g,this.#u=new Map,this.#c=new Array(r).fill(void 0),this.#s=new Array(r).fill(void 0),this.#m=new T(r),this.#b=new T(r),this.#w=0,this.#g=0,this.#P=m1.create(r),this.#a=0,this.#d=0,typeof l=="function"&&(this.#i=l),typeof u=="function"&&(this.#n=u),typeof d=="function"?(this.#o=d,this.#y=[]):(this.#o=void 0,this.#y=void 0),this.#E=!!this.#i,this.#k=!!this.#n,this.#r=!!this.#o,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!$,this.ignoreFetchAbort=!!R,this.maxEntrySize!==0){if(this.#t!==0&&!Qi(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Qi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#z()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Qi(s)||s===0?s:1,this.ttlAutopurge=!!i,this.ttl=n||0,this.ttl){if(!Qi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let P="LRU_CACHE_UNBOUNDED";vTe(P)&&(v4.add(P),w4("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,t))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#I(){let e=new ul(this.#e),r=new ul(this.#e);this.#_=e,this.#T=r;let n=this.ttlAutopurge?new Array(this.#e):void 0;this.#v=n,this.#q=(o,a,c=this.#l.now())=>{if(r[o]=a!==0?c:0,e[o]=a,n?.[o]&&(clearTimeout(n[o]),n[o]=void 0),a!==0&&n){let l=setTimeout(()=>{this.#S(o)&&this.#x(this.#c[o],"expire")},a+1);l.unref&&l.unref(),n[o]=l}},this.#O=o=>{r[o]=e[o]!==0?this.#l.now():0},this.#A=(o,a)=>{if(e[a]){let c=e[a],l=r[a];if(!c||!l)return;o.ttl=c,o.start=l,o.now=s||i();let u=o.now-l;o.remainingTTL=c-u}};let s=0,i=()=>{let o=this.#l.now();if(this.ttlResolution>0){s=o;let a=setTimeout(()=>s=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#u.get(o);if(a===void 0)return 0;let c=e[a],l=r[a];if(!c||!l)return 1/0;let u=(s||i())-l;return c-u},this.#S=o=>{let a=r[o],c=e[o];return!!c&&!!a&&(s||i())-a>c}}#O=()=>{};#A=()=>{};#q=()=>{};#S=()=>!1;#z(){let e=new ul(this.#e);this.#d=0,this.#R=e,this.#j=r=>{this.#d-=e[r],e[r]=0},this.#L=(r,n,s,i)=>{if(this.#f(n))return 0;if(!Qi(s))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(s=i(n,r),!Qi(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#D=(r,n,s)=>{if(e[r]=n,this.#t){let i=this.#t-e[r];for(;this.#d>i;)this.#U(!0)}this.#d+=e[r],s&&(s.entrySize=n,s.totalCalculatedSize=this.#d)}}#j=e=>{};#D=(e,r,n)=>{};#L=(e,r,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#C({allowStale:e=this.allowStale}={}){if(this.#a)for(let r=this.#g;!(!this.#F(r)||((e||!this.#S(r))&&(yield r),r===this.#w));)r=this.#b[r]}*#N({allowStale:e=this.allowStale}={}){if(this.#a)for(let r=this.#w;!(!this.#F(r)||((e||!this.#S(r))&&(yield r),r===this.#g));)r=this.#m[r]}#F(e){return e!==void 0&&this.#u.get(this.#c[e])===e}*entries(){for(let e of this.#C())this.#s[e]!==void 0&&this.#c[e]!==void 0&&!this.#f(this.#s[e])&&(yield[this.#c[e],this.#s[e]])}*rentries(){for(let e of this.#N())this.#s[e]!==void 0&&this.#c[e]!==void 0&&!this.#f(this.#s[e])&&(yield[this.#c[e],this.#s[e]])}*keys(){for(let e of this.#C()){let r=this.#c[e];r!==void 0&&!this.#f(this.#s[e])&&(yield r)}}*rkeys(){for(let e of this.#N()){let r=this.#c[e];r!==void 0&&!this.#f(this.#s[e])&&(yield r)}}*values(){for(let e of this.#C())this.#s[e]!==void 0&&!this.#f(this.#s[e])&&(yield this.#s[e])}*rvalues(){for(let e of this.#N())this.#s[e]!==void 0&&!this.#f(this.#s[e])&&(yield this.#s[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#C()){let s=this.#s[n],i=this.#f(s)?s.__staleWhileFetching:s;if(i!==void 0&&e(i,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#C()){let s=this.#s[n],i=this.#f(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#N()){let s=this.#s[n],i=this.#f(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#N({allowStale:!0}))this.#S(r)&&(this.#x(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#u.get(e);if(r===void 0)return;let n=this.#s[r],s=this.#f(n)?n.__staleWhileFetching:n;if(s===void 0)return;let i={value:s};if(this.#_&&this.#T){let o=this.#_[r],a=this.#T[r];if(o&&a){let c=o-(this.#l.now()-a);i.ttl=c,i.start=Date.now()}}return this.#R&&(i.size=this.#R[r]),i}dump(){let e=[];for(let r of this.#C({allowStale:!0})){let n=this.#c[r],s=this.#s[r],i=this.#f(s)?s.__staleWhileFetching:s;if(i===void 0||n===void 0)continue;let o={value:i};if(this.#_&&this.#T){o.ttl=this.#_[r];let a=this.#l.now()-this.#T[r];o.start=Math.floor(Date.now()-a)}this.#R&&(o.size=this.#R[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let s=Date.now()-n.start;n.start=this.#l.now()-s}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:s=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#x(e,"set"),this;let d=this.#a===0?void 0:this.#u.get(e);if(d===void 0)d=this.#a===0?this.#g:this.#P.length!==0?this.#P.pop():this.#a===this.#e?this.#U(!1):this.#a,this.#c[d]=e,this.#s[d]=r,this.#u.set(e,d),this.#m[this.#g]=d,this.#b[d]=this.#g,this.#g=d,this.#a++,this.#D(d,u,c),c&&(c.set="add"),l=!1,this.#k&&this.#n?.(r,e,"add");else{this.#M(d);let p=this.#s[d];if(r!==p){if(this.#$&&this.#f(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!o&&(this.#E&&this.#i?.(f,e,"set"),this.#r&&this.#y?.push([f,e,"set"]))}else o||(this.#E&&this.#i?.(p,e,"set"),this.#r&&this.#y?.push([p,e,"set"]));if(this.#j(d),this.#D(d,u,c),this.#s[d]=r,c){c.set="replace";let f=p&&this.#f(p)?p.__staleWhileFetching:p;f!==void 0&&(c.oldValue=f)}}else c&&(c.set="update");this.#k&&this.onInsert?.(r,e,r===p?"update":"replace")}if(s!==0&&!this.#_&&this.#I(),this.#_&&(l||this.#q(d,s,i),c&&this.#A(c,d)),!o&&this.#r&&this.#y){let p=this.#y,f;for(;f=p?.shift();)this.#o?.(...f)}return this}pop(){try{for(;this.#a;){let e=this.#s[this.#w];if(this.#U(!0),this.#f(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#r&&this.#y){let e=this.#y,r;for(;r=e?.shift();)this.#o?.(...r)}}}#U(e){let r=this.#w,n=this.#c[r],s=this.#s[r];return this.#$&&this.#f(s)?s.__abortController.abort(new Error("evicted")):(this.#E||this.#r)&&(this.#E&&this.#i?.(s,n,"evict"),this.#r&&this.#y?.push([s,n,"evict"])),this.#j(r),this.#v?.[r]&&(clearTimeout(this.#v[r]),this.#v[r]=void 0),e&&(this.#c[r]=void 0,this.#s[r]=void 0,this.#P.push(r)),this.#a===1?(this.#w=this.#g=0,this.#P.length=0):this.#w=this.#m[r],this.#u.delete(n),this.#a--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=r,i=this.#u.get(e);if(i!==void 0){let o=this.#s[i];if(this.#f(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#S(i))s&&(s.has="stale",this.#A(s,i));else return n&&this.#O(i),s&&(s.has="hit",this.#A(s,i)),!0}else s&&(s.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,s=this.#u.get(e);if(s===void 0||!n&&this.#S(s))return;let i=this.#s[s];return this.#f(i)?i.__staleWhileFetching:i}#B(e,r,n,s){let i=r===void 0?void 0:this.#s[r];if(this.#f(i))return i;let o=new gy,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:n,context:s},l=(m,y=!1)=>{let{aborted:g}=o.signal,w=n.ignoreFetchAbort&&m!==void 0;if(n.status&&(g&&!y?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,w&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),g&&!w&&!y)return d(o.signal.reason);let _=f,v=this.#s[r];return(v===f||w&&y&&v===void 0)&&(m===void 0?_.__staleWhileFetching!==void 0?this.#s[r]=_.__staleWhileFetching:this.#x(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,m,c.options))),m},u=m=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=m),d(m)),d=m=>{let{aborted:y}=o.signal,g=y&&n.allowStaleOnFetchAbort,w=g||n.allowStaleOnFetchRejection,_=w||n.noDeleteOnFetchRejection,v=f;if(this.#s[r]===f&&(!_||v.__staleWhileFetching===void 0?this.#x(e,"fetch"):g||(this.#s[r]=v.__staleWhileFetching)),w)return n.status&&v.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw m},p=(m,y)=>{let g=this.#p?.(e,i,c);g&&g instanceof Promise&&g.then(w=>m(w===void 0?void 0:w),y),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(m(void 0),n.allowStaleOnFetchAbort&&(m=w=>l(w,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(l,u),h=Object.assign(f,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return r===void 0?(this.set(e,h,{...c.options,status:void 0}),r=this.#u.get(e)):this.#s[r]=h,h}#f(e){if(!this.#$)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof gy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:g,signal:w}=r;if(!this.#$)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,status:g});let _={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:h,ignoreFetchAbort:f,status:g,signal:w},v=this.#u.get(e);if(v===void 0){g&&(g.fetch="miss");let S=this.#B(e,v,_,m);return S.__returned=S}else{let S=this.#s[v];if(this.#f(S)){let P=n&&S.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",P&&(g.returnedStale=!0)),P?S.__staleWhileFetching:S.__returned=S}let $=this.#S(v);if(!y&&!$)return g&&(g.fetch="hit"),this.#M(v),s&&this.#O(v),g&&this.#A(g,v),S;let R=this.#B(e,v,_,m),T=R.__staleWhileFetching!==void 0&&n;return g&&(g.fetch=$?"stale":"refresh",T&&$&&(g.returnedStale=!0)),T?R.__staleWhileFetching:R.__returned=R}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#h;if(!n)throw new Error("no memoMethod provided to constructor");let{context:s,forceRefresh:i,...o}=r,a=this.get(e,o);if(!i&&a!==void 0)return a;let c=n(e,a,{options:o,context:s});return this.set(e,c,o),c}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=r,a=this.#u.get(e);if(a!==void 0){let c=this.#s[a],l=this.#f(c);return o&&this.#A(o,a),this.#S(a)?(o&&(o.get="stale"),l?(o&&n&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?c.__staleWhileFetching:void 0):(i||this.#x(e,"expire"),o&&n&&(o.returnedStale=!0),n?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#M(a),s&&this.#O(a),c))}else o&&(o.get="miss")}#V(e,r){this.#b[r]=e,this.#m[e]=r}#M(e){e!==this.#g&&(e===this.#w?this.#w=this.#m[e]:this.#V(this.#b[e],this.#m[e]),this.#V(this.#g,e),this.#g=e)}delete(e){return this.#x(e,"delete")}#x(e,r){let n=!1;if(this.#a!==0){let s=this.#u.get(e);if(s!==void 0)if(this.#v?.[s]&&(clearTimeout(this.#v?.[s]),this.#v[s]=void 0),n=!0,this.#a===1)this.#H(r);else{this.#j(s);let i=this.#s[s];if(this.#f(i)?i.__abortController.abort(new Error("deleted")):(this.#E||this.#r)&&(this.#E&&this.#i?.(i,e,r),this.#r&&this.#y?.push([i,e,r])),this.#u.delete(e),this.#c[s]=void 0,this.#s[s]=void 0,s===this.#g)this.#g=this.#b[s];else if(s===this.#w)this.#w=this.#m[s];else{let o=this.#b[s];this.#m[o]=this.#m[s];let a=this.#m[s];this.#b[a]=this.#b[s]}this.#a--,this.#P.push(s)}}if(this.#r&&this.#y?.length){let s=this.#y,i;for(;i=s?.shift();)this.#o?.(...i)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#N({allowStale:!0})){let n=this.#s[r];if(this.#f(n))n.__abortController.abort(new Error("deleted"));else{let s=this.#c[r];this.#E&&this.#i?.(n,s,e),this.#r&&this.#y?.push([n,s,e])}}if(this.#u.clear(),this.#s.fill(void 0),this.#c.fill(void 0),this.#_&&this.#T){this.#_.fill(0),this.#T.fill(0);for(let r of this.#v??[])r!==void 0&&clearTimeout(r);this.#v?.fill(void 0)}if(this.#R&&this.#R.fill(0),this.#w=0,this.#g=0,this.#P.length=0,this.#d=0,this.#a=0,this.#r&&this.#y){let r=this.#y,n;for(;n=r?.shift();)this.#o?.(...n)}}};yy.LRUCache=g1});var R1=E(Er=>{"use strict";var wTe=Er&&Er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Er,"__esModule",{value:!0});Er.Minipass=Er.isWritable=Er.isReadable=Er.isStream=void 0;var S4=typeof process=="object"&&process?process:{stdout:null,stderr:null},S1=require("node:events"),O4=wTe(require("node:stream")),bTe=require("node:string_decoder"),ETe=t=>!!t&&typeof t=="object"&&(t instanceof Ry||t instanceof O4.default||(0,Er.isReadable)(t)||(0,Er.isWritable)(t));Er.isStream=ETe;var STe=t=>!!t&&typeof t=="object"&&t instanceof S1.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==O4.default.Writable.prototype.pipe;Er.isReadable=STe;var RTe=t=>!!t&&typeof t=="object"&&t instanceof S1.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Er.isWritable=RTe;var ni=Symbol("EOF"),si=Symbol("maybeEmitEnd"),Zi=Symbol("emittedEnd"),_y=Symbol("emittingEnd"),dd=Symbol("emittedError"),vy=Symbol("closed"),R4=Symbol("read"),wy=Symbol("flush"),T4=Symbol("flushChunk"),Hn=Symbol("encoding"),fl=Symbol("decoder"),Pt=Symbol("flowing"),hd=Symbol("paused"),dl=Symbol("resume"),xt=Symbol("buffer"),br=Symbol("pipes"),Ct=Symbol("bufferLength"),y1=Symbol("bufferPush"),by=Symbol("bufferShift"),or=Symbol("objectMode"),bt=Symbol("destroyed"),_1=Symbol("error"),v1=Symbol("emitData"),$4=Symbol("emitEnd"),w1=Symbol("emitEnd2"),Ss=Symbol("async"),b1=Symbol("abort"),Ey=Symbol("aborted"),pd=Symbol("signal"),ma=Symbol("dataListeners"),Kr=Symbol("discarded"),md=t=>Promise.resolve().then(t),TTe=t=>t(),$Te=t=>t==="end"||t==="finish"||t==="prefinish",OTe=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,PTe=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Sy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[dl](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},E1=class extends Sy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},xTe=t=>!!t.objectMode,CTe=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Ry=class extends S1.EventEmitter{[Pt]=!1;[hd]=!1;[br]=[];[xt]=[];[or];[Hn];[Ss];[fl];[ni]=!1;[Zi]=!1;[_y]=!1;[vy]=!1;[dd]=null;[Ct]=0;[bt]=!1;[pd];[Ey]=!1;[ma]=0;[Kr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");xTe(r)?(this[or]=!0,this[Hn]=null):CTe(r)?(this[Hn]=r.encoding,this[or]=!1):(this[or]=!1,this[Hn]=null),this[Ss]=!!r.async,this[fl]=this[Hn]?new bTe.StringDecoder(this[Hn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[xt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[br]});let{signal:n}=r;n&&(this[pd]=n,n.aborted?this[b1]():n.addEventListener("abort",()=>this[b1]()))}get bufferLength(){return this[Ct]}get encoding(){return this[Hn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[or]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Ss]}set async(e){this[Ss]=this[Ss]||!!e}[b1](){this[Ey]=!0,this.emit("abort",this[pd]?.reason),this.destroy(this[pd]?.reason)}get aborted(){return this[Ey]}set aborted(e){}write(e,r,n){if(this[Ey])return!1;if(this[ni])throw new Error("write after end");if(this[bt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[Ss]?md:TTe;if(!this[or]&&!Buffer.isBuffer(e)){if(PTe(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(OTe(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[or]?(this[Pt]&&this[Ct]!==0&&this[wy](!0),this[Pt]?this.emit("data",e):this[y1](e),this[Ct]!==0&&this.emit("readable"),n&&s(n),this[Pt]):e.length?(typeof e=="string"&&!(r===this[Hn]&&!this[fl]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Hn]&&(e=this[fl].write(e)),this[Pt]&&this[Ct]!==0&&this[wy](!0),this[Pt]?this.emit("data",e):this[y1](e),this[Ct]!==0&&this.emit("readable"),n&&s(n),this[Pt]):(this[Ct]!==0&&this.emit("readable"),n&&s(n),this[Pt])}read(e){if(this[bt])return null;if(this[Kr]=!1,this[Ct]===0||e===0||e&&e>this[Ct])return this[si](),null;this[or]&&(e=null),this[xt].length>1&&!this[or]&&(this[xt]=[this[Hn]?this[xt].join(""):Buffer.concat(this[xt],this[Ct])]);let r=this[R4](e||null,this[xt][0]);return this[si](),r}[R4](e,r){if(this[or])this[by]();else{let n=r;e===n.length||e===null?this[by]():typeof n=="string"?(this[xt][0]=n.slice(e),r=n.slice(0,e),this[Ct]-=e):(this[xt][0]=n.subarray(e),r=n.subarray(0,e),this[Ct]-=e)}return this.emit("data",r),!this[xt].length&&!this[ni]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[ni]=!0,this.writable=!1,(this[Pt]||!this[hd])&&this[si](),this}[dl](){this[bt]||(!this[ma]&&!this[br].length&&(this[Kr]=!0),this[hd]=!1,this[Pt]=!0,this.emit("resume"),this[xt].length?this[wy]():this[ni]?this[si]():this.emit("drain"))}resume(){return this[dl]()}pause(){this[Pt]=!1,this[hd]=!0,this[Kr]=!1}get destroyed(){return this[bt]}get flowing(){return this[Pt]}get paused(){return this[hd]}[y1](e){this[or]?this[Ct]+=1:this[Ct]+=e.length,this[xt].push(e)}[by](){return this[or]?this[Ct]-=1:this[Ct]-=this[xt][0].length,this[xt].shift()}[wy](e=!1){do;while(this[T4](this[by]())&&this[xt].length);!e&&!this[xt].length&&!this[ni]&&this.emit("drain")}[T4](e){return this.emit("data",e),this[Pt]}pipe(e,r){if(this[bt])return e;this[Kr]=!1;let n=this[Zi];return r=r||{},e===S4.stdout||e===S4.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[br].push(r.proxyErrors?new E1(this,e,r):new Sy(this,e,r)),this[Ss]?md(()=>this[dl]()):this[dl]()),e}unpipe(e){let r=this[br].find(n=>n.dest===e);r&&(this[br].length===1?(this[Pt]&&this[ma]===0&&(this[Pt]=!1),this[br]=[]):this[br].splice(this[br].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Kr]=!1,this[ma]++,!this[br].length&&!this[Pt]&&this[dl]();else if(e==="readable"&&this[Ct]!==0)super.emit("readable");else if($Te(e)&&this[Zi])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[dd]){let s=r;this[Ss]?md(()=>s.call(this,this[dd])):s.call(this,this[dd])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ma]=this.listeners("data").length,this[ma]===0&&!this[Kr]&&!this[br].length&&(this[Pt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ma]=0,!this[Kr]&&!this[br].length&&(this[Pt]=!1)),r}get emittedEnd(){return this[Zi]}[si](){!this[_y]&&!this[Zi]&&!this[bt]&&this[xt].length===0&&this[ni]&&(this[_y]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[vy]&&this.emit("close"),this[_y]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==bt&&this[bt])return!1;if(e==="data")return!this[or]&&!n?!1:this[Ss]?(md(()=>this[v1](n)),!0):this[v1](n);if(e==="end")return this[$4]();if(e==="close"){if(this[vy]=!0,!this[Zi]&&!this[bt])return!1;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[dd]=n,super.emit(_1,n);let i=!this[pd]||this.listeners("error").length?super.emit("error",n):!1;return this[si](),i}else if(e==="resume"){let i=super.emit("resume");return this[si](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let s=super.emit(e,...r);return this[si](),s}[v1](e){for(let n of this[br])n.dest.write(e)===!1&&this.pause();let r=this[Kr]?!1:super.emit("data",e);return this[si](),r}[$4](){return this[Zi]?!1:(this[Zi]=!0,this.readable=!1,this[Ss]?(md(()=>this[w1]()),!0):this[w1]())}[w1](){if(this[fl]){let r=this[fl].end();if(r){for(let n of this[br])n.dest.write(r);this[Kr]||super.emit("data",r)}}for(let r of this[br])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[or]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[or]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[or])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Hn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(bt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Kr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[ni])return r();let i,o,a=d=>{this.off("data",c),this.off("end",l),this.off(bt,u),r(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(bt,u),this.pause(),i({value:d,done:!!this[ni]})},l=()=>{this.off("error",a),this.off("data",c),this.off(bt,u),r(),i({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,i=d,this.once(bt,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Kr]=!1;let e=!1,r=()=>(this.pause(),this.off(_1,r),this.off(bt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let s=this.read();return s===null?r():{done:!1,value:s}};return this.once("end",r),this.once(_1,r),this.once(bt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[bt])return e?this.emit("error",e):this.emit(bt),this;this[bt]=!0,this[Kr]=!0,this[xt].length=0,this[Ct]=0;let r=this;return typeof r.close=="function"&&!this[vy]&&r.close(),e?this.emit("error",e):this.emit(bt),this}static get isStream(){return Er.isStream}};Er.Minipass=Ry});var U4=E(Fe=>{"use strict";var NTe=Fe&&Fe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ITe=Fe&&Fe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ATe=Fe&&Fe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NTe(e,t,r);return ITe(e,t),e};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.PathScurry=Fe.Path=Fe.PathScurryDarwin=Fe.PathScurryPosix=Fe.PathScurryWin32=Fe.PathScurryBase=Fe.PathPosix=Fe.PathWin32=Fe.PathBase=Fe.ChildrenCache=Fe.ResolveCache=void 0;var Iy=E4(),xy=require("node:path"),kTe=require("node:url"),yd=require("fs"),DTe=ATe(require("node:fs")),MTe=yd.realpathSync.native,Ty=require("node:fs/promises"),P4=R1(),_d={lstatSync:yd.lstatSync,readdir:yd.readdir,readdirSync:yd.readdirSync,readlinkSync:yd.readlinkSync,realpathSync:MTe,promises:{lstat:Ty.lstat,readdir:Ty.readdir,readlink:Ty.readlink,realpath:Ty.realpath}},A4=t=>!t||t===_d||t===DTe?_d:{..._d,...t,promises:{..._d.promises,...t.promises||{}}},k4=/^\\\\\?\\([a-z]:)\\?$/i,jTe=t=>t.replace(/\//g,"\\").replace(k4,"$1\\"),qTe=/[\\\/]/,wn=0,D4=1,M4=2,Rs=4,j4=6,q4=8,ga=10,L4=12,vn=15,gd=~vn,T1=16,x4=32,vd=64,Gn=128,$y=256,Py=512,C4=vd|Gn|Py,LTe=1023,$1=t=>t.isFile()?q4:t.isDirectory()?Rs:t.isSymbolicLink()?ga:t.isCharacterDevice()?M4:t.isBlockDevice()?j4:t.isSocket()?L4:t.isFIFO()?D4:wn,N4=new Iy.LRUCache({max:2**12}),wd=t=>{let e=N4.get(t);if(e)return e;let r=t.normalize("NFKD");return N4.set(t,r),r},I4=new Iy.LRUCache({max:2**12}),Oy=t=>{let e=I4.get(t);if(e)return e;let r=wd(t.toLowerCase());return I4.set(t,r),r},bd=class extends Iy.LRUCache{constructor(){super({max:256})}};Fe.ResolveCache=bd;var Cy=class extends Iy.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Fe.ChildrenCache=Cy;var F4=Symbol("PathScurry setAsCwd"),Ht=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#i;get mode(){return this.#i}#n;get nlink(){return this.#n}#o;get uid(){return this.#o}#p;get gid(){return this.#p}#h;get rdev(){return this.#h}#l;get blksize(){return this.#l}#a;get ino(){return this.#a}#d;get size(){return this.#d}#u;get blocks(){return this.#u}#c;get atimeMs(){return this.#c}#s;get mtimeMs(){return this.#s}#m;get ctimeMs(){return this.#m}#b;get birthtimeMs(){return this.#b}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#P;get ctime(){return this.#P}#y;get birthtime(){return this.#y}#R;#T;#_;#v;#E;#$;#r;#k;#I;#O;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=wn,n,s,i,o,a){this.name=e,this.#R=i?Oy(e):wd(e),this.#r=r&LTe,this.nocase=i,this.roots=s,this.root=n||this,this.#k=o,this.#_=a.fullpath,this.#E=a.relative,this.#$=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=A4(a.fs)}depth(){return this.#T!==void 0?this.#T:this.parent?this.#T=this.parent.depth()+1:this.#T=0}childrenCache(){return this.#k}resolve(e){if(!e)return this;let r=this.getRootString(e),s=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#A(s):this.#A(s)}#A(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#k.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#k.set(this,r),this.#r&=~T1,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),s=this.nocase?Oy(e):wd(e);for(let c of n)if(c.#R===s)return c;let i=this.parent?this.sep:"",o=this.#_?this.#_+i+e:void 0,a=this.newChild(e,wn,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#r|=Gn),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#E!==void 0)return this.#E;let e=this.name,r=this.parent;if(!r)return this.#E=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#$!==void 0)return this.#$;let e=this.name,r=this.parent;if(!r)return this.#$=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#_!==void 0)return this.#_;let e=this.name,r=this.parent;if(!r)return this.#_=this.name;let s=r.fullpath()+(r.parent?this.sep:"")+e;return this.#_=s}fullpathPosix(){if(this.#v!==void 0)return this.#v;if(this.sep==="/")return this.#v=this.fullpath();if(!this.parent){let s=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(s)?this.#v=`//?/${s}`:this.#v=s}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#v=n}isUnknown(){return(this.#r&vn)===wn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&vn)===q4}isDirectory(){return(this.#r&vn)===Rs}isCharacterDevice(){return(this.#r&vn)===M4}isBlockDevice(){return(this.#r&vn)===j4}isFIFO(){return(this.#r&vn)===D4}isSocket(){return(this.#r&vn)===L4}isSymbolicLink(){return(this.#r&ga)===ga}lstatCached(){return this.#r&x4?this:void 0}readlinkCached(){return this.#I}realpathCached(){return this.#O}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#I)return!0;if(!this.parent)return!1;let e=this.#r&vn;return!(e!==wn&&e!==ga||this.#r&$y||this.#r&Gn)}calledReaddir(){return!!(this.#r&T1)}isENOENT(){return!!(this.#r&Gn)}isNamed(e){return this.nocase?this.#R===Oy(e):this.#R===wd(e)}async readlink(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#I=n}catch(r){this.#N(r.code);return}}readlinkSync(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#I=n}catch(r){this.#N(r.code);return}}#q(e){this.#r|=T1;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#S()}}#S(){this.#r&Gn||(this.#r=(this.#r|Gn)&gd,this.#z())}#z(){let e=this.children();e.provisional=0;for(let r of e)r.#S()}#j(){this.#r|=Py,this.#D()}#D(){if(this.#r&vd)return;let e=this.#r;(e&vn)===Rs&&(e&=gd),this.#r=e|vd,this.#z()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#D():e==="ENOENT"?this.#S():this.children().provisional=0}#C(e=""){e==="ENOTDIR"?this.parent.#D():e==="ENOENT"&&this.#S()}#N(e=""){let r=this.#r;r|=$y,e==="ENOENT"&&(r|=Gn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=gd),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#D()}#F(e,r){return this.#B(e,r)||this.#U(e,r)}#U(e,r){let n=$1(e),s=this.newChild(e.name,n,{parent:this}),i=s.#r&vn;return i!==Rs&&i!==ga&&i!==wn&&(s.#r|=vd),r.unshift(s),r.provisional++,s}#B(e,r){for(let n=r.provisional;n<r.length;n++){let s=r[n];if((this.nocase?Oy(e.name):wd(e.name))===s.#R)return this.#f(e,s,n,r)}}#f(e,r,n,s){let i=r.name;return r.#r=r.#r&gd|$1(e),i!==e.name&&(r.name=e.name),n!==s.provisional&&(n===s.length-1?s.pop():s.splice(n,1),s.unshift(r)),s.provisional++,r}async lstat(){if((this.#r&Gn)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#C(e.code)}}lstatSync(){if((this.#r&Gn)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#C(e.code)}}#V(e){let{atime:r,atimeMs:n,birthtime:s,birthtimeMs:i,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:u,gid:d,ino:p,mode:f,mtime:h,mtimeMs:m,nlink:y,rdev:g,size:w,uid:_}=e;this.#w=r,this.#c=n,this.#y=s,this.#b=i,this.#l=o,this.#u=a,this.#P=c,this.#m=l,this.#t=u,this.#p=d,this.#a=p,this.#i=f,this.#g=h,this.#s=m,this.#n=y,this.#h=g,this.#d=w,this.#o=_;let v=$1(e);this.#r=this.#r&gd|v|x4,v!==wn&&v!==Rs&&v!==ga&&(this.#r|=vd)}#M=[];#x=!1;#H(e){this.#x=!1;let r=this.#M.slice();this.#M.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let i=n.slice(0,n.provisional);r?e(null,i):queueMicrotask(()=>e(null,i));return}if(this.#M.push(e),this.#x)return;this.#x=!0;let s=this.fullpath();this.#e.readdir(s,{withFileTypes:!0},(i,o)=>{if(i)this.#L(i.code),n.provisional=0;else{for(let a of o)this.#F(a,n);this.#q(n)}this.#H(n.slice(0,n.provisional))})}#G;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#G)await this.#G;else{let n=()=>{};this.#G=new Promise(s=>n=s);try{for(let s of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#F(s,e);this.#q(e)}catch(s){this.#L(s.code),e.provisional=0}this.#G=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#F(n,e);this.#q(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&C4)return!1;let e=vn&this.#r;return e===wn||e===Rs||e===ga}shouldWalk(e,r){return(this.#r&Rs)===Rs&&!(this.#r&C4)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#O)return this.#O;if(!((Py|$y|Gn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}realpathSync(){if(this.#O)return this.#O;if(!((Py|$y|Gn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}[F4](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],s=this;for(;s&&s.parent;)r.add(s),s.#E=n.join(this.sep),s.#$=n.join("/"),s=s.parent,n.push("..");for(s=e;s&&s.parent&&!r.has(s);)s.#E=void 0,s.#$=void 0,s=s.parent}};Fe.PathBase=Ht;var Ed=class t extends Ht{sep="\\";splitSep=qTe;constructor(e,r=wn,n,s,i,o,a){super(e,r,n,s,i,o,a)}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return xy.win32.parse(e).root}getRoot(e){if(e=jTe(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Td(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(k4,"$1\\"),e===r}};Fe.PathWin32=Ed;var Sd=class t extends Ht{splitSep="/";sep="/";constructor(e,r=wn,n,s,i,o,a){super(e,r,n,s,i,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};Fe.PathPosix=Sd;var Rd=class{root;rootPath;roots;cwd;#e;#t;#i;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:s,childrenCacheSize:i=16*1024,fs:o=_d}={}){this.#n=A4(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,kTe.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new bd,this.#t=new bd,this.#i=new Cy(i);let c=a.substring(this.rootPath.length).split(n);if(c.length===1&&!c[0]&&c.pop(),s===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let l=this.root,u=c.length-1,d=r.sep,p=this.rootPath,f=!1;for(let h of c){let m=u--;l=l.child(h,{relative:new Array(m).fill("..").join(d),relativePosix:new Array(m).fill("..").join("/"),fullpath:p+=(f?"":d)+h}),f=!0}this.cwd=l}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#i}resolve(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpath();return this.#e.set(r,s),s}resolvePosix(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#t.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,s),s}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let s=await e.readdir();return n?s:s.map(i=>i.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(s=>s.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let c=new Set,l=(d,p)=>{c.add(d),d.readdirCB((f,h)=>{if(f)return p(f);let m=h.length;if(!m)return p();let y=()=>{--m===0&&p()};for(let g of h)(!i||i(g))&&a.push(n?g:g.fullpath()),s&&g.isSymbolicLink()?g.realpath().then(w=>w?.isUnknown()?w.lstat():w).then(w=>w?.shouldWalk(c,o)?l(w,y):y()):g.shouldWalk(c,o)?l(g,y):y()},!0)},u=e;return new Promise((d,p)=>{l(u,f=>{if(f)return p(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let c=new Set([e]);for(let l of c){let u=l.readdirSync();for(let d of u){(!i||i(d))&&a.push(n?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(s&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(c,o)&&c.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r;(!i||i(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let c of a){let l=c.readdirSync();for(let u of l){(!i||i(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(s&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new P4.Minipass({objectMode:!0});(!i||i(e))&&a.write(n?e:e.fullpath());let c=new Set,l=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=l.shift();if(!f){u===0&&a.end();return}u++,c.add(f);let h=(y,g,w=!1)=>{if(y)return a.emit("error",y);if(s&&!w){let _=[];for(let v of g)v.isSymbolicLink()&&_.push(v.realpath().then(S=>S?.isUnknown()?S.lstat():S));if(_.length){Promise.all(_).then(()=>h(null,g,!0));return}}for(let _ of g)_&&(!i||i(_))&&(a.write(n?_:_.fullpath())||(p=!0));u--;for(let _ of g){let v=_.realpathCached()||_;v.shouldWalk(c,o)&&l.push(v)}p&&!a.flowing?a.once("drain",d):m||d()},m=!0;f.readdirCB(h,!0),m=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Ht||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new P4.Minipass({objectMode:!0}),c=new Set;(!i||i(e))&&a.write(n?e:e.fullpath());let l=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=l.shift();if(!f){u===0&&a.end();return}u++,c.add(f);let h=f.readdirSync();for(let m of h)(!i||i(m))&&(a.write(n?m:m.fullpath())||(p=!0));u--;for(let m of h){let y=m;if(m.isSymbolicLink()){if(!(s&&(y=m.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(c,o)&&l.push(y)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[F4](r)}};Fe.PathScurryBase=Rd;var Td=class extends Rd{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,xy.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let s=this.cwd;s;s=s.parent)s.nocase=this.nocase}parseRootPath(e){return xy.win32.parse(e).root.toUpperCase()}newRoot(e){return new Ed(this.rootPath,Rs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Fe.PathScurryWin32=Td;var $d=class extends Rd{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,xy.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Sd(this.rootPath,Rs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Fe.PathScurryPosix=$d;var Ny=class extends $d{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};Fe.PathScurryDarwin=Ny;Fe.Path=process.platform==="win32"?Ed:Sd;Fe.PathScurry=process.platform==="win32"?Td:process.platform==="darwin"?Ny:$d});var P1=E(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.Pattern=void 0;var FTe=Xi(),UTe=t=>t.length>=1,BTe=t=>t.length>=1,O1=class t{#e;#t;#i;length;#n;#o;#p;#h;#l;#a;#d=!0;constructor(e,r,n,s){if(!UTe(e))throw new TypeError("empty pattern list");if(!BTe(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#i=n,this.#n=s,this.#i===0){if(this.isUNC()){let[i,o,a,c,...l]=this.#e,[u,d,p,f,...h]=this.#t;l[0]===""&&(l.shift(),h.shift());let m=[i,o,a,c,""].join("/"),y=[u,d,p,f,""].join("/");this.#e=[m,...l],this.#t=[y,...h],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[i,...o]=this.#e,[a,...c]=this.#t;o[0]===""&&(o.shift(),c.shift());let l=i+"/",u=a+"/";this.#e=[l,...o],this.#t=[u,...c],this.length=this.#e.length}}}pattern(){return this.#e[this.#i]}isString(){return typeof this.#e[this.#i]=="string"}isGlobstar(){return this.#e[this.#i]===FTe.GLOBSTAR}isRegExp(){return this.#e[this.#i]instanceof RegExp}globString(){return this.#p=this.#p||(this.#i===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#i).join("/"))}hasMore(){return this.length>this.#i+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#i+1,this.#n),this.#o.#a=this.#a,this.#o.#l=this.#l,this.#o.#h=this.#h,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#i===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#h!==void 0?this.#h:this.#h=this.#n==="win32"&&this.#i===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#i===0?e:""}checkFollowGlobstar(){return!(this.#i===0||!this.isGlobstar()||!this.#d)}markFollowGlobstar(){return this.#i===0||!this.isGlobstar()||!this.#d?!1:(this.#d=!1,!0)}};Ay.Pattern=O1});var C1=E(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});ky.Ignore=void 0;var B4=Xi(),VTe=P1(),zTe=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",x1=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:s,noglobstar:i,platform:o=zTe}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:s,noglobstar:i,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new B4.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let s=r.set[n],i=r.globParts[n];if(!s||!i)throw new Error("invalid pattern object");for(;s[0]==="."&&i[0]===".";)s.shift(),i.shift();let o=new VTe.Pattern(s,i,0,this.platform),a=new B4.Minimatch(o.globString(),this.mmopts),c=i[i.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,s=e.relative()||".",i=`${s}/`;for(let o of this.relative)if(o.match(s)||o.match(i))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let s of this.relativeChildren)if(s.match(n))return!0;for(let s of this.absoluteChildren)if(s.match(r))return!0;return!1}};ky.Ignore=x1});var z4=E(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.Processor=Ts.SubWalks=Ts.MatchRecord=Ts.HasWalkedCache=void 0;var V4=Xi(),Dy=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),s=this.store.get(n);s?s.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};Ts.HasWalkedCache=Dy;var My=class{store=new Map;add(e,r,n){let s=(r?2:0)|(n?1:0),i=this.store.get(e);this.store.set(e,i===void 0?s:s&i)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};Ts.MatchRecord=My;var jy=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(s=>s.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};Ts.SubWalks=jy;var N1=class t{hasWalkedCache;matches=new My;subwalks=new jy;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Dy}processPatterns(e,r){this.patterns=r;let n=r.map(s=>[e,s]);for(let[s,i]of n){this.hasWalkedCache.storeWalked(s,i);let o=i.root(),a=i.isAbsolute()&&this.opts.absolute!==!1;if(o){s=s.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=i.rest();if(d)i=d;else{this.matches.add(s,!0,!1);continue}}if(s.isENOENT())continue;let c,l,u=!1;for(;typeof(c=i.pattern())=="string"&&(l=i.rest());)s=s.resolve(c),i=l,u=!0;if(c=i.pattern(),l=i.rest(),u){if(this.hasWalkedCache.hasWalked(s,i))continue;this.hasWalkedCache.storeWalked(s,i)}if(typeof c=="string"){let d=c===".."||c===""||c===".";this.matches.add(s.resolve(c),a,d);continue}else if(c===V4.GLOBSTAR){(!s.isSymbolicLink()||this.follow||i.checkFollowGlobstar())&&this.subwalks.add(s,i);let d=l?.pattern(),p=l?.rest();if(!l||(d===""||d===".")&&!p)this.matches.add(s,a,d===""||d===".");else if(d===".."){let f=s.parent||s;p?this.hasWalkedCache.hasWalked(f,p)||this.subwalks.add(f,p):this.matches.add(f,a,!0)}}else c instanceof RegExp&&this.subwalks.add(s,i)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),s=this.child();for(let i of r)for(let o of n){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===V4.GLOBSTAR?s.testGlobstar(i,o,l,a):c instanceof RegExp?s.testRegExp(i,c,l,a):s.testString(i,c,l,a)}return s}testGlobstar(e,r,n,s){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,s,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let i=n.pattern();if(typeof i=="string"&&i!==".."&&i!==""&&i!==".")this.testString(e,i,n.rest(),s);else if(i===".."){let o=e.parent||e;this.subwalks.add(o,n)}else i instanceof RegExp&&this.testRegExp(e,i,n.rest(),s)}}testRegExp(e,r,n,s){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}testString(e,r,n,s){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}};Ts.Processor=N1});var W4=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.GlobStream=eo.GlobWalker=eo.GlobUtil=void 0;var HTe=R1(),H4=C1(),G4=z4(),GTe=(t,e)=>typeof t=="string"?new H4.Ignore([t],e):Array.isArray(t)?new H4.Ignore(t,e):t,Od=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#i;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#i=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=GTe(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let s="cannot ignore child matches, ignore lacks add() method.";throw new Error(s)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=await i.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(i,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=i.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(i,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let i=`${e.relativePosix()}/**`;this.#t.add(i)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let s=this.opts.mark&&e.isDirectory()?this.#i:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let i=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(i+s)}else{let i=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!i.startsWith(".."+this.#i)?"."+this.#i:"";this.matchEmit(i?o+i+s:"."+s)}}async match(e,r,n){let s=await this.matchCheck(e,n);s&&this.matchFinish(s,r)}matchSync(e,r,n){let s=this.matchCheckSync(e,n);s&&this.matchFinish(s,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new G4.Processor(this.opts),n)}walkCB2(e,r,n,s){if(this.#o(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#n(a)||(i++,this.match(a,c,l).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,n,o):a.readdirCB((l,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#n(a)||(i++,this.match(a,c,l).then(()=>o()));for(let[a,c]of n.subwalks.entries())i++,this.walkCB2(a,c,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new G4.Processor(this.opts),n)}walkCB2Sync(e,r,n,s){if(this.#o(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#n(a)||this.matchSync(a,c,l);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let c=a.readdirSync();this.walkCB3Sync(a,c,n,o)}o()}walkCB3Sync(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#n(a)||this.matchSync(a,c,l);for(let[a,c]of n.subwalks.entries())i++,this.walkCB2Sync(a,c,n.child(),o);o()}};eo.GlobUtil=Od;var I1=class extends Od{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};eo.GlobWalker=I1;var A1=class extends Od{results;constructor(e,r,n){super(e,r,n),this.results=new HTe.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};eo.GlobStream=A1});var D1=E(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.Glob=void 0;var WTe=Xi(),KTe=require("node:url"),qy=U4(),JTe=P1(),Ly=W4(),YTe=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",k1=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,KTe.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=e,this.platform=r.platform||YTe,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=r.platform==="win32"?qy.PathScurryWin32:r.platform==="darwin"?qy.PathScurryDarwin:r.platform?qy.PathScurryPosix:qy.PathScurry;this.scurry=new c(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",s={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},i=this.pattern.map(c=>new WTe.Minimatch(c,s)),[o,a]=i.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let u=a[l];if(!u)throw new Error("invalid pattern object");return new JTe.Pattern(c,u,0,this.platform)})}async walk(){return[...await new Ly.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ly.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Ly.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Ly.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};Fy.Glob=k1});var M1=E(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.hasMagic=void 0;var XTe=Xi(),QTe=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new XTe.Minimatch(r,e).hasMagic())return!0;return!1};Uy.hasMagic=QTe});var X4=E(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.glob=Oe.sync=Oe.iterate=Oe.iterateSync=Oe.stream=Oe.streamSync=Oe.Ignore=Oe.hasMagic=Oe.Glob=Oe.unescape=Oe.escape=void 0;Oe.globStreamSync=Pd;Oe.globStream=j1;Oe.globSync=q1;Oe.globIterateSync=xd;Oe.globIterate=L1;var K4=Xi(),ya=D1(),ZTe=M1(),Y4=Xi();Object.defineProperty(Oe,"escape",{enumerable:!0,get:function(){return Y4.escape}});Object.defineProperty(Oe,"unescape",{enumerable:!0,get:function(){return Y4.unescape}});var e$e=D1();Object.defineProperty(Oe,"Glob",{enumerable:!0,get:function(){return e$e.Glob}});var t$e=M1();Object.defineProperty(Oe,"hasMagic",{enumerable:!0,get:function(){return t$e.hasMagic}});var r$e=C1();Object.defineProperty(Oe,"Ignore",{enumerable:!0,get:function(){return r$e.Ignore}});function Pd(t,e={}){return new ya.Glob(t,e).streamSync()}function j1(t,e={}){return new ya.Glob(t,e).stream()}function q1(t,e={}){return new ya.Glob(t,e).walkSync()}async function J4(t,e={}){return new ya.Glob(t,e).walk()}function xd(t,e={}){return new ya.Glob(t,e).iterateSync()}function L1(t,e={}){return new ya.Glob(t,e).iterate()}Oe.streamSync=Pd;Oe.stream=Object.assign(j1,{sync:Pd});Oe.iterateSync=xd;Oe.iterate=Object.assign(L1,{sync:xd});Oe.sync=Object.assign(q1,{stream:Pd,iterate:xd});Oe.glob=Object.assign(J4,{glob:J4,globSync:q1,sync:Oe.sync,globStream:j1,stream:Oe.stream,globStreamSync:Pd,streamSync:Oe.streamSync,globIterate:L1,iterate:Oe.iterate,globIterateSync:xd,iterateSync:Oe.iterateSync,Glob:ya.Glob,hasMagic:ZTe.hasMagic,escape:K4.escape,unescape:K4.unescape});Oe.glob.glob=Oe.glob});var Z4=E((Fje,F1)=>{"use strict";var n$e=/at\s(?:.*\.)?plugin\s.*\n\s*(.*)/,s$e=/(\w*(\.\w*)*)\..*/;F1.exports=function(e){if(e.name.length>0)return e.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(n){return Error.stackTraceLimit=r,Q4(n.stack)}};function Q4(t){let e=t.match(n$e);return e?e[1].split(/[/\\]/).slice(-1)[0].match(s$e)[1]:"anonymous"}F1.exports.extractPluginName=Q4});var t3=E((Uje,e3)=>{"use strict";e3.exports=function(e){return e[0]==="@"&&(e=e.slice(1).replace("/","-")),e.replace(/-(.)/g,function(r,n){return n.toUpperCase()})}});var B1=E((Bje,By)=>{"use strict";var i$e=Z4(),o$e=t3(),a$e=0;function U1(t,e={}){let r=!1;if(t.default!==void 0&&(t=t.default),typeof t!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof t}'`);if(typeof e=="string"&&(e={fastify:e}),typeof e!="object"||Array.isArray(e)||e===null)throw new TypeError("The options object should be an object");if(e.fastify!==void 0&&typeof e.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof e.fastify}'`);e.name||(r=!0,e.name=i$e(t)+"-auto-"+a$e++),t[Symbol.for("skip-override")]=e.encapsulate!==!0,t[Symbol.for("fastify.display-name")]=e.name,t[Symbol.for("plugin-meta")]=e,t.default||(t.default=t);let n=o$e(e.name);return!r&&!t[n]&&(t[n]=t),t}By.exports=U1;By.exports.default=U1;By.exports.fastifyPlugin=U1});var V1=E((Vje,r3)=>{"use strict";function c$e(t){let e=t.length;return e>21&&t.indexOf("application/javascript")===0||e>14&&t.indexOf("application/json")===0||e>5&&t.indexOf("text/")===0}r3.exports.isUtf8MimeType=c$e});var s3=E((zje,n3)=>{"use strict";function Vy(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Vy.prototype.define=function(t,e){for(let r in t){let n=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<n.length;s++){let i=n[s];if(i[0]!=="*"){if(!e&&i in this._types)throw new Error('Attempt to change mapping for "'+i+'" extension from "'+this._types[i]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+i+'" from the list of extensions for "'+r+'".');this._types[i]=r}}if(e||!this._extensions[r]){let s=n[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}};Vy.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null};Vy.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};n3.exports=Vy});var o3=E((Hje,i3)=>{i3.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var c3=E((Gje,a3)=>{a3.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var z1=E((Wje,l3)=>{"use strict";var l$e=s3();l3.exports=new l$e(o3(),c3())});var f3=E((Kje,u3)=>{"use strict";var u$e=/["'&<>]/;u3.exports=f$e;function f$e(t){var e=""+t,r=u$e.exec(e);if(!r)return e;var n,s="",i=0,o=0;for(i=r.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=n}return o!==i?s+e.substring(o,i):s}});var d3=E(G1=>{var d$e=/^(-?(?:\d+)?\.?\d+) *(m(?:illiseconds?|s(?:ecs?)?))?(s(?:ec(?:onds?|s)?)?)?(m(?:in(?:utes?|s)?)?)?(h(?:ours?|rs?)?)?(d(?:ays?)?)?(w(?:eeks?|ks?)?)?(y(?:ears?|rs?)?)?$/,zy=1e3,Hy=zy*60,Gy=Hy*60,Nd=Gy*24,H1=Nd*365.25;function h$e(t){var e,r=t.toLowerCase().match(d$e);if(r!=null&&(e=parseFloat(r[1])))return r[3]!=null?e*zy:r[4]!=null?e*Hy:r[5]!=null?e*Gy:r[6]!=null?e*Nd:r[7]!=null?e*Nd*7:r[8]!=null?e*H1:e}function Cd(t,e,r,n){var s=(t|0)===t?t:~~(t+.5);return e+s+(n?" "+r+(s!=1?"s":""):r[0])}function p$e(t,e){var r=t<0?"-":"",n=t<0?-t:t;return n<zy?t+(e?" ms":"ms"):n<Hy?Cd(n/zy,r,"second",e):n<Gy?Cd(n/Hy,r,"minute",e):n<Nd?Cd(n/Gy,r,"hour",e):n<H1?Cd(n/Nd,r,"day",e):Cd(n/H1,r,"year",e)}G1.format=p$e;G1.parse=h$e});var p3=E((Yje,h3)=>{"use strict";function m$e(t){if(t[0]!=="/"||t[1]!=="/")return t;for(let e=2,r=t.length;e<r;++e)if(t[e]!=="/")return t.slice(e-1)}h3.exports.collapseLeadingSlashes=m$e});var g3=E((Xje,m3)=>{"use strict";function g$e(t){for(let e=0,r=t.length;e<r;++e)if(t[e].length!==1&&t[e][0]===".")return!0;return!1}m3.exports.containsDotFile=g$e});var _3=E(y3=>{"use strict";function y$e(t,e,r){return t+" "+(r?r.start+"-"+r.end:"*")+"/"+e}y3.contentRange=y$e});var w3=E(v3=>{"use strict";function _$e(t,e){let r=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>`+t+`</title>
</head>
<body>
<pre>`+e+`</pre>
</body>
</html>
`;return[r,Buffer.byteLength(r)]}v3.createHtmlDocument=_$e});var E3=E((eqe,b3)=>{"use strict";function v$e(t,e){if(typeof t=="string")return[t];if(t===!1)return[];if(Array.isArray(t)){for(let r=0,n=t.length;r<n;++r)if(typeof t[r]!="string")throw new TypeError(e+" must be array of strings or false");return t}else throw new TypeError(e+" must be array of strings or false")}b3.exports.normalizeList=v$e});var R3=E((tqe,S3)=>{"use strict";function w$e(t,e){let r=e.slice(e.indexOf("=")+1),n=[],s=r.length,i=0,o=0,a=0,c,l,u=r.indexOf(","),d=r.indexOf("-"),p=-1;for(;u===-1&&(u=s),c=parseInt(r.slice(p+1,d),10),l=parseInt(r.slice(d+1,u),10),c!==c?(c=t-l,l=t-1):(l!==l||l>t-1)&&(l=t-1),c===c&&l===l&&c>-1&&c<=l&&n.push({start:c,end:l,index:a++}),u!==s;)p=u++,d=r.indexOf("-",u),u=r.indexOf(",",u);if(a<2)return n;for(n.sort(E$e),o=a,a=0,i=1;i<o;){let f=n[i++],h=n[a];f.start>h.end+1?n[++a]=f:f.end>h.end&&(h.end=f.end,h.index>f.index&&(h.index=f.index))}return n.length=a+1,n.sort(b$e),n}function b$e(t,e){return t.index-e.index}function E$e(t,e){return t.start-e.start}S3.exports.parseBytesRange=w$e});var O3=E((rqe,$3)=>{"use strict";var T3=String.prototype.slice;function S$e(t,e){let r=0,n=0,s;for(let i=0,o=t.length;i<o;i++)switch(t.charCodeAt(i)){case 32:n===r&&(n=r=i+1);break;case 44:if(n!==r&&(s=e(T3.call(t,n,r)),s!==void 0))return s;n=r=i+1;break;default:r=i+1;break}if(n!==r)return e(T3.call(t,n,r))}$3.exports.parseTokenList=S$e});var I3=E((nqe,N3)=>{var R$e=require("path").relative;N3.exports=x$e;var T$e=process.cwd();function x3(t,e){for(var r=t.split(/[ ,]+/),n=String(e).toLowerCase(),s=0;s<r.length;s++){var i=r[s];if(i&&(i==="*"||i.toLowerCase()===n))return!0}return!1}function $$e(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),s=n.value;return n.get=function(){return s},n.writable&&(n.set=function(o){return s=o}),delete n.value,delete n.writable,Object.defineProperty(t,e,n),n}function O$e(t){for(var e="",r=0;r<t;r++)e+=", arg"+r;return e.substr(2)}function P$e(t){var e=this.name+": "+this.namespace;this.message&&(e+=" deprecated "+this.message);for(var r=0;r<t.length;r++)e+=`
    at `+t[r].toString();return e}function x$e(t){if(!t)throw new TypeError("argument namespace is required");var e=Ky(),r=hl(e[1]),n=r[0];function s(i){Wy.call(s,i)}return s._file=n,s._ignored=N$e(t),s._namespace=t,s._traced=I$e(t),s._warned=Object.create(null),s.function=M$e,s.property=j$e,s}function C$e(t,e){var r=typeof t.listenerCount!="function"?t.listeners(e).length:t.listenerCount(e);return r>0}function N$e(t){if(process.noDeprecation)return!0;var e=process.env.NO_DEPRECATION||"";return x3(e,t)}function I$e(t){if(process.traceDeprecation)return!0;var e=process.env.TRACE_DEPRECATION||"";return x3(e,t)}function Wy(t,e){var r=C$e(process,"deprecation");if(!(!r&&this._ignored)){var n,s,i,o,a=0,c=!1,l=Ky(),u=this._file;for(e?(o=e,i=hl(l[1]),i.name=o.name,u=i[0]):(a=2,o=hl(l[a]),i=o);a<l.length;a++)if(n=hl(l[a]),s=n[0],s===u)c=!0;else if(s===this._file)u=this._file;else if(c)break;var d=n?o.join(":")+"__"+n.join(":"):void 0;if(!(d!==void 0&&d in this._warned)){this._warned[d]=!0;var p=t;if(p||(p=i===o||!i.name?P3(o):P3(i)),r){var f=C3(this._namespace,p,l.slice(a));process.emit("deprecation",f);return}var h=process.stderr.isTTY?k$e:A$e,m=h.call(this,p,n,l.slice(a));process.stderr.write(m+`
`,"utf8")}}}function hl(t){var e=t.getFileName()||"<anonymous>",r=t.getLineNumber(),n=t.getColumnNumber();t.isEval()&&(e=t.getEvalOrigin()+", "+e);var s=[e,r,n];return s.callSite=t,s.name=t.getFunctionName(),s}function P3(t){var e=t.callSite,r=t.name;r||(r="<anonymous@"+W1(t)+">");var n=e.getThis(),s=n&&e.getTypeName();return s==="Object"&&(s=void 0),s==="Function"&&(s=n.name||s),s&&e.getMethodName()?s+"."+r:r}function A$e(t,e,r){var n=new Date().toUTCString(),s=n+" "+this._namespace+" deprecated "+t;if(this._traced){for(var i=0;i<r.length;i++)s+=`
    at `+r[i].toString();return s}return e&&(s+=" at "+W1(e)),s}function k$e(t,e,r){var n="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+t+"\x1B[39m";if(this._traced){for(var s=0;s<r.length;s++)n+=`
    \x1B[36mat `+r[s].toString()+"\x1B[39m";return n}return e&&(n+=" \x1B[36m"+W1(e)+"\x1B[39m"),n}function W1(t){return R$e(T$e,t[0])+":"+t[1]+":"+t[2]}function Ky(){var t=Error.stackTraceLimit,e={},r=Error.prepareStackTrace;Error.prepareStackTrace=D$e,Error.stackTraceLimit=Math.max(10,t),Error.captureStackTrace(e);var n=e.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=t,n}function D$e(t,e){return e}function M$e(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");var r=O$e(t.length),n=Ky(),s=hl(n[1]);s.name=t.name;var i=new Function("fn","log","deprecate","message","site",`"use strict"
return function (`+r+`) {log.call(deprecate, message, site)
return fn.apply(this, arguments)
}`)(t,Wy,this,e,s);return i}function j$e(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var s=this,i=Ky(),o=hl(i[1]);o.name=e,"value"in n&&(n=$$e(t,e,r));var a=n.get,c=n.set;typeof a=="function"&&(n.get=function(){return Wy.call(s,r,o),a.apply(this,arguments)}),typeof c=="function"&&(n.set=function(){return Wy.call(s,r,o),c.apply(this,arguments)}),Object.defineProperty(t,e,n)}function C3(t,e,r){var n=new Error,s;return Object.defineProperty(n,"constructor",{value:C3}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return s!==void 0?s:s=P$e.call(this,r)},set:function(o){s=o}}),n}});var k3=E((sqe,A3)=>{"use strict";A3.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?q$e:L$e);function q$e(t,e){return t.__proto__=e,t}function L$e(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}});var D3=E((iqe,F$e)=>{F$e.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var q3=E((oqe,j3)=>{"use strict";var K1=D3();j3.exports=Wn;Wn.message=K1;Wn.code=U$e(K1);Wn.codes=B$e(K1);Wn.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Wn.empty={204:!0,205:!0,304:!0};Wn.retry={502:!0,503:!0,504:!0};function U$e(t){var e={};return Object.keys(t).forEach(function(n){var s=t[n],i=Number(n);e[s.toLowerCase()]=i}),e}function B$e(t){return Object.keys(t).map(function(r){return Number(r)})}function V$e(t){var e=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(Wn.code,e))throw new Error('invalid status message: "'+t+'"');return Wn.code[e]}function M3(t){if(!Object.prototype.hasOwnProperty.call(Wn.message,t))throw new Error("invalid status code: "+t);return Wn.message[t]}function Wn(t){if(typeof t=="number")return M3(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);return isNaN(e)?V$e(t):M3(e)}});var L3=E((aqe,J1)=>{typeof Object.create=="function"?J1.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:J1.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var F3=E((cqe,X1)=>{try{if(Y1=require("util"),typeof Y1.inherits!="function")throw"";X1.exports=Y1.inherits}catch{X1.exports=L3()}var Y1});var B3=E((lqe,U3)=>{"use strict";U3.exports=z$e;function z$e(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var W3=E((uqe,_a)=>{"use strict";var H$e=I3()("http-errors"),V3=k3(),pl=q3(),Q1=F3(),G$e=B3();_a.exports=Jy;_a.exports.HttpError=W$e();_a.exports.isHttpError=J$e(_a.exports.HttpError);X$e(_a.exports,pl.codes,_a.exports.HttpError);function z3(t){return+(String(t).charAt(0)+"00")}function Jy(){for(var t,e,r=500,n={},s=0;s<arguments.length;s++){var i=arguments[s],o=typeof i;if(o==="object"&&i instanceof Error)t=i,r=t.status||t.statusCode||r;else if(o==="number"&&s===0)r=i;else if(o==="string")e=i;else if(o==="object")n=i;else throw new TypeError("argument #"+(s+1)+" unsupported type "+o)}typeof r=="number"&&(r<400||r>=600)&&H$e("non-error status code; use only 4xx or 5xx status codes"),(typeof r!="number"||!pl.message[r]&&(r<400||r>=600))&&(r=500);var a=Jy[r]||Jy[z3(r)];t||(t=a?new a(e):new Error(e||pl.message[r]),Error.captureStackTrace(t,Jy)),(!a||!(t instanceof a)||t.status!==r)&&(t.expose=r<500,t.status=t.statusCode=r);for(var c in n)c!=="status"&&c!=="statusCode"&&(t[c]=n[c]);return t}function W$e(){function t(){throw new TypeError("cannot construct abstract class")}return Q1(t,Error),t}function K$e(t,e,r){var n=G3(e);function s(i){var o=i??pl.message[r],a=new Error(o);return Error.captureStackTrace(a,s),V3(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return Q1(s,t),H3(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!0,s}function J$e(t){return function(r){return!r||typeof r!="object"?!1:r instanceof t?!0:r instanceof Error&&typeof r.expose=="boolean"&&typeof r.statusCode=="number"&&r.status===r.statusCode}}function Y$e(t,e,r){var n=G3(e);function s(i){var o=i??pl.message[r],a=new Error(o);return Error.captureStackTrace(a,s),V3(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return Q1(s,t),H3(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!1,s}function H3(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function X$e(t,e,r){e.forEach(function(s){var i,o=G$e(pl.message[s]);switch(z3(s)){case 400:i=K$e(r,o,s);break;case 500:i=Y$e(r,o,s);break}i&&(t[s]=i,t[o]=i)})}function G3(t){return t.slice(-5)==="Error"?t:t+"Error"}});var J3=E((fqe,K3)=>{"use strict";var Z1=W3();function Q$e(t,e){return e?e instanceof Error?Z1(t,e,{expose:!1}):Z1(t,e):Z1(t)}K3.exports.createHttpError=Q$e});var oG=E((dqe,iG)=>{"use strict";var eG=require("node:fs"),Id=require("node:path"),Z$e=require("node:stream"),ar=require("node:util").debuglog("send"),e1e=h$(),t1e=f3(),Y3=z1(),r1e=d3(),{collapseLeadingSlashes:n1e}=p3(),{containsDotFile:s1e}=g3(),{contentRange:X3}=_3(),{createHtmlDocument:va}=w3(),{isUtf8MimeType:i1e}=V1(),{normalizeList:Q3}=E3(),{parseBytesRange:o1e}=R3(),{parseTokenList:tG}=O3(),{createHttpError:a1e}=J3(),c1e=Id.extname,rG=Id.join,eO=Id.normalize,nG=Id.resolve,Yy=Id.sep,Xy=Z$e.Readable,l1e=/^ *bytes=/,u1e=60*60*24*365*1e3,Z3=/(?:^|[\\/])\.\.(?:[\\/]|$)/,f1e={400:va("Error","Bad Request"),403:va("Error","Forbidden"),404:va("Error","Not Found"),412:va("Error","Precondition Failed"),416:va("Error","Range Not Satisfiable"),500:va("Error","Internal Server Error")},d1e=["allow","ignore","deny"];function h1e(t){let e;return typeof t=="string"?e=r1e.parse(t):e=Number(t),e!==e?0:Math.min(Math.max(0,e),u1e)}function p1e(t){t=t??{};let e=t.acceptRanges!==void 0?!!t.acceptRanges:!0,r=t.cacheControl!==void 0?!!t.cacheControl:!0,n=t.contentType!==void 0?!!t.contentType:!0,s=t.etag!==void 0?!!t.etag:!0,i=t.dotfiles!==void 0?d1e.indexOf(t.dotfiles):1;if(i===-1)throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"');let o=t.extensions!==void 0?Q3(t.extensions,"extensions option"):[],a=t.immutable!==void 0?!!t.immutable:!1,c=t.index!==void 0?Q3(t.index,"index option"):["index.html"],l=t.lastModified!==void 0?!!t.lastModified:!0,u=h1e(t.maxAge??t.maxage),d=t.maxContentRangeChunkSize!==void 0?Number(t.maxContentRangeChunkSize):null,p=t.root?nG(t.root):null,f=Number.isSafeInteger(t.highWaterMark)&&t.highWaterMark>0?t.highWaterMark:null;return{acceptRanges:e,cacheControl:r,contentType:n,etag:s,dotfiles:i,extensions:o,immutable:a,index:c,lastModified:l,maxage:u,maxContentRangeChunkSize:d,root:p,highWaterMark:f,start:t.start,end:t.end}}function m1e(t,e){let r=e1e(t);if(r==null)return{statusCode:400};if(~r.indexOf("\0"))return{statusCode:400};let n;if(e!==null){if(r&&(r=eO("."+Yy+r)),Z3.test(r))return ar('malicious path "%s"',r),{statusCode:403};n=r.split(Yy),r=eO(rG(e,r))}else{if(Z3.test(r))return ar('malicious path "%s"',r),{statusCode:403};n=eO(r).split(Yy),r=nG(r)}return{path:r,parts:n}}function sG(t){return t[t.length-1]==="/"}function g1e(t){return t.headers["if-match"]||t.headers["if-unmodified-since"]||t.headers["if-none-match"]||t.headers["if-modified-since"]}function y1e(t,e){if("cache-control"in t.headers&&t.headers["cache-control"].indexOf("no-cache")!==-1)return!1;if("if-none-match"in t.headers){let r=t.headers["if-none-match"];if(r==="*")return!0;let n=e.ETag;if(typeof n!="string")return!1;let s=n.length;return!!tG(r,function(o){let a=o.length;if(s===a&&o===n||s>a&&"W/"+o===n)return!0})}if("if-modified-since"in t.headers){let r=t.headers["if-modified-since"],n=e["Last-Modified"];if(!n||Date.parse(n)<=Date.parse(r))return!0}return!1}function _1e(t,e){let r=t.headers["if-match"];if(r){let n=e.ETag;if(r!=="*"&&(tG(r,function(i){if(i===n||"W/"+i===n)return!0})||!1)!==!0)return!0}if("if-unmodified-since"in t.headers){let n=t.headers["if-unmodified-since"],s=Date.parse(n);if(s===s){let i=Date.parse(e["Last-Modified"]);if(i!==i||i>s)return!0}}return!1}function v1e(t,e){if(!("if-range"in t.headers))return!0;let r=t.headers["if-range"];if(r.indexOf('"')!==-1){let i=e.ETag;return i&&r.indexOf(i)!==-1||!1}let n=Date.parse(r);if(n!==n)return!1;let s=Date.parse(e["Last-Modified"]);return s!==s||s<=n}function tO(t){return new Promise(e=>{eG.stat(t,function(n,s){e({error:n,stat:s})})})}function $s(t,e){let r={};if(e&&e.headers)for(let s in e.headers)r[s]=e.headers[s];let n=f1e[t];return r["Content-Type"]="text/html; charset=utf-8",r["Content-Length"]=n[1],r["Content-Security-Policy"]="default-src 'none'",r["X-Content-Type-Options"]="nosniff",{statusCode:t,headers:r,stream:Xy.from(n[0]),type:"error",metadata:{error:a1e(t,e)}}}function rO(t){switch(t.code){case"ENAMETOOLONG":case"ENOTDIR":case"ENOENT":return $s(404,t);default:return $s(500,t)}}function w1e(t,e,r){return ar("not modified"),delete t["Content-Encoding"],delete t["Content-Language"],delete t["Content-Length"],delete t["Content-Range"],delete t["Content-Type"],{statusCode:304,headers:t,stream:Xy.from(""),type:"file",metadata:{path:e,stat:r}}}function nO(t,e,r,n){let s=r.size,i=n.start??0,o=200,a={};if(ar('send "%s"',e),n.acceptRanges&&(ar("accept ranges"),a["Accept-Ranges"]="bytes"),n.cacheControl){let l="public, max-age="+Math.floor(n.maxage/1e3);n.immutable&&(l+=", immutable"),ar("cache-control %s",l),a["Cache-Control"]=l}if(n.lastModified){let l=r.mtime.toUTCString();ar("modified %s",l),a["Last-Modified"]=l}if(n.etag){let l='W/"'+r.size.toString(16)+"-"+r.mtime.getTime().toString(16)+'"';ar("etag %s",l),a.ETag=l}if(n.contentType){let l=Y3.getType(e)||Y3.default_type;ar("content-type %s",l),l&&i1e(l)&&(l+="; charset=utf-8"),l&&(a["Content-Type"]=l)}if(g1e(t)){if(_1e(t,a))return $s(412);if(y1e(t,a))return w1e(a,e,r)}if(s=Math.max(0,s-i),n.end!==void 0){let l=n.end-i+1;s>l&&(s=l)}if(n.acceptRanges){let l=t.headers.range;if(l!==void 0&&l1e.test(l))if(v1e(t,a)){let u=o1e(s,l);if(u.length===0)return ar("range unsatisfiable"),a["Content-Range"]=X3("bytes",s),$s(416,{headers:{"Content-Range":a["Content-Range"]}});u.length===1&&(ar("range %j",u),o=206,n.maxContentRangeChunkSize&&(u[0].end=Math.min(u[0].end,u[0].start+n.maxContentRangeChunkSize-1)),a["Content-Range"]=X3("bytes",s,u[0]),i+=u[0].start,s=u[0].end-u[0].start+1)}else ar("range stale")}if(a["Content-Length"]=s,t.method==="HEAD")return{statusCode:o,headers:a,stream:Xy.from(""),type:"file",metadata:{path:e,stat:r}};let c=eG.createReadStream(e,{highWaterMark:n.highWaterMark,start:i,end:Math.max(i,i+s-1)});return{statusCode:o,headers:a,stream:c,type:"file",metadata:{path:e,stat:r}}}function b1e(t,e){if(sG(e.path))return $s(403);let r=encodeURI(n1e(e.path+"/")),n=va("Redirecting","Redirecting to "+t1e(r)),s={};return s["Content-Type"]="text/html; charset=utf-8",s["Content-Length"]=n[1],s["Content-Security-Policy"]="default-src 'none'",s["X-Content-Type-Options"]="nosniff",s.Location=r,{statusCode:301,headers:s,stream:Xy.from(n[0]),type:"directory",metadata:{requestPath:e.path,path:t}}}async function E1e(t,e,r){let n;for(let s=0;s<r.index.length;s++){let i=r.index[s],o=rG(e,i),{error:a,stat:c}=await tO(o);if(a){n=a;continue}if(!c.isDirectory())return nO(t,o,c,r)}return n?rO(n):$s(404)}async function S1e(t,e,r){let{error:n,stat:s}=await tO(e);if(n&&n.code==="ENOENT"&&!c1e(e)&&e[e.length-1]!==Yy){let i=n;for(let o=0;o<r.extensions.length;o++){let a=r.extensions[o],c=e+"."+a,{error:l,stat:u}=await tO(c);if(l){i=l;continue}if(u.isDirectory()){i=null;continue}return nO(t,c,u,r)}return i?rO(i):$s(404)}return n?rO(n):s.isDirectory()?b1e(e,r):nO(t,e,s,r)}async function R1e(t,e,r){let n=p1e(r);n.path=e;let s=m1e(e,n.root),{path:i,parts:o}=s;if(s.statusCode!==void 0)return $s(s.statusCode);if((ar.enabled||n.dotfiles!==0)&&s1e(o))switch(n.dotfiles){case 0:ar('allow dotfile "%s"',i);break;case 2:return ar('deny dotfile "%s"',i),$s(403);case 1:default:return ar('ignore dotfile "%s"',i),$s(404)}return n.index.length&&sG(e)?E1e(t,i,n):S1e(t,i,n)}iG.exports.send=R1e});var aG=E((hqe,ml)=>{"use strict";var T1e=V1().isUtf8MimeType,$1e=z1(),sO=oG().send;ml.exports=sO;ml.exports.default=sO;ml.exports.send=sO;ml.exports.isUtf8MimeType=T1e;ml.exports.mime=$1e});var cG=E((pqe,Md)=>{"use strict";function oO(t){if(!new.target)return new oO(t);let{supportedValues:e=[],cache:r}=t&&typeof t=="object"&&t||{};this.supportedValues=e,this.cache=r}oO.prototype.negotiate=function(t){return typeof t!="string"?null:this.cache?(this.cache.has(t)||this.cache.set(t,Dd(t,this.supportedValues)),this.cache.get(t)):Dd(t,this.supportedValues)};function Dd(t,e){if(!t||!Array.isArray(e)||e.length===0)return null;if(t==="*")return e[0];let r=null,n=1/0,s=0;function i(o,a){if(a===0||s>a)return!1;let c=o==="*"&&e[0]||o,l=e.indexOf(c);return l===-1?!1:l===0&&a===1?(r=c,!0):((s<a||n>l)&&(r=c,n=l,s=a),!1)}return O1e(t,i),r}var Ad=0,kd=1,Qy=2,iO=3;function O1e(t,e){let r="",n,s=Ad;for(let i=0,o=t.length;i<o;++i){let a=t[i];if(!(a===" "||a==="	")){if(a===";"){s===kd&&(s=Qy,n="");continue}else if(a===","){if(s===kd){if(e(r,1)){s=iO;break}s=Ad,r=""}else if(s===Qy){if(e(r,parseFloat(n)||0)){s=iO;break}s=Ad,r="",n=""}continue}else if(s===Qy){if(a==="q"||a==="=")continue;if(a==="."||a==="1"||a==="0"||a==="2"||a==="3"||a==="4"||a==="5"||a==="6"||a==="7"||a==="8"||a==="9"){n+=a;continue}}else if(s===Ad){s=kd,r+=a;continue}if(s===kd){let c=t[i-1];(c===" "||c==="	")&&(r=""),r+=a;continue}if(e(r,parseFloat(n)||0)){s=iO;break}s=Ad,r=a,n=""}}s===kd?e(r,1):s===Qy&&e(r,parseFloat(n)||0)}Md.exports=Dd;Md.exports.default=Dd;Md.exports.negotiate=Dd;Md.exports.Negotiator=oO});var fG=E((aO,uG)=>{var Zy=require("buffer"),Os=Zy.Buffer;function lG(t,e){for(var r in t)e[r]=t[r]}Os.from&&Os.alloc&&Os.allocUnsafe&&Os.allocUnsafeSlow?uG.exports=Zy:(lG(Zy,aO),aO.Buffer=wa);function wa(t,e,r){return Os(t,e,r)}wa.prototype=Object.create(Os.prototype);lG(Os,wa);wa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Os(t,e,r)};wa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Os(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};wa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Os(t)};wa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Zy.SlowBuffer(t)}});var yG=E((mqe,cO)=>{"use strict";cO.exports=q1e;cO.exports.parse=B1e;var dG=require("path").basename,P1e=fG().Buffer,x1e=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,C1e=/%[0-9A-Fa-f]{2}/,N1e=/%([0-9A-Fa-f]{2})/g,pG=/[^\x20-\x7e\xa0-\xff]/g,I1e=/\\([\u0000-\u007f])/g,A1e=/([\\"])/g,hG=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,k1e=/^[\x20-\x7e\x80-\xff]+$/,D1e=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,M1e=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,j1e=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function q1e(t,e){var r=e||{},n=r.type||"attachment",s=L1e(t,r.fallback);return F1e(new gG(n,s))}function L1e(t,e){if(t!==void 0){var r={};if(typeof t!="string")throw new TypeError("filename must be a string");if(e===void 0&&(e=!0),typeof e!="string"&&typeof e!="boolean")throw new TypeError("fallback must be a string or boolean");if(typeof e=="string"&&pG.test(e))throw new TypeError("fallback must be ISO-8859-1 string");var n=dG(t),s=k1e.test(n),i=typeof e!="string"?e&&mG(n):dG(e),o=typeof i=="string"&&i!==n;return(o||!s||C1e.test(n))&&(r["filename*"]=n),(s||o)&&(r.filename=o?i:n),r}}function F1e(t){var e=t.parameters,r=t.type;if(!r||typeof r!="string"||!D1e.test(r))throw new TypeError("invalid type");var n=String(r).toLowerCase();if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),o=0;o<i.length;o++){s=i[o];var a=s.substr(-1)==="*"?G1e(e[s]):H1e(e[s]);n+="; "+s+"="+a}return n}function U1e(t){var e=M1e.exec(t);if(!e)throw new TypeError("invalid extended field value");var r=e[1].toLowerCase(),n=e[2],s,i=n.replace(N1e,V1e);switch(r){case"iso-8859-1":s=mG(i);break;case"utf-8":s=P1e.from(i,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return s}function mG(t){return String(t).replace(pG,"?")}function B1e(t){if(!t||typeof t!="string")throw new TypeError("argument string is required");var e=j1e.exec(t);if(!e)throw new TypeError("invalid type format");var r=e[0].length,n=e[1].toLowerCase(),s,i=[],o={},a;for(r=hG.lastIndex=e[0].substr(-1)===";"?r-1:r;e=hG.exec(t);){if(e.index!==r)throw new TypeError("invalid parameter format");if(r+=e[0].length,s=e[1].toLowerCase(),a=e[2],i.indexOf(s)!==-1)throw new TypeError("invalid duplicate parameter");if(i.push(s),s.indexOf("*")+1===s.length){s=s.slice(0,-1),a=U1e(a),o[s]=a;continue}typeof o[s]!="string"&&(a[0]==='"'&&(a=a.substr(1,a.length-2).replace(I1e,"$1")),o[s]=a)}if(r!==-1&&r!==t.length)throw new TypeError("invalid parameter format");return new gG(n,o)}function V1e(t,e){return String.fromCharCode(parseInt(e,16))}function z1e(t){return"%"+String(t).charCodeAt(0).toString(16).toUpperCase()}function H1e(t){var e=String(t);return'"'+e.replace(A1e,"\\$1")+'"'}function G1e(t){var e=String(t),r=encodeURIComponent(e).replace(x1e,z1e);return"UTF-8''"+r}function gG(t,e){this.type=t,this.parameters=e}});var bG=E((gqe,wG)=>{"use strict";var W1e=require("node:os"),Jr=require("node:path"),e0=require("node:fs/promises"),_G=Z0(),vG=Math.max(1,W1e.cpus().length-1),ba={_getExtendedInfo:async function(t,e){let r=t.split(Jr.sep).length,n=await e0.readdir(t),s=async o=>{let a=Jr.join(t,o),c;try{c=await e0.stat(a)}catch{return}c.isDirectory()?(e.totalFolderCount++,a.split(Jr.sep).length===r+1&&e.folderCount++,await ba._getExtendedInfo(a,e)):(e.totalSize+=c.size,e.totalFileCount++,a.split(Jr.sep).length===r+1&&e.fileCount++,e.lastModified=Math.max(e.lastModified,c.mtimeMs))},i=_G.promise(s,vG);await Promise.all(n.map(o=>i.push(o)))},getExtendedInfo:async function(t){let e={totalSize:0,fileCount:0,totalFileCount:0,folderCount:0,totalFolderCount:0,lastModified:0};return await ba._getExtendedInfo(t,e),e},list:async function(t,e,r){let n={dirs:[],files:[]},s=await e0.readdir(t);if((r==="deny"||r==="ignore")&&(s=s.filter(a=>a.charAt(0)!==".")),s.length<1)return n;let i=async a=>{let c;try{c=await e0.stat(Jr.join(t,a))}catch{return}let l={name:a,stats:c};c.isDirectory()?(e.extendedFolderInfo&&(l.extendedInfo=await ba.getExtendedInfo(Jr.join(t,a))),n.dirs.push(l)):n.files.push(l)},o=_G.promise(i,vG);return await Promise.all(s.map(a=>o.push(a))),n.dirs.sort((a,c)=>a.name.localeCompare(c.name)),n.files.sort((a,c)=>a.name.localeCompare(c.name)),n},send:async function({reply:t,dir:e,options:r,route:n,prefix:s,dotfiles:i}){if(t.request.query.format==="html"&&typeof r.render!="function")throw new TypeError("The `list.render` option must be a function and is required with the URL parameter `format=html`");let o;try{o=await ba.list(e,r,i)}catch{return t.callNotFound()}if((t.request.query.format||r.format)!=="html"){if(r.jsonFormat!=="extended"){let l={dirs:[],files:[]};o.dirs.forEach(u=>l.dirs.push(u.name)),o.files.forEach(u=>l.files.push(u.name)),await t.send(l)}else await t.send(o);return}let c=r.render(o.dirs.map(l=>ba.htmlInfo(l,n,s,r)),o.files.map(l=>ba.htmlInfo(l,n,s,r)));await t.type("text/html").send(c)},htmlInfo:function(t,e,r,n){return n.names?.includes(Jr.basename(e))&&(e=Jr.normalize(Jr.join(e,".."))),{href:encodeURI(Jr.join(r,e,t.name).replace(/\\/gu,"/")),name:t.name,stats:t.stats,extendedInfo:t.extendedInfo}},handle:function(t,e){return e.names?.includes(Jr.basename(t))||((e.names?.includes("/")&&t[t.length-1]==="/")??!1)},path:function(t,e){let r=e[e.length-1]==="/"?e+"none":e;return Jr.dirname(Jr.join(t,r))},validateOptions:function(t){if(t.list){if(Array.isArray(t.root))return new TypeError("multi-root with list option is not supported");if(t.list.format&&t.list.format!=="json"&&t.list.format!=="html")return new TypeError("The `list.format` option must be json or html");if(t.list.names&&!Array.isArray(t.list.names))return new TypeError("The `list.names` option must be an array");if(t.list.jsonFormat!=null&&t.list.jsonFormat!=="names"&&t.list.jsonFormat!=="extended")return new TypeError("The `list.jsonFormat` option must be name or extended");if(t.list.format==="html"&&typeof t.list.render!="function")return new TypeError("The `list.render` option must be a function and is required with html format")}}};wG.exports=ba});var PG=E((yqe,t0)=>{"use strict";var ii=require("node:path"),{fileURLToPath:EG}=require("node:url"),{statSync:OG}=require("node:fs"),{glob:K1e}=X4(),J1e=B1(),jd=aG(),Y1e=cG(),X1e=yG(),Ea=bG(),SG=/\/$/u,Q1e=/\*/gu,Z1e=["br","gzip","deflate"];jd.mime.default_type="application/octet-stream";var RG={br:".br",gzip:".gz"};async function uO(t,e){(e.serve!==!1||e.root!==void 0)&&(e.root=eOe(e.root),tOe(t,e.root));let r=e.setHeaders;if(r!==void 0&&typeof r!="function")throw new TypeError("The `setHeaders` option must be a function");let n=Ea.validateOptions(e);if(n)throw n;e.dotfiles??="allow";let s={root:e.root,acceptRanges:e.acceptRanges,contentType:e.contentType,cacheControl:e.cacheControl,dotfiles:e.dotfiles,etag:e.etag,extensions:e.extensions,immutable:e.immutable,index:e.index,lastModified:e.lastModified,maxAge:e.maxAge},i=e.prefix??="/";e.prefixAvoidTrailingSlash||(i=i[i.length-1]==="/"?i:i+"/");let o={constraints:e.constraints,schema:{hide:e.schemaHide??!0},logLevel:e.logLevel,errorHandler(d,p,f){if(d?.code==="ERR_STREAM_PREMATURE_CLOSE"){f.request.raw.destroy();return}t.errorHandler(d,p,f)}};if(e.decorateReply!==!1&&(t.decorateReply("sendFile",function(d,p,f){let h=typeof p=="object"?p:f,m=typeof p=="string"?p:h?.root;return c(this.request,this,d,m||s.root,0,h),this}),t.decorateReply("download",function(d,p,f={}){let{root:h,...m}=typeof p=="object"?p:f;return p=typeof p=="string"?p:d,this.header("content-disposition",X1e(p)),c(this.request,this,d,h,0,m),this})),e.serve!==!1){if(e.wildcard&&typeof e.wildcard!="boolean")throw new TypeError('"wildcard" option must be a boolean');if(e.wildcard===void 0||e.wildcard===!0)t.route({...o,method:["HEAD","GET"],path:i+"*",handler(d,p){c(d,p,"/"+d.params["*"],s.root)}}),e.redirect===!0&&i!==e.prefix&&t.get(e.prefix,o,(d,p)=>{p.redirect($G(d.raw.url),301)});else{let d=new Set(e.index===void 0?["index.html"]:[].concat(e.index)),p=new Map,f=new Set,h=Array.isArray(s.root)?s.root:[s.root];for(let m of h){m=m.split(ii.win32.sep).join(ii.posix.sep),!m.endsWith("/")&&(m+="/");let y=await K1e("**/**",{cwd:m,absolute:!1,follow:!0,nodir:!0,dot:e.serveDotFiles,ignore:e.globIgnore});for(let g of y){g=g.split(ii.win32.sep).join(ii.posix.sep);let w=i+g;if(f.has(w))continue;f.add(w),l(o,w,`/${g}`,m);let _=ii.posix.basename(w);d.has(_)&&!p.has(_)&&p.set(ii.posix.dirname(w),m)}}for(let[m,y]of p.entries()){let g=m+(m.endsWith("/")?"":"/"),w="/"+g.replace(i,"");l(o,g,w,y),e.redirect===!0&&l(o,g.replace(SG,""),w.replace(SG,""),y)}}}let a=e.allowedPath;async function c(d,p,f,h,m=0,y,g){let w=f,_=Object.assign({},s,y);if(h)Array.isArray(h)?_.root=h[m]:_.root=h;else if(ii.isAbsolute(f)===!1)return p.callNotFound();if(a&&!a(f,_.root,d))return p.callNotFound();let v,S=f;if(e.preCompressed&&(g??=new Set,v=nOe(d.headers,g),v))if(f.endsWith("/")){if(f=lO(f,_.root,_.index),!f)return p.callNotFound();S=S+f+RG[v]}else S=f+RG[v];let{statusCode:$,headers:R,stream:O,type:T,metadata:P}=await jd(d.raw,encodeURI(S),_);switch(T){case"directory":{let I=P.path;if(e.list&&await Ea.send({reply:p,dir:I,options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(C=>p.send(C)),e.redirect===!0)try{p.redirect($G(d.raw.url),301)}catch(C){await p.send(C)}else{if(!f.endsWith("/")&&lO(f,_.root,_.index))return c(d,p,f+"/",h,void 0,void 0,g);p.callNotFound()}break}case"error":{if($===403&&(!_.index||!_.index.length)&&S[S.length-1]==="/"&&e.list){await Ea.send({reply:p,dir:Ea.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(I=>p.send(I));return}if(P.error.code==="ENOENT"){if(e.preCompressed&&v&&e.redirect!==!0&&lO(f,_.root,_.index))return c(d,p,f+"/",h,void 0,void 0,g);if(e.list&&Ea.handle(f,e.list)){await Ea.send({reply:p,dir:Ea.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(I=>p.send(I));return}return Array.isArray(h)&&m<h.length-1?c(d,p,f,h,m+1):e.preCompressed&&!g.has(v)?(g.add(v),c(d,p,w,h,m,void 0,g)):p.callNotFound()}if(P.error.status===404)return p.callNotFound();await p.send(P.error);break}case"file":{let I=p.statusCode!==200?p.statusCode:$;p.code(I),r?.(p.raw,P.path,P.stat),p.headers(R),v&&(p.header("content-type",rOe(f)),p.header("content-encoding",v)),await p.send(O);break}}}function l(d,p,f,h){let m=Object.assign({},d,{method:["HEAD","GET"],url:p,handler:u});m.config??={},m.config.file=f,m.config.rootPath=h,t.route(m)}async function u(d,p){let f=d.routeOptions?.config;return c(d,p,f.file,f.rootPath)}}function eOe(t){if(t===void 0)return t;if(t instanceof URL&&t.protocol==="file:")return EG(t);if(Array.isArray(t)){let e=[];for(let r=0,n=t.length;r<n;++r)t[r]instanceof URL&&t[r].protocol==="file:"?e.push(EG(t[r])):e.push(t[r]);return e}return t}function tOe(t,e){if(e===void 0)throw new Error('"root" option is required');if(Array.isArray(e)){if(!e.length)throw new Error('"root" option array requires one or more paths');if(new Set(e).size!==e.length)throw new Error('"root" option array contains one or more duplicate paths');e.map(r=>TG(t,r));return}if(typeof e=="string")return TG(t,e);throw new Error('"root" option must be a string or array of strings')}function TG(t,e){if(typeof e!="string")throw new TypeError('"root" option must be a string');if(ii.isAbsolute(e)===!1)throw new Error('"root" option must be an absolute path');let r;try{r=OG(e)}catch(n){if(n.code==="ENOENT"){t.log.warn(`"root" path "${e}" must exist`);return}throw n}if(r.isDirectory()===!1)throw new Error('"root" option must point to a directory')}function rOe(t){let e=jd.mime.getType(t)||jd.mime.default_type;return jd.isUtf8MimeType(e)?`${e}; charset=utf-8`:e}function lO(t,e,r=["index.html"]){return Array.isArray(r)?r.find(n=>{let s=ii.join(e,t,n);try{return!OG(s).isDirectory()}catch{return!1}}):!1}function nOe(t,e){if(!("accept-encoding"in t))return;let r=t["accept-encoding"].toLowerCase().replace(Q1e,"gzip");return Y1e.negotiate(r,Z1e.filter(n=>!e.has(n)))}function $G(t){let e=0;for(let r=t.length;e<r&&!(t[e]!=="/"&&t[e]!=="\\");++e);t="/"+t.slice(e);try{let r=new URL(t,"http://localhost.com/"),n=r.pathname;return n+(n[n.length-1]!=="/"?"/":"")+(r.search||"")}catch{let r=new Error(`Invalid redirect URL: ${t}`);throw r.statusCode=400,r}}t0.exports=J1e(uO,{fastify:"5.x",name:"@fastify/static"});t0.exports.default=uO;t0.exports.fastifyStatic=uO});var CG=E((_qe,qd)=>{"use strict";var{FifoMap:sOe}=kv(),iOe=/^[!#$%&'*+\-.^\w`|~]+$/u;function oOe(t){if(iOe.test(t)===!1)throw new TypeError("Fieldname contains invalid characters.")}function xG(t){t=t.trim().toLowerCase();let e=[];if(t.length!==0)if(t.indexOf(",")===-1)e.push(t);else{let r=t.length,n=0,s=0,i;for(n;n<r;++n)i=t[n],i===" "?s=n+1:i===","&&(s!==n&&e.push(t.slice(s,n)),s=n+1);s!==n&&e.push(t.slice(s,n))}return e}function fO(t){let e=new sOe(1e3);return oOe(t),function(r){let n=r.getHeader("Vary");if(!n){r.header("Vary",t);return}if(n==="*")return;if(t==="*"){r.header("Vary","*");return}if(Array.isArray(n)&&(n=n.join(", ")),e.get(n)===void 0){let i=xG(n);i.indexOf("*")!==-1?e.set(n,"*"):i.indexOf(t.toLowerCase())===-1?e.set(n,n+", "+t):e.set(n,null)}let s=e.get(n);s!==null&&r.header("Vary",s)}}qd.exports.createAddFieldnameToVary=fO;qd.exports.addOriginToVaryHeader=fO("Origin");qd.exports.addAccessControlRequestHeadersToVaryHeader=fO("Access-Control-Request-Headers");qd.exports.parse=xG});var DG=E((vqe,n0)=>{"use strict";var aOe=B1(),{addAccessControlRequestHeadersToVaryHeader:cOe,addOriginToVaryHeader:lOe}=CG(),hO={origin:"*",methods:"GET,HEAD,POST",hook:"onRequest",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0},uOe=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend"],dO=["preSerialization","preParsing","onSend"];function AG(t,e){uOe.indexOf(t)===-1&&e(new TypeError("@fastify/cors: Invalid hook option provided."))}function fOe(t,e,r){t.decorateRequest("corsPreflightEnabled",!1);let n=!0,s;if(typeof e=="function")NG(e,t,{hook:hO.hook},r);else if(e.delegator){let{delegator:i,...o}=e;NG(i,t,o,r)}else{let i=r0(e);AG(i.hook,r),dO.indexOf(i.hook)!==-1?t.addHook(i.hook,function(a,c,l,u){Ld(t,i,a,c,u)}):t.addHook(i.hook,function(a,c,l){Ld(t,i,a,c,l)})}e.logLevel!==void 0&&(s=e.logLevel),e.hideOptionsRoute!==void 0&&(n=e.hideOptionsRoute),t.options("*",{schema:{hide:n},logLevel:s},(i,o)=>{if(!i.corsPreflightEnabled){o.callNotFound();return}o.send()}),r()}function NG(t,e,r,n){let s=r?.hook||hO.hook;AG(s,n),t.length===2?dO.indexOf(s)!==-1?e.addHook(s,function(o,a,c,l){IG(t,e,o,a,l)}):e.addHook(s,function(o,a,c){IG(t,e,o,a,c)}):dO.indexOf(s)!==-1?e.addHook(s,function(o,a,c,l){let u=t(o);if(u&&typeof u.then=="function"){u.then(d=>Ld(e,r0(d,!0),o,a,l)).catch(l);return}l(new Error("Invalid CORS origin option"))}):e.addHook(s,function(o,a,c){let l=t(o);if(l&&typeof l.then=="function"){l.then(u=>Ld(e,r0(u,!0),o,a,c)).catch(c);return}c(new Error("Invalid CORS origin option"))})}function IG(t,e,r,n,s){t(r,(i,o)=>{i?s(i):Ld(e,r0(o,!0),r,n,s)})}function r0(t,e){let r={...hO,...t};return Array.isArray(t.origin)&&t.origin.indexOf("*")!==-1&&(r.origin="*"),Number.isInteger(r.cacheControl)?r.cacheControl=`max-age=${r.cacheControl}`:typeof r.cacheControl!="string"&&(r.cacheControl=null),r.dynamic=e||!1,r}function Ld(t,e,r,n,s){let i={...e,...r.routeOptions.config?.cors};(typeof i.origin!="string"&&i.origin!==!1||i.dynamic)&&lOe(n),(typeof i.origin=="function"?pOe(t,i.origin):(a,c)=>c(null,i.origin))(r,(a,c)=>{if(a!==null)return s(a);if(c===!1||r.routeOptions.config?.cors===!1)return s();if(!c)return s(new Error("Invalid CORS origin option"));if(dOe(r,n,c,i),r.raw.method==="OPTIONS"&&i.preflight===!0){if(i.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){n.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,hOe(r,n,i),!i.preflightContinue){n.code(i.optionsSuccessStatus).header("Content-Length","0").send();return}}return s()})}function dOe(t,e,r,n){let s=mOe(t.headers.origin,r);s&&e.header("Access-Control-Allow-Origin",s),n.credentials&&e.header("Access-Control-Allow-Credentials","true"),n.exposedHeaders!==null&&e.header("Access-Control-Expose-Headers",Array.isArray(n.exposedHeaders)?n.exposedHeaders.join(", "):n.exposedHeaders)}function hOe(t,e,r){if(e.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){cOe(e);let n=t.headers["access-control-request-headers"];n!==void 0&&e.header("Access-Control-Allow-Headers",n)}else e.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&e.header("Access-Control-Max-Age",String(r.maxAge)),r.cacheControl&&e.header("Cache-Control",r.cacheControl)}function pOe(t,e){return function(r,n){let s=e.call(t,r.headers.origin,n);s&&typeof s.then=="function"&&s.then(i=>n(null,i),n)}}function mOe(t,e){return typeof e=="string"?e:kG(t,e)?t:!1}function kG(t,e){if(Array.isArray(e)){for(let r=0;r<e.length;++r)if(kG(t,e[r]))return!0;return!1}else return typeof e=="string"?t===e:e instanceof RegExp?(e.lastIndex=0,e.test(t)):!!e}var pO=aOe(fOe,{fastify:"5.x",name:"@fastify/cors"});n0.exports=pO;n0.exports.fastifyCors=pO;n0.exports.default=pO});var LG=E((Sqe,Sa)=>{var gOe=function(t){return t[0]==="U"&&(t=t.slice(1)),{Float32:4,Float64:8,Int8:1,Int16:2,Int32:4,Int64:8}[t]},s0=function(t,e){return e[e.length-1]==="8"?"":t==="big"?"BE":"LE"},i0=function(t,e){typeof e<"u"&&e!==null||(e=t),Sa.exports["pack"+t]=function(r,n){return b=new Buffer(gOe(t)),b["write"+e+s0(n,t)](r,0,!0),b},Sa.exports["unpack"+t]=function(r,n){return r["read"+e+s0(n,t)](0)}},gO=function(t){i0("Int"+t),i0("UInt"+t)};gO(8);gO(16);gO(32);twoToThe32=Math.pow(2,32);var jG=function(t){return function(e,r){var n=s0(r,""),s=t?"U":"",i,o;return n==="LE"?(i=e.readUInt32LE(0),o=e["read"+s+"Int32LE"](4)):(i=e.readUInt32BE(4),o=e["read"+s+"Int32BE"](0)),o*twoToThe32+i}},qG=function(t){return function(e,r){var n=s0(r,""),s=t?"U":"",i=new Buffer(8),o=Math.floor(e/twoToThe32),a=Math.floor(e-o*twoToThe32);return n=="LE"?(i.writeUInt32LE(a,0,!0),i["write"+s+"Int32LE"](o,4,!0)):(i.writeUInt32BE(a,4,!0),i["write"+s+"Int32BE"](o,0,!0)),i}};Sa.exports.unpackInt64=jG(!1);Sa.exports.unpackUInt64=jG(!0);Sa.exports.packInt64=qG(!1);Sa.exports.packUInt64=qG(!0);i0("Float32","Float");i0("Float64","Double")});var FG=E(M=>{(function(){var t,e,r,n,s,i,o,a,c,l,u,d,p={}.hasOwnProperty;s=LG(),M.concat=function(f){var h,m,y,g,w,_,v,S,$,R;if(!t(f))throw new Error("concat must take an array of buffers");for(g=0,v=f.length;g<v;g++)if(h=f[g],!Buffer.isBuffer(h))throw new Error("concat must take an array of buffers");for(R=0,w=0,S=f.length;w<S;w++)h=f[w],R+=h.length;for(y=new Buffer(R),m=0,_=0,$=f.length;_<$;_++)h=f[_],h.copy(y,m),m+=h.length;return y},M.toOscString=function(f,h){var m,y,g,w;if(typeof f!="string")throw new Error("can't pack a non-string into an osc-string");if(g=f.indexOf("\0"),g!==-1&&h)throw e("Can't pack an osc-string that contains NULL characters");for(g!==-1&&(f=f.slice(0,g)),m=y=0,w=u(f);0<=w?y<w:y>w;m=0<=w?++y:--y)f+="\0";return new Buffer(f)},M.splitOscString=function(f,h){var m,y,g,w,_,v,S,$,R;if(!Buffer.isBuffer(f))throw e("Can't split something that isn't a buffer");if(w=f.toString("utf8"),g=w.indexOf("\0"),g===-1){if(h)throw new Error("All osc-strings must contain a null character");return{string:w,rest:new Buffer(0)}}if(R=w.slice(0,g),$=Buffer.byteLength(R)+u(R),h&&$>f.length)throw e("Not enough padding for osc-string");if(h){for(m=y=_=Buffer.byteLength(R),v=$;_<=v?y<v:y>v;m=_<=v?++y:--y)if(f[m]!==0)throw e("Not enough or incorrect padding for osc-string")}return S=f.slice($,f.length),{string:R,rest:S}},M.splitInteger=function(f,h){var m,y,g,w;if(h==null&&(h="Int32"),m=s["pack"+h](0).length,f.length<m)throw new Error("buffer is not big enough for integer type");return y=0,w=s["unpack"+h](f.slice(0,m),"big"),g=f.slice(m,f.length),{integer:w,rest:g}},M.splitTimetag=function(f){var h,m,y,g,w,_,v,S,$;if($="UInt32",y=s["pack"+$](0).length,f.length<y*2)throw new Error("buffer is not big enough to contain a timetag");return h=0,m=y,S=s["unpack"+$](f.slice(h,m),"big"),g=y,w=y+y,_=s["unpack"+$](f.slice(g,w),"big"),v=f.slice(w,f.length),{timetag:[S,_],rest:v}},n=2208988800,r=4294967296,M.dateToTimetag=function(f){return M.timestampToTimetag(f.getTime()/1e3)},M.timestampToTimetag=function(f){var h,m;return m=Math.floor(f),h=f-m,a(m,h)},M.timetagToTimestamp=function(f){var h;return h=f[0]+M.ntpToFractionalSeconds(f[1]),h-n},a=function(f,h){var m,y;return y=f+n,m=Math.round(r*h),[y,m]},M.timetagToDate=function(f){var h,m,y,g,w;return w=f[0],g=f[1],w=w-n,y=M.ntpToFractionalSeconds(g),h=new Date,h.setTime(w*1e3+y*1e3),m=new Date,m.setUTCFullYear(h.getUTCFullYear()),m.setUTCMonth(h.getUTCMonth()),m.setUTCDate(h.getUTCDate()),m.setUTCHours(h.getUTCHours()),m.setUTCMinutes(h.getUTCMinutes()),m.setUTCSeconds(h.getUTCSeconds()),m.setUTCMilliseconds(y*1e3),m},M.deltaTimetag=function(f,h){var m;return m=(h??new Date)/1e3,M.timestampToTimetag(m+f)},M.ntpToFractionalSeconds=function(f){return parseFloat(f)/r},M.toTimetagBuffer=function(f){var h,m,y;if(typeof f=="number")f=M.timestampToTimetag(f);else if(typeof f=="object"&&"getTime"in f)f=M.dateToTimetag(f);else if(f.length!==2)throw new Error("Invalid timetag"+f);return y="UInt32",h=s["pack"+y](f[0],"big"),m=s["pack"+y](f[1],"big"),M.concat([h,m])},M.toIntegerBuffer=function(f,h){if(h==null&&(h="Int32"),typeof f!="number")throw new Error("cannot pack a non-number into an integer buffer");return s["pack"+h](f,"big")},l={s:{representation:"string",split:function(f,h){var m;return m=M.splitOscString(f,h),{value:m.string,rest:m.rest}},toArg:function(f,h){if(typeof f!="string")throw new Error("expected string");return M.toOscString(f,h)}},i:{representation:"integer",split:function(f,h){var m;return m=M.splitInteger(f),{value:m.integer,rest:m.rest}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return M.toIntegerBuffer(f)}},t:{representation:"timetag",split:function(f,h){var m;return m=M.splitTimetag(f),{value:m.timetag,rest:m.rest}},toArg:function(f,h){return M.toTimetagBuffer(f)}},f:{representation:"float",split:function(f,h){return{value:s.unpackFloat32(f.slice(0,4),"big"),rest:f.slice(4,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat32(f,"big")}},d:{representation:"double",split:function(f,h){return{value:s.unpackFloat64(f.slice(0,8),"big"),rest:f.slice(8,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat64(f,"big")}},b:{representation:"blob",split:function(f,h){var m,y;return y=M.splitInteger(f),m=y.integer,f=y.rest,{value:f.slice(0,m),rest:f.slice(m,f.length)}},toArg:function(f,h){var m;if(!Buffer.isBuffer(f))throw new Error("expected node.js Buffer");return m=M.toIntegerBuffer(f.length),M.concat([m,f])}},T:{representation:"true",split:function(f,h){return{rest:f,value:!0}},toArg:function(f,h){if(!f&&h)throw new Error("true must be true");return new Buffer(0)}},F:{representation:"false",split:function(f,h){return{rest:f,value:!1}},toArg:function(f,h){if(f&&h)throw new Error("false must be false");return new Buffer(0)}},N:{representation:"null",split:function(f,h){return{rest:f,value:null}},toArg:function(f,h){if(f&&h)throw new Error("null must be false");return new Buffer(0)}},I:{representation:"bang",split:function(f,h){return{rest:f,value:"bang"}},toArg:function(f,h){return new Buffer(0)}}},M.oscTypeCodeToTypeString=function(f){var h;return(h=l[f])!=null?h.representation:void 0},M.typeStringToOscTypeCode=function(f){var h,m;for(h in l)if(p.call(l,h)&&(m=l[h].representation,m===f))return h;return null},M.argToTypeCode=function(f,h){var m,y;if(f?.type!=null&&typeof f.type=="string"&&(m=M.typeStringToOscTypeCode(f.type))!=null)return m;if(y=f?.value!=null?f.value:f,h&&y==null)throw new Error("Argument has no value");if(typeof y=="string")return"s";if(typeof y=="number")return"f";if(Buffer.isBuffer(y))return"b";if(typeof y=="boolean")return y?"T":"F";if(y===null)return"N";throw new Error("I don't know what type this is supposed to be.")},M.splitOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return l[y].split(f,m);throw new Error("I don't understand how I'm supposed to unpack "+h)},M.toOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return l[y].toArg(f,m);throw new Error("I don't know how to pack "+h)},M.fromOscMessage=function(f,h){var m,y,g,w,_,v,S,$,R,O,T,P;if($=M.splitOscString(f,h),m=$.string,f=$.rest,h&&m[0]!=="/")throw e("addresses must start with /");if(!f.length)return{address:m,args:[]};if(R=M.splitOscString(f,h),P=R.string,f=R.rest,P[0]!==","){if(h)throw e("Argument lists must begin with ,");return{address:m,args:[]}}for(P=P.slice(1,+P.length+1||9e9),g=[],w=[g],v=0,S=P.length;v<S;v++){if(O=P[v],O==="["){w.push([]);continue}if(O==="]"){if(w.length<=1){if(h)throw new e("Mismatched ']' character.")}else _=w.pop(),w[w.length-1].push({type:"array",value:_});continue}if(T=M.oscTypeCodeToTypeString(O),T==null)throw new Error("I don't understand the argument code "+O);y=M.splitOscArgument(f,T,h),y!=null&&(f=y.rest),w[w.length-1].push({type:T,value:y?.value})}if(w.length!==1&&h)throw new e("Mismatched '[' character");return{address:m,args:g,oscType:"message"}},M.fromOscBundle=function(f,h){var m,y,g,w,_;if(g=M.splitOscString(f,h),m=g.string,f=g.rest,m!=="#bundle")throw new Error("osc-bundles must begin with #bundle");return w=M.splitTimetag(f),_=w.timetag,f=w.rest,y=c(f,function(v){return M.fromOscPacket(v,h)}),{timetag:_,elements:y,oscType:"bundle"}},M.fromOscPacket=function(f,h){return o(f,h)?M.fromOscBundle(f,h):M.fromOscMessage(f,h)},i=function(f){return t(f)?f:f?.type==="array"&&t(f?.value)||f!=null&&f.type==null&&t(f.value)?f.value:null},d=function(f,h){var m,y,g,w,_,v,S,$,R,O,T;for(v="",_=[],g=0,w=f.length;g<w;g++){if(m=f[g],i(m)!=null){S=d(i(m),h),R=S[0],$=S[1],v+="["+R+"]",_=_.concat($);continue}O=M.argToTypeCode(m,h),O!=null&&(T=m?.value,T===void 0&&(T=m),y=M.toOscArgument(T,M.oscTypeCodeToTypeString(O),h),y!=null&&(_.push(y),v+=O))}return[v,_]},M.toOscMessage=function(f,h){var m,y,g,w,_,v,S,$;if(m=f?.address!=null?f.address:f,typeof m!="string")throw new Error("message must contain an address");return g=f?.args,g===void 0&&(g=[]),t(g)||(w=g,g=[],g[0]=w),_=M.toOscString(m,h),$=d(g,h),S=$[0],v=$[1],S=","+S,y=M.concat(v),S=M.toOscString(S),M.concat([_,S,y])},M.toOscBundle=function(f,h){var m,y,g,w,_,v,S,$,R,O,T,P,I,C,N;if(h&&f?.timetag==null)throw e("bundles must have timetags.");for(N=(P=f?.timetag)!=null?P:new Date,_=(I=f?.elements)!=null?I:[],t(_)||(v=_,_=[],_.push(v)),R=M.toOscString("#bundle"),T=M.toTimetagBuffer(N),O=[],S=0,$=_.length;S<$;S++){w=_[S];try{y=M.toOscPacket(w,h),C=M.toIntegerBuffer(y.length),O.push(M.concat([C,y]))}catch(B){g=B}}return m=M.concat(O),M.concat([R,T,m])},M.toOscPacket=function(f,h){return f?.oscType!=null?f.oscType==="bundle"?M.toOscBundle(f,h):M.toOscMessage(f,h):f?.timetag!=null||f?.elements!=null?M.toOscBundle(f,h):M.toOscMessage(f,h)},M.applyMessageTranformerToBundle=function(f){return function(h){var m,y,g,w,_,v,S,$,R,O,T,P,I,C;if(T=M.splitOscString(h),P=T.string,h=T.rest,P!=="#bundle")throw new Error("osc-bundles must begin with #bundle");for(m=M.toOscString(P),I=h.slice(0,8),h=h.slice(8,h.length),w=c(h,function(N){return M.applyTransform(N,f,M.applyMessageTranformerToBundle(f))}),C=m.length+I.length,_=0,S=w.length;_<S;_++)g=w[_],C+=4+g.length;for(O=new Buffer(C),m.copy(O,0),I.copy(O,m.length),y=m.length+I.length,v=0,$=w.length;v<$;v++)g=w[v],R=M.toIntegerBuffer(g.length),R.copy(O,y),y+=4,g.copy(O,y),y+=g.length;return O}},M.applyTransform=function(f,h,m){return m==null&&(m=M.applyMessageTranformerToBundle(h)),o(f)?m(f):h(f)},M.addressTransform=function(f){return function(h){var m,y,g;return m=M.splitOscString(h),g=m.string,y=m.rest,g=f(g),M.concat([M.toOscString(g),y])}},M.messageTransform=function(f){return function(h){var m;return m=M.fromOscMessage(h),M.toOscMessage(f(m))}},t=Array.isArray,e=function(f){return new Error("Strict Error: "+f)},u=function(f){var h;return h=Buffer.byteLength(f),4-h%4},o=function(f,h){var m;return m=M.splitOscString(f,h).string,m==="#bundle"},c=function(f,h){var m,y,g,w,_,v,S,$;for(g=function(){var R,O;for(O=[];f.length;){if(R=M.splitInteger(f),S=R.integer,f=R.rest,S>f.length)throw new Error("Invalid bundle list: size of element is bigger than buffer");$=f.slice(0,S),f=f.slice(S,f.length);try{O.push(h($))}catch(T){m=T,O.push(null)}}return O}(),v=[],w=0,_=g.length;w<_;w++)y=g[w],y!=null&&v.push(y);return v}}).call(M)});var yO=E(Ps=>{(function(){var t,e;t=FG(),Ps.fromBuffer=function(r,n){return r instanceof ArrayBuffer?r=new Buffer(new Uint8Array(r)):r instanceof Uint8Array&&(r=new Buffer(r)),t.fromOscPacket(r,n)},Ps.toBuffer=function(r,n,s){return typeof r=="string"?t.toOscPacket({address:r,args:n},s):t.toOscPacket(r,n)},Ps.applyAddressTransform=function(r,n){return t.applyTransform(r,t.addressTransform(n))},Ps.applyMessageTransform=function(r,n){return t.applyTransform(r,t.messageTransform(n))},Ps.timetagToDate=t.timetagToDate,Ps.dateToTimetag=t.dateToTimetag,Ps.timetagToTimestamp=t.timetagToTimestamp,Ps.timestampToTimetag=t.timestampToTimetag}).call(Ps)});var e5=E((nLe,ZG)=>{var yl=1e3,_l=yl*60,vl=_l*60,Ta=vl*24,_Oe=Ta*7,vOe=Ta*365.25;ZG.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return wOe(t);if(r==="number"&&isFinite(t))return e.long?EOe(t):bOe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function wOe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*vOe;case"weeks":case"week":case"w":return r*_Oe;case"days":case"day":case"d":return r*Ta;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vl;case"minutes":case"minute":case"mins":case"min":case"m":return r*_l;case"seconds":case"second":case"secs":case"sec":case"s":return r*yl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function bOe(t){var e=Math.abs(t);return e>=Ta?Math.round(t/Ta)+"d":e>=vl?Math.round(t/vl)+"h":e>=_l?Math.round(t/_l)+"m":e>=yl?Math.round(t/yl)+"s":t+"ms"}function EOe(t){var e=Math.abs(t);return e>=Ta?d0(t,e,Ta,"day"):e>=vl?d0(t,e,vl,"hour"):e>=_l?d0(t,e,_l,"minute"):e>=yl?d0(t,e,yl,"second"):t+" ms"}function d0(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var $O=E((sLe,t5)=>{function SOe(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=s,r.enabled=a,r.humanize=e5(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,p=null,f,h;function m(...y){if(!m.enabled)return;let g=m,w=Number(new Date),_=w-(d||w);g.diff=_,g.prev=d,g.curr=w,d=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,($,R)=>{if($==="%%")return"%";v++;let O=r.formatters[R];if(typeof O=="function"){let T=y[v];$=O.call(g,T),y.splice(v,1),v--}return $}),r.formatArgs.call(g,y),(g.log||r.log).apply(g,y)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(u)),h),set:y=>{p=y}}),typeof r.init=="function"&&r.init(m),m}function n(u,d){let p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function i(u,d){let p=0,f=0,h=-1,m=0;for(;p<u.length;)if(f<d.length&&(d[f]===u[p]||d[f]==="*"))d[f]==="*"?(h=f,m=p,f++):(p++,f++);else if(h!==-1)f=h+1,m++,p=m;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(i(u,d))return!1;for(let d of r.names)if(i(u,d))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}t5.exports=SOe});var r5=E((zr,h0)=>{zr.formatArgs=TOe;zr.save=$Oe;zr.load=OOe;zr.useColors=ROe;zr.storage=POe();zr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();zr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ROe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function TOe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+h0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}zr.log=console.debug||console.log||(()=>{});function $Oe(t){try{t?zr.storage.setItem("debug",t):zr.storage.removeItem("debug")}catch{}}function OOe(){let t;try{t=zr.storage.getItem("debug")||zr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function POe(){try{return localStorage}catch{}}h0.exports=$O()(zr);var{formatters:xOe}=h0.exports;xOe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var s5=E((iLe,n5)=>{"use strict";n5.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var a5=E((oLe,o5)=>{"use strict";var COe=require("os"),i5=require("tty"),bn=s5(),{env:Nt}=process,oo;bn("no-color")||bn("no-colors")||bn("color=false")||bn("color=never")?oo=0:(bn("color")||bn("colors")||bn("color=true")||bn("color=always"))&&(oo=1);"FORCE_COLOR"in Nt&&(Nt.FORCE_COLOR==="true"?oo=1:Nt.FORCE_COLOR==="false"?oo=0:oo=Nt.FORCE_COLOR.length===0?1:Math.min(parseInt(Nt.FORCE_COLOR,10),3));function OO(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function PO(t,e){if(oo===0)return 0;if(bn("color=16m")||bn("color=full")||bn("color=truecolor"))return 3;if(bn("color=256"))return 2;if(t&&!e&&oo===void 0)return 0;let r=oo||0;if(Nt.TERM==="dumb")return r;if(process.platform==="win32"){let n=COe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Nt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Nt)||Nt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Nt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Nt.TEAMCITY_VERSION)?1:0;if(Nt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Nt){let n=parseInt((Nt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Nt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Nt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Nt.TERM)||"COLORTERM"in Nt?1:r}function NOe(t){let e=PO(t,t&&t.isTTY);return OO(e)}o5.exports={supportsColor:NOe,stdout:OO(PO(!0,i5.isatty(1))),stderr:OO(PO(!0,i5.isatty(2)))}});var l5=E((It,m0)=>{var IOe=require("tty"),p0=require("util");It.init=LOe;It.log=MOe;It.formatArgs=kOe;It.save=jOe;It.load=qOe;It.useColors=AOe;It.destroy=p0.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");It.colors=[6,2,3,4,5,1];try{let t=a5();t&&(t.stderr||t).level>=2&&(It.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}It.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function AOe(){return"colors"in It.inspectOpts?!!It.inspectOpts.colors:IOe.isatty(process.stderr.fd)}function kOe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+m0.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=DOe()+e+" "+t[0]}function DOe(){return It.inspectOpts.hideDate?"":new Date().toISOString()+" "}function MOe(...t){return process.stderr.write(p0.formatWithOptions(It.inspectOpts,...t)+`
`)}function jOe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function qOe(){return process.env.DEBUG}function LOe(t){t.inspectOpts={};let e=Object.keys(It.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=It.inspectOpts[e[r]]}m0.exports=$O()(It);var{formatters:c5}=m0.exports;c5.o=function(t){return this.inspectOpts.colors=this.useColors,p0.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};c5.O=function(t){return this.inspectOpts.colors=this.useColors,p0.inspect(t,this.inspectOpts)}});var u5=E((aLe,xO)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?xO.exports=r5():xO.exports=l5()});var d5=E((cLe,CO)=>{"use strict";var FOe=Object.prototype.hasOwnProperty,Sr="~";function Gd(){}Object.create&&(Gd.prototype=Object.create(null),new Gd().__proto__||(Sr=!1));function UOe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function f5(t,e,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new UOe(r,n||t,s),o=Sr?Sr+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function g0(t,e){--t._eventsCount===0?t._events=new Gd:delete t._events[e]}function cr(){this._events=new Gd,this._eventsCount=0}cr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)FOe.call(r,n)&&e.push(Sr?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};cr.prototype.listeners=function(e){var r=Sr?Sr+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};cr.prototype.listenerCount=function(e){var r=Sr?Sr+e:e,n=this._events[r];return n?n.fn?1:n.length:0};cr.prototype.emit=function(e,r,n,s,i,o){var a=Sr?Sr+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,i),!0;case 6:return c.fn.call(c.context,r,n,s,i,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var p=c.length,f;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c[d].fn.apply(c[d].context,u)}}return!0};cr.prototype.on=function(e,r,n){return f5(this,e,r,n,!1)};cr.prototype.once=function(e,r,n){return f5(this,e,r,n,!0)};cr.prototype.removeListener=function(e,r,n,s){var i=Sr?Sr+e:e;if(!this._events[i])return this;if(!r)return g0(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!s||o.once)&&(!n||o.context===n)&&g0(this,i);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==r||s&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[i]=c.length===1?c[0]:c:g0(this,i)}return this};cr.prototype.removeAllListeners=function(e){var r;return e?(r=Sr?Sr+e:e,this._events[r]&&g0(this,r)):(this._events=new Gd,this._eventsCount=0),this};cr.prototype.off=cr.prototype.removeListener;cr.prototype.addListener=cr.prototype.on;cr.prefixed=Sr;cr.EventEmitter=cr;typeof CO<"u"&&(CO.exports=cr)});var oi=E((uLe,m5)=>{"use strict";var h5=["nodebuffer","arraybuffer","fragments"],p5=typeof Blob<"u";p5&&h5.push("blob");m5.exports={BINARY_TYPES:h5,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:p5,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Wd=E((fLe,_0)=>{"use strict";var{EMPTY_BUFFER:BOe}=oi(),NO=Buffer[Symbol.species];function VOe(t,e){if(t.length===0)return BOe;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new NO(r.buffer,r.byteOffset,n):r}function g5(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function y5(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function zOe(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function IO(t){if(IO.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new NO(t):ArrayBuffer.isView(t)?e=new NO(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),IO.readOnly=!1),e}_0.exports={concat:VOe,mask:g5,toArrayBuffer:zOe,toBuffer:IO,unmask:y5};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");_0.exports.mask=function(e,r,n,s,i){i<48?g5(e,r,n,s,i):t.mask(e,r,n,s,i)},_0.exports.unmask=function(e,r){e.length<32?y5(e,r):t.unmask(e,r)}}catch{}});var w5=E((dLe,v5)=>{"use strict";var _5=Symbol("kDone"),AO=Symbol("kRun"),kO=class{constructor(e){this[_5]=()=>{this.pending--,this[AO]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[AO]()}[AO](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[_5])}}};v5.exports=kO});var Jd=E((hLe,R5)=>{"use strict";var Kd=require("zlib"),b5=Wd(),HOe=w5(),{kStatusCode:E5}=oi(),GOe=Buffer[Symbol.species],WOe=Buffer.from([0,0,255,255]),w0=Symbol("permessage-deflate"),ai=Symbol("total-length"),wl=Symbol("callback"),ao=Symbol("buffers"),bl=Symbol("error"),v0,DO=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!v0){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;v0=new HOe(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[wl];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){v0.add(s=>{this._decompress(e,r,(i,o)=>{s(),n(i,o)})})}compress(e,r,n){v0.add(s=>{this._compress(e,r,(i,o)=>{s(),n(i,o)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Kd.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=Kd.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[w0]=this,this._inflate[ai]=0,this._inflate[ao]=[],this._inflate.on("error",JOe),this._inflate.on("data",S5)}this._inflate[wl]=n,this._inflate.write(e),r&&this._inflate.write(WOe),this._inflate.flush(()=>{let i=this._inflate[bl];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=b5.concat(this._inflate[ao],this._inflate[ai]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ai]=0,this._inflate[ao]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Kd.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=Kd.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[ai]=0,this._deflate[ao]=[],this._deflate.on("data",KOe)}this._deflate[wl]=n,this._deflate.write(e),this._deflate.flush(Kd.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=b5.concat(this._deflate[ao],this._deflate[ai]);r&&(i=new GOe(i.buffer,i.byteOffset,i.length-4)),this._deflate[wl]=null,this._deflate[ai]=0,this._deflate[ao]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};R5.exports=DO;function KOe(t){this[ao].push(t),this[ai]+=t.length}function S5(t){if(this[ai]+=t.length,this[w0]._maxPayload<1||this[ai]<=this[w0]._maxPayload){this[ao].push(t);return}this[bl]=new RangeError("Max payload size exceeded"),this[bl].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[bl][E5]=1009,this.removeListener("data",S5),this.reset()}function JOe(t){if(this[w0]._inflate=null,this[bl]){this[wl](this[bl]);return}t[E5]=1007,this[wl](t)}});var El=E((pLe,b0)=>{"use strict";var{isUtf8:T5}=require("buffer"),{hasBlob:YOe}=oi(),XOe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function QOe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function MO(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function ZOe(t){return YOe&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}b0.exports={isBlob:ZOe,isValidStatusCode:QOe,isValidUTF8:MO,tokenChars:XOe};if(T5)b0.exports.isValidUTF8=function(t){return t.length<24?MO(t):T5(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");b0.exports.isValidUTF8=function(e){return e.length<32?MO(e):t(e)}}catch{}});var UO=E((mLe,I5)=>{"use strict";var{Writable:ePe}=require("stream"),$5=Jd(),{BINARY_TYPES:tPe,EMPTY_BUFFER:O5,kStatusCode:rPe,kWebSocket:nPe}=oi(),{concat:jO,toArrayBuffer:sPe,unmask:iPe}=Wd(),{isValidStatusCode:oPe,isValidUTF8:P5}=El(),E0=Buffer[Symbol.species],En=0,x5=1,C5=2,N5=3,qO=4,LO=5,S0=6,FO=class extends ePe{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||tPe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[nPe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=En}_write(e,r,n){if(this._opcode===8&&this._state==En)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new E0(n.buffer,n.byteOffset+e,n.length-e),new E0(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new E0(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case En:this.getInfo(e);break;case x5:this.getPayloadLength16(e);break;case C5:this.getPayloadLength64(e);break;case N5:this.getMask();break;case qO:this.getData(e);break;case LO:case S0:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let s=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(s);return}let n=(r[0]&64)===64;if(n&&!this._extensions[$5.extensionName]){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(!this._fragmented){let s=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let s=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(s);return}if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let s=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(s);return}}else{let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let s=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(s);return}}else if(this._masked){let s=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(s);return}this._payloadLength===126?this._state=x5:this._payloadLength===127?this._state=C5:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let s=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(s);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=N5:this._state=qO}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=qO}getData(e){let r=O5;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&iPe(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=LO,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[$5.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(i)}this.dataMessage(r),this._state===En&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=En;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=jO(n,r):this._binaryType==="arraybuffer"?s=sPe(jO(n,r)):this._binaryType==="blob"?s=new Blob(n):s=n,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=En):(this._state=S0,setImmediate(()=>{this.emit("message",s,!0),this._state=En,this.startLoop(e)}))}else{let s=jO(n,r);if(!this._skipUTF8Validation&&!P5(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===LO||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=En):(this._state=S0,setImmediate(()=>{this.emit("message",s,!1),this._state=En,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,O5),this.end();else{let n=e.readUInt16BE(0);if(!oPe(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let s=new E0(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!P5(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,s),this.end()}this._state=En;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=En):(this._state=S0,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=En,this.startLoop(r)}))}createError(e,r,n,s,i){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=i,o[rPe]=s,o}};I5.exports=FO});var zO=E((yLe,D5)=>{"use strict";var{Duplex:gLe}=require("stream"),{randomFillSync:aPe}=require("crypto"),A5=Jd(),{EMPTY_BUFFER:cPe,kWebSocket:lPe,NOOP:uPe}=oi(),{isBlob:Sl,isValidStatusCode:fPe}=El(),{mask:k5,toBuffer:$a}=Wd(),Sn=Symbol("kByteLength"),dPe=Buffer.alloc(4),R0=8*1024,Oa,Rl=R0,Kn=0,hPe=1,pPe=2,BO=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Kn,this.onerror=uPe,this[lPe]=void 0}static frame(e,r){let n,s=!1,i=2,o=!1;r.mask&&(n=r.maskBuffer||dPe,r.generateMask?r.generateMask(n):(Rl===R0&&(Oa===void 0&&(Oa=Buffer.alloc(R0)),aPe(Oa,0,R0),Rl=0),n[0]=Oa[Rl++],n[1]=Oa[Rl++],n[2]=Oa[Rl++],n[3]=Oa[Rl++]),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!r.mask||o)&&r[Sn]!==void 0?a=r[Sn]:(e=Buffer.from(e),a=e.length):(a=e.length,s=r.mask&&r.readOnly&&!o);let c=a;a>=65536?(i+=8,c=127):a>125&&(i+=2,c=126);let l=Buffer.allocUnsafe(s?a+i:i);return l[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(l[0]|=64),l[1]=c,c===126?l.writeUInt16BE(a,2):c===127&&(l[2]=l[3]=0,l.writeUIntBE(a,4,6)),r.mask?(l[1]|=128,l[i-4]=n[0],l[i-3]=n[1],l[i-2]=n[2],l[i-1]=n[3],o?[l,e]:s?(k5(e,n,l,i,a),[l]):(k5(e,n,e,0,a),[l,e])):[l,e]}close(e,r,n,s){let i;if(e===void 0)i=cPe;else{if(typeof e!="number"||!fPe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let o={[Sn]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Kn?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(t.frame(i,o),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Sl(e)?(s=e.size,i=!1):(e=$a(e),s=e.length,i=$a.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Sn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Sl(e)?this._state!==Kn?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Kn?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Sl(e)?(s=e.size,i=!1):(e=$a(e),s=e.length,i=$a.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Sn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Sl(e)?this._state!==Kn?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Kn?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let s=this._extensions[A5.extensionName],i=r.binary?2:1,o=r.compress,a,c;typeof e=="string"?(a=Buffer.byteLength(e),c=!1):Sl(e)?(a=e.size,c=!1):(e=$a(e),a=e.length,c=$a.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=s._threshold),this._compress=o):(o=!1,i=0),r.fin&&(this._firstFragment=!0);let l={[Sn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:c,rsv1:o};Sl(e)?this._state!==Kn?this.enqueue([this.getBlobData,e,this._compress,l,n]):this.getBlobData(e,this._compress,l,n):this._state!==Kn?this.enqueue([this.dispatch,e,this._compress,l,n]):this.dispatch(e,this._compress,l,n)}getBlobData(e,r,n,s){this._bufferedBytes+=n[Sn],this._state=pPe,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(VO,this,a,s);return}this._bufferedBytes-=n[Sn];let o=$a(i);r?this.dispatch(o,r,n,s):(this._state=Kn,this.sendFrame(t.frame(o,n),s),this.dequeue())}).catch(i=>{process.nextTick(mPe,this,i,s)})}dispatch(e,r,n,s){if(!r){this.sendFrame(t.frame(e,n),s);return}let i=this._extensions[A5.extensionName];this._bufferedBytes+=n[Sn],this._state=hPe,i.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");VO(this,c,s);return}this._bufferedBytes-=n[Sn],this._state=Kn,n.readOnly=!1,this.sendFrame(t.frame(a,n),s),this.dequeue()})}dequeue(){for(;this._state===Kn&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Sn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Sn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};D5.exports=BO;function VO(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let s=t._queue[n],i=s[s.length-1];typeof i=="function"&&i(e)}}function mPe(t,e,r){VO(t,e,r),t.onerror(e)}});var z5=E((_Le,V5)=>{"use strict";var{kForOnEventAttribute:Yd,kListener:HO}=oi(),M5=Symbol("kCode"),j5=Symbol("kData"),q5=Symbol("kError"),L5=Symbol("kMessage"),F5=Symbol("kReason"),Tl=Symbol("kTarget"),U5=Symbol("kType"),B5=Symbol("kWasClean"),ci=class{constructor(e){this[Tl]=null,this[U5]=e}get target(){return this[Tl]}get type(){return this[U5]}};Object.defineProperty(ci.prototype,"target",{enumerable:!0});Object.defineProperty(ci.prototype,"type",{enumerable:!0});var Pa=class extends ci{constructor(e,r={}){super(e),this[M5]=r.code===void 0?0:r.code,this[F5]=r.reason===void 0?"":r.reason,this[B5]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[M5]}get reason(){return this[F5]}get wasClean(){return this[B5]}};Object.defineProperty(Pa.prototype,"code",{enumerable:!0});Object.defineProperty(Pa.prototype,"reason",{enumerable:!0});Object.defineProperty(Pa.prototype,"wasClean",{enumerable:!0});var $l=class extends ci{constructor(e,r={}){super(e),this[q5]=r.error===void 0?null:r.error,this[L5]=r.message===void 0?"":r.message}get error(){return this[q5]}get message(){return this[L5]}};Object.defineProperty($l.prototype,"error",{enumerable:!0});Object.defineProperty($l.prototype,"message",{enumerable:!0});var Xd=class extends ci{constructor(e,r={}){super(e),this[j5]=r.data===void 0?null:r.data}get data(){return this[j5]}};Object.defineProperty(Xd.prototype,"data",{enumerable:!0});var gPe={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[Yd]&&s[HO]===e&&!s[Yd])return;let n;if(t==="message")n=function(i,o){let a=new Xd("message",{data:o?i:i.toString()});a[Tl]=this,T0(e,this,a)};else if(t==="close")n=function(i,o){let a=new Pa("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Tl]=this,T0(e,this,a)};else if(t==="error")n=function(i){let o=new $l("error",{error:i,message:i.message});o[Tl]=this,T0(e,this,o)};else if(t==="open")n=function(){let i=new ci("open");i[Tl]=this,T0(e,this,i)};else return;n[Yd]=!!r[Yd],n[HO]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[HO]===e&&!r[Yd]){this.removeListener(t,r);break}}};V5.exports={CloseEvent:Pa,ErrorEvent:$l,Event:ci,EventTarget:gPe,MessageEvent:Xd};function T0(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var GO=E((vLe,H5)=>{"use strict";var{tokenChars:Qd}=El();function xs(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function yPe(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,o,a,c=-1,l=-1,u=-1,d=0;for(;d<t.length;d++)if(l=t.charCodeAt(d),o===void 0)if(u===-1&&Qd[l]===1)c===-1&&(c=d);else if(d!==0&&(l===32||l===9))u===-1&&c!==-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(c,u);l===44?(xs(e,f,r),r=Object.create(null)):o=f,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(u===-1&&Qd[l]===1)c===-1&&(c=d);else if(l===32||l===9)u===-1&&c!==-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d),xs(r,t.slice(c,u),!0),l===44&&(xs(e,o,r),r=Object.create(null),o=void 0),c=u=-1}else if(l===61&&c!==-1&&u===-1)a=t.slice(c,d),c=u=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(s){if(Qd[l]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);c===-1?c=d:n||(n=!0),s=!1}else if(i)if(Qd[l]===1)c===-1&&(c=d);else if(l===34&&c!==-1)i=!1,u=d;else if(l===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(l===34&&t.charCodeAt(d-1)===61)i=!0;else if(u===-1&&Qd[l]===1)c===-1&&(c=d);else if(c!==-1&&(l===32||l===9))u===-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(c,u);n&&(f=f.replace(/\\/g,""),n=!1),xs(r,a,f),l===44&&(xs(e,o,r),r=Object.create(null),o=void 0),a=void 0,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(c===-1||i||l===32||l===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=d);let p=t.slice(c,u);return o===void 0?xs(e,p,r):(a===void 0?xs(r,p,!0):n?xs(r,a,p.replace(/\\/g,"")):xs(r,a,p),xs(e,o,r)),e}function _Pe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}H5.exports={format:_Pe,parse:yPe}});var x0=E((ELe,n6)=>{"use strict";var vPe=require("events"),wPe=require("https"),bPe=require("http"),K5=require("net"),EPe=require("tls"),{randomBytes:SPe,createHash:RPe}=require("crypto"),{Duplex:wLe,Readable:bLe}=require("stream"),{URL:WO}=require("url"),co=Jd(),TPe=UO(),$Pe=zO(),{isBlob:OPe}=El(),{BINARY_TYPES:G5,EMPTY_BUFFER:$0,GUID:PPe,kForOnEventAttribute:KO,kListener:xPe,kStatusCode:CPe,kWebSocket:At,NOOP:J5}=oi(),{EventTarget:{addEventListener:NPe,removeEventListener:IPe}}=z5(),{format:APe,parse:kPe}=GO(),{toBuffer:DPe}=Wd(),MPe=30*1e3,Y5=Symbol("kAborted"),JO=[8,13],li=["CONNECTING","OPEN","CLOSING","CLOSED"],jPe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,at=class t extends vPe{constructor(e,r,n){super(),this._binaryType=G5[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=$0,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),X5(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){G5.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new TPe({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new $Pe(e,this._extensions,n.generateMask);this._receiver=s,this._sender=i,this._socket=e,s[At]=this,i[At]=this,e[At]=this,s.on("conclude",FPe),s.on("drain",UPe),s.on("error",BPe),s.on("message",VPe),s.on("ping",zPe),s.on("pong",HPe),i.onerror=GPe,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",e6),e.on("data",P0),e.on("end",t6),e.on("error",r6),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[co.extensionName]&&this._extensions[co.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yr(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Z5(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){YO(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||$0,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){YO(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||$0,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){YO(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[co.extensionName]||(s.compress=!1),this._sender.send(e||$0,s,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yr(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(at,"CONNECTING",{enumerable:!0,value:li.indexOf("CONNECTING")});Object.defineProperty(at.prototype,"CONNECTING",{enumerable:!0,value:li.indexOf("CONNECTING")});Object.defineProperty(at,"OPEN",{enumerable:!0,value:li.indexOf("OPEN")});Object.defineProperty(at.prototype,"OPEN",{enumerable:!0,value:li.indexOf("OPEN")});Object.defineProperty(at,"CLOSING",{enumerable:!0,value:li.indexOf("CLOSING")});Object.defineProperty(at.prototype,"CLOSING",{enumerable:!0,value:li.indexOf("CLOSING")});Object.defineProperty(at,"CLOSED",{enumerable:!0,value:li.indexOf("CLOSED")});Object.defineProperty(at.prototype,"CLOSED",{enumerable:!0,value:li.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(at.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(at.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[KO])return e[xPe];return null},set(e){for(let r of this.listeners(t))if(r[KO]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[KO]:!0})}})});at.prototype.addEventListener=NPe;at.prototype.removeEventListener=IPe;n6.exports=at;function X5(t,e,r,n){let s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:JO[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=s.autoPong,!JO.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${JO.join(", ")})`);let i;if(e instanceof WO)i=e;else try{i=new WO(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",c;if(i.protocol!=="ws:"&&!o&&!a?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!i.pathname?c="The URL's pathname is empty":i.hash&&(c="The URL contains a fragment identifier"),c){let m=new SyntaxError(c);if(t._redirects===0)throw m;O0(t,m);return}let l=o?443:80,u=SPe(16).toString("base64"),d=o?wPe.request:bPe.request,p=new Set,f;if(s.createConnection=s.createConnection||(o?LPe:qPe),s.defaultPort=s.defaultPort||l,s.port=i.port||l,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(f=new co(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=APe({[co.extensionName]:f.offer()})),r.length){for(let m of r){if(typeof m!="string"||!jPe.test(m)||p.has(m))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(m)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),a){let m=s.path.split(":");s.socketPath=m[0],s.path=m[1]}let h;if(s.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?s.socketPath:i.host;let m=n&&n.headers;if(n={...n,headers:{}},m)for(let[y,g]of Object.entries(m))n.headers[y.toLowerCase()]=g}else if(t.listenerCount("redirect")===0){let m=a?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!m||t._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,m||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),h=t._req=d(s),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(s);s.timeout&&h.on("timeout",()=>{Yr(t,h,"Opening handshake has timed out")}),h.on("error",m=>{h===null||h[Y5]||(h=t._req=null,O0(t,m))}),h.on("response",m=>{let y=m.headers.location,g=m.statusCode;if(y&&s.followRedirects&&g>=300&&g<400){if(++t._redirects>s.maxRedirects){Yr(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new WO(y,e)}catch{let v=new SyntaxError(`Invalid URL: ${y}`);O0(t,v);return}X5(t,w,r,n)}else t.emit("unexpected-response",h,m)||Yr(t,h,`Unexpected server response: ${m.statusCode}`)}),h.on("upgrade",(m,y,g)=>{if(t.emit("upgrade",m),t.readyState!==at.CONNECTING)return;h=t._req=null;let w=m.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){Yr(t,y,"Invalid Upgrade header");return}let _=RPe("sha1").update(u+PPe).digest("base64");if(m.headers["sec-websocket-accept"]!==_){Yr(t,y,"Invalid Sec-WebSocket-Accept header");return}let v=m.headers["sec-websocket-protocol"],S;if(v!==void 0?p.size?p.has(v)||(S="Server sent an invalid subprotocol"):S="Server sent a subprotocol but none was requested":p.size&&(S="Server sent no subprotocol"),S){Yr(t,y,S);return}v&&(t._protocol=v);let $=m.headers["sec-websocket-extensions"];if($!==void 0){if(!f){Yr(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let R;try{R=kPe($)}catch{Yr(t,y,"Invalid Sec-WebSocket-Extensions header");return}let O=Object.keys(R);if(O.length!==1||O[0]!==co.extensionName){Yr(t,y,"Server indicated an extension that was not requested");return}try{f.accept(R[co.extensionName])}catch{Yr(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[co.extensionName]=f}t.setSocket(y,g,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(h,t):h.end()}function O0(t,e){t._readyState=at.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function qPe(t){return t.path=t.socketPath,K5.connect(t)}function LPe(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=K5.isIP(t.host)?"":t.host),EPe.connect(t)}function Yr(t,e,r){t._readyState=at.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Yr),e.setHeader?(e[Y5]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(O0,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function YO(t,e,r){if(e){let n=OPe(e)?e.size:DPe(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${li[t.readyState]})`);process.nextTick(r,n)}}function FPe(t,e){let r=this[At];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[At]!==void 0&&(r._socket.removeListener("data",P0),process.nextTick(Q5,r._socket),t===1005?r.close():r.close(t,e))}function UPe(){let t=this[At];t.isPaused||t._socket.resume()}function BPe(t){let e=this[At];e._socket[At]!==void 0&&(e._socket.removeListener("data",P0),process.nextTick(Q5,e._socket),e.close(t[CPe])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function W5(){this[At].emitClose()}function VPe(t,e){this[At].emit("message",t,e)}function zPe(t){let e=this[At];e._autoPong&&e.pong(t,!this._isServer,J5),e.emit("ping",t)}function HPe(t){this[At].emit("pong",t)}function Q5(t){t.resume()}function GPe(t){let e=this[At];e.readyState!==at.CLOSED&&(e.readyState===at.OPEN&&(e._readyState=at.CLOSING,Z5(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function Z5(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),MPe)}function e6(){let t=this[At];this.removeListener("close",e6),this.removeListener("data",P0),this.removeListener("end",t6),t._readyState=at.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[At]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",W5),t._receiver.on("finish",W5))}function P0(t){this[At]._receiver.write(t)||this.pause()}function t6(){let t=this[At];t._readyState=at.CLOSING,t._receiver.end(),this.end()}function r6(){let t=this[At];this.removeListener("error",r6),this.on("error",J5),t&&(t._readyState=at.CLOSING,this.destroy())}});var a6=E((RLe,o6)=>{"use strict";var SLe=x0(),{Duplex:WPe}=require("stream");function s6(t){t.emit("close")}function KPe(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i6(t){this.removeListener("error",i6),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function JPe(t,e){let r=!0,n=new WPe({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,o){let a=!o&&n._readableState.objectMode?i.toString():i;n.push(a)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(s6,n);return}let o=!1;t.once("error",function(c){o=!0,i(c)}),t.once("close",function(){o||i(s),process.nextTick(s6,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,o)});return}t.send(s,o)},n.on("end",KPe),n.on("error",i6),n}o6.exports=JPe});var l6=E((TLe,c6)=>{"use strict";var{tokenChars:YPe}=El();function XPe(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let o=t.charCodeAt(s);if(n===-1&&YPe[o]===1)r===-1&&(r=s);else if(s!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=s);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}c6.exports={parse:XPe}});var g6=E((OLe,m6)=>{"use strict";var QPe=require("events"),C0=require("http"),{Duplex:$Le}=require("stream"),{createHash:ZPe}=require("crypto"),u6=GO(),xa=Jd(),exe=l6(),txe=x0(),{GUID:rxe,kWebSocket:nxe}=oi(),sxe=/^[+/0-9A-Za-z]{22}==$/,f6=0,d6=1,p6=2,XO=class extends QPe{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:txe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=C0.createServer((n,s)=>{let i=C0.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=ixe(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=f6}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===p6){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Zd,this);return}if(e&&this.once("close",e),this._state!==d6)if(this._state=d6,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Zd,this):process.nextTick(Zd,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Zd(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",h6);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Ca(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Ca(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!sxe.test(i)){Ca(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){Ca(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){eh(r,400);return}let c=e.headers["sec-websocket-protocol"],l=new Set;if(c!==void 0)try{l=exe.parse(c)}catch{Ca(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&u!==void 0){let p=new xa(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=u6.parse(u);f[xa.extensionName]&&(p.accept(f[xa.extensionName]),d[xa.extensionName]=p)}catch{Ca(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,m,y)=>{if(!f)return eh(r,h||401,m,y);this.completeUpgrade(d,i,l,e,r,n,s)});return}if(!this.options.verifyClient(p))return eh(r,401)}this.completeUpgrade(d,i,l,e,r,n,s)}completeUpgrade(e,r,n,s,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[nxe])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>f6)return eh(i,503);let l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${ZPe("sha1").update(r+rxe).digest("base64")}`],u=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;d&&(l.push(`Sec-WebSocket-Protocol: ${d}`),u._protocol=d)}if(e[xa.extensionName]){let d=e[xa.extensionName].params,p=u6.format({[xa.extensionName]:[d]});l.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=e}this.emit("headers",l,s),i.write(l.concat(`\r
`).join(`\r
`)),i.removeListener("error",h6),u.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Zd,this)})),a(u,s)}};m6.exports=XO;function ixe(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Zd(t){t._state=p6,t.emit("close")}function h6(){this.destroy()}function eh(t,e,r,n){r=r||C0.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${C0.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function Ca(t,e,r,n,s){if(t.listenerCount("wsClientError")){let i=new Error(s);Error.captureStackTrace(i,Ca),t.emit("wsClientError",i,r,e)}else eh(r,n,s)}});var _6=E((PLe,y6)=>{"use strict";var ui=x0();ui.createWebSocketStream=a6();ui.Server=g6();ui.Receiver=UO();ui.Sender=zO();ui.WebSocket=ui;ui.WebSocketServer=ui.Server;y6.exports=ui});var w6=E((xLe,v6)=>{"use strict";v6.exports=_6()});var QO=E((N0,b6)=>{(function(t,e){typeof N0=="object"?b6.exports=N0=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(N0,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var s=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function g(){}return function(w){var _;return g.prototype=w,_=new g,g.prototype=null,_}}(),o={},a=o.lib={},c=a.Base=function(){return{extend:function(g){var w=i(this);return g&&w.mixIn(g),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var w in g)g.hasOwnProperty(w)&&(this[w]=g[w]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=c.extend({init:function(g,w){g=this.words=g||[],w!=r?this.sigBytes=w:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var w=this.words,_=g.words,v=this.sigBytes,S=g.sigBytes;if(this.clamp(),v%4)for(var $=0;$<S;$++){var R=_[$>>>2]>>>24-$%4*8&255;w[v+$>>>2]|=R<<24-(v+$)%4*8}else for(var O=0;O<S;O+=4)w[v+O>>>2]=_[O>>>2];return this.sigBytes+=S,this},clamp:function(){var g=this.words,w=this.sigBytes;g[w>>>2]&=4294967295<<32-w%4*8,g.length=e.ceil(w/4)},clone:function(){var g=c.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var w=[],_=0;_<g;_+=4)w.push(s());return new l.init(w,g)}}),u=o.enc={},d=u.Hex={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(($>>>4).toString(16)),v.push(($&15).toString(16))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v+=2)_[v>>>3]|=parseInt(g.substr(v,2),16)<<24-v%8*4;return new l.init(_,w/2)}},p=u.Latin1={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(String.fromCharCode($))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v++)_[v>>>2]|=(g.charCodeAt(v)&255)<<24-v%4*8;return new l.init(_,w)}},f=u.Utf8={stringify:function(g){try{return decodeURIComponent(escape(p.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return p.parse(unescape(encodeURIComponent(g)))}},h=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=f.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var w,_=this._data,v=_.words,S=_.sigBytes,$=this.blockSize,R=$*4,O=S/R;g?O=e.ceil(O):O=e.max((O|0)-this._minBufferSize,0);var T=O*$,P=e.min(T*4,S);if(T){for(var I=0;I<T;I+=$)this._doProcessBlock(v,I);w=v.splice(0,T),_.sigBytes-=P}return new l.init(w,P)},clone:function(){var g=c.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),m=a.Hasher=h.extend({cfg:c.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(g){return function(w,_){return new g.init(_).finalize(w)}},_createHmacHelper:function(g){return function(w,_){return new y.HMAC.init(g,_).finalize(w)}}}),y=o.algo={};return o}(Math);return t})});var S6=E((I0,E6)=>{(function(t,e){typeof I0=="object"?E6.exports=I0=e(QO()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(I0,function(t){return function(e){var r=t,n=r.lib,s=n.WordArray,i=n.Hasher,o=r.algo,a=[],c=[];(function(){function d(m){for(var y=e.sqrt(m),g=2;g<=y;g++)if(!(m%g))return!1;return!0}function p(m){return(m-(m|0))*4294967296|0}for(var f=2,h=0;h<64;)d(f)&&(h<8&&(a[h]=p(e.pow(f,1/2))),c[h]=p(e.pow(f,1/3)),h++),f++})();var l=[],u=o.SHA256=i.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(d,p){for(var f=this._hash.words,h=f[0],m=f[1],y=f[2],g=f[3],w=f[4],_=f[5],v=f[6],S=f[7],$=0;$<64;$++){if($<16)l[$]=d[p+$]|0;else{var R=l[$-15],O=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,T=l[$-2],P=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;l[$]=O+l[$-7]+P+l[$-16]}var I=w&_^~w&v,C=h&m^h&y^m&y,N=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),B=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),te=S+B+I+c[$]+l[$],z=N+C;S=v,v=_,_=w,w=g+te|0,g=y,y=m,m=h,h=te+z|0}f[0]=f[0]+h|0,f[1]=f[1]+m|0,f[2]=f[2]+y|0,f[3]=f[3]+g|0,f[4]=f[4]+w|0,f[5]=f[5]+_|0,f[6]=f[6]+v|0,f[7]=f[7]+S|0},_doFinalize:function(){var d=this._data,p=d.words,f=this._nDataBytes*8,h=d.sigBytes*8;return p[h>>>5]|=128<<24-h%32,p[(h+64>>>9<<4)+14]=e.floor(f/4294967296),p[(h+64>>>9<<4)+15]=f,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=i.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=i._createHelper(u),r.HmacSHA256=i._createHmacHelper(u)}(Math),t.SHA256})});var T6=E((A0,R6)=>{(function(t,e){typeof A0=="object"?R6.exports=A0=e(QO()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(A0,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,s=e.enc,i=s.Base64={stringify:function(a){var c=a.words,l=a.sigBytes,u=this._map;a.clamp();for(var d=[],p=0;p<l;p+=3)for(var f=c[p>>>2]>>>24-p%4*8&255,h=c[p+1>>>2]>>>24-(p+1)%4*8&255,m=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=f<<16|h<<8|m,g=0;g<4&&p+g*.75<l;g++)d.push(u.charAt(y>>>6*(3-g)&63));var w=u.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(a){var c=a.length,l=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var d=0;d<l.length;d++)u[l.charCodeAt(d)]=d}var p=l.charAt(64);if(p){var f=a.indexOf(p);f!==-1&&(c=f)}return o(a,c,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,l){for(var u=[],d=0,p=0;p<c;p++)if(p%4){var f=l[a.charCodeAt(p-1)]<<p%4*2,h=l[a.charCodeAt(p)]>>>6-p%4*2,m=f|h;u[d>>>2]|=m<<24-d%4*8,d++}return n.create(u,d)}}(),t.enc.Base64})});var rh=E(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.getUint64=Rn.getInt64=Rn.setInt64=Rn.setUint64=Rn.UINT32_MAX=void 0;Rn.UINT32_MAX=4294967295;function axe(t,e,r){let n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Rn.setUint64=axe;function cxe(t,e,r){let n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Rn.setInt64=cxe;function lxe(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}Rn.getInt64=lxe;function uxe(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}Rn.getUint64=uxe});var M0=E(lr=>{"use strict";var rP,nP,sP;Object.defineProperty(lr,"__esModule",{value:!0});lr.utf8DecodeTD=lr.TEXT_DECODER_THRESHOLD=lr.utf8DecodeJs=lr.utf8EncodeTE=lr.TEXT_ENCODER_THRESHOLD=lr.utf8EncodeJs=lr.utf8Count=void 0;var P6=rh(),D0=(typeof process>"u"||((rP=process==null?void 0:process.env)===null||rP===void 0?void 0:rP.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function fxe(t){let e=t.length,r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){let i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}lr.utf8Count=fxe;function dxe(t,e,r){let n=t.length,s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){let a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}lr.utf8EncodeJs=dxe;var nh=D0?new TextEncoder:void 0;lr.TEXT_ENCODER_THRESHOLD=D0?typeof process<"u"&&((nP=process==null?void 0:process.env)===null||nP===void 0?void 0:nP.TEXT_ENCODING)!=="force"?200:0:P6.UINT32_MAX;function hxe(t,e,r){e.set(nh.encode(t),r)}function pxe(t,e,r){nh.encodeInto(t,e.subarray(r))}lr.utf8EncodeTE=nh?.encodeInto?pxe:hxe;var mxe=4096;function gxe(t,e,r){let n=e,s=n+r,i=[],o="";for(;n<s;){let a=t[n++];if((a&128)===0)i.push(a);else if((a&224)===192){let c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){let c=t[n++]&63,l=t[n++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){let c=t[n++]&63,l=t[n++]&63,u=t[n++]&63,d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=mxe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}lr.utf8DecodeJs=gxe;var yxe=D0?new TextDecoder:null;lr.TEXT_DECODER_THRESHOLD=D0?typeof process<"u"&&((sP=process==null?void 0:process.env)===null||sP===void 0?void 0:sP.TEXT_DECODER)!=="force"?200:0:P6.UINT32_MAX;function _xe(t,e,r){let n=t.subarray(e,e+r);return yxe.decode(n)}lr.utf8DecodeTD=_xe});var oP=E(j0=>{"use strict";Object.defineProperty(j0,"__esModule",{value:!0});j0.ExtData=void 0;var iP=class{constructor(e,r){this.type=e,this.data=r}};j0.ExtData=iP});var L0=E(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.DecodeError=void 0;var aP=class t extends Error{constructor(e){super(e);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};q0.DecodeError=aP});var cP=E(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.timestampExtension=Gt.decodeTimestampExtension=Gt.decodeTimestampToTimeSpec=Gt.encodeTimestampExtension=Gt.encodeDateToTimeSpec=Gt.encodeTimeSpecToTimestamp=Gt.EXT_TIMESTAMP=void 0;var vxe=L0(),x6=rh();Gt.EXT_TIMESTAMP=-1;var wxe=4294967296-1,bxe=17179869184-1;function C6({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=bxe)if(e===0&&t<=wxe){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,x6.setInt64)(n,4,t),r}}Gt.encodeTimeSpecToTimestamp=C6;function N6(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}Gt.encodeDateToTimeSpec=N6;function I6(t){if(t instanceof Date){let e=N6(t);return C6(e)}else return null}Gt.encodeTimestampExtension=I6;function A6(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{let r=(0,x6.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new vxe.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}Gt.decodeTimestampToTimeSpec=A6;function k6(t){let e=A6(t);return new Date(e.sec*1e3+e.nsec/1e6)}Gt.decodeTimestampExtension=k6;Gt.timestampExtension={type:Gt.EXT_TIMESTAMP,encode:I6,decode:k6}});var B0=E(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.ExtensionCodec=void 0;var F0=oP(),Exe=cP(),sh=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Exe.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let s=1+e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=-1-n;return new F0.ExtData(o,i)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=n;return new F0.ExtData(o,i)}}}return e instanceof F0.ExtData?e:null}decode(e,r,n){let s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new F0.ExtData(r,e)}};U0.ExtensionCodec=sh;sh.defaultCodec=new sh});var lP=E(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.createDataView=Pl.ensureUint8Array=void 0;function D6(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}Pl.ensureUint8Array=D6;function Sxe(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=D6(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}Pl.createDataView=Sxe});var fP=E(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.Encoder=Cs.DEFAULT_INITIAL_BUFFER_SIZE=Cs.DEFAULT_MAX_DEPTH=void 0;var ih=M0(),Rxe=B0(),M6=rh(),Txe=lP();Cs.DEFAULT_MAX_DEPTH=100;Cs.DEFAULT_INITIAL_BUFFER_SIZE=2048;var uP=class{constructor(e=Rxe.ExtensionCodec.defaultCodec,r=void 0,n=Cs.DEFAULT_MAX_DEPTH,s=Cs.DEFAULT_INITIAL_BUFFER_SIZE,i=!1,o=!1,a=!1,c=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>ih.TEXT_ENCODER_THRESHOLD){let s=(0,ih.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,ih.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=s}else{let s=(0,ih.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,ih.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=s}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,Txe.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(let s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let i of n){let o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,M6.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,M6.setInt64)(this.view,this.pos,e),this.pos+=8}};Cs.Encoder=uP});var j6=E(V0=>{"use strict";Object.defineProperty(V0,"__esModule",{value:!0});V0.encode=void 0;var $xe=fP(),Oxe={};function Pxe(t,e=Oxe){return new $xe.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}V0.encode=Pxe});var q6=E(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});z0.prettyByte=void 0;function xxe(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}z0.prettyByte=xxe});var L6=E(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});H0.CachedKeyDecoder=void 0;var Cxe=M0(),Nxe=16,Ixe=16,dP=class{constructor(e=Nxe,r=Ixe){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let s=this.caches[n-1];e:for(let i of s){let o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){let n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){let s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;let i=(0,Cxe.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}};H0.CachedKeyDecoder=dP});var G0=E(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.Decoder=di.DataViewIndexOutOfBoundsError=void 0;var hP=q6(),Axe=B0(),Na=rh(),pP=M0(),mP=lP(),kxe=L6(),fi=L0(),Dxe=t=>{let e=typeof t;return e==="string"||e==="number"},oh=-1,yP=new DataView(new ArrayBuffer(0)),Mxe=new Uint8Array(yP.buffer);di.DataViewIndexOutOfBoundsError=(()=>{try{yP.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var F6=new di.DataViewIndexOutOfBoundsError("Insufficient data"),jxe=new kxe.CachedKeyDecoder,gP=class{constructor(e=Axe.ExtensionCodec.defaultCodec,r=void 0,n=Na.UINT32_MAX,s=Na.UINT32_MAX,i=Na.UINT32_MAX,o=Na.UINT32_MAX,a=Na.UINT32_MAX,c=jxe){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=yP,this.bytes=Mxe,this.headByte=oh,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=oh,this.stack.length=0}setBuffer(e){this.bytes=(0,mP.ensureUint8Array)(e),this.view=(0,mP.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===oh&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,mP.ensureUint8Array)(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof di.DataViewIndexOutOfBoundsError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,hP.prettyByte)(s)} at ${o} (${i} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,s=-1;for await(let i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof di.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){let s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{let s=e-160;r=this.decodeUtf8String(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let s=this.lookU8();r=this.decodeUtf8String(s,1)}else if(e===218){let s=this.lookU16();r=this.decodeUtf8String(s,2)}else if(e===219){let s=this.lookU32();r=this.decodeUtf8String(s,4)}else if(e===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){let s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){let s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){let s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){let s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){let s=this.lookU32();r=this.decodeExtension(s,4)}else throw new fi.DecodeError(`Unrecognized type byte: ${(0,hP.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=r,s.position++,s.position===s.size)n.pop(),r=s.array;else continue e;else if(s.type===1){if(!Dxe(r))throw new fi.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new fi.DecodeError("The key __proto__ is not allowed");s.key=r,s.type=2;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)n.pop(),r=s.map;else{s.key=null,s.type=1;continue e}}return r}}readHeadByte(){return this.headByte===oh&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=oh}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new fi.DecodeError(`Unrecognized array type byte: ${(0,hP.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new fi.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new fi.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new fi.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw F6;let s=this.pos+r,i;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,s,e):e>pP.TEXT_DECODER_THRESHOLD?i=(0,pP.utf8DecodeTD)(this.bytes,s,e):i=(0,pP.utf8DecodeJs)(this.bytes,s,e),this.pos+=r+e,i}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new fi.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw F6;let n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new fi.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Na.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Na.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};di.Decoder=gP});var _P=E(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.decodeMulti=Ns.decode=Ns.defaultDecodeOptions=void 0;var U6=G0();Ns.defaultDecodeOptions={};function qxe(t,e=Ns.defaultDecodeOptions){return new U6.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}Ns.decode=qxe;function Lxe(t,e=Ns.defaultDecodeOptions){return new U6.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}Ns.decodeMulti=Lxe});var z6=E(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.ensureAsyncIterable=lo.asyncIterableFromStream=lo.isAsyncIterable=void 0;function B6(t){return t[Symbol.asyncIterator]!=null}lo.isAsyncIterable=B6;function Fxe(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*V6(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;Fxe(n),yield n}}finally{e.releaseLock()}}lo.asyncIterableFromStream=V6;function Uxe(t){return B6(t)?t:V6(t)}lo.ensureAsyncIterable=Uxe});var G6=E(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.decodeStream=Is.decodeMultiStream=Is.decodeArrayStream=Is.decodeAsync=void 0;var vP=G0(),wP=z6(),W0=_P();async function Bxe(t,e=W0.defaultDecodeOptions){let r=(0,wP.ensureAsyncIterable)(t);return new vP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}Is.decodeAsync=Bxe;function Vxe(t,e=W0.defaultDecodeOptions){let r=(0,wP.ensureAsyncIterable)(t);return new vP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}Is.decodeArrayStream=Vxe;function H6(t,e=W0.defaultDecodeOptions){let r=(0,wP.ensureAsyncIterable)(t);return new vP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}Is.decodeMultiStream=H6;function zxe(t,e=W0.defaultDecodeOptions){return H6(t,e)}Is.decodeStream=zxe});var J6=E(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.decodeTimestampExtension=me.encodeTimestampExtension=me.decodeTimestampToTimeSpec=me.encodeTimeSpecToTimestamp=me.encodeDateToTimeSpec=me.EXT_TIMESTAMP=me.ExtData=me.ExtensionCodec=me.Encoder=me.DataViewIndexOutOfBoundsError=me.DecodeError=me.Decoder=me.decodeStream=me.decodeMultiStream=me.decodeArrayStream=me.decodeAsync=me.decodeMulti=me.decode=me.encode=void 0;var Hxe=j6();Object.defineProperty(me,"encode",{enumerable:!0,get:function(){return Hxe.encode}});var W6=_P();Object.defineProperty(me,"decode",{enumerable:!0,get:function(){return W6.decode}});Object.defineProperty(me,"decodeMulti",{enumerable:!0,get:function(){return W6.decodeMulti}});var K0=G6();Object.defineProperty(me,"decodeAsync",{enumerable:!0,get:function(){return K0.decodeAsync}});Object.defineProperty(me,"decodeArrayStream",{enumerable:!0,get:function(){return K0.decodeArrayStream}});Object.defineProperty(me,"decodeMultiStream",{enumerable:!0,get:function(){return K0.decodeMultiStream}});Object.defineProperty(me,"decodeStream",{enumerable:!0,get:function(){return K0.decodeStream}});var K6=G0();Object.defineProperty(me,"Decoder",{enumerable:!0,get:function(){return K6.Decoder}});Object.defineProperty(me,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return K6.DataViewIndexOutOfBoundsError}});var Gxe=L0();Object.defineProperty(me,"DecodeError",{enumerable:!0,get:function(){return Gxe.DecodeError}});var Wxe=fP();Object.defineProperty(me,"Encoder",{enumerable:!0,get:function(){return Wxe.Encoder}});var Kxe=B0();Object.defineProperty(me,"ExtensionCodec",{enumerable:!0,get:function(){return Kxe.ExtensionCodec}});var Jxe=oP();Object.defineProperty(me,"ExtData",{enumerable:!0,get:function(){return Jxe.ExtData}});var xl=cP();Object.defineProperty(me,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return xl.EXT_TIMESTAMP}});Object.defineProperty(me,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return xl.encodeDateToTimeSpec}});Object.defineProperty(me,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return xl.encodeTimeSpecToTimestamp}});Object.defineProperty(me,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return xl.decodeTimestampToTimeSpec}});Object.defineProperty(me,"encodeTimestampExtension",{enumerable:!0,get:function(){return xl.encodeTimestampExtension}});Object.defineProperty(me,"decodeTimestampExtension",{enumerable:!0,get:function(){return xl.decodeTimestampExtension}})});var Xxe={};w8(Xxe,{MidiManager:()=>Hd,OscManager:()=>Bd,ServerManager:()=>Ra,default:()=>Y0});module.exports=b8(Xxe);var Jn=require("obsidian");var K=require("obsidian");var Fd=require("obsidian"),YG=Or(YH(),1),XG=Or(PG(),1),QG=Or(DG(),1),ro=Or(require("path"),1),no=Or(require("fs"),1);var MG={s:"string",f:"float",i:"integer",b:"blob"},gl=class{constructor(e,r){this.type=e,this.value=r}},mO=class{constructor(e,...r){this.oscType="message",this.address=e,this.args=r}append(e){let r;switch(typeof e){case"object":if(e instanceof Array)e.forEach(n=>this.append(n));else if(e.type)MG[e.type]&&(e.type=MG[e.type]),this.args.push(e);else throw new Error(`don't know how to encode object ${e}`);break;case"number":Math.floor(e)===e?r=new gl("integer",e):r=new gl("float",e);break;case"string":r=new gl("string",e);break;case"boolean":r=new gl("boolean",e);break;default:throw new Error(`don't know how to encode ${e}`)}r&&this.args.push(r)}},to=mO;var HG=require("node:dgram"),GG=require("node:events");var UG=Or(yO(),1);function BG(t){let e=[];return e.push(t.address),t.args.forEach(r=>{e.push(r.value)}),e}function VG(t){return t.elements=t.elements.map(e=>{if(e.oscType==="bundle")return VG(e);if(e.oscType==="message")return BG(e)}),t}function yOe(t){let e=(0,UG.fromBuffer)(t);if(e.oscType==="bundle")return VG(e);if(e.oscType==="message")return BG(e);throw new Error("Malformed Packet")}var zG=yOe;var _O=class extends GG.EventEmitter{constructor(e,r="127.0.0.1",n){super(),typeof r=="function"&&(n=r,r="127.0.0.1"),n||(n=()=>{});let s;this.port=e,this.host=r,this._sock=(0,HG.createSocket)({type:"udp4",reuseAddr:!0}),this._sock.bind(e,r),this._sock.on("listening",()=>{this.emit("listening"),n()}),this._sock.on("message",(i,o)=>{try{s=zG(i)}catch(a){let c=new Error(`can't decode incoming message: ${a.message}`);this.emit("error",c,o);return}s.elements?this.emit("bundle",s,o):s&&(this.emit("message",s,o),this.emit(s[0],s,o))})}close(e){this._sock.close(e)}},vO=_O;var KG=require("node:dgram"),JG=Or(yO(),1);var{toBuffer:WG}=JG.default,wO=class{constructor(e,r){this.host=e,this.port=r,this._sock=(0,KG.createSocket)({type:"udp4",reuseAddr:!0})}close(e){this._sock.close(e)}send(...e){let r=e[0],n;typeof e[e.length-1]=="function"?n=e.pop():n=()=>{},r instanceof Array&&(r={address:r[0],args:r.splice(1)});let s,i;try{switch(typeof r){case"object":i=WG(r),this._sock.send(i,0,i.length,this.port,this.host,n);break;case"string":s=new to(e[0]);for(let o=1;o<e.length;o++)s.append(e[o]);i=WG(s),this._sock.send(i,0,i.length,this.port,this.host,n);break;default:throw new TypeError("That Message Just Doesn't Seem Right")}}catch(o){if(o.code!=="ERR_SOCKET_DGRAM_NOT_RUNNING")throw o;let a=new ReferenceError("Cannot send message on closed socket.");a.code=o.code,n(a)}}},bO=wO;var Ra=class{app;plugin;server=null;port;isRunning=!1;sseOscConnections=new Set;sseMidiConnections=new Set;constructor(e,r,n){this.app=e,this.plugin=r,this.port=n}async start(){if(this.isRunning)return;let e=this.app.vault.adapter,r;if(e instanceof Fd.FileSystemAdapter)r=e.getBasePath();else{new Fd.Notice("Server cannot determine file system path.");return}let n=this.plugin.manifest,s=ro.default.join(r,`${n.dir}/slides_studio`),i=ro.default.join(r,`${n.dir}/lib`);this.server=(0,YG.default)(),await this.server.register(QG.default,{origin:!0}),this.server.register(XG.default,{root:[s,i,r],prefix:"/"}),this.server.get("/api/obswss",(o,a)=>{let c=this.plugin.settings;return{IP:c.websocketIP_Text||"localhost",PORT:parseInt(c.websocketPort_Text)||4455,PW:c.websocketPW_Text||""}}),this.server.post("/api/file/save",async(o,a)=>{let{folder:c,filename:l,data:u}=o.body;if(!c||!l||!u)return a.code(400).send({error:"Missing folder, filename, or data"});let d=ro.default.join(r,c),p=ro.default.join(d,l.endsWith(".json")?l:`${l}.json`);if(!d.startsWith(r))return a.code(403).send({error:"Access denied: Path outside vault"});if(!no.default.existsSync(d))try{no.default.mkdirSync(d,{recursive:!0})}catch(f){return console.error(f),a.code(500).send({error:"Failed to create directory"})}try{return no.default.writeFileSync(p,JSON.stringify(u,null,2)),{success:!0,path:p}}catch(f){let h=f instanceof Error?f.message:String(f);return a.code(500).send({error:h})}}),this.server.get("/api/file/list",(o,a)=>{let{folder:c}=o.query,l=ro.default.join(r,c);if(!l.startsWith(r))return a.code(403).send({error:"Access denied"});if(!no.default.existsSync(l))return a.send([]);try{let u=no.default.readdirSync(l).filter(d=>d.endsWith(".json"));return a.send(u)}catch(u){let d=u instanceof Error?u.message:String(u);return a.code(500).send({error:d})}}),this.server.get("/api/file/get",(o,a)=>{let{folder:c,filename:l}=o.query,u=ro.default.join(r,c),d=ro.default.join(u,l);if(!d.startsWith(r))return a.code(403).send({error:"Access denied"});if(!no.default.existsSync(d))return a.code(404).send({error:"File not found"});try{let p=no.default.readFileSync(d,"utf-8");return a.send(JSON.parse(p))}catch(p){let f=p instanceof Error?p.message:String(p);return a.code(500).send({error:f})}}),this.server.get("/api/osc/events",(o,a)=>{a.raw.setHeader("Content-Type","text/event-stream"),a.raw.setHeader("Cache-Control","no-cache"),a.raw.setHeader("Connection","keep-alive"),a.raw.flushHeaders(),this.sseOscConnections.add(a),o.raw.on("close",()=>{this.sseOscConnections.delete(a)})}),this.server.get("/api/midi/events",(o,a)=>{a.raw.setHeader("Content-Type","text/event-stream"),a.raw.setHeader("Cache-Control","no-cache"),a.raw.setHeader("Connection","keep-alive"),a.raw.flushHeaders(),this.sseMidiConnections.add(a),o.raw.on("close",()=>{this.sseMidiConnections.delete(a)})}),this.server.post("/api/osc/send",async(o,a)=>{let{deviceName:c,address:l,args:u}=o.body;if(!c||!l)return a.code(400).send({error:"Missing deviceName or address"});let d=new to(l);u&&Array.isArray(u)&&u.forEach(p=>d.append(p));try{return this.plugin.oscManager.sendMessage(c,d),{success:!0}}catch(p){let f=p instanceof Error?p.message:String(p);return a.code(500).send({error:f})}}),this.server.post("/api/midi/send",async(o,a)=>{let{deviceName:c,message:l}=o.body;if(!c||!l)return a.code(400).send({error:"Missing deviceName or message payload"});try{return this.plugin.midiManager.sendMidiMessage(c,this.plugin.settings.midiDevices,l),{success:!0}}catch(u){let d=u instanceof Error?u.message:String(u);return a.code(500).send({error:d})}});try{await this.server.listen({port:this.port,host:"127.0.0.1"}),this.isRunning=!0,new Fd.Notice(`Slides Studio Server started on port ${this.port}`)}catch(o){console.error("Failed to start Fastify server",o),this.isRunning=!1}}broadcastOscMessage(e,r){let n=JSON.stringify({deviceName:e,message:r}),s=`event: ${e}
data: ${n}

`;for(let i of this.sseOscConnections)i.raw.write(s)}broadcastMidiMessage(e,r){let n=JSON.stringify({deviceName:e,message:r}),s=`event: ${e}
data: ${n}

`;for(let i of this.sseMidiConnections)i.raw.write(s)}async stop(){if(this.server){for(let e of this.sseOscConnections)e.raw.end();this.sseOscConnections.clear();for(let e of this.sseMidiConnections)e.raw.end();this.sseMidiConnections.clear(),await this.server.close(),this.server=null,this.isRunning=!1}}async restart(e){await this.stop(),this.port=e,await this.start()}getUrl(){return`http://127.0.0.1:${this.port}`}};var o0=class extends K.PluginSettingTab{plugin;constructor(e,r){super(e,r),this.plugin=r}display(){let{containerEl:e}=this;e.empty(),new K.Setting(e).setName("Settings manager").setHeading();let r=this.app.vault.getAllLoadedFiles().filter(a=>a instanceof K.TFolder),n={"":"Select a folder"};if(r.forEach(a=>n[a.path]=a.path),new K.Setting(e).setName("Settings folder").setDesc("Select folder to save/load settings").addDropdown(a=>a.addOptions(n).setValue(this.plugin.settings.settingsFolder).onChange(async c=>{this.plugin.settings.settingsFolder=c,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.settingsFolder){let a=this.app.vault.getFiles().filter(l=>l.path.startsWith(this.plugin.settings.settingsFolder)&&l.name.endsWith(".md")),c={"":"Select an existing file (optional)"};a.forEach(l=>c[l.name]=l.name),new K.Setting(e).setName("Settings file").setDesc("Select existing or type new file name (ends in .md)").addDropdown(l=>l.addOptions(c).setValue(this.plugin.settings.settingsFile).onChange(u=>{u&&(this.plugin.settings.settingsFile=u,this.display())})).addText(l=>l.setValue(this.plugin.settings.settingsFile).onChange(async u=>{this.plugin.settings.settingsFile=u,await this.plugin.saveSettings()})),new K.Setting(e).setName("Actions").addButton(l=>l.setButtonText("Save settings").setCta().onClick(async()=>{let{settingsFolder:u,settingsFile:d}=this.plugin.settings;if(u&&d){let p=`${u}/${d}`;p.endsWith(".md")||(p+=".md");let f=JSON.stringify(this.plugin.settings,null,2);try{let h=this.app.vault.getAbstractFileByPath(p);h instanceof K.TFile?(await this.app.vault.modify(h,f),new K.Notice(`Settings saved to ${p}`)):(await this.app.vault.create(p,f),new K.Notice(`Settings saved to new file ${p}`))}catch(h){new K.Notice("Error saving settings: "+h),console.error(h)}}else new K.Notice("Please select a folder and file name")})).addButton(l=>l.setButtonText("Load settings").setWarning().onClick(async()=>{let{settingsFolder:u,settingsFile:d}=this.plugin.settings;if(u&&d){let p=`${u}/${d}`;!this.app.vault.getAbstractFileByPath(p)&&this.app.vault.getAbstractFileByPath(p+".md")&&(p+=".md");let f=this.app.vault.getAbstractFileByPath(p);if(f instanceof K.TFile)try{let h=await this.app.vault.read(f),m=JSON.parse(h);Object.assign(this.plugin.settings,m),await this.plugin.saveSettings(),this.plugin.onunload(),this.plugin.onload(),this.display(),new K.Notice("Settings loaded successfully")}catch(h){new K.Notice("Error loading settings: "+h),console.error(h)}else new K.Notice("File not found: "+p)}}))}new K.Setting(e).setName("Web Server").setHeading(),new K.Setting(e).setName("Enable plugin server").setDesc("Start the plugin server to host the studio view.").addToggle(a=>a.setValue(this.plugin.settings.serverEnabled).onChange(async c=>{if(this.plugin.settings.serverEnabled=c,await this.plugin.saveSettings(),c){let l=parseInt(this.plugin.settings.serverPort)||57e3;this.plugin.serverManager||(this.plugin.serverManager=new Ra(this.plugin.app,this.plugin,l)),this.plugin.serverManager.start()}else this.plugin.serverManager&&(this.plugin.serverManager.stop(),this.plugin.serverManager=null);this.display()})),this.plugin.settings.serverEnabled&&new K.Setting(e).setName("Server port").setDesc("Port for the plugin server").addText(a=>{a.setValue(this.plugin.settings.serverPort).onChange(async c=>{this.plugin.settings.serverPort=c,await this.plugin.saveSettings()})}).addButton(a=>a.setButtonText("Restart server").onClick(()=>{let c=parseInt(this.plugin.settings.serverPort);this.plugin.serverManager&&this.plugin.serverManager.restart(c)})),new K.Setting(e).setName("Obs websocket server").setHeading(),new K.Setting(e).setName("Obs websocket server IP").setDesc("Enter 'localhost'").addText(a=>{a.setValue(this.plugin.settings.websocketIP_Text).onChange(c=>{this.plugin.settings.websocketIP_Text=c,this.plugin.saveSettings()})}),new K.Setting(e).setName("Obs websocket server port").addText(a=>{a.setValue(this.plugin.settings.websocketPort_Text).onChange(c=>{this.plugin.settings.websocketPort_Text=c,this.plugin.saveSettings()})}),new K.Setting(e).setName("Obs websocket server password").addText(a=>{a.inputEl.type="password",a.setValue(this.plugin.settings.websocketPW_Text).onChange(c=>{this.plugin.settings.websocketPW_Text=c,this.plugin.saveSettings()})}),new K.Setting(e).setName("Obs launch parameters").setHeading().setDesc("Open obs with these options."),K.Platform.isMacOS&&new K.Setting(e).setName("Name").setDesc("Enter 'obs' or a custom name").addText(a=>{a.setValue(this.plugin.settings.obsAppName_Text).onChange(c=>{this.plugin.settings.obsAppName_Text=c,this.plugin.saveSettings()})}),K.Platform.isWin&&(new K.Setting(e).setName("Name").setDesc("Enter 'obs64.exe' or a custom name").addText(a=>{a.setValue(this.plugin.settings.obsAppName_Text).onChange(c=>{this.plugin.settings.obsAppName_Text=c,this.plugin.saveSettings()})}),new K.Setting(e).setName("Path to obs app").addText(a=>{a.setValue(this.plugin.settings.obsAppPath_Text).onChange(c=>{this.plugin.settings.obsAppPath_Text=c,this.plugin.saveSettings()})})),new K.Setting(e).setName("Collection").addText(a=>{a.setValue(this.plugin.settings.obsCollection_Text).onChange(c=>{this.plugin.settings.obsCollection_Text=c,this.plugin.saveSettings()})});let s="";this.app.vault.adapter instanceof K.FileSystemAdapter&&(s=this.app.vault.adapter.getBasePath()),s+=`/${this.plugin.manifest.dir}/obs_collections/SlidesStudio.json`,s=K.Platform.isWin?s.replace(/\//g,"\\"):s,new K.Setting(e).setName("Obs collection").setDesc("Copy the path to the slide studio collection and import the collection in obs").addText(a=>{a.setValue(s).setDisabled(!0)}),new K.Setting(e).setName("Obs browser source debug port").setDesc("Enter a port for the remote debugger or leave blank to skip").addText(a=>{a.setValue(this.plugin.settings.obsDebugPort_Text).onChange(c=>{this.plugin.settings.obsDebugPort_Text=c,this.plugin.saveSettings()})}),new K.Setting(e).setName("Open obs").addButton(a=>{a.setButtonText("Launch").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-obs")})}),new K.Setting(e).setName("Connect to obs websocket server").addButton(a=>{let c=this.plugin.isObsConnected;a.setButtonText(c?"Connected":"Connect").onClick(()=>{this.app.commands.executeCommandById("slides-studio:connect-to-obs-websocket"),setTimeout(()=>this.display(),1e3)}),c&&(a.setCta(),a.buttonEl.setCssProps({"background-color":"green","border-color":"green",color:"white"}))}),new K.Setting(e).setName("Cables.gl Standalone").setHeading();let i=this.app.vault.getAllLoadedFiles().filter(a=>a instanceof K.TFolder),o={"":"Select a folder"};if(i.forEach(a=>o[a.path]=a.path),new K.Setting(e).setName("Cables folder").setDesc("Select the folder containing cables files").addDropdown(a=>a.addOptions(o).setValue(this.plugin.settings.cablesFolder).onChange(async c=>{this.plugin.settings.cablesFolder=c,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.cablesFolder){e.createEl("h4",{text:"Manage cables files"});let a=this.app.vault.getFiles().filter(u=>u.path.startsWith(this.plugin.settings.cablesFolder)),c={"":"Select a file to add"};a.forEach(u=>c[u.path]=u.name);let l="";new K.Setting(e).setName("Add file").setDesc("Select a file and click add").addDropdown(u=>u.addOptions(c).onChange(d=>{l=d})).addButton(u=>u.setButtonText("Add").setCta().onClick(async()=>{l&&!this.plugin.settings.cablesFiles.includes(l)&&(this.plugin.settings.cablesFiles.push(l),await this.plugin.saveSettings(),this.display())})),this.plugin.settings.cablesFiles.length>0&&(e.createEl("h5",{text:"Selected files:"}),this.plugin.settings.cablesFiles.forEach((u,d)=>{let p=this.app.vault.getAbstractFileByPath(u),f=p?p.name:u;new K.Setting(e).setName(f).setDesc(u).addButton(h=>h.setButtonText("Remove").setWarning().onClick(async()=>{this.plugin.settings.cablesFiles.splice(d,1),await this.plugin.saveSettings(),this.display()}))}))}if(new K.Setting(e).setName("Osc devices").setHeading(),e.createEl("p",{text:"Add as many osc devices as needed."}),this.plugin.settings.oscDevices.forEach((a,c)=>{let l=e.createDiv();l.setCssProps({border:"1px solid var(--background-modifier-border)",padding:"10px","margin-bottom":"10px","border-radius":"5px"}),new K.Setting(l).setName(`Device ${c+1}`).setHeading(),new K.Setting(l).setName("Osc device name").setDesc("Unique device name (used in server sent events)").addText(u=>u.setValue(a.name).onChange(async d=>{this.plugin.settings.oscDevices[c].name=d,await this.plugin.saveSettings()})).addButton(u=>u.setButtonText("Connect device").onClick(()=>{this.plugin.oscManager?this.plugin.oscManager.connectDevice(this.plugin.settings.oscDevices[c]):new K.Notice("Plugin not fully loaded")})),new K.Setting(l).setName("Osc IP address").setDesc("Enter the IP address or 'localhost'").addText(u=>u.setValue(a.ip).onChange(async d=>{this.plugin.settings.oscDevices[c].ip=d,await this.plugin.saveSettings()})),new K.Setting(l).setName("Osc incoming port").addText(u=>u.setValue(a.inPort.toString()).onChange(async d=>{this.plugin.settings.oscDevices[c].inPort=parseInt(d)||0,await this.plugin.saveSettings()})),new K.Setting(l).setName("Osc outgoing port").addText(u=>u.setValue(a.outPort.toString()).onChange(async d=>{this.plugin.settings.oscDevices[c].outPort=parseInt(d)||0,await this.plugin.saveSettings()})),new K.Setting(l).addButton(u=>u.setButtonText("Remove device").setWarning().onClick(async()=>{this.plugin.oscManager&&this.plugin.oscManager.disconnectDevice(a.name),this.plugin.settings.oscDevices.splice(c,1),await this.plugin.saveSettings(),this.display()}))}),new K.Setting(e).setName("Add new osc device").addButton(a=>a.setButtonText("Add device").setCta().onClick(async()=>{this.plugin.settings.oscDevices.push({name:"NewDevice",ip:"127.0.0.1",inPort:8e3,outPort:9e3}),await this.plugin.saveSettings(),this.display()})),this.plugin.midiManager){new K.Setting(e).setName("Midi devices").setHeading(),e.createEl("p",{text:"Add midi inputs and outputs."});let a=this.plugin.midiManager.getInputs(),c=this.plugin.midiManager.getOutputs();this.plugin.settings.midiDevices.forEach((l,u)=>{let d=e.createDiv();d.setCssProps({border:"1px solid var(--background-modifier-border)",padding:"10px","margin-bottom":"10px","border-radius":"5px"}),new K.Setting(d).setName(`MIDI Device ${u+1}`).setHeading(),new K.Setting(d).setName("Device name").setDesc("Unique device name (used in server sent events)").addText(p=>p.setValue(l.name).onChange(f=>{this.plugin.settings.midiDevices[u].name=f,this.plugin.saveSettings()})).addButton(p=>p.setButtonText("Connect").onClick(()=>{this.plugin.midiManager.connectDevice(this.plugin.settings.midiDevices[u])})),new K.Setting(d).setName("Input device").addDropdown(p=>{p.addOption("","Select input");for(let f of a)p.addOption(f,f);p.setValue(l.inputName),p.onChange(f=>{this.plugin.settings.midiDevices[u].inputName=f,this.plugin.saveSettings()})}),new K.Setting(d).setName("Output device").addDropdown(p=>{p.addOption("","Select output");for(let f of c)p.addOption(f,f);p.setValue(l.outputName),p.onChange(f=>{this.plugin.settings.midiDevices[u].outputName=f,this.plugin.saveSettings()})}),new K.Setting(d).addButton(p=>p.setButtonText("Remove midi device").setWarning().onClick(async()=>{this.plugin.midiManager&&this.plugin.midiManager.disconnectDevice(l),this.plugin.settings.midiDevices.splice(u,1),await this.plugin.saveSettings(),this.display()}))}),new K.Setting(e).setName("Add new midi device").addButton(l=>l.setButtonText("Add device").setCta().onClick(async()=>{this.plugin.settings.midiDevices.push({name:"MyMidiDevice",inputName:"",outputName:""}),await this.plugin.saveSettings(),this.display()}))}}};var Vr=require("obsidian"),Ud="slides-tag-view",a0=class extends Vr.ItemView{plugin;constructor(e,r){super(e),this.plugin=r}getViewType(){return Ud}getDisplayText(){return"Slide tags"}getIcon(){return"aperture"}insertTag(e){let r=this.app.workspace.getMostRecentLeaf();if(r){this.app.workspace.setActiveLeaf(r,{focus:!0}),r.setEphemeralState(r.getEphemeralState());let n=this.app.workspace.activeEditor?.editor;n&&n.replaceSelection(`<!-- slide ${e} -->
`)}else new Vr.Notice("No active mark down editor found")}onOpen(){let e=this.contentEl;e.setCssProps({"overflow-y":"auto",height:"100%"}),e.empty(),e.createDiv({cls:"Header",text:"Slides studio"}),new Vr.Setting(e).setName("Open slides studio").setHeading().setDesc("Open the slides studio web page in a new tab").addButton(n=>{n.setButtonText("Open").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-slide-studio-webview")}).setCta()}),new Vr.Setting(e).setName("Add tags").setHeading().setDesc("Insert tags at the current cursor position").addButton(n=>{n.setButtonText("Refresh view").onClick(async()=>{await this.addTagButtons(r)})});let r=e.createDiv("tags");return this.addTagButtons(r),new Vr.Setting(e).setName("Slide number").setHeading().setDesc("Add a tag with a unique identifying number").addButton(n=>{n.setButtonText("Add").onClick(()=>{let s=this.app.workspace.getMostRecentLeaf();s&&(this.app.workspace.setActiveLeaf(s,{focus:!0}),this.app.workspace.activeEditor?.editor?.replaceSelection(`<!-- slide data-id="${Date.now()}" -->
`),this.app.commands.executeCommandById("slides-studio:add-slide-id"))}).setCta()}),Promise.resolve()}async addTagButtons(e){e.empty(),e.createEl("div",{text:"Fetching obs data...",attr:{style:"padding: 10px; color: var(--text-muted); text-align: center;"}}),await this.plugin.getObsTags(),e.empty();let r=this.plugin.settings;this.createTagSection(e,"Scenes",r.scene_tags,n=>`data-scene="${n}"`),this.createTagSection(e,"Slide position",r.slide_tags,n=>`data-slide-position="${n}"`),this.createTagSection(e,"Camera position",r.camera_tags,n=>`data-camera-position="${n}"`),this.createTagSection(e,"Camera shapes",r.camera_shape_tags,n=>`data-camera-shape="${n}"`),this.renderUserTags(e)}createTagSection(e,r,n,s){let i=Array.from(new Set(n));i.length!==0&&(new Vr.Setting(e).setName(r).setHeading(),i.forEach(o=>{new Vr.Setting(e).setName(o).addButton(a=>{a.setButtonText("Add").setCta().onClick(()=>this.insertTag(s(o)))})}))}renderUserTags(e){let r=this.plugin.settings.user_tags,n=new Set(r);new Vr.Setting(e).setName("User tags").setHeading().setDesc("Custom data tags"),new Vr.Setting(e).setName("Create a new tag").addText(s=>{s.setPlaceholder("Key").onChange(i=>{this.plugin.settings.newTag=i})}).addText(s=>{s.setPlaceholder("Value").onChange(i=>{this.plugin.settings.newTag=`${this.plugin.settings.newTag}:${i}`})}).addButton(s=>{s.setButtonText("Create").onClick(async()=>{n.add(this.plugin.settings.newTag),this.plugin.settings.user_tags=Array.from(n),await this.plugin.saveSettings(),this.onOpen()})}),r.forEach(s=>{let i=s.split(":");new Vr.Setting(e).setName(s).addButton(o=>{o.setButtonText("Add").setCta().onClick(()=>this.insertTag(`data-${i[0]}="${i[1]}"`))}).addButton(o=>{o.setButtonText("\u{1F6AB}").onClick(async()=>{n.delete(s),this.plugin.settings.user_tags=Array.from(n),await this.plugin.saveSettings(),new Vr.Notice(`Deleted user tag ${s}`),this.onOpen()})})})}async onClose(){}};var c0=require("obsidian"),Bd=class{activeOscDevices=new Map;onOscMessageReceived;constructor(e){this.onOscMessageReceived=e}connectDevice(e){this.disconnectDevice(e.name),new c0.Notice(`Starting OSC: ${e.name}`);try{let r=new bO(e.ip,e.outPort),n=new vO(e.inPort,"0.0.0.0");n.on("listening",()=>{new c0.Notice(`OSC Server: ${e.name} is listening on ${e.inPort}.`)}),n.on("message",s=>{this.onOscMessageReceived&&this.onOscMessageReceived(e.name,s)}),this.activeOscDevices.set(e.name,{client:r,server:n})}catch(r){let n=r instanceof Error?r.message:String(r);console.error(`Failed to start OSC device ${e.name}`,n),new c0.Notice(`Failed to start OSC: ${e.name}`)}}disconnectDevice(e){let r=this.activeOscDevices.get(e);r&&(r.client.close(),r.server.close(),this.activeOscDevices.delete(e))}disconnectAll(){this.activeOscDevices.forEach(e=>{e.client.close(),e.server.close()}),this.activeOscDevices.clear()}sendMessage(e,r){let n=this.activeOscDevices.get(e);n?n.client.send(r,s=>{s&&console.error(`Error sending to ${e}:`,s)}):console.warn(`OSC Device '${e}' not connected or found.`)}};var io=class t{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,r,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==t.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");let s=new l0(e,this,r,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,r,n={}){n.remaining=1,this.addListener(e,r,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,r){return e===void 0?this.eventMap[t.ANY_EVENT]&&this.eventMap[t.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?r instanceof l0?this.eventMap[e].filter(s=>s===r).length>0:typeof r=="function"?this.eventMap[e].filter(s=>s.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...r){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],s=this.eventMap[t.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...r];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(n.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),n}removeListener(e,r,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>r&&i.callback!==r||n.remaining&&n.remaining!==i.remaining||n.context&&n.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((n,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),n()},{remaining:1});r.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}},l0=class{constructor(e,r,n,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==io.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=n,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}};var A=class t{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),t.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),t.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),t.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),t.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}};var so=class{constructor(e,r={}){this.duration=j.defaults.note.duration,this.attack=j.defaults.note.attack,this.release=j.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=F.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=F.from7bitToFloat(r.rawRelease)),Number.isInteger(e)?this.identifier=F.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){let r=F.getNoteDetails(e);if(j.validation&&!e)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(e){if(j.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(j.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(j.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return F.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=F.from7bitToFloat(e)}get rawRelease(){return F.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=F.from7bitToFloat(e)}get number(){return F.toNoteNumber(this.identifier)}getOffsetNumber(e=0,r=0){return j.validation&&(e=parseInt(e)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+e*12+r,0),127)}};var F=class{static toNoteNumber(e,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");let n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");let s={C:0,D:2,E:4,F:5,G:7,A:9,B:11},i=(n.octave+1+r)*12;if(i+=s[n.name],n.accidental&&(n.accidental.startsWith("b")?i-=n.accidental.length:i+=n.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));let r=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");let n=r[1].toUpperCase(),s=parseInt(r[3]),i=r[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:n+(i||"")+s,name:n,octave:s}}static sanitizeChannels(e){let r;if(j.validation){if(e==="all")r=["all"];else if(e==="none")return[]}return Array.isArray(e)?r=e:r=[e],r.indexOf("all")>-1&&(r=A.MIDI_CHANNEL_NUMBERS),r.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let r=!1,n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(r=j.time+n):n>=0&&(r=n),r)}static guessNoteNumber(e,r){r=parseInt(r)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),r)}catch{return!1}return n}static toNoteIdentifier(e,r){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");let n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+r;return n[e%12]+s.toString()}static buildNote(e,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,e instanceof so)return e;let n=this.guessNoteNumber(e,r.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return r.octaveOffset=void 0,new so(n,r)}static buildNoteArray(e,r={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{n.push(this.buildNote(s,r))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,r=0){j.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));let n=((e<<7)+r)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){j.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));let r=Math.round(e*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(e,r=0,n=0){if(j.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");r=parseInt(r)||0,n=parseInt(n)||0}return Math.min(Math.max(e+r*12+n,0),127)}static getPropertyByValue(e,r){return Object.keys(e).find(n=>e[n]===r)}static getCcNameByNumber(e){if(!(j.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return A.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let r=A.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return r?r.number:A.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let r in A.CHANNEL_MODE_MESSAGES)if(A.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&e===A.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}};var EO=class extends io{constructor(e,r){super(),this._output=e,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,r={time:0}){return this.output.send(e,r),this}sendKeyAftertouch(e,r,n={}){if(j.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(r=F.fromFloatTo7Bit(r));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),F.buildNoteArray(e).forEach(i=>{this.send([(A.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),r],{time:F.toTimestamp(n.time)})}),this}sendControlChange(e,r,n={}){if(typeof e=="string"&&(e=F.getCcNumberByName(e)),Array.isArray(r)||(r=[r]),j.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(s=>{let i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),r.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((s,i)=>{this.send([(A.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,r[i]],{time:F.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,r={}){return this.sendControlChange(99,e[0],r),this.sendControlChange(98,e[1],r),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,r={}){return this.sendControlChange(101,e[0],r),this.sendControlChange(100,e[1],r),this}_setCurrentParameter(e,r={}){return e=[].concat(e),this.sendControlChange(6,e[0],r),e.length<2?this:(this.sendControlChange(38,e[1],r),this)}sendRpnDecrement(e,r={}){if(Array.isArray(e)||(e=A.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(A.REGISTERED_PARAMETERS).forEach(s=>{A.REGISTERED_PARAMETERS[s][0]===e[0]&&A.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(e,r={}){if(Array.isArray(e)||(e=A.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(A.REGISTERED_PARAMETERS).forEach(s=>{A.REGISTERED_PARAMETERS[s][0]===e[0]&&A.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(e,r={}){this.sendNoteOn(e,r);let n=Array.isArray(e)?e:[e];for(let s of n)if(parseInt(s.duration)>0){let i={time:(F.toTimestamp(r.time)||j.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(r.duration)>0){let i={time:(F.toTimestamp(r.time)||j.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,r={}){if(j.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawRelease!=null?n=r.rawRelease:isNaN(r.release)||(n=Math.round(r.release*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(i=>{this.send([(A.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:F.toTimestamp(r.time)})}),this}stopNote(e,r={}){return this.sendNoteOff(e,r)}sendNoteOn(e,r={}){if(j.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawAttack!=null?n=r.rawAttack:isNaN(r.attack)||(n=Math.round(r.attack*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(e,{rawAttack:n}).forEach(i=>{this.send([(A.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:F.toTimestamp(r.time)})}),this}sendChannelMode(e,r=0,n={}){if(typeof e=="string"&&(e=A.CHANNEL_MODE_MESSAGES[e]),j.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(A.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,r],{time:F.toTimestamp(n.time)}),this}sendOmniMode(e,r={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(e,r={}){if(j.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(e=F.fromFloatTo7Bit(e)),this.send([(A.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:F.toTimestamp(r.time)}),this}sendMasterTuning(e,r={}){if(e=parseFloat(e)||0,j.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",n,r),this.sendRpnValue("channelfinetuning",[i,o],r),this}sendModulationRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[e,r],n),this}sendNrpnValue(e,r,n={}){if(r=[].concat(r),j.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,r={}){if(j.validation)if(r.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,s=0;if(r.rawValue&&Array.isArray(e))n=e[0],s=e[1];else if(r.rawValue&&!Array.isArray(e))n=e;else{let i=F.fromFloatToMsbLsb((e+1)/2);n=i.msb,s=i.lsb}return this.send([(A.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,n],{time:F.toTimestamp(r.time)}),this}sendPitchBendRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,r],n),this}sendProgramChange(e,r={}){if(e=parseInt(e)||0,j.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(A.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:F.toTimestamp(r.time)}),this}sendRpnValue(e,r,n={}){if(Array.isArray(e)||(e=A.REGISTERED_PARAMETERS[e]),j.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,r),this}sendTuningProgram(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,r),this}sendLocalControl(e,r={}){return e?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,r={}){return e==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}};var Vd=class extends io{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new EO(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let r={timestamp:j.time};e.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,r={time:0},n=0){if(e instanceof f0&&(e=F.isNode?e.data:e.rawData),e instanceof Uint8Array&&F.isNode&&(e=Array.from(e)),j.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(r)&&(e=e.concat(r)),r=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(e,F.toTimestamp(r.time)),this}sendSysex(e,r=[],n={}){if(e=[].concat(e),r instanceof Uint8Array){let s=new Uint8Array(1+e.length+r.length+1);s[0]=A.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(r,1+e.length),s[s.length-1]=A.SYSTEM_MESSAGES.sysexend,this.send(s,{time:n.time})}else{let s=e.concat(r,A.SYSTEM_MESSAGES.sysexend);this.send([A.SYSTEM_MESSAGES.sysex].concat(s),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():j.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([A.SYSTEM_MESSAGES.timecode,e],{time:r.time}),this}sendSongPosition(e=0,r={}){e=Math.floor(e)||0;var n=e>>7&127,s=e&127;return this.send([A.SYSTEM_MESSAGES.songposition,n,s],{time:r.time}),this}sendSongSelect(e=0,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([A.SYSTEM_MESSAGES.songselect,e],{time:r.time}),this}sendTuneRequest(e={}){return this.send([A.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([A.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([A.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([A.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([A.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([A.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([A.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return j.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,r,n={}){return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,r,n)}),this}sendControlChange(e,r,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendControlChange(e,r,n)}),this}sendPitchBendRange(e=0,r=0,n={}){return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,r,n)}),this}setPitchBendRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,r,s)}sendRpnValue(e,r,n={}){return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnValue(e,r,n)}),this}setRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,r,s)}sendChannelAftertouch(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,r)}),this}sendPitchBend(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBend(e,r)}),this}sendProgramChange(e=0,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendProgramChange(e,r)}),this}sendModulationRange(e,r,n={}){return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendModulationRange(e,r,n)}),this}setModulationRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,r,s)}sendMasterTuning(e,r={}){return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,r)}),this}setMasterTuning(e,r={},n={}){return j.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=r,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,r={}){return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,r)}),this}setTuningProgram(e,r="all",n={}){return j.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=r,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,r={}){return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningBank(e,r)}),this}setTuningBank(e,r="all",n={}){return j.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=r,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,r=0,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelMode(e,r,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},r={}){if(j.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){let n=e;e=r,e.channels=n,e.channels==="all"&&(e.channels=A.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,r)}),this}sendLocalControl(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendLocalControl(e,r)}),this}sendOmniMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendOmniMode(e,r)}),this}sendNrpnValue(e,r,n={}){return n.channels==null&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,r,n)}),this}setNonRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,r,s)}sendRpnIncrement(e,r={}){return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,r)}),this}incrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,r={}){return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,r)}),this}decrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOff(e,r)}),this}stopNote(e,r){return this.sendNoteOff(e,r)}playNote(e,r={},n={}){if(j.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].playNote(e,r)}),this}sendNoteOn(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOn(e,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}};var u0=class{constructor(e=[],r={}){this.destinations=[],this.types=[...Object.keys(A.SYSTEM_MESSAGES),...Object.keys(A.CHANNEL_MESSAGES)],this.channels=A.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),j.validation&&(e.forEach(n=>{if(!(n instanceof Vd))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(n=>{if(!A.SYSTEM_MESSAGES.hasOwnProperty(n)&&!A.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(n=>{if(!A.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(r=>{j.validation&&!(r instanceof Vd)||r.send(e)}))}};var SO=class extends io{constructor(e,r){super(),this._input=e,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){let r=Object.assign({},e);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmessage";let n=e.message.dataBytes[0],s=e.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&s===0)this.notesState[n]=!1,r.type="noteoff",r.note=new so(F.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:0,rawRelease:s}),r.value=F.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[n]=!0,r.note=new so(F.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:s}),r.value=F.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new so(F.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset)),r.value=F.from7bitToFloat(s),r.rawValue=s,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=n;else if(r.type==="controlchange"){r.controller={number:n,name:A.CONTROL_CHANGE_MESSAGES[n].name,description:A.CONTROL_CHANGE_MESSAGES[n].description,position:A.CONTROL_CHANGE_MESSAGES[n].position},r.subtype=r.controller.name||"controller"+n,r.value=F.from7bitToFloat(s),r.rawValue=s;let i=Object.assign({},r);i.type=`${r.type}-controller${n}`,delete i.subtype,this.emit(i.type,i);let o=Object.assign({},r);o.type=`${r.type}-`+A.CONTROL_CHANGE_MESSAGES[n].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=n,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=F.from7bitToFloat(n),r.rawValue=n):r.type==="pitchbend"?(r.value=((s<<7)+n-8192)/8192,r.rawValue=(s<<7)+n):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(e){let r=Object.assign({},e);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(e){let r=e.message.dataBytes[0],n=e.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,r,n,s){e=e==="nrpn"?"nrpn":"rpn";let i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:r,parameterLsb:n,value:F.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(A.REGISTERED_PARAMETERS).find(c=>A.REGISTERED_PARAMETERS[c][0]===r&&A.REGISTERED_PARAMETERS[c][1]===n):i.parameter=(r<<7)+n;let o=A.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);let a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return j.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),F.getChannelModeByNumber(e)}getCcNameByNumber(e){if(j.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return F.getCcNameByNumber(e)}getNoteState(e){e instanceof so&&(e=e.identifier);let r=F.guessNoteNumber(e,j.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}};var f0=class{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=F.getPropertyByValue(A.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=F.getPropertyByValue(A.SYSTEM_MESSAGES,this.command)),this.statusByte===A.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}};var RO=class extends io{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new SO(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let r={timestamp:j.time,target:this,port:this};e.port.connection==="open"?(r.type="opened",this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){let r=new f0(e.data),n={port:this,target:this,message:r,timestamp:e.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",n),r.isSystemMessage?this._parseEvent(n):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(n),this._forwarders.forEach(s=>s.forward(r))}_parseEvent(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=e.data[1]+1,r.value=e.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){j.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=r!=null?[].concat(r):void 0;r=n,n={channels:s}}if(A.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=A.MIDI_CHANNEL_NUMBERS);let s=[];return F.sanitizeChannels(n.channels).forEach(i=>{s.push(this.channels[i].addListener(e,r,n))}),s}else return super.addListener(e,r,n)}addOneTimeListener(e,r,n={}){return n.remaining=1,this.addListener(e,r,n)}on(e,r,n,s){return this.addListener(e,r,n,s)}hasListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}return A.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).every(s=>this.channels[s].hasListener(e,r))):super.hasListener(e,r)}removeListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}if(n.channels===void 0&&(n.channels=A.MIDI_CHANNEL_NUMBERS),e==null)return F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();A.CHANNEL_EVENTS.includes(e)?F.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].removeListener(e,r,n)}):super.removeListener(e,r,n)}addForwarder(e,r={}){let n;return e instanceof u0?n=e:n=new u0(e,r),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(r=>r!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return j.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}};var TO=class extends io{constructor(){super(),this.defaults={note:{attack:F.from7bitToFloat(64),release:F.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},r=!1){if(F.isNode)try{window.navigator}catch{let a=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,a)}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:r}),r&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();let n={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n]._midiInput&&this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n]._midiInput&&this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n]._midiOutput&&this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n]._midiOutput&&this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),F.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?F.getNoteDetails(F.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),F.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),F.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),F.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),F.buildNoteArray(e,r)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),F.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(r=>e.push(r.destroy())),this.outputs.forEach(r=>e.push(r.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let r={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?r.port=this.getOutputById(e.port.id):e.port.type==="input"&&(r.port=this.getInputById(e.port.id)),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?r.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(r.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){let n=this._inputs[r];Array.from(this.interface.inputs.values()).find(i=>i===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(r,1))}let e=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(n=>n._midiInput===r)){let n=this._disconnectedInputs.find(s=>s._midiInput===r);n||(n=new RO(r)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){let n=this._outputs[r];Array.from(this.interface.outputs.values()).find(i=>i===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(r,1))}let e=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(n=>n._midiOutput===r)){let n=this._disconnectedOutputs.find(s=>s._midiOutput===r);n||(n=new Vd(r)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),F.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),F.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),A.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),A.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),A.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),A.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),A.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}},j=new TO;j.constructor=null;var zd=require("obsidian"),Hd=class{isEnabled=!1;onMidiMessageReceived;constructor(e){this.onMidiMessageReceived=e}async enable(){if(!this.isEnabled)try{await j.enable(),this.isEnabled=!0,new zd.Notice("Web midi enabled")}catch(e){console.error("Web midi could not be enabled",e),new zd.Notice("Failed to enable web midi")}}getInputs(){return this.isEnabled?j.inputs.map(e=>e.name):[]}getOutputs(){return this.isEnabled?j.outputs.map(e=>e.name):[]}connectDevice(e){if(!this.isEnabled){new zd.Notice("Midi not enabled. Cannot connect.");return}let r=j.getInputByName(e.inputName);r?(r.removeListener("midimessage"),new zd.Notice(`Listening to MIDI: ${e.name}`),r.addListener("midimessage",n=>{let s=n.message,i={type:n.message.type,data:Array.from(n.message.data),channel:n.message.channel,command:n.message.command,note:s.note?s.note.number:null,velocity:s.velocity,value:s.value,controller:s.controller?s.controller.number:null};this.onMidiMessageReceived&&this.onMidiMessageReceived(e.name,i)})):console.warn(`MIDI Input '${e.inputName}' not found.`)}disconnectDevice(e){if(!this.isEnabled)return;let r=j.getInputByName(e.inputName);r&&(r.removeListener("midimessage"),console.warn(`Disconnected MIDI Input: ${e.inputName}`))}disconnectAll(e){e.forEach(r=>this.disconnectDevice(r))}sendMidiMessage(e,r,n){if(!this.isEnabled)return;let s=r.find(c=>c.name===e);if(!s){console.warn(`MIDI Device alias '${e}' not found in settings.`);return}let i=j.getOutputByName(s.outputName);if(!i){console.warn(`MIDI Output '${s.outputName}' not found.`);return}let o=n.type||"noteon",a=n.channel||1;try{switch(o.toLowerCase()){case"noteon":n.note!==void 0&&n.note!==null&&i.playNote(n.note,{channels:a,attack:n.velocity||.75});break;case"noteoff":n.note!==void 0&&n.note!==null&&i.stopNote(n.note,{channels:a});break;case"controlchange":case"cc":n.controller!==void 0&&n.controller!==null&&n.value!==void 0&&i.sendControlChange(n.controller,n.value,{channels:a});break;default:console.warn("Unknown MIDI message type requested:",o)}}catch(c){console.error("Error sending MIDI message",c)}}};var $6=Or(u5(),1);var y0=Or(d5(),1);var ZO=Or(w6(),1),eP=Or(S6(),1),tP=Or(T6(),1);function oxe(t,e,r){let n=tP.default.stringify((0,eP.default)(r+t));return tP.default.stringify((0,eP.default)(n+e))}var th=(0,$6.default)("obs-websocket-js"),Ol=class extends Error{constructor(t,e){super(e),this.code=t}},O6=class k0 extends y0.default{static requestCounter=1;static generateMessageId(){return String(k0.requestCounter++)}_identified=!1;internalListeners=new y0.default;socket;get identified(){return this._identified}async connect(e="ws://127.0.0.1:4455",r,n={}){this.socket&&await this.disconnect();try{let s=this.internalEventPromise("ConnectionClosed"),i=this.internalEventPromise("ConnectionError");return await Promise.race([(async()=>{let o=await this.createConnection(e);return this.emit("Hello",o),this.identify(o,r,n)})(),new Promise((o,a)=>{i.then(c=>{c.message&&a(c)}),s.then(c=>{a(c)})})])}catch(s){throw await this.disconnect(),s}}async disconnect(){if(!this.socket||this.socket.readyState===ZO.default.CLOSED)return;let e=this.internalEventPromise("ConnectionClosed");this.socket.close(),await e}async reidentify(e){let r=this.internalEventPromise("op:2");return await this.message(3,e),r}async call(e,r){let n=k0.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(6,{requestId:n,requestType:e,requestData:r});let{requestStatus:i,responseData:o}=await s;if(!i.result)throw new Ol(i.code,i.comment);return o}async callBatch(e,r={}){let n=k0.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(8,{requestId:n,requests:e,...r});let{results:i}=await s;return i}cleanup(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(e){var r;let n=this.internalEventPromise("ConnectionOpened"),s=this.internalEventPromise("op:0");this.socket=new ZO.default(e,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await n;let i=(r=this.socket)==null?void 0:r.protocol;if(!i)throw new Ol(-1,"Server sent no subprotocol");if(i!==this.protocol)throw new Ol(-1,"Server sent an invalid subprotocol");return s}async identify({authentication:e,rpcVersion:r,...n},s,i={}){let o={rpcVersion:r,...i};e&&s&&(o.authentication=oxe(e.salt,e.challenge,s));let a=this.internalEventPromise("op:2");await this.message(1,o);let c=await a;return this._identified=!0,this.emit("Identified",c),{rpcVersion:r,...n,...c}}async message(e,r){if(!this.socket)throw new Error("Not connected");if(!this.identified&&e!==1)throw new Error("Socket not identified");let n=await this.encodeMessage({op:e,d:r});this.socket.send(n)}async internalEventPromise(e){return new Promise(r=>{this.internalListeners.once(e,r)})}onOpen(e){th("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)}async onMessage(e){try{let{op:r,d:n}=await this.decodeMessage(e.data);if(th("socket.message: %d %j",r,n),r===void 0||n===void 0)return;switch(r){case 5:{let{eventType:s,eventData:i}=n;this.emit(s,i);return}case 7:case 9:{let{requestId:s}=n;this.internalListeners.emit(`res:${s}`,n);return}default:this.internalListeners.emit(`op:${r}`,n)}}catch(r){th("error handling message: %o",r)}}onError(e){th("socket.error: %o",e);let r=new Ol(-1,e.message);this.emit("ConnectionError",r),this.internalListeners.emit("ConnectionError",r)}onClose(e){th("socket.close: %s (%d)",e.reason,e.code);let r=new Ol(e.code,e.reason);this.emit("ConnectionClosed",r),this.internalListeners.emit("ConnectionClosed",r),this.cleanup()}};typeof exports<"u"&&Object.defineProperty(exports,"__esModule",{value:!0});var J0=Or(J6(),1),Y6=class extends O6{protocol="obswebsocket.msgpack";async encodeMessage(t){return(0,J0.encode)(t)}async decodeMessage(t){return typeof Blob<"u"&&t instanceof Blob&&(t=await t.arrayBuffer()),(0,J0.decode)(t)}};var X6=require("obsidian"),Q6=t=>({id:"connect-to-obs-websocket",name:"Connect to the OBS Websocket Server",callback:()=>{new X6.Notice("Connecting to the obs websocket server");let e={IP:t.settings.websocketIP_Text,PORT:t.settings.websocketPort_Text,PW:t.settings.websocketPW_Text};t.obsWSSconnect(e)}});var ah=require("obsidian"),e8=Or(require("node:path"),1),t8=require("child_process"),r8=require("util"),Z6=(0,r8.promisify)(t8.exec),n8=t=>({id:"open-obs",name:"Open OBS",callback:()=>{new ah.Notice("Trying to launch obs");let e="",r=t.settings;if(ah.Platform.isMacOS&&(e=`open -n -a "${r.obsAppName_Text}"`,e+=` --args --collection "${r.obsCollection_Text}"`,e+=` --remote-debugging-port=${r.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${r.obsDebugPort_Text}`,e+=` --websocket_port "${r.websocketPort_Text}"`,e+=` --websocket_password "${r.websocketPW_Text}"`,e+=" --multi",Z6(e)),ah.Platform.isWin){let n=`${r.obsAppPath_Text}${r.obsAppName_Text}`,s=e8.default.dirname(n);process.chdir(s),e=`${r.obsAppName_Text}`,e+=` --args --collection "${r.obsCollection_Text}"`,e+=` --remote-debugging-port=${r.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${r.obsDebugPort_Text}`,e+=` --websocket_port "${r.websocketPort_Text}"`,e+=` --websocket_password "${r.websocketPW_Text}"`,e+=" --multi",Z6(e)}}});var s8=t=>({id:"get-obs-scene-tags",name:"Get OBS tags",callback:async()=>{await t.getObsTags()}});var i8=t=>({id:"open-slide-studio-webview",name:"Open Slides Studio Webview",callback:async()=>{await t.openWebView()}});var o8=t=>({id:"set-slides-studio-obs-receiver",name:"Set the URL for slides studio receiver OBS browser source",callback:()=>{let r=`http://localhost:${t.settings.serverPort}/${t.manifest.dir}/slides_studio/slides_studio_OBS_browser_source.html`;t.obs.call("SetInputSettings",{inputName:"slides",inputSettings:{url:r}}).catch(n=>{console.error("Failed set slides studio receiver: ",n)})}}),a8=t=>({id:"update-browsers-url",name:"Update slides studio OBS browsers URL",callback:async()=>{let e=t.settings.serverPort;try{let r=await t.obs.call("GetInputList",{inputKind:"browser_source"});for(let n of r.inputs)try{let s=await t.obs.call("GetInputSettings",{inputUuid:n.inputUuid});if(s.inputSettings.css.includes("--slides-studio-refresh")){let i=new URL(s.inputSettings.url),o=`http://localhost:${e}${i.pathname}`;await t.obs.call("SetInputSettings",{inputUuid:n.inputUuid,inputSettings:{url:o}})}}catch(s){console.error("Error updating specific browser source:",s)}}catch(r){console.error("Failed to get OBS input list:",r)}}}),c8=t=>({id:"refresh-obs-browsers",name:"Refresh all OBS browser sources",callback:async()=>{try{let e=await t.obs.call("GetInputList",{inputKind:"browser_source"});for(let r of e.inputs)await t.obs.call("PressInputPropertiesButton",{inputUuid:r.inputUuid,propertyName:"refreshnocache"})}catch(e){console.error("Failed to refresh OBS browsers:",e)}}});var l8=t=>({id:"connect-all-osc-devices",name:"Connect to all osc devices",callback:()=>{t.settings.oscDevices.forEach(e=>{e.name&&e.ip&&e.inPort&&e.outPort&&t.oscManager.connectDevice(e)})}}),u8=t=>({id:"connect-all-midi-devices",name:"Connect to all midi devices",callback:()=>{t.settings.midiDevices.forEach(e=>{t.midiManager.connectDevice(e)})}});var Yxe={websocketIP_Text:"localhost",websocketPort_Text:"4455",websocketPW_Text:"password",slidesPort_Text:"5000",slide_tags:[],scene_tags:[],camera_tags:[],camera_shape_tags:[],user_tags:[],newTag:"",obsAppName_Text:"OBS",obsCollection_Text:"Untitled",obsDebugPort_Text:"9222",obsAppPath_Text:"",serverPort:"57000",serverEnabled:!1,cablesFolder:"",cablesFiles:[],settingsFolder:"",settingsFile:"slides-studio-settings.md",oscDevices:[],midiDevices:[]},Y0=class extends Jn.Plugin{settings;oscManager;midiManager;serverManager=null;obs;isObsConnected=!1;async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},Yxe,e)}async saveSettings(){await this.saveData(this.settings),await this.saveWebsocketDetailsToFile()}async saveWebsocketDetailsToFile(){let e=this.manifest.dir,r="obs_webSocket_details",n="websocketDetails.js",s=`${e}/${r}`,i=`${s}/${n}`;i=Jn.Platform.isWin?i.replace(/\//g,"\\"):i;try{let o=this.app.vault.adapter;await o.exists(s)||await this.app.vault.createFolder(s);let a=parseInt(this.settings.websocketPort_Text)||4455,c=`let websocketDetails = {"IP": "${this.settings.websocketIP_Text}", "PW": "${this.settings.websocketPW_Text}", "PORT": ${a}}`;await o.write(i,c)}catch(o){console.error("Error writing websocket details file:",o)}}async onload(){if(await this.loadSettings(),this.settings.cablesFiles&&this.settings.cablesFiles.length>0){let e=this.app.vault.getName();this.settings.cablesFiles.forEach(r=>{let n=encodeURIComponent(e),s=encodeURIComponent(r),i=`obsidian://open?vault=${n}&file=${s}`;window.open(i)})}if(this.obs=new Y6,this.registerView(Ud,e=>new a0(e,this)),this.addRibbonIcon("aperture","Open slides studio view",()=>{this.openView()}),this.addSettingTab(new o0(this.app,this)),this.addCommand(Q6(this)),this.addCommand(n8(this)),this.addCommand(s8(this)),this.addCommand(i8(this)),this.addCommand(o8(this)),this.addCommand(a8(this)),this.addCommand(c8(this)),this.addCommand(l8(this)),this.addCommand(u8(this)),new Jn.Notice("Enabled slides studio plugin"),this.settings.serverEnabled){let e=parseInt(this.settings.serverPort)||57e3;this.serverManager=new Ra(this.app,this,e),this.app.workspace.onLayoutReady(()=>{this.serverManager?.start()})}this.oscManager=new Bd((e,r)=>{let n={deviceName:e,message:r};this.serverManager?.broadcastOscMessage(e,r)}),this.midiManager=new Hd((e,r)=>{this.serverManager?.broadcastMidiMessage(e,r)}),await this.midiManager.enable(),this.setupObsEventListeners()}setupObsEventListeners(){this.obs.on("ConnectionOpened",()=>{console.debug("Connection to OBS WebSocket successfully opened")}),this.obs.on("ConnectionClosed",()=>{this.isObsConnected=!1}),this.obs.on("Identified",()=>{this.isObsConnected=!0;let e={IP:this.settings.websocketIP_Text,PORT:this.settings.websocketPort_Text,PW:this.settings.websocketPW_Text};this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:"ws-details",event_data:{wssDetails:e}}}),["slides-studio:get-obs-scene-tags","slides-studio:update-browsers-url","slides-studio:set-slides-studio-obs-receiver"].forEach(n=>this.app.commands.executeCommandById(n))}),this.obs.on("CustomEvent",e=>{let r=e;if(r.event_name==="OSC-out"&&r.address&&r.osc_name){let n=new to(r.address);[r.arg1,r.arg2,r.arg3,r.arg4,r.arg5,r.arg6,r.arg7].forEach(s=>{s!==void 0&&n.append(s)}),this.oscManager.sendMessage(r.osc_name,n)}if(r.event_name==="MIDI-out"&&r.midi_name){let n={type:r.arg1,channel:r.arg2,note:r.arg3,velocity:r.arg4,value:r.arg4,controller:r.arg3};this.midiManager.sendMidiMessage(r.midi_name,this.settings.midiDevices,n)}})}async getObsTags(){new Jn.Notice("Getting obs tags"),this.settings.scene_tags=[],this.settings.camera_tags=[],this.settings.camera_shape_tags=[],this.settings.slide_tags=[];try{let e=await this.obs.call("GetSceneList");e.scenes.forEach(n=>{n.sceneName.startsWith("Scene")&&(this.settings.scene_tags.includes(n.sceneName)||this.settings.scene_tags.push(n.sceneName))});let r=[{scene:"Camera Position",target:this.settings.camera_tags},{scene:"Slide Position",target:this.settings.slide_tags},{scene:"Camera Shape",target:this.settings.camera_shape_tags}];for(let n of r)e.scenes.find(s=>s.sceneName===n.scene)&&(await this.obs.call("GetSceneItemList",{sceneName:n.scene})).sceneItems.forEach(i=>{n.target.includes(i.sourceName)||n.target.push(i.sourceName)});await this.saveData(this.settings)}catch(e){console.error("Error fetching OBS tags",e),new Jn.Notice("Failed to fetch obs tags. Is obs connected?")}}async obsWSSconnect(e){try{await this.disconnect(),await this.obs.connect(`ws://${e.IP}:${e.PORT}`,e.PW,{rpcVersion:1}),new Jn.Notice("Connected to obs websocket server")}catch(r){new Jn.Notice("Failed to connect to obs websocket server"),console.error(r)}}async disconnect(){try{this.isObsConnected&&(await this.obs.disconnect(),this.isObsConnected=!1)}catch(e){console.error("Disconnect error",e)}}sendToOBS(e,r){let n=JSON.stringify(e.message);this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:r,event_data:{deviceName:e.deviceName,webSocketMessage:n}}})}async openView(){let{workspace:e}=this.app,r=null,n=e.getLeavesOfType(Ud);n.length>0?r=n[0]:(r=e.getRightLeaf(!1),r&&await r.setViewState({type:Ud,active:!0})),r&&e.revealLeaf(r)}async openWebView(){let{workspace:e}=this.app,r=e.getLeaf("tab"),s=`http://localhost:${this.settings.serverPort}/${this.manifest.dir}/slides_studio/`;await r.setViewState({type:"webviewer",state:{url:s,navigate:!0},active:!0}),e.revealLeaf(r)}onunload(){new Jn.Notice("Disabled slides studio plugin"),this.serverManager&&this.serverManager.stop(),this.oscManager&&this.oscManager.disconnectAll(),this.midiManager&&this.midiManager.disconnectAll(this.settings.midiDevices),this.obs&&this.obs.disconnect()}};0&&(module.exports={MidiManager,OscManager,ServerManager});
/*! Bundled license information:

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

@fastify/send/lib/containsDotFile.js:
@fastify/send/lib/contentRange.js:
@fastify/send/lib/createHtmlDocument.js:
@fastify/send/index.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/parseBytesRange.js:
  (*!
   * Based on range-parser
   *
   * Copyright(c) 2012-2014 TJ Holowaychuk
   * Copyright(c) 2015-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

depd/index.js:
  (*!
   * depd
   * Copyright(c) 2014-2018 Douglas Christopher Wilson
   * MIT Licensed
   *)

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toidentifier/index.js:
  (*!
   * toidentifier
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

http-errors/index.js:
  (*!
   * http-errors
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

content-disposition/index.js:
  (*!
   * content-disposition
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

webmidi/dist/esm/webmidi.esm.js:
  (**
   * The `Enumerations` class contains enumerations and arrays of elements used throughout the
   * library. All its properties are static and should be referenced using the class name. For
   * example: `Enumerations.CHANNEL_MESSAGES`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
   *
   * `Note` objects can be played back on a single channel by calling
   * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
   * output, by calling [`Output.playNote()`]{@link Output#playNote}.
   *
   * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
   * These can be changed by passing in the appropriate option. It is also possible to set a
   * system-wide default for attack and release velocities by using the
   * [`WebMidi.defaults`](WebMidi#defaults) property.
   *
   * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
   * [`rawRelease`](#rawRelease) to both get and set the values.
   *
   * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
   * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
   * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
   * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
   * [`Output.stopNote()`]{@link Output#stopNote} or similar.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Utilities` class contains general-purpose utility methods. All methods are static and
   * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
   * provided by an [`Output`](Output) port which, itself, is made available by a device. The
   * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `OutputChannel` objects can be found inside the parent output's
   * [`channels`]{@link Output#channels} property.
   *
   * @param {Output} output The [`Output`](Output) this channel belongs to.
   * @param {number} number The MIDI channel number (`1` - `16`).
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
   * A port is made available by a MIDI device. A MIDI device can advertise several input and output
   * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
   * property.
   *
   * The `Output` object is automatically instantiated by the library according to the host's MIDI
   * subsystem and should not be directly instantiated.
   *
   * You can access all available `Output` objects by referring to the
   * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
   * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
   * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
   *
   * @fires Output#opened
   * @fires Output#disconnected
   * @fires Output#closed
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
   * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
   * to all the outputs listed in its [`destinations`](#destinations) property.
   *
   * If specific channels or message types have been defined in the [`channels`](#channels) or
   * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
   *
   * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
   * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
   * device. This object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
   * property.
   *
   * @fires InputChannel#midimessage
   * @fires InputChannel#unknownmessage
   *
   * @fires InputChannel#noteoff
   * @fires InputChannel#noteon
   * @fires InputChannel#keyaftertouch
   * @fires InputChannel#programchange
   * @fires InputChannel#channelaftertouch
   * @fires InputChannel#pitchbend
   *
   * @fires InputChannel#allnotesoff
   * @fires InputChannel#allsoundoff
   * @fires InputChannel#localcontrol
   * @fires InputChannel#monomode
   * @fires InputChannel#omnimode
   * @fires InputChannel#resetallcontrollers
   *
   * @fires InputChannel#event:nrpn
   * @fires InputChannel#event:nrpn-dataentrycoarse
   * @fires InputChannel#event:nrpn-dataentryfine
   * @fires InputChannel#event:nrpn-dataincrement
   * @fires InputChannel#event:nrpn-datadecrement
   * @fires InputChannel#event:rpn
   * @fires InputChannel#event:rpn-dataentrycoarse
   * @fires InputChannel#event:rpn-dataentryfine
   * @fires InputChannel#event:rpn-dataincrement
   * @fires InputChannel#event:rpn-datadecrement
   *
   * @fires InputChannel#controlchange
   * @fires InputChannel#event:controlchange-controllerxxx
   * @fires InputChannel#event:controlchange-bankselectcoarse
   * @fires InputChannel#event:controlchange-modulationwheelcoarse
   * @fires InputChannel#event:controlchange-breathcontrollercoarse
   * @fires InputChannel#event:controlchange-footcontrollercoarse
   * @fires InputChannel#event:controlchange-portamentotimecoarse
   * @fires InputChannel#event:controlchange-dataentrycoarse
   * @fires InputChannel#event:controlchange-volumecoarse
   * @fires InputChannel#event:controlchange-balancecoarse
   * @fires InputChannel#event:controlchange-pancoarse
   * @fires InputChannel#event:controlchange-expressioncoarse
   * @fires InputChannel#event:controlchange-effectcontrol1coarse
   * @fires InputChannel#event:controlchange-effectcontrol2coarse
   * @fires InputChannel#event:controlchange-generalpurposecontroller1
   * @fires InputChannel#event:controlchange-generalpurposecontroller2
   * @fires InputChannel#event:controlchange-generalpurposecontroller3
   * @fires InputChannel#event:controlchange-generalpurposecontroller4
   * @fires InputChannel#event:controlchange-bankselectfine
   * @fires InputChannel#event:controlchange-modulationwheelfine
   * @fires InputChannel#event:controlchange-breathcontrollerfine
   * @fires InputChannel#event:controlchange-footcontrollerfine
   * @fires InputChannel#event:controlchange-portamentotimefine
   * @fires InputChannel#event:controlchange-dataentryfine
   * @fires InputChannel#event:controlchange-channelvolumefine
   * @fires InputChannel#event:controlchange-balancefine
   * @fires InputChannel#event:controlchange-panfine
   * @fires InputChannel#event:controlchange-expressionfine
   * @fires InputChannel#event:controlchange-effectcontrol1fine
   * @fires InputChannel#event:controlchange-effectcontrol2fine
   * @fires InputChannel#event:controlchange-damperpedal
   * @fires InputChannel#event:controlchange-portamento
   * @fires InputChannel#event:controlchange-sostenuto
   * @fires InputChannel#event:controlchange-softpedal
   * @fires InputChannel#event:controlchange-legatopedal
   * @fires InputChannel#event:controlchange-hold2
   * @fires InputChannel#event:controlchange-soundvariation
   * @fires InputChannel#event:controlchange-resonance
   * @fires InputChannel#event:controlchange-releasetime
   * @fires InputChannel#event:controlchange-attacktime
   * @fires InputChannel#event:controlchange-brightness
   * @fires InputChannel#event:controlchange-decaytime
   * @fires InputChannel#event:controlchange-vibratorate
   * @fires InputChannel#event:controlchange-vibratodepth
   * @fires InputChannel#event:controlchange-vibratodelay
   * @fires InputChannel#event:controlchange-generalpurposecontroller5
   * @fires InputChannel#event:controlchange-generalpurposecontroller6
   * @fires InputChannel#event:controlchange-generalpurposecontroller7
   * @fires InputChannel#event:controlchange-generalpurposecontroller8
   * @fires InputChannel#event:controlchange-portamentocontrol
   * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
   * @fires InputChannel#event:controlchange-effect1depth
   * @fires InputChannel#event:controlchange-effect2depth
   * @fires InputChannel#event:controlchange-effect3depth
   * @fires InputChannel#event:controlchange-effect4depth
   * @fires InputChannel#event:controlchange-effect5depth
   * @fires InputChannel#event:controlchange-dataincrement
   * @fires InputChannel#event:controlchange-datadecrement
   * @fires InputChannel#event:controlchange-nonregisteredparameterfine
   * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
   * @fires InputChannel#event:controlchange-registeredparameterfine
   * @fires InputChannel#event:controlchange-registeredparametercoarse
   * @fires InputChannel#event:controlchange-allsoundoff
   * @fires InputChannel#event:controlchange-resetallcontrollers
   * @fires InputChannel#event:controlchange-localcontrol
   * @fires InputChannel#event:controlchange-allnotesoff
   * @fires InputChannel#event:controlchange-omnimodeoff
   * @fires InputChannel#event:controlchange-omnimodeon
   * @fires InputChannel#event:controlchange-monomodeon
   * @fires InputChannel#event:controlchange-polymodeon
   * @fires InputChannel#event:
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Message` class represents a single MIDI message. It has several properties that make it
   * easy to make sense of the binary data it contains.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Input` class represents a single MIDI input port. This object is automatically instantiated
   * by the library according to the host's MIDI subsystem and does not need to be directly
   * instantiated. Instead, you can access all `Input` objects by referring to the
   * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
   * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
   * [`WebMidi.getInputById()`](WebMidi#getInputById).
   *
   * Note that a single MIDI device may expose several inputs and/or outputs.
   *
   * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
   * (such as [`noteon`](InputChannel#event:noteon) or
   * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
   * object does that. However, you can still use the
   * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
   * [`InputChannel`](InputChannel) objects at once.
   *
   * @fires Input#opened
   * @fires Input#disconnected
   * @fires Input#closed
   * @fires Input#midimessage
   *
   * @fires Input#sysex
   * @fires Input#timecode
   * @fires Input#songposition
   * @fires Input#songselect
   * @fires Input#tunerequest
   * @fires Input#clock
   * @fires Input#start
   * @fires Input#continue
   * @fires Input#stop
   * @fires Input#activesensing
   * @fires Input#reset
   *
   * @fires Input#unknownmidimessage
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
   * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
   *
   * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
   * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
   * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
   * module) version, you get an already-instantiated object when you import the module.
   *
   * @fires WebMidi#connected
   * @fires WebMidi#disabled
   * @fires WebMidi#disconnected
   * @fires WebMidi#enabled
   * @fires WebMidi#error
   * @fires WebMidi#midiaccessgranted
   * @fires WebMidi#portschanged
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
*/
